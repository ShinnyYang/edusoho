(window.webpackJsonp=window.webpackJsonp||[]).push([["exerciseAnalysis~exerciseDo~homeworkAnalysis~homeworkDo~testpaperAnalysis~testpaperDo"],{1569:function(t,e,s){},"1c4c":function(t,e,s){"use strict";var n=s("9b43"),a=s("5ca1"),i=s("4bf8"),r=s("1fa8"),o=s("33a4"),c=s("9def"),l=s("f1ae"),u=s("27ee");a(a.S+a.F*!s("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,s,a,d,h=i(t),p="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,w=void 0!==f,g=0,v=u(h);if(w&&(f=n(f,m>2?arguments[2]:void 0,2)),void 0==v||p==Array&&o(v))for(s=new p(e=c(h.length));e>g;g++)l(s,g,w?f(h[g],g):h[g]);else for(d=v.call(h),s=new p;!(a=d.next()).done;g++)l(s,g,w?r(d,f,[a.value,g],!0):a.value);return s.length=g,s}})},"32e6":function(t,e){function s(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function n(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}t.exports=function(t,e,a){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("script");"function"==typeof e&&(a=e,e={}),e=e||{},a=a||function(){},r.type=e.type||"text/javascript",r.charset=e.charset||"utf8",r.async=!("async"in e)||!!e.async,r.src=t,e.attrs&&function(t,e){for(var s in e)t.setAttribute(s,e[s])}(r,e.attrs),e.text&&(r.text=""+e.text),("onload"in r?s:n)(r,a),r.onload||s(r,a),i.appendChild(r)}},"483d":function(t,e,s){},4868:function(t,e,s){},"4c53":function(t,e,s){"use strict";s("1569")},"4e4f":function(t,e,s){"use strict";s("5a4f")},"4f7f":function(t,e,s){"use strict";var n=s("c26b"),a=s("b39a");t.exports=s("e0b8")("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(a(this,"Set"),t=0===t?0:t,t)}},n)},"5a4f":function(t,e,s){},"67ab":function(t,e,s){var n=s("ca5a")("meta"),a=s("d3f4"),i=s("69a8"),r=s("86cc").f,o=0,c=Object.isExtensible||function(){return!0},l=!s("79e5")((function(){return c(Object.preventExtensions({}))})),u=function(t){r(t,n,{value:{i:"O"+ ++o,w:{}}})},d=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!i(t,n)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return l&&d.NEED&&c(t)&&!i(t,n)&&u(t),t}}},"7c97":function(t,e,s){"use strict";var n={props:{type:{type:String,default:""},isShow:{type:Boolean,default:!1},reportType:{type:String,default:""}},methods:{onKeepLearning:function(t){this.$emit("outFocusMask",t)}}},a=s("2877"),i=Object(a.a)(n,(function(){var t=this,e=t._self._c;return t.isShow?e("div",{staticClass:"out-focus-mask"},[e("div",{staticClass:"report-go-back",on:{click:function(e){return t.$router.go(-1)}}},[e("van-icon",{attrs:{name:"arrow-left",size:"25",color:"#43bc60"}})],1),"kick_previous"===t.type?[e("div",{staticClass:"content"},[t._m(0),e("van-button",{attrs:{color:"#43bc60",size:"small"},on:{click:function(e){return t.onKeepLearning("kick_previous")}}},[t._v("\n        继续学习\n      ")])],1)]:t._e(),"reject_current"===t.type?[t._m(1)]:t._e()],2):t._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"tips"},[t("p",{staticClass:"kick-each-other"},[this._v("请勿同时多开任务学习")]),t("p",{staticClass:"kick-each-other"},[this._v("不要一心多用哦！")])])},function(){var t=this._self._c;return t("div",{staticClass:"content"},[t("div",{staticClass:"tips"},[t("p",{staticClass:"kick-each-other"},[this._v("请勿同时多开任务学习")]),t("p",{staticClass:"kick-each-other"},[this._v("不要一心多用哦！")])])])}],!1,null,null,null);e.a=i.exports},"8ae7":function(t,e,s){"use strict";s("a481");var n=s("75fc");s("4f7f"),s("5df3"),s("1c4c"),s("ac6a"),s("6c7b"),s("c5f6"),e.a={methods:{sixType:function(t,e,s){if("essay"!==t&&"fill"!==t){var n=s?s[e.id]:[];return{item:e,answer:n=e.testResult&&e.testResult.answer?e.testResult.answer.map((function(t){return Number(t)})):n}}if("essay"===t){var a=s?s[e.id]:[""];return{item:e,answer:a=e.testResult&&e.testResult.answer?e.testResult.answer:a}}if("fill"===t){var i=this.fillReplce(e.stem,0),r=i.stem,o=i.index;e.stem=r,e.fillnum=o;var c=s?s[e.id]:new Array(o).fill("");return{item:e,answer:c=e.testResult&&e.testResult.answer?e.testResult.answer:c}}return""},analysisSixType:function(t,e){var s=[];if("fill"!==t&&"essay"!==t&&(e.answer.forEach((function(t,s){e.answer[s]=Number(t)})),s=e.answer,e.testResult&&(e.testResult.answer.forEach((function(t,s){e.testResult.answer[s]=Number(t)})),s=Array.from(new Set([].concat(Object(n.a)(e.answer),Object(n.a)(e.testResult.answer)))))),"essay"===t&&(s=e.testResult?e.testResult.answer:[]),"fill"===t){var a=this.fillReplce(e.stem,0),i=a.stem,r=a.index;e.stem=i,e.fillnum=r,s=e.testResult?e.testResult.answer:new Array(r).fill("")}return{item:e,answer:s}},fillReplce:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=/\[\[.+?\]\]/;null!==s.exec(t);)t=t.replace(s,(function(){return'<span class=""> ('.concat(e+=1,") ____</span>")}));return{stem:t,index:e}}}}},"906b":function(t,e,s){"use strict";s("4868")},a556:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s("e7e5");var n=s("d399"),a=s("6647"),i=function(t){switch(t){case"course":Object(n.a)(a.a.t("goods.courseClosedToast"));break;case"classroom":Object(n.a)(a.a.t("goods.classroomClosedToast"));break;case"exercise":Object(n.a)(a.a.t("goods.exerciseClosedToast"))}}},b39a:function(t,e,s){var n=s("d3f4");t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},bde0:function(t,e,s){"use strict";s("dadc")},bffb:function(t,e,s){"use strict";s("483d")},c26b:function(t,e,s){"use strict";var n=s("86cc").f,a=s("2aeb"),i=s("dcbc"),r=s("9b43"),o=s("f605"),c=s("4a59"),l=s("01f9"),u=s("d53b"),d=s("7a56"),h=s("9e1e"),p=s("67ab").fastKey,m=s("b39a"),f=h?"_s":"size",w=function(t,e){var s,n=p(e);if("F"!==n)return t._i[n];for(s=t._f;s;s=s.n)if(s.k==e)return s};t.exports={getConstructor:function(t,e,s,l){var u=t((function(t,n){o(t,u,e,"_i"),t._t=e,t._i=a(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=n&&c(n,s,t[l],t)}));return i(u.prototype,{clear:function(){for(var t=m(this,e),s=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete s[n.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var s=m(this,e),n=w(s,t);if(n){var a=n.n,i=n.p;delete s._i[n.i],n.r=!0,i&&(i.n=a),a&&(a.p=i),s._f==n&&(s._f=a),s._l==n&&(s._l=i),s[f]--}return!!n},forEach:function(t){m(this,e);for(var s,n=r(t,arguments.length>1?arguments[1]:void 0,3);s=s?s.n:this._f;)for(n(s.v,s.k,this);s&&s.r;)s=s.p},has:function(t){return!!w(m(this,e),t)}}),h&&n(u.prototype,"size",{get:function(){return m(this,e)[f]}}),u},def:function(t,e,s){var n,a,i=w(t,e);return i?i.v=s:(t._l=i={i:a=p(e,!0),k:e,v:s,p:n=t._l,n:void 0,r:!1},t._f||(t._f=i),n&&(n.n=i),t[f]++,"F"!==a&&(t._i[a]=i)),t},getEntry:w,setStrong:function(t,e,s){l(t,e,(function(t,s){this._t=m(t,e),this._k=s,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))}),s?"entries":"values",!s,!0),d(e)}}},c8a5:function(t,e,s){"use strict";s("6762"),s("2fdb");var n=s("3ce7"),a=s("faa5");s("a556"),e.a={data:function(){return{reportIntervalTime:null,reportLearnTime:null,reportFinishCondition:null,reportData:{courseId:null,taskId:null},reportResult:null,isFinish:!1,reportType:null,learnTime:0,isShowOutFocusMask:!1,outFocusMaskType:"",sign:"",record:{},absorbed:0,learnedTime:0,playKey:""}},beforeRouteLeave:function(t,e,s){this.sign.length>0&&localStorage.setItem("flowSign",this.sign),s()},beforeDestroy:function(){this.clearReportIntervalTime(),window.removeEventListener("beforeunload",this.onbeforeunloadFlowSign),this.toggleReportMaskHidden("remove")},methods:{initReportData:function(t,e,s,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.clearReportIntervalTime(),this.reportData={courseId:t,taskId:e},this.reportType=s,this.playKey=n,this.isFinish=!1,this.reportIntervalTime=null,this.reportLearnTime=null,this.reportResult=null,this.learnTime=0,this.reportFinishCondition=null,a&&this.initReportEvent(),this.onbeforeunload()},initReportEvent:function(){this.reprtData(),this.intervalReportData(),this.intervalReportLearnTime()},getCourseData:function(t,e){var s=this,a={courseId:t,taskId:e};return new Promise((function(t,e){n.a.getCourseData({query:a}).then((function(e){s.reportFinishCondition=e.activity.finishCondition,t(e)})).catch((function(t){e(t)}))}))},reprtData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventName:"doing",ContinuousReport:!1,watchTime:null};if(null!==this.reportData.courseId&&null!==this.reportData.taskId&&(!this.isFinish||t.ContinuousReport))if(""===this.sign){var e={client:"h5"},s=localStorage.getItem("flowSign");s&&(e.lastSign=s,localStorage.removeItem("flowSign")),this.start(t,e)}else this.reportTaskEvent(t)},start:function(t,e){var s=this;n.a.reportTaskEvent({query:{courseId:this.reportData.courseId,taskId:this.reportData.taskId,eventName:"start"},data:e}).then((function(e){if(s.handleReportResult(e),e.learnControl.allowLearn)s.sign=e.record.flowSign,s.record=e.record,s.reportTaskEvent(t);else{var n=e.learnControl.denyReason;s.reportJudge(n)}}))},reportTaskEvent:function(t){var e=this;if(0!==this.sign.length){var s={client:"h5",sign:this.sign,duration:this.learnTime,status:this.absorbed,lastLearnTime:parseInt(localStorage.getItem(this.playKey))};if(t.reActive&&(s.reActive=t.reActive),this.sourceType&&"video"===this.sourceType){var a=parseInt(this.nowWatchTime-this.lastWatchTime);this.lastWatchTime=this.nowWatchTime;var i={watchData:{duration:a}};s=Object.assign(s,i)}this.learnTime=0,n.a.reportTaskEvent({query:{courseId:this.reportData.courseId,taskId:this.reportData.taskId,eventName:t.eventName},data:s}).then((function(t){if(e.handleReportResult(t),e.record=t.record,e.absorbed=0,e.sign=t.record.flowSign,!t.learnControl.allowLearn){var s=t.learnControl.denyReason;e.reportJudge(s)}})).catch((function(t){e.clearReportIntervalTime()}))}},handleReportResult:function(t){this.reportResult=t,this.learnedTime=t.learnedTime,t.taskResult&&"finish"===t.taskResult.status?(this.isFinish=!0,this.$store.commit(a.B,"finish"),this.$store.commit("course/".concat(a.F),t.completionRate)):this.$store.commit(a.B,"start")},intervalReportLearnTime:function(){var t=this;this.reportLearnTime=setInterval((function(){t.checkoutTime(),t.learnTime++}),1e3)},intervalReportData:function(){var t=this,e=60*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*1e3;this.reportIntervalTime=setInterval((function(){t.reprtData({eventName:"doing",ContinuousReport:!0})}),e)},checkoutTime:function(){this.reportFinishCondition&&["time","watchTime"].includes(this.reportFinishCondition.type)&&parseInt(this.learnTime/60,10)>=parseInt(this.reportFinishCondition.data,10)&&this.reprtData({eventName:"finish",ContinuousReport:!0})},clearReportIntervalTime:function(){clearInterval(this.reportIntervalTime),clearInterval(this.reportLearnTime),this.reportIntervalTime=null,this.reportLearnTime=null},reportJudge:function(t){"kick_previous"===t?this.kickEachOther("kick_previous"):"reject_current"===t&&(this.clearReportIntervalTime(),this.kickEachOther("reject_current"))},outFocusMask:function(t){this.absorbed=1,this.isShowOutFocusMask=!1,!this.player||"video"!==this.reportType&&"audio"!==this.reportType||this.player.play(),this.toggleReportMaskHidden("remove"),this.reprtData({eventName:"doing",ContinuousReport:!0,reActive:1})},kickEachOther:function(t){if(this.absorbed=1,"testpaper"!==this.reportType&&"live"!==this.reportType&&"homework"!==this.reportType||"kick_previous"!==t){if(this.isShowOutFocusMask=!0,this.outFocusMaskType=t,"video"===this.reportType||"audio"===this.reportType){if(this.player&&this.player.destory&&"reject_current"===t)return void this.player.destory();this.player&&this.player.pause&&this.player.pause()}this.toggleReportMaskHidden("add")}},ineffectiveLearning:function(t){this.isShowOutFocusMask||(this.absorbed=0,this.isShowOutFocusMask=!0,this.outFocusMaskType=t,this.player&&"video"===this.reportType&&this.player.pause(),this.reprtData({eventName:"doing",ContinuousReport:!0}))},toggleReportMaskHidden:function(t){"video"!==this.reportType&&"audio"!==this.reportType&&("add"===t?document.getElementsByTagName("body")[0].classList.add("report-mask-hidden"):"remove"===t&&document.getElementsByTagName("body")[0].classList.remove("report-mask-hidden"))},initVisibilitychange:function(){document.addEventListener("visibilitychange",this.visibilityState)},visibilityState:function(){"video"===this.reportType&&("hidden"===document.visibilityState?this.ineffectiveLearning("ineffective_learning"):"visible"===document.visibilityState&&this.player.pause())},onbeforeunload:function(){window.addEventListener("beforeunload",this.onbeforeunloadFlowSign)},onbeforeunloadFlowSign:function(){this.sign.length>0&&localStorage.setItem("flowSign",this.sign)}}}},dadc:function(t,e,s){},e0b8:function(t,e,s){"use strict";var n=s("7726"),a=s("5ca1"),i=s("2aba"),r=s("dcbc"),o=s("67ab"),c=s("4a59"),l=s("f605"),u=s("d3f4"),d=s("79e5"),h=s("5cc5"),p=s("7f20"),m=s("5dbc");t.exports=function(t,e,s,f,w,g){var v=n[t],y=v,_=w?"set":"add",b=y&&y.prototype,C={},x=function(t){var e=b[t];i(b,t,"delete"==t||"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,s){return e.call(this,0===t?0:t,s),this})};if("function"==typeof y&&(g||b.forEach&&!d((function(){(new y).entries().next()})))){var A=new y,T=A[_](g?{}:-0,1)!=A,k=d((function(){A.has(1)})),I=h((function(t){new y(t)})),S=!g&&d((function(){for(var t=new y,e=5;e--;)t[_](e,e);return!t.has(-0)}));I||((y=e((function(e,s){l(e,y,t);var n=m(new v,e,y);return void 0!=s&&c(s,w,n[_],n),n}))).prototype=b,b.constructor=y),(k||S)&&(x("delete"),x("has"),w&&x("get")),(S||T)&&x(_),g&&b.clear&&delete b.clear}else y=f.getConstructor(e,t,w,_),r(y.prototype,s),o.NEED=!0;return p(y,t),C[t]=y,a(a.G+a.W+a.F*(y!=v),C),g||f.setStrong(y,t,w),y}},f1ae:function(t,e,s){"use strict";var n=s("86cc"),a=s("4630");t.exports=function(t,e,s){e in t?n.f(t,e,a(0,s)):t[e]=s}},f5cc:function(t,e,s){"use strict";s("c5f6"),s("28a5"),s("e7e5");var n=s("d399"),a=(s("55dd"),s("c80c")),i=(s("96cf"),s("3b8d")),r=(s("ac6a"),s("db72")),o=s("3ce7"),c=s("2f62"),l=s("32e6"),u=s.n(l),d=s("faa5"),h=s("2d63"),p=(s("e17f"),s("2241")),m=s("2a5b"),f={methods:{isShowFooterShardow:function(){var t=this.showShadow!==this.itemdata.id;if(""===this.mode&&t&&this.canDo)return!0;if(""===this.mode&&t&&!this.canDo&&"material"!==this.parentType)return!0;if(this.isExercise){if("exercise"===this.mode&&t&&"material"!==this.parentType)return!0;if("exercise"===this.mode&&t&&"material"===this.parentType)return!1}if("exercise"===this.mode&&this.canDo){if("1"===this.exerciseMode&&t&&this.disabledData)return!0;if("1"===this.exerciseMode&&t&&"material"!==this.parentType)return!0;if("0"===this.exerciseMode&&t&&this.canDo)return!0}}}},w={methods:{refreshChoice:function(t){var e=this;if(t)this.$nextTick((function(){e.question[0]=t,e.refreshKey=!e.refreshKey}));else{var s=this.exerciseInfo.submittedQuestions;this.$nextTick((function(){e.question=s.filter((function(t){return t.questionId+""===e.itemdata.id})),e.refreshKey=!e.refreshKey}))}}}},g=(s("4662"),s("28a2")),v={methods:{handleClickImage:function(t){if(void 0!==t){event.stopPropagation();var e=[t];Object(g.a)({images:e})}}}},y=s("240b"),_=document.documentElement.clientWidth,b={name:"FillType",components:{attachementPreview:m.a},mixins:[f,w,v],props:{filldata:{type:Object,default:function(){}},itemdata:{type:Object,default:function(){}},answer:{type:Array,default:function(){return[]}},isCurrent:Boolean,canDo:{type:Boolean,default:!0},subject:{type:String,default:""},number:{type:Number,default:null},showShadow:{type:String,default:""},exerciseInfo:{type:Object,default:function(){}},analysis:{type:String,default:""},exerciseMode:{type:String,default:""},mode:{type:String,default:""},disabledData:{type:Boolean,default:!1},parentTitleAnalysis:{type:String,default:""},parentType:{type:String,default:""},totalCount:{type:Number,default:0},reviewedCount:{type:Number,default:0}},data:function(){return{index:0,currentItem:null,isShowDownIcon:null,isShowUpIcon:!1,width:_,question:[],refreshKey:!0,rigth:"static/images/exercise/rigth.png",wrong:"static/images/exercise/wrong.png",answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},computed:{stem:{get:function(){return this.itemdata.parentTitle?this.itemdata.parentTitle.stem:this.itemdata.stem}},placeholder:{get:function(){return this.canDo?this.$t("courseLearning.placeEntAnswer"):this.$t("wrongQuestion.unanswered")}}},mounted:function(){var t;this.isShowDownIcon=(null===(t=document.getElementsByClassName("material-icon")[this.number])||void 0===t?void 0:t.childNodes[0].offsetWidth)>234,this.canDo&&"exercise"===this.mode&&this.refreshChoice()},methods:{getAttachementByType:function(t){return this.itemdata.attachments.filter((function(e){return e.module===t}))||[]},getAttachementMaterialType:function(t){return this.itemdata.parentTitle.attachments.filter((function(e){return e.module===t}))||[]},isunanswered:function(){return this.answer?this.answer.every((function(t){})):void 0!==this.itemdata.testResult.answer?this.itemdata.testResult.answer.every((function(t){})):void 0},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},submitTopic:function(){var t=this;this.answer.some((function(t){return""===t}))&&"1"===this.exerciseMode?p.a.confirm({message:this.$t("courseLearning.questionNotAnswer"),confirmButtonText:this.$t("courseLearning.continueAnswer"),cancelButtonText:this.$t("btn.confirm")}).then((function(){})).catch((function(){t.$emit("changeTouch"),t.$emit("submitSingleAnswer",t.answer,t.itemdata)})):(this.$emit("changeTouch"),this.radioDisabled=!0,this.$emit("submitSingleAnswer",this.answer,this.itemdata))},goResults:function(){this.$emit("goResults")},getAiAnalysis:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){var s,n,i,r,o,c,l,u,d,p,m,f,w,g,v,_,b,C;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.itemdata),s=t.itemdata.id,n={role:"student",questionId:s,answerRecordId:t.exerciseInfo.id},i=!1,r=[],t.answerData[s]="",t.stopAnswer[s]=!1,o=setInterval((function(){0!==r.length&&(t.stopAnswer[s]&&clearInterval(o),t.answerData[s]+=r.shift(),0===r.length&&i&&(clearInterval(o),t.stopAiExplain=!1,t.anewAiExplain=!0),t.$refs.aiAnalysis.innerHTML=t.answerData[s])}),50),e.next=10,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":y.a.state.token},body:JSON.stringify(n)});case 10:c=e.sent,l=c.body.getReader(),u=new TextDecoder,d="";case 14:return e.next=17,l.read();case 17:p=e.sent,m=p.done,f=p.value,w=(d+u.decode(f)).split("\n\n"),g=1,v=Object(h.a)(w);try{for(v.s();!(_=v.n()).done;)b=_.value,g==w.length?d=b:("message"===(C=JSON.parse(b.slice(5))).event&&r.push(C.answer),g++)}catch(t){v.e(t)}finally{v.f()}if(!m){e.next=27;break}return i=!0,e.abrupt("break",29);case 27:e.next=14;break;case 29:case"end":return e.stop()}}),e)})))()},stopAiAnalysis:function(){var t=this.itemdata.id;this.stopAnswer[t]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},C=(s("bde0"),s("2877")),x=Object(C.a)(b,(function(){var t=this,e=t._self._c;return e("div",[t.itemdata.parentTitle?e("div",{staticClass:"subject-material"},[e("div",{class:["material-stem-nowrap",t.isShowDownIcon?"material-stem":""]},[t.itemdata.parentTitle?e("span",{class:["material-tags"]},[t._v("\n        "+t._s(t.subject)+"\n      ")]):t._e(),e("span",{staticClass:"material-text material-icon",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),e("i",{class:["iconfont","icon-arrow-up",{"show-up-icon":t.isShowDownIcon}],on:{click:t.changeUpIcon}}),e("i",{class:["iconfont","icon-arrow-down",{"show-down-icon":t.isShowUpIcon}],on:{click:t.changeDownIcon}}),t._l(t.getAttachementByType("material"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),e("div",{staticClass:"fill"},[t.itemdata.parentTitle?t._e():e("span",{staticClass:"tags"},[t._v("\n      "+t._s(t.subject)+"\n    ")]),t.itemdata.parentTitle?t._e():e("div",{staticClass:"subject-stem"},[e("div",{staticClass:"serial-number"},[t._v(t._s(t.itemdata.seq)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),t.itemdata.parentTitle?e("div",{class:["material-title",{"material-title-weight":t.itemdata.parentTitle}]},[e("span",{staticClass:"serial-number"},[e("span",{staticClass:"material-type"},[t._v("["+t._s(t.$t("courseLearning.fill"))+"] ")]),t._v(" "+t._s(t.itemdata.materialIndex)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.itemdata.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]):t._e(),t._l(t.getAttachementByType("stem"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})})),t.disabledData?e("div",{staticClass:"answer-paper"},t._l(t.itemdata.fillnum,(function(s,n){return e("div",{key:n},[e("van-field",{staticClass:"fill-input",class:{"field-bottom":n!=t.itemdata.fillnum-1},attrs:{placeholder:t.canDo?"("+(n+1)+")"+t.$t("courseLearning.pleaseEnterYourAnswer"):t.$t("courseLearning.unanswered"),disabled:!t.disabledData,"label-width":"0px",type:"textarea",rows:"1",autosize:""},model:{value:t.answer[n],callback:function(e){t.$set(t.answer,n,e)},expression:"answer[index]"}})],1)})),0):t._e(),t.disabledData?t._e():e("div",{staticClass:"answer-paper"},[e("div",{staticClass:"your-answer"},[t._v(t._s(t.$t("courseLearning.yourAreAnswer"))+"：")]),e("div",[t.question.length>0&&"right"===t.question[0].status||"right"===t.itemdata.testResult.status?e("img",{staticClass:"fill-status",attrs:{src:t.rigth,alt:""}}):t._e(),t.question.length>0&&"wrong"===t.question[0].status||"wrong"===t.itemdata.testResult.status||"none"===t.itemdata.testResult.status||"noAnswer"===t.itemdata.testResult.status?e("img",{staticClass:"fill-status",attrs:{src:t.wrong,alt:""}}):t._e(),t.isunanswered()?e("span",{staticClass:"your-answer is-wrong-answer"},[t._v(" "+t._s(t.$t("courseLearning.unanswered")))]):t._e(),t._l(t.answer,(function(s,n){return e("span",{key:n,class:[t.question.length>0&&"right"===t.question[0].status?"is-right-answer":"is-wrong-answer"]},[t._v(" "+t._s(t.answer.length-1===n?""===s?t.$t("courseLearning.unanswered"):s:(""===s?t.$t("courseLearning.unanswered"):s)+";"))])}))],2),e("div",{staticClass:"your-answer mt-16"},[t._v("\n        "+t._s(t.$t("courseLearning.correctAnswer"))+"：\n      ")]),e("div",{staticClass:"mb-16"},t._l(t.itemdata.answer,(function(s,n){return e("span",{key:n,staticClass:"is-right-answer"},[t._v(" "+t._s(t.itemdata.answer.length-1===n?s:s+";"))])})),0),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.score"))+"："),e("div",[t._v(t._s(t.itemdata.testResult?t.itemdata.testResult.score:0))])]):t._e(),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.comment"))+"："),e("div",[t._v(t._s(t.itemdata.testResult?null===t.itemdata.testResult.teacherSay?"--":t.itemdata.testResult.teacherSay:""))])]):t._e(),e("div",{staticClass:"analysis-color"},[t._v("\n        "+t._s(t.$t("courseLearning.analyze"))+"：\n        "),t.analysis?e("span",{domProps:{innerHTML:t._s(t.analysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("div",{ref:"aiAnalysis"},[t._v(t._s(t.$t("courseLearning.noParsing")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemdata.aiAnalysisEnable,expression:"itemdata.aiAnalysisEnable"}],staticClass:"ai-analysis"},[e("p",{staticClass:"ai-tittle"},[t._v(t._s(t.$t("courseLearning.aiAssistant")))]),e("div",{staticClass:"ai-content"},[e("div",{staticClass:"ai-content-left"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.analysis")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.stopAiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.stopGeneration")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.reGenerate")))])]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[t._v(t._s(t.$t("courseLearning.beGenerating")))])]),t._m(0)])]),t._l(t.getAttachementByType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2)],2),t.isShowFooterShardow()?e("div",{staticClass:"footer-shadow"}):t._e(),t.parentType&&"material"===t.parentType&&!t.disabledData?e("div",{staticClass:"subject-footer"},[t._v("\n    "+t._s(t.$t("courseLearning.analyze"))+"：\n    "),""!==t.parentTitleAnalysis?e("span",{domProps:{innerHTML:t._s(t.parentTitleAnalysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("div",[t._v(t._s(t.$t("courseLearning.noParsing")))]),t._l(t.getAttachementMaterialType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),t.canDo&&"1"===t.exerciseMode&&t.disabledData?e("div",{staticClass:"submit-footer",style:{width:t.width+"px"}},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:t.submitTopic}},[t._v(t._s(t.$t("courseLearning.submitATopic")))])],1):t._e(),t.totalCount===t.reviewedCount?e("div",{staticClass:"submit-footer"},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:function(e){return t.goResults()}}},[t._v(t._s(t.$t("courseLearning.viewResult2")))])],1):t._e()])}),[function(){var t=this._self._c;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"778083c6",null).exports,A=document.documentElement.clientWidth,T={name:"EssayType",mixins:[f,w,v],components:{attachementPreview:m.a},watch:{answerText:{handler:function(t){this.answer[0]=t+this.fileStr}},imgs:{handler:function(t){var e=this;this.fileStr="",t.forEach((function(t){e.fileStr+='<img src="'.concat(t,'"></img>')})),this.answer[0]=this.answerText+this.fileStr},deep:!0}},props:{itemdata:{type:Object,default:function(){}},answer:{type:Array,default:function(){return[]}},isCurrent:Boolean,canDo:{type:Boolean,default:!0},subject:{type:String,default:""},number:{type:Number,default:null},showShadow:{type:String,default:""},exerciseMode:{type:String,default:""},exerciseInfo:{type:Object,default:function(){}},mode:{type:String,default:""},disabledData:{type:Boolean,default:!1},analysis:{type:String,default:""},parentTitleAnalysis:{type:String,default:""},parentType:{type:String,default:""},totalCount:{type:Number,default:0},reviewedCount:{type:Number,default:0}},data:function(){return{fileList:[],fileStr:"",imgs:[],currentItem:null,isShowDownIcon:null,isShowUpIcon:!1,question:[],refreshKey:!0,currentAnswer:[],width:A,rigth:"static/images/exercise/rigth.png",wrong:"static/images/exercise/wrong.png",answerText:"",answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},computed:{stem:{get:function(){return this.itemdata.parentTitle?this.itemdata.parentTitle.stem:this.itemdata.stem}},placeholder:{get:function(){return this.canDo?this.$t("courseLearning.yourAreAnswer")+"...":this.$t("wrongQuestion.unanswered")}}},mounted:function(){var t;this.isShowDownIcon=(null===(t=document.getElementsByClassName("material-icon")[this.number])||void 0===t?void 0:t.childNodes[0].offsetWidth)>234},methods:{change:function(){},getAttachementByType:function(t){return this.itemdata.attachments.filter((function(e){return e.module===t}))||[]},getAttachementMaterialType:function(t){return this.itemdata.parentTitle.attachments.filter((function(e){return e.module===t}))||[]},afterRead:function(t){var e=this,s=new FormData;s.append("file",t.content),s.append("group","course"),o.a.updateFile({data:s}).then((function(t){e.imgs.push(t.uri)})).catch((function(t){n.a.fail(t.message)}))},deleteImgItem:function(t,e){this.imgs.splice(e.index,1)},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},submitTopic:function(){var t=this;""===this.answer[0]&&"1"===this.exerciseMode?p.a.confirm({message:this.$t("courseLearning.questionNotAnswer"),confirmButtonText:this.$t("courseLearning.continueAnswer"),cancelButtonText:this.$t("btn.confirm")}).then((function(){})).catch((function(){t.$emit("changeTouch"),t.$emit("submitSingleAnswer",t.answer,t.itemdata)})):(this.$emit("changeTouch"),this.$emit("submitSingleAnswer",this.answer,this.itemdata))},goResults:function(){this.$emit("goResults")},getAiAnalysis:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){var s,n,i,r,o,c,l,u,d,p,m,f,w,g,v,_,b,C;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.itemdata.id,n={role:"student",questionId:s,answerRecordId:t.exerciseInfo.id},i=!1,r=[],t.answerData[s]="",t.stopAnswer[s]=!1,o=setInterval((function(){0!==r.length&&(t.stopAnswer[s]&&clearInterval(o),t.answerData[s]+=r.shift(),0===r.length&&i&&(clearInterval(o),t.stopAiExplain=!1,t.anewAiExplain=!0),t.$refs.aiAnalysis.innerHTML=t.answerData[s])}),50),e.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":y.a.state.token},body:JSON.stringify(n)});case 9:c=e.sent,l=c.body.getReader(),u=new TextDecoder,d="";case 13:return e.next=16,l.read();case 16:p=e.sent,m=p.done,f=p.value,w=(d+u.decode(f)).split("\n\n"),g=1,v=Object(h.a)(w);try{for(v.s();!(_=v.n()).done;)b=_.value,g===w.length?d=b:("message"===(C=JSON.parse(b.slice(5))).event&&r.push(C.answer),g++)}catch(t){v.e(t)}finally{v.f()}if(!m){e.next=26;break}return i=!0,e.abrupt("break",28);case 26:e.next=13;break;case 28:case"end":return e.stop()}}),e)})))()},stopAiAnalysis:function(){var t=this.itemdata.id;this.stopAnswer[t]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()},getTeacherSay:function(){var t=this.itemdata.testResult;return t?null===t.teacherSay?"--":t.teacherSay:""}}},k=(s("4c53"),Object(C.a)(T,(function(){var t=this,e=t._self._c;return e("div",[t.itemdata.parentTitle?e("div",{staticClass:"subject-material"},[e("div",{class:["material-stem-nowrap",t.isShowDownIcon?"material-stem":""]},[t.itemdata.parentTitle?e("span",{class:["material-tags"]},[t._v("\n        "+t._s(t.subject)+"\n      ")]):t._e(),e("span",{staticClass:"material-text material-icon",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),e("i",{class:["iconfont","icon-arrow-up",{"show-up-icon":t.isShowDownIcon}],on:{click:t.changeUpIcon}}),e("i",{class:["iconfont","icon-arrow-down",{"show-down-icon":t.isShowUpIcon}],on:{click:t.changeDownIcon}}),t._l(t.getAttachementMaterialType("material"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),e("div",{staticClass:"essay"},[t.itemdata.parentTitle?t._e():e("span",{staticClass:"tags"},[t._v("\n      "+t._s(t.subject)+"\n    ")]),t.itemdata.parentTitle?t._e():e("div",{staticClass:"subject-stem"},[e("div",{staticClass:"serial-number"},[t._v(t._s(t.itemdata.seq)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),t.itemdata.parentTitle?e("div",{class:["material-title",{"material-title-weight":t.itemdata.parentTitle}]},[e("span",{staticClass:"serial-number"},[e("span",{staticClass:"material-type"},[t._v("["+t._s(t.$t("courseLearning.essay"))+"] ")]),t._v(" "+t._s(t.itemdata.materialIndex)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.itemdata.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]):t._e(),t._l(t.getAttachementByType("stem"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})})),t.disabledData?e("div",{staticClass:"answer-paper"},[e("van-field",{staticClass:"essay-input",attrs:{placeholder:t.placeholder,autosize:{maxHeight:132,minHeight:132},disabled:!t.disabledData,"label-width":"0px",type:"textarea"},on:{input:function(e){return t.change()}},model:{value:t.answerText,callback:function(e){t.answerText=e},expression:"answerText"}}),t.canDo?e("div",{staticClass:"discussion-create__upload"},[e("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":5},on:{delete:t.deleteImgItem},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1):t._e()],1):t._e(),t.disabledData?t._e():e("div",{staticClass:"answer-paper"},[t.disabledData?t._e():e("div",{staticClass:"answer-paper"},[e("div",{staticClass:"your-answer"},[t._v(t._s(t.$t("courseLearning.yourAreAnswer"))+"：")]),e("div",["exam"!==t.mode||t.canDo?e("div",[""===t.answer[0]||t.itemdata.testResult.answer&&0===t.itemdata.testResult.answer.length?e("span",{staticClass:"your-answer"},[t._v(" "+t._s(t.$t("courseLearning.unanswered")))]):t._e(),e("span",{staticClass:"essay-answer",staticStyle:{color:"#37393D"},domProps:{innerHTML:t._s(t.answer[0])},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]):e("div",[""==t.exerciseMode&&t.question.length>0&&"right"===t.question[0].status||"right"===t.itemdata.testResult.status&&"none"!==t.itemdata.testResult.status?e("img",{staticClass:"fill-status",attrs:{src:t.rigth,alt:""}}):t._e(),t.question.length>0&&"wrong"===t.question[0].status||"wrong"===t.itemdata.testResult.status||"noAnswer"===t.itemdata.testResult.status||"partRight"===t.itemdata.testResult.status?e("img",{staticClass:"fill-status",attrs:{src:t.wrong,alt:""}}):t._e(),""==t.exerciseMode&&t.question.length>0&&"right"===t.question[0].status||"right"===t.itemdata.testResult.status&&"none"!==t.itemdata.testResult.status?e("span",{staticClass:"is-right-answer",domProps:{innerHTML:t._s(t.answer[0])},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):t.question.length>0&&"wrong"===t.question[0].status||"wrong"===t.itemdata.testResult.status||"noAnswer"===t.itemdata.testResult.status||"partRight"===t.itemdata.testResult.status?e("span",{staticClass:"is-wrong-answer",domProps:{innerHTML:t._s(t.answer[0])},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):t._e(),"none"===t.itemdata.testResult.status?e("span",{staticClass:"your-answer",staticStyle:{color:"#37393D"},domProps:{innerHTML:t._s(t.answer[0])},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):t._e(),""===t.answer[0]||t.itemdata.testResult.answer&&0===t.itemdata.testResult.answer.length?e("span",{staticClass:"your-answer is-wrong-answer"},[t._v(" "+t._s(t.$t("courseLearning.unanswered")))]):t._e()])]),e("div",{staticClass:"your-answer mt-16"},[t._v("\n          "+t._s(t.$t("courseLearning.correctAnswer"))+"：\n        ")]),e("div",{staticClass:"mb-16"},[e("span",{staticClass:"is-right-answer",domProps:{innerHTML:t._s(t.itemdata.answer[0])},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n          "+t._s(t.$t("courseLearning.score"))+"："),e("div",[t._v(t._s(t.itemdata.testResult?t.itemdata.testResult.score:0))])]):t._e(),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n          "+t._s(t.$t("courseLearning.comment"))+"："),e("div",{domProps:{innerHTML:t._s(t.getTeacherSay())}})]):t._e(),e("div",{staticClass:"analysis-color"},[t._v("\n          "+t._s(t.$t("courseLearning.analyze"))+"：\n          "),t.analysis?e("span",{domProps:{innerHTML:t._s(t.analysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("div",{ref:"aiAnalysis"},[t._v(t._s(t.$t("courseLearning.noParsing")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemdata.aiAnalysisEnable,expression:"itemdata.aiAnalysisEnable"}],staticClass:"ai-analysis"},[e("p",{staticClass:"ai-tittle"},[t._v(t._s(t.$t("courseLearning.aiAssistant")))]),e("div",{staticClass:"ai-content"},[e("div",{staticClass:"ai-content-left"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.analysis")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.stopAiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.stopGeneration")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.reGenerate")))])]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[t._v(t._s(t.$t("courseLearning.beGenerating")))])]),t._m(0)])]),t._l(t.getAttachementByType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2)])],2),t.isShowFooterShardow()?e("div",{staticClass:"footer-shadow"}):t._e(),t.parentType&&"material"===t.parentType&&!t.disabledData?e("div",{staticClass:"subject-footer"},[t._v("\n    "+t._s(t.$t("courseLearning.analyze"))+"：\n    "),""!==t.parentTitleAnalysis?e("span",{domProps:{innerHTML:t._s(t.parentTitleAnalysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("div",[t._v(t._s(t.$t("courseLearning.noParsing")))]),t._l(t.getAttachementMaterialType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),t.canDo&&"1"===t.exerciseMode&&t.disabledData?e("div",{staticClass:"submit-footer",style:{width:t.width+"px"}},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:t.submitTopic}},[t._v(t._s(t.$t("courseLearning.submitATopic")))])],1):t._e(),t.totalCount===t.reviewedCount?e("div",{staticClass:"submit-footer"},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:function(e){return t.goResults()}}},[t._v(t._s(t.$t("courseLearning.viewResult2")))])],1):t._e()])}),[function(){var t=this._self._c;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"5977a280",null).exports),I={name:"HeadTop",props:{all:{type:Number,default:0},current:{type:Number,default:0},subject:{type:String,default:""},score:{type:String,default:"0"},showScore:{type:Boolean,default:!0},exerciseMode:{type:String,default:""},totalCount:{type:Number,default:0},reviewedCount:{type:Number,default:0},canDo:{type:Boolean,default:!0}},methods:{showCard:function(){this.$parent.$parent.$parent.$parent.cardShow=!0}}},S=Object(C.a)(I,(function(){var t=this,e=t._self._c;return e("div",{class:["0"===t.exerciseMode?"head-top":"one-questions-head"]},["1"===t.exerciseMode&&t.canDo?e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex justify-between items-end mb-8"},[e("span",{staticClass:"text-14 answer-progress"},[t._v(t._s(t.$t("courseLearning.answerProgress"))+" "),e("span",{staticClass:"current-num"},[t._v(t._s(t.reviewedCount)+" "),e("span",{staticClass:"total-number"},[t._v(" /"+t._s(t.totalCount))])])]),e("span",{staticClass:"text-12 answer-card",on:{click:t.showCard}},[t._v(t._s(t.$t("courseLearning.answerSheet")))])]),e("van-progress",{attrs:{percentage:t.reviewedCount/t.totalCount*100,"stroke-width":"8","track-color":"#E9E9EB","show-pivot":!1}})],1):e("div",{staticClass:"flex justify-between w-full"},[e("div",{staticClass:"head-left"},[t._v("\n      "+t._s(t.subject)+"\n      "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.showScore,expression:"showScore"}],staticClass:"left-color"},[t._v("["+t._s(t.score)+"分]")])]),e("div",{staticClass:"head-right"},[e("span",{staticClass:"right-color"},[t._v(t._s(t.current))]),t._v("/"+t._s(t.all)+"\n    ")])])])}),[],!1,null,null,null).exports,L=(s("a481"),s("6762"),s("2fdb"),{methods:{checkAnswer:function(t,e){var s=e.answer;if(e.testResult&&e.testResult.answer){var n=e.testResult.answer||[];if(s.includes(t))return"subject-option__order_right";if(s.includes(t)&&!n.includes(t)||!s.includes(t)&&n.includes(t))return"van-checked__wrong"}return""}}}),D=document.documentElement.clientWidth,R={name:"ChoiceType",filters:{filterOrder:function(t){return["A.","B.","C.","D.","E.","F.","G.","H.","I.","J.","K.","L.","M.","N.","O.","P.","Q.","R.","S.","T.","U.","V.","W.","X.","Y.","Z."][t]}},mixins:[L,f,w,v],components:{attachementPreview:m.a},props:{itemdata:{type:Object,default:function(){}},isCurrent:Boolean,answer:{type:Array,default:function(){return[]}},canDo:{type:Boolean,default:!0},subject:{type:String,default:""},number:{type:Number,default:null},showShadow:{type:String,default:""},exerciseMode:{type:String,default:""},exerciseInfo:{type:Object,default:function(){}},analysis:{type:String,default:""},mode:{type:String,default:""},disabledData:{type:Boolean,default:!1},parentTitleAnalysis:{type:String,default:""},parentType:{type:String,default:""},totalCount:{type:Number,default:0},reviewedCount:{type:Number,default:0}},data:function(){return{result:this.answer,currentItem:null,isShowDownIcon:null,isShowUpIcon:!1,width:D,radioDisabled:!1,refreshKey:!0,question:[],answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},computed:{stem:{get:function(){return this.itemdata.parentTitle?this.itemdata.parentTitle.stem:this.itemdata.stem}}},mounted:function(){var t;this.isShowDownIcon=(null===(t=document.getElementsByClassName("material-icon")[this.number])||void 0===t?void 0:t.childNodes[0].offsetWidth)>234,this.canDo&&"exercise"===this.mode&&this.refreshChoice()},methods:{filterOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"do",s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=t.map((function(t){return s[t]}));if("standard"==e)return n.length>0?n.join(""):""},filterOrder:function(t){return this.$options.filters.filterOrder(t)},isWrong:function(t){var e,s,n,a,i=!1;return null!==(e=this.question[0])&&void 0!==e&&null!==(s=e.response)&&void 0!==s&&s.includes(this.filterOrder(t).replace(".",""))&&this.question.length>0&&!this.question[0].answer.includes(this.filterOrder(t).replace(".",""))&&(i=!0),i&&(null===(n=this.question[0])||void 0===n||null===(a=n.response)||void 0===a?void 0:a.includes(this.filterOrder(t).replace(".","")))},choose:function(t){this.currentItem=t,this.$emit("choiceChoose",this.result,this.itemdata)},getAttachementByType:function(t){return this.itemdata.attachments.filter((function(e){return e.module===t}))||[]},getAttachementMaterialType:function(t){return this.itemdata.parentTitle.attachments.filter((function(e){return e.module===t}))||[]},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},submitTopic:function(){var t=this;0===this.result.length&&"1"===this.exerciseMode?p.a.confirm({message:this.$t("courseLearning.questionNotAnswer"),confirmButtonText:this.$t("courseLearning.continueAnswer"),cancelButtonText:this.$t("btn.confirm")}).then((function(){})).catch((function(){t.$emit("changeTouch"),t.$emit("submitSingleAnswer",t.result,t.itemdata)})):(this.$emit("changeTouch"),this.radioDisabled=!0,this.$emit("submitSingleAnswer",this.result,this.itemdata))},goResults:function(){this.$emit("goResults")},getAiAnalysis:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){var s,n,i,r,o,c,l,u,d,p,m,f,w,g,v,_,b,C;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.itemdata.id,n={role:"student",questionId:s,answerRecordId:t.exerciseInfo.id},i=!1,r=[],t.answerData[s]="",t.stopAnswer[s]=!1,o=setInterval((function(){0!==r.length&&(t.stopAnswer[s]&&clearInterval(o),t.answerData[s]+=r.shift(),0===r.length&&i&&(clearInterval(o),t.stopAiExplain=!1,t.anewAiExplain=!0),t.$refs.aiAnalysis.innerHTML=t.answerData[s])}),50),e.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":y.a.state.token},body:JSON.stringify(n)});case 9:c=e.sent,l=c.body.getReader(),u=new TextDecoder,d="";case 13:return e.next=16,l.read();case 16:p=e.sent,m=p.done,f=p.value,w=(d+u.decode(f)).split("\n\n"),g=1,v=Object(h.a)(w);try{for(v.s();!(_=v.n()).done;)b=_.value,g==w.length?d=b:("message"===(C=JSON.parse(b.slice(5))).event&&r.push(C.answer),g++)}catch(t){v.e(t)}finally{v.f()}if(!m){e.next=26;break}return i=!0,e.abrupt("break",28);case 26:e.next=13;break;case 28:case"end":return e.stop()}}),e)})))()},stopAiAnalysis:function(){var t=this.itemdata.id;this.stopAnswer[t]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},$=(s("4e4f"),Object(C.a)(R,(function(){var t=this,e=t._self._c;return e("div",[t.itemdata.parentTitle?e("div",{staticClass:"subject-material"},[e("div",{class:["material-stem-nowrap",t.isShowDownIcon?"material-stem":""]},[t.itemdata.parentTitle?e("span",{class:["material-tags"]},[t._v("\n        "+t._s(t.subject)+"\n      ")]):t._e(),e("span",{staticClass:"material-text material-icon",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),e("i",{class:["iconfont","icon-arrow-up",{"show-up-icon":t.isShowDownIcon}],on:{click:t.changeUpIcon}}),e("i",{class:["iconfont","icon-arrow-down",{"show-down-icon":t.isShowUpIcon}],on:{click:t.changeDownIcon}}),t._l(t.getAttachementMaterialType("material"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),e("div",{staticClass:"subject"},[t.itemdata.parentTitle?t._e():e("span",{staticClass:"tags"},[t._v("\n      "+t._s(t.subject)+"\n    ")]),t.itemdata.parentTitle?t._e():e("div",{staticClass:"subject-stem"},[e("span",{staticClass:"serial-number"},[t._v(t._s(t.itemdata.seq)+"、")]),e("div",{staticClass:"subject-stem__content rich-text",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),t.itemdata.parentTitle?e("div",{class:["material-title",{"material-title-weight":t.itemdata.parentTitle}]},[e("span",{staticClass:"serial-number"},[e("span",{staticClass:"material-type"},[t._v("["+t._s("uncertain_choice"===t.itemdata.type?t.$t("courseLearning.uncertainChoice"):t.$t("courseLearning.choice"))+"] ")]),t._v(" "+t._s(t.itemdata.materialIndex)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.itemdata.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]):t._e(),t._l(t.getAttachementByType("stem"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})})),e("van-checkbox-group",{class:["answer-paper",{convention:"exercise"!==t.mode}],attrs:{refreshKey:t.refreshKey},on:{change:t.choose},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.itemdata.metas.choices,(function(s,n){return e("van-checkbox",{key:n,class:["subject-option",t.canDo?"":t.checkAnswer(n,t.itemdata),{active:t.currentItem?t.currentItem.includes(n):""},{"van-checked__right":t.itemdata.answer?t.itemdata.answer.includes(n):""},{isRight:t.question.length>0&&t.question[0].answer.includes(t.filterOrder(n).replace(".",""))},{isWrong:t.isWrong(n)}],attrs:{name:n,disabled:!t.disabledData}},[e("i",{staticClass:"iconfont icon-cuowu2"}),e("i",{staticClass:"iconfont icon-zhengque1"}),e("i",{staticClass:"iconfont icon-a-Frame34723"}),e("div",{class:["subject-option__content",t.canDo?"":"not-can-do"],domProps:{innerHTML:t._s(s)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}),e("span",{staticClass:"subject-option__order",attrs:{slot:"icon"},slot:"icon"},[t._v(t._s(t._f("filterOrder")(n)))])])})),1),t.disabledData?t._e():e("div",{staticClass:"one-questions-analysis"},[e("div",{staticClass:"flex mb-8"},[e("span",{staticClass:"flex-none font-14 leading-28"},[t._v(t._s(t.$t("courseLearning.referenceAnswer"))+"：")]),t.question.length>0&&t.canDo?e("span",{staticClass:"font-20 break-all",staticStyle:{color:"#00B42A"}},t._l(t.question[0].answer,(function(s,n){return e("span",{key:n},[t._v(t._s(s))])})),0):t._e(),t.canDo?t._e():e("span",{staticClass:"font-20 break-all",staticStyle:{color:"#00B42A"}},[t._v(t._s(t.filterOrders(t.itemdata.answer,"standard")))])]),t.itemdata.testResult.answer&&0!==t.itemdata.testResult.answer.length||0!==t.question.length?e("div",{staticClass:"flex mb-8"},[e("span",{staticClass:"flex-none font-14 leading-28"},[t._v(t._s(t.$t("courseLearning.selectedAnswer"))+"：")]),t.question.length>0?e("span",{staticClass:"font-20 break-all"},t._l(t.question[0].response,(function(s,n){return e("span",{key:n},[t._v(t._s(s))])})),0):t._e(),t.canDo?t._e():e("span",{staticClass:"font-20 break-all"},[e("span",[t._v(t._s(t.filterOrders(t.itemdata.testResult.answer,"standard")))])])]):t._e(),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.score"))+"："+t._s(t.itemdata.testResult?t.itemdata.testResult.score:0)+"\n      ")]):t._e(),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.comment"))+"："+t._s(t.itemdata.testResult?null===t.itemdata.testResult.teacherSay?"--":t.itemdata.testResult.teacherSay:"")+"\n      ")]):t._e(),e("div",{staticClass:"analysis-color"},[e("span",{staticClass:"float-left"},[t._v(t._s(t.$t("courseLearning.analyze"))+"：")]),t.analysis?e("span",{domProps:{innerHTML:t._s(t.analysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("span",{ref:"aiAnalysis"},[t._v(t._s(t.$t("courseLearning.noParsing")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemdata.aiAnalysisEnable,expression:"itemdata.aiAnalysisEnable"}],staticClass:"ai-analysis"},[e("p",{staticClass:"ai-tittle"},[t._v(t._s(t.$t("courseLearning.aiAssistant")))]),e("div",{staticClass:"ai-content"},[e("div",{staticClass:"ai-content-left"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.analysis")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.stopAiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.stopGeneration")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.reGenerate")))])]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[t._v(t._s(t.$t("courseLearning.beGenerating")))])]),t._m(0)])]),t._l(t.getAttachementByType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2)],2),t.isShowFooterShardow()?e("div",{staticClass:"footer-shadow"}):t._e(),t.parentType&&"material"===t.parentType&&!t.disabledData?e("div",{staticClass:"subject-footer"},[e("span",{staticClass:"float-left"},[t._v(t._s(t.$t("courseLearning.analyze"))+"：")]),""!==t.parentTitleAnalysis?e("span",{domProps:{innerHTML:t._s(t.parentTitleAnalysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("span",[t._v(t._s(t.$t("courseLearning.noParsing")))]),t._l(t.getAttachementMaterialType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),t.canDo&&"1"===t.exerciseMode&&t.disabledData?e("div",{staticClass:"submit-footer",style:{width:t.width+"px"}},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:t.submitTopic}},[t._v(t._s(t.$t("courseLearning.submitATopic")))])],1):t._e(),t.totalCount===t.reviewedCount?e("div",{staticClass:"submit-footer"},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:function(e){return t.goResults()}}},[t._v(t._s(t.$t("courseLearning.viewResult2")))])],1):t._e()])}),[function(){var t=this._self._c;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"e7082384",null).exports),E=document.documentElement.clientWidth,j={name:"SingleChoice",filters:{filterOrder:function(t){return["A.","B.","C.","D.","E.","F.","G.","H.","I.","J.","K.","L.","M.","N.","O.","P.","Q.","R.","S.","T.","U.","V.","W.","X.","Y.","Z."][t]},filterAnswer:function(t){return["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][t]}},mixins:[L,f,w,v],components:{attachementPreview:m.a},props:{itemdata:{type:Object,default:function(){}},answer:{type:Array,default:function(){return[]}},canDo:{type:Boolean,default:!0},isCurrent:Boolean,subject:{type:String,default:""},number:{type:Number,default:null},showShadow:{type:String,default:""},status:{type:String,default:null},exerciseMode:{type:String,default:""},exerciseInfo:{type:Object,default:function(){}},analysis:{type:String,default:""},parentTitleAnalysis:{type:String,default:""},parentType:{type:String,default:""},testResult:{type:Object,default:function(){}},mode:{type:String,default:""},disabledData:{type:Boolean,default:!1},isExercise:{type:Boolean},totalCount:{type:Number,default:0},reviewedCount:{type:Number,default:0}},data:function(){return{radio:this.answer[0],currentItem:null,isShowDownIcon:null,isShowUpIcon:!1,question:[],refreshKey:!0,myAnswer:"C",width:E,answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},mounted:function(){var t;this.canDo&&"exercise"===this.mode&&this.refreshChoice(),this.isShowDownIcon=(null===(t=document.getElementsByClassName("material-icon")[this.number])||void 0===t?void 0:t.childNodes[0].offsetWidth)>234},computed:{stem:{get:function(){return this.itemdata.parentTitle?this.itemdata.parentTitle.stem:this.itemdata.stem}}},methods:{filterOrder:function(t){return this.$options.filters.filterOrder(t)},filterAnswer:function(t){return this.$options.filters.filterAnswer(t)},choose:function(t){this.currentItem=t,this.$emit("singleChoose",this.radio,this.itemdata)},getAttachementByType:function(t){return this.itemdata.attachments.filter((function(e){return e.module===t}))||[]},getAttachementMaterialType:function(t){return this.itemdata.parentTitle.attachments.filter((function(e){return e.module===t}))||[]},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},goResults:function(){this.$emit("goResults")},getAiAnalysis:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){var s,n,i,r,o,c,l,u,d,p,m,f,w,g,v,_,b,C;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.itemdata.id,n={role:"student",questionId:s,answerRecordId:t.exerciseInfo.id},i=!1,r=[],t.answerData[s]="",t.stopAnswer[s]=!1,o=setInterval((function(){0!==r.length&&(t.stopAnswer[s]&&clearInterval(o),t.answerData[s]+=r.shift(),0===r.length&&i&&(clearInterval(o),t.stopAiExplain=!1,t.anewAiExplain=!0),t.$refs.aiAnalysis.innerHTML=t.answerData[s])}),50),e.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":y.a.state.token},body:JSON.stringify(n)});case 9:c=e.sent,l=c.body.getReader(),u=new TextDecoder,d="";case 13:return e.next=16,l.read();case 16:p=e.sent,m=p.done,f=p.value,w=(d+u.decode(f)).split("\n\n"),g=1,v=Object(h.a)(w);try{for(v.s();!(_=v.n()).done;)b=_.value,g==w.length?d=b:("message"===(C=JSON.parse(b.slice(5))).event&&r.push(C.answer),g++)}catch(t){v.e(t)}finally{v.f()}if(!m){e.next=26;break}return i=!0,e.abrupt("break",28);case 26:e.next=13;break;case 28:case"end":return e.stop()}}),e)})))()},stopAiAnalysis:function(){var t=this.itemdata.id;this.stopAnswer[t]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},O=(s("906b"),Object(C.a)(j,(function(){var t=this,e=t._self._c;return e("div",[t.itemdata.parentTitle?e("div",{staticClass:"subject-material"},[e("div",{class:["material-stem-nowrap",t.isShowDownIcon?"material-stem":""]},[t.itemdata.parentTitle?e("span",{staticClass:"material-tags"},[t._v("\n        "+t._s(t.subject)+"\n      ")]):t._e(),e("span",{staticClass:"material-text material-icon",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),e("i",{class:["iconfont","icon-arrow-up",{"show-up-icon":t.isShowDownIcon}],on:{click:t.changeUpIcon}}),e("i",{class:["iconfont","icon-arrow-down",{"show-down-icon":t.isShowUpIcon}],on:{click:t.changeDownIcon}}),t._l(t.getAttachementMaterialType("material"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),e("div",{staticClass:"subject"},[t.itemdata.parentTitle?t._e():e("span",{staticClass:"tags"},[t._v("\n      "+t._s(t.subject)+"\n    ")]),t.itemdata.parentTitle?t._e():e("div",{staticClass:"subject-stem"},[e("span",{staticClass:"serial-number"},[t._v(t._s(t.itemdata.seq)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),t.itemdata.parentTitle?e("div",{class:["material-title",{"material-title-weight":t.itemdata.parentTitle}]},[e("span",{staticClass:"serial-number"},[e("span",{staticClass:"material-type"},[t._v("["+t._s(t.$t("courseLearning.singleChoice"))+"] ")]),t._v(" "+t._s(t.itemdata.materialIndex)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.itemdata.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]):t._e(),t._l(t.getAttachementByType("stem"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})})),e("van-radio-group",{key:t.refreshKey,class:["answer-paper",{convention:"exercise"!==t.mode}],on:{change:t.choose},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.itemdata.metas.choices,(function(s,n){return e("van-radio",{key:n,class:["subject-option",t.canDo?"":t.checkAnswer(n,t.itemdata),{active:n===t.currentItem},{"van-checked__right":t.itemdata.answer?t.itemdata.answer[0]===n:""},{isRight:t.question.length>0&&t.filterOrder(n).replace(".","")===t.question[0].answer[0]},{isWrong:t.question.length>0&&t.filterOrder(n).replace(".","")===t.question[0].response[0]&&t.question[0].response[0]!==t.question[0].answer[0]}],attrs:{name:n,disabled:!t.disabledData}},[e("i",{staticClass:"iconfont icon-cuowu2"}),e("i",{staticClass:"iconfont icon-zhengque1"}),e("i",{staticClass:"iconfont icon-a-Frame34723"}),e("div",{class:["subject-option__content",t.canDo?"":"not-can-do"],domProps:{innerHTML:t._s(s)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}),e("span",{staticClass:"subject-option__order",attrs:{slot:"icon"},slot:"icon"},[t._v("\n          "+t._s(t._f("filterOrder")(n)))])])})),1),t.disabledData?t._e():e("div",{staticClass:"one-questions-analysis"},[e("div",{staticClass:"flex justify-between analysis-answer"},[e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"answer"},[t._v(t._s(t.$t("courseLearning.referenceAnswer"))+"：")]),e("span",{staticClass:"options",staticStyle:{color:"#00B42A"}},[t._v(t._s(t._f("filterAnswer")(t.itemdata.answer)))])]),t.question.length>0&&t.question[0].response[0].length>0||t.testResult.answer&&t.testResult.answer.length>0?e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"answer"},[t._v(t._s(t.$t("courseLearning.selectedAnswer"))+"：")]),e("span",{staticClass:"options"},[t._v(t._s(t.question.length>0?t.question[0].response[0]:t.filterAnswer(t.testResult.answer)))])]):t._e()]),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.score"))+"："+t._s(t.itemdata.testResult?t.itemdata.testResult.score:0)+"\n      ")]):t._e(),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.comment"))+"："+t._s(t.itemdata.testResult?null===t.itemdata.testResult.teacherSay?"--":t.itemdata.testResult.teacherSay:"")+"\n      ")]):t._e(),e("div",{staticClass:"analysis-color"},[e("span",{staticClass:"float-left"},[t._v(t._s(t.$t("courseLearning.analyze"))+"：")]),t.analysis?e("span",{domProps:{innerHTML:t._s(t.analysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("span",{ref:"aiAnalysis"},[t._v(t._s(t.$t("courseLearning.noParsing")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemdata.aiAnalysisEnable,expression:"itemdata.aiAnalysisEnable"}],staticClass:"ai-analysis"},[e("p",{staticClass:"ai-tittle"},[t._v(t._s(t.$t("courseLearning.aiAssistant")))]),e("div",{staticClass:"ai-content"},[e("div",{staticClass:"ai-content-left"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.analysis")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.stopAiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.stopGeneration")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.reGenerate")))])]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[t._v(t._s(t.$t("courseLearning.beGenerating")))])]),t._m(0)])]),t._l(t.getAttachementByType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2)],2),t.isShowFooterShardow()?e("div",{staticClass:"footer-shadow"}):t._e(),t.parentType&&"material"===t.parentType&&!t.disabledData?e("div",{staticClass:"subject-footer"},[e("span",{staticClass:"float-left"},[t._v(t._s(t.$t("courseLearning.analyze"))+"：")]),""!==t.parentTitleAnalysis?e("span",{domProps:{innerHTML:t._s(t.parentTitleAnalysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("span",[t._v(t._s(t.$t("courseLearning.noParsing")))]),t._l(t.getAttachementMaterialType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),t.totalCount===t.reviewedCount?e("div",{staticClass:"submit-footer"},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:function(e){return t.goResults()}}},[t._v(t._s(t.$t("courseLearning.viewResult2")))])],1):t._e()])}),[function(){var t=this._self._c;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"80fd208a",null).exports),q=document.documentElement.clientWidth,M={name:"DetermineType",mixins:[L,f,w,v],components:{attachementPreview:m.a},props:{itemdata:{type:Object,default:function(){}},isCurrent:Boolean,answer:{type:Array,default:function(){return[]}},canDo:{type:Boolean,default:!0},subject:{type:String,default:""},number:{type:Number,default:null},showShadow:{type:String,default:""},exerciseMode:{type:String,default:""},status:{type:String,default:null},exerciseInfo:{type:Object,default:function(){}},analysis:{type:String,default:""},mode:{type:String,default:""},disabledData:{type:Boolean,default:!1},parentTitleAnalysis:{type:String,default:""},parentType:{type:String,default:""},totalCount:{type:Number,default:0},reviewedCount:{type:Number,default:0}},data:function(){return{radio:this.answer[0],currentItem:null,isShowDownIcon:null,isShowUpIcon:!1,myAnswer:"F",question:[],width:q,myRadioAnswer:"T",answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},computed:{stem:{get:function(){return this.itemdata.parentTitle?this.itemdata.parentTitle.stem:this.itemdata.stem}}},mounted:function(){var t;this.canDo&&"exercise"===this.mode&&this.refreshChoice(),this.isShowDownIcon=(null===(t=document.getElementsByClassName("material-icon")[this.number])||void 0===t?void 0:t.childNodes[0].offsetWidth)>234},methods:{choose:function(t){this.currentItem=t,this.$emit("determineChoose",this.radio,this.itemdata)},getAttachementByType:function(t){return this.itemdata.attachments.filter((function(e){return e.module===t}))||[]},getAttachementMaterialType:function(t){return this.itemdata.parentTitle.attachments.filter((function(e){return e.module===t}))||[]},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},goResults:function(){this.$emit("goResults")},getAiAnalysis:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){var s,n,i,r,o,c,l,u,d,p,m,f,w,g,v,_,b,C;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.itemdata.id,n={role:"student",questionId:s,answerRecordId:t.exerciseInfo.id},i=!1,r=[],t.answerData[s]="",t.stopAnswer[s]=!1,o=setInterval((function(){0!==r.length&&(t.stopAnswer[s]&&clearInterval(o),t.answerData[s]+=r.shift(),0===r.length&&i&&(clearInterval(o),t.stopAiExplain=!1,t.anewAiExplain=!0),t.$refs.aiAnalysis.innerHTML=t.answerData[s])}),50),e.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":y.a.state.token},body:JSON.stringify(n)});case 9:c=e.sent,l=c.body.getReader(),u=new TextDecoder,d="";case 13:return e.next=16,l.read();case 16:p=e.sent,m=p.done,f=p.value,w=(d+u.decode(f)).split("\n\n"),g=1,v=Object(h.a)(w);try{for(v.s();!(_=v.n()).done;)b=_.value,g==w.length?d=b:("message"===(C=JSON.parse(b.slice(5))).event&&r.push(C.answer),g++)}catch(t){v.e(t)}finally{v.f()}if(!m){e.next=26;break}return i=!0,e.abrupt("break",28);case 26:e.next=13;break;case 28:case"end":return e.stop()}}),e)})))()},stopAiAnalysis:function(){var t=this.itemdata.id;this.stopAnswer[t]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},N=(s("bffb"),Object(C.a)(M,(function(){var t=this,e=t._self._c;return e("div",[t.itemdata.parentTitle?e("div",{staticClass:"subject-material"},[e("div",{class:["material-stem-nowrap",t.isShowDownIcon?"material-stem":""]},[t.itemdata.parentTitle?e("span",{class:["material-tags"]},[t._v("\n        "+t._s(t.subject)+"\n      ")]):t._e(),e("span",{staticClass:"material-text material-icon",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),e("i",{class:["iconfont","icon-arrow-up",{"show-up-icon":t.isShowDownIcon}],on:{click:t.changeUpIcon}}),e("i",{class:["iconfont","icon-arrow-down",{"show-down-icon":t.isShowUpIcon}],on:{click:t.changeDownIcon}}),t._l(t.getAttachementMaterialType("material"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),e("div",{staticClass:"subject"},[t.itemdata.parentTitle?t._e():e("span",{staticClass:"tags"},[t._v("\n      "+t._s(t.subject)+"\n    ")]),t.itemdata.parentTitle?t._e():e("div",{staticClass:"subject-stem"},[e("span",{staticClass:"serial-number"},[t._v(t._s(t.itemdata.seq)+"、")]),e("div",{staticClass:"subject-stem__content rich-text",domProps:{innerHTML:t._s(t.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]),t.itemdata.parentTitle?e("div",{class:["material-title",{"material-title-weight":t.itemdata.parentTitle}]},[e("span",{staticClass:"serial-number"},[e("span",{staticClass:"material-type"},[t._v("["+t._s(t.$t("courseLearning.determine"))+"] ")]),t._v(" "+t._s(t.itemdata.materialIndex)+"、")]),e("div",{staticClass:"rich-text",domProps:{innerHTML:t._s(t.itemdata.stem)},on:{click:function(e){return t.handleClickImage(e.target.src)}}})]):t._e(),t._l(t.getAttachementByType("stem"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})})),e("van-radio-group",{class:["answer-paper",{convention:"exercise"!==t.mode}],on:{change:t.choose},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("van-radio",{staticClass:"subject-option subject-option--determine",class:[t.canDo?"":t.checkAnswer(1,t.itemdata),{active:1===t.currentItem&&t.disabledData},{"van-checked__right":!(!t.itemdata.answer||1!==t.itemdata.answer[0]||(t.itemdata.testResult.answer&&t.itemdata.testResult.answer[0],0))},{isRight:t.question.length>0&&"T"===t.question[0].answer[0]},{isWrong:t.question.length>0&&"F"!==t.question[0].response[0]&&t.myRadioAnswer!==t.question[0].answer[0]}],attrs:{name:1,disabled:!t.disabledData}},[e("i",{staticClass:"iconfont icon-a-Frame34723"}),e("i",{staticClass:"iconfont icon-cuowu2"}),e("i",{staticClass:"iconfont icon-zhengque1"}),e("div",{staticClass:"subject-option__content"},[t._v(t._s(t.$t("courseLearning.right")))])]),e("van-radio",{staticClass:"subject-option subject-option--determine",class:[t.canDo?"":t.checkAnswer(0,t.itemdata),{active:0===t.currentItem},{"van-checked__right":!(!t.itemdata.answer||0!==t.itemdata.answer[0]||(t.itemdata.testResult.answer&&t.itemdata.testResult.answer[0],0))},{isRight:t.question.length>0&&"F"===t.question[0].answer[0]},{isWrong:t.question.length>0&&"F"===t.question[0].response[0]&&t.myAnswer!==t.question[0].answer[0]}],attrs:{name:0,disabled:!t.disabledData}},[e("i",{staticClass:"iconfont icon-a-Frame34723"}),e("i",{staticClass:"iconfont icon-cuowu2"}),e("i",{staticClass:"iconfont icon-zhengque1"}),e("div",{staticClass:"subject-option__content"},[t._v(t._s(t.$t("courseLearning.wrong")))])])],1),t.disabledData?t._e():e("div",{staticClass:"one-questions-analysis"},[e("div",{staticClass:"flex justify-between analysis-answer"},[e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"answer"},[t._v(t._s(t.$t("courseLearning.referenceAnswer"))+"：")]),t.question.length>0?e("span",{staticClass:"options",staticStyle:{color:"#00B42A"}},[t._v("\n            "+t._s("T"===t.question[0].answer[0]?t.$t("wrongQuestion.right"):t.$t("wrongQuestion.wrong"))+"\n          ")]):t._e(),t.canDo?t._e():e("span",{staticClass:"options",staticStyle:{color:"#00B42A"}},[t._v("\n            "+t._s(1===t.itemdata.answer[0]?t.$t("wrongQuestion.right"):t.$t("wrongQuestion.wrong"))+"\n          ")])]),t.itemdata.testResult.answer&&t.itemdata.testResult.answer.length>0||t.question.length>0?e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"answer"},[t._v(t._s(t.$t("courseLearning.selectedAnswer"))+"：")]),t.question.length>0?e("span",{staticClass:"options"},[t._v("\n            "+t._s("T"===t.question[0].response[0]?t.$t("wrongQuestion.right"):t.$t("wrongQuestion.wrong"))+"\n          ")]):t._e(),t.canDo?t._e():e("span",[e("span",{staticClass:"options"},[t._v(t._s(1===t.itemdata.testResult.answer[0]?t.$t("wrongQuestion.right"):t.$t("wrongQuestion.wrong")))])])]):t._e()]),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.score"))+"："+t._s(t.itemdata.testResult?t.itemdata.testResult.score:0)+"\n      ")]):t._e(),"exam"===t.mode?e("div",{staticClass:"analysis-color mb-8"},[t._v("\n        "+t._s(t.$t("courseLearning.comment"))+"："+t._s(t.itemdata.testResult?null===t.itemdata.testResult.teacherSay?"--":t.itemdata.testResult.teacherSay:"")+"\n      ")]):t._e(),e("div",{staticClass:"analysis-color"},[e("span",{staticClass:"float-left"},[t._v(t._s(t.$t("courseLearning.analyze"))+"：")]),t.analysis?e("span",{domProps:{innerHTML:t._s(t.analysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("span",{ref:"aiAnalysis"},[t._v(t._s(t.$t("courseLearning.noParsing")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemdata.aiAnalysisEnable,expression:"itemdata.aiAnalysisEnable"}],staticClass:"ai-analysis"},[e("p",{staticClass:"ai-tittle"},[t._v(t._s(t.$t("courseLearning.aiAssistant")))]),e("div",{staticClass:"ai-content"},[e("div",{staticClass:"ai-content-left"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.analysis")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.stopAiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.stopGeneration")))])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(e){return t.aiGeneration()}}},[e("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),e("span",{staticClass:"ai-left-text"},[t._v(t._s(t.$t("courseLearning.reGenerate")))])]),e("p",{directives:[{name:"show",rawName:"v-show",value:t.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[t._v(t._s(t.$t("courseLearning.beGenerating")))])]),t._m(0)])]),t._l(t.getAttachementByType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2)],2),t.isShowFooterShardow()?e("div",{staticClass:"footer-shadow"}):t._e(),t.parentType&&"material"===t.parentType&&!t.disabledData?e("div",{staticClass:"subject-footer"},[e("span",{staticClass:"float-left"},[t._v(t._s(t.$t("courseLearning.analyze"))+"：")]),""!==t.parentTitleAnalysis?e("span",{domProps:{innerHTML:t._s(t.parentTitleAnalysis)},on:{click:function(e){return t.handleClickImage(e.target.src)}}}):e("span",[t._v(t._s(t.$t("courseLearning.noParsing")))]),t._l(t.getAttachementMaterialType("analysis"),(function(s){return e("attachement-preview",{key:s.id,attrs:{canLoadPlayer:t.isCurrent,attachment:s}})}))],2):t._e(),t.totalCount===t.reviewedCount?e("div",{staticClass:"submit-footer"},[e("van-button",{staticClass:"submit-footer-btn",style:{width:t.width-20+"px"},attrs:{type:"primary"},on:{click:function(e){return t.goResults()}}},[t._v(t._s(t.$t("courseLearning.viewResult2")))])],1):t._e()])}),[function(){var t=this._self._c;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"055b55e3",null).exports),P=s("63dd"),B=s("2ef0"),F=s.n(B),H=document.documentElement.clientHeight-44,G={name:"ItemBank",components:{fillType:x,essayType:k,headTop:S,choiceType:$,singleChoice:O,determineType:N},props:{info:{type:Array,default:function(){return[]}},answer:{type:Object,default:function(){}},current:{type:Number,default:0},showScore:{type:Boolean,default:!0},canDo:{type:Boolean,default:!0},all:{type:Number,default:0},isWrongMode:{type:Boolean,default:!1},isExercise:{type:Boolean,default:!1},resultShow:{type:Boolean,default:!0},exerciseMode:{type:String,default:""},exerciseInfo:{type:Object,default:function(){}},assessment_id:{type:String,default:""},admission_ticket:{type:String,default:""},mode:{type:String,default:""},type:{type:String,default:""},aiAgentRecordId:{type:String,default:""}},data:function(){return{testData:this.info,testAnswer:this.answer,currentIndex:this.current,height:H,sdkLoaded:!1,reviewedCount:null,status:null,iscando:[],refreshKey:!0,myAnswer:null,touchable:!0,questionIndex:0,question:{},aiAgentSdk:null}},computed:Object(r.a)({},Object(c.e)(["cloudSdkCdn","isLoadedSdk"])),watch:{answer:function(t){this.$emit("update:answer",t)},isWrongMode:function(t){this.currentIndex=this.current-1,this.$refs.swipe.swipeTo(this.current-1,{immediate:!0})},current:function(t,e){var s=Number(t);s-1!==this.currentIndex&&this.$refs.swipe.swipeTo(s-1)},reviewedCount:function(){this.reviewedCount===this.info.length&&this.$emit("reviewedCount")}},created:function(){var t=this;this.cloudSdkCdn||this.setCloudAddress(),this.isLoadedSdk||u()("https://".concat(this.cloudSdkCdn,"/js-sdk-v2/sdk-v1.js?").concat(Date.now()),(function(){t.$store.commit(d.m)})),this.sdkLoaded=!0,this.canDo&&"exercise"===this.mode&&this.info.forEach((function(e,s){t.iscando[s]=t.exerciseInfo.submittedQuestions.filter((function(t){return t.questionId+""===e.id})).length<=0}))},mounted:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.tryInitAIAgentSdk();case 1:case"end":return e.stop()}}),e)})))()},mixins:[P.a],methods:Object(r.a)(Object(r.a)({},Object(c.c)(["setCloudAddress"])),{},{tryInitAIAgentSdk:function(){var t=this;this.aiAgentRecordId&&o.a.meCourseMember({query:{id:this.$route.query.courseId}}).then((function(e){if(e.aiTeacherEnabled){t.aiAgentSdk=t.initAIAgentSdk(t.$store.state.user.aiAgentToken,{domainId:e.aiTeacherDomain,courseId:e.courseId,courseName:e.courseSetTitle,lessonId:t.$route.query.targetId},80,20),e.studyPlanGenerated&&t.aiAgentSdk.setVariable("studyPlanGenerated",!0),t.aiAgentSdk.boot(),t.canDo?t.aiAgentSdk.showReminder({title:"Hi，我是小知老师～",content:"我将在你答题过程中随时为你答疑解惑",duration:5e3}):t.aiAgentSdk.showReminder({title:"战绩新鲜出炉！",content:"别独自琢磨，快找小知老师唠唠，一起解锁答题背后的奥秘～",duration:5e3});var s=document.getElementById("agent-sdk-floating-button");null===s||void 0===s||s.addEventListener("click",Object(i.a)(Object(a.a)().mark((function s(){return Object(a.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.getQuestion();case 2:t.aiAgentSdk.showReminder({title:"遇到问题啦？",content:"小知老师来为你理清解题思路～",buttonContent:"teacher.question",duration:5e3,workflow:{workflow:t.canDo?"teacher.question.idea":"teacher.question.analysis",inputs:{domainId:e.aiTeacherDomain,question:t.question.question}},chatContent:t.question.content});case 3:case"end":return s.stop()}}),s)}))))}}))},getQuestion:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.aiAgentRecordId){e.next=4;break}return e.next=3,o.a.getExerciseQuestion({query:{answerRecordId:t.aiAgentRecordId,questionId:t.info[t.questionIndex].id}});case 3:t.question=e.sent;case 4:case"end":return e.stop()}}),e)})))()},changeSwiper:function(t){var e=this;return Object(i.a)(Object(a.a)().mark((function s(){return Object(a.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e.questionIndex=t,e.aiAgentSdk&&e.aiAgentSdk.hideReminder(),e.currentIndex=t,e.$emit("update:current",t+1),e.$emit("update:slideIndex",t);case 5:case"end":return s.stop()}}),s)})))()},last:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.currentIndex&&t.touchable){e.next=2;break}return e.abrupt("return");case 2:t.$refs.swipe.swipeTo(t.currentIndex-1);case 3:case"end":return e.stop()}}),e)})))()},next:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentIndex!=t.info.length-1&&t.touchable){e.next=2;break}return e.abrupt("return");case 2:t.$refs.swipe.swipeTo(t.currentIndex+1);case 3:case"end":return e.stop()}}),e)})))()},subject:function(t){var e,s="",n=t.type;if(t.parentType)return this.$t("courseLearning.material");switch(n){case"single_choice":e=this.$t("courseLearning.singleChoice");break;case"choice":e=this.$t("courseLearning.choice");break;case"essay":e=this.$t("courseLearning.essay");break;case"uncertain_choice":e=this.$t("courseLearning.uncertainChoice");break;case"determine":e=this.$t("courseLearning.determine");break;case"fill":e=this.$t("courseLearning.fill");break;case"material":e=this.$t("courseLearning.material");break;default:e=""}return s+e},singleChoose:function(t,e){"1"===this.exerciseMode&&(this.touchable=!1,this.submitSingleAnswer(this.numberFormatterCode(t),e)),this.$set(this.testAnswer[e.id],0,t)},choiceChoose:function(t,e){this.$set(this.testAnswer,e.id,t)},changeTouch:function(){this.touchable=!1},determineChoose:function(t,e){"1"===this.exerciseMode&&(this.touchable=!1,this.submitSingleAnswer(this.numberFormatterCode(t,e.type),e)),this.$set(this.testAnswer[e.id],0,Number(t))},submitSingleAnswer:F.a.debounce((function(t,e){var s=this;"choice"!==e.type&&"uncertain_choice"!==e.type||(t=(t=this.numberFormatterCode(t)).sort()),o.a.submitSingleAnswer({query:{id:this.exerciseInfo.id},data:{admission_ticket:this.admission_ticket,assessment_id:this.assessment_id,exerciseMode:this.exerciseMode,section_id:e.sectionId,item_id:e.itemId,question_id:e.id,response:t}}).then((function(t){var e=0===s.current?s.current:s.current-1;s.$refs["submit"+e][0].refreshChoice(t),s.reviewedCount=t.reviewedCount,s.status=t.status,s.myAnswer=t.response,s.touchable=!0,"right"===t.status?(setTimeout((function(){s.next()}),1e3),s.iscando[e]=!1):s.iscando[e]=!1})).catch((function(t){s.touchable=!0,n.a.fail(t.message)}))}),1e3),numberFormatterCode:function(t,e){return Array.isArray(t)?t.map((function(t){return String.fromCharCode(t+65)})):"determine"===e?1===t?String.fromCharCode(84).split(""):String.fromCharCode(70).split(""):String.fromCharCode(t+65).split("")},goResults:function(){this.$emit("goResults")}}),destroyed:function(){this.$store.commit(d.e)}},U=Object(C.a)(G,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"paper-swiper"},[t.testData.length>0&&t.sdkLoaded?e("van-swipe",{ref:"swipe",attrs:{height:t.height,"show-indicators":!1,touchable:t.touchable,loop:!1,duration:100,"lazy-render":!0},on:{change:t.changeSwiper}},t._l(t.info,(function(s,n){return e("van-swipe-item",{key:s.id,class:t.canDo&&t.iscando[n]?"exercise-do":"exercise-analysis",style:{height:t.height+"px"}},[e("div",{ref:"paper".concat(n),refInFor:!0,staticClass:"paper-item"},[e("head-top",{attrs:{all:t.all,"can-do":t.canDo,current:Number(s.seq),subject:t.subject(s),score:"".concat(parseFloat(s.score)),"show-score":t.showScore,exerciseMode:t.exerciseMode,totalCount:t.info.length,reviewedCount:t.reviewedCount?t.reviewedCount:t.exerciseInfo?t.exerciseInfo.reviewedCount:0}}),"ai_personality"===t.type?e("div",{staticClass:"notice"},[e("van-notice-bar",{staticClass:"notice-boreder",attrs:{mode:"closeable",color:"#37393D",scrollable:!1,background:"#edf9f2"},scopedSlots:t._u([{key:"left-icon",fn:function(){return[e("img",{staticClass:"notice-ai-img",attrs:{src:"static/images/AI.png"}})]},proxy:!0}],null,!0)},[e("span",[t._v(t._s(t.$t("courseLearning.exerciseAiTips")))])])],1):t._e(),"single_choice"==s.type?e("single-choice",{key:t.refreshKey,ref:"submit"+n,refInFor:!0,attrs:{itemdata:s,answer:t.testAnswer[s.id],"is-current":t.currentIndex===n,"can-do":t.canDo,cloudSdkCdn:t.cloudSdkCdn,showShadow:t.info[t.info.length-1].id,number:n,status:t.status,subject:t.subject(s),exerciseInfo:t.exerciseInfo,exerciseMode:t.exerciseMode,parentTitleAnalysis:s.parentTitle?s.parentTitle.analysis:"",parentType:s.parentType?s.parentType:"",analysis:s.analysis,"test-result":s.testResult,mode:t.mode,isExercise:t.isExercise,disabledData:"exercise"===t.mode?t.canDo&&t.iscando[n]:t.canDo,totalCount:t.info.length,reviewedCount:t.reviewedCount?t.reviewedCount:t.exerciseInfo?t.exerciseInfo.reviewedCount:0},on:{singleChoose:t.singleChoose,goResults:t.goResults}}):t._e(),"choice"==s.type||"uncertain_choice"==s.type?e("choice-type",{ref:"submit"+n,refInFor:!0,attrs:{itemdata:s,answer:t.testAnswer[s.id],"is-current":t.currentIndex===n,number:n,"can-do":t.canDo,showShadow:t.info[t.info.length-1].id,subject:t.subject(s),exerciseInfo:t.exerciseInfo,exerciseMode:t.exerciseMode,analysis:s.analysis,myAnswer:t.myAnswer,"test-result":s.testResult,mode:t.mode,parentTitleAnalysis:s.parentTitle?s.parentTitle.analysis:"",parentType:s.parentType?s.parentType:"",disabledData:"exercise"===t.mode?t.canDo&&t.iscando[n]:t.canDo,totalCount:t.info.length,reviewedCount:t.reviewedCount?t.reviewedCount:t.exerciseInfo?t.exerciseInfo.reviewedCount:0},on:{choiceChoose:t.choiceChoose,submitSingleAnswer:t.submitSingleAnswer,changeTouch:t.changeTouch,goResults:t.goResults}}):t._e(),"determine"==s.type?e("determine-type",{ref:"submit"+n,refInFor:!0,attrs:{itemdata:s,answer:t.testAnswer[s.id],"is-current":t.currentIndex===n,number:n,"can-do":t.canDo,showShadow:t.info[t.info.length-1].id,subject:t.subject(s),status:t.status,exerciseMode:t.exerciseMode,exerciseInfo:t.exerciseInfo,analysis:s.analysis,mode:t.mode,parentTitleAnalysis:s.parentTitle?s.parentTitle.analysis:"",parentType:s.parentType?s.parentType:"",disabledData:"exercise"===t.mode?t.canDo&&t.iscando[n]:t.canDo,totalCount:t.info.length,reviewedCount:t.reviewedCount?t.reviewedCount:t.exerciseInfo?t.exerciseInfo.reviewedCount:0},on:{determineChoose:t.determineChoose,goResults:t.goResults}}):t._e(),"essay"==s.type?e("essay-type",{ref:"submit"+n,refInFor:!0,attrs:{itemdata:s,answer:t.testAnswer[s.id],"can-do":t.canDo,showShadow:t.info[t.info.length-1].id,"is-current":t.currentIndex===n,number:n,mode:t.mode,parentTitleAnalysis:s.parentTitle?s.parentTitle.analysis:"",parentType:s.parentType?s.parentType:"",exerciseMode:t.exerciseMode,subject:t.subject(s),analysis:s.analysis,exerciseInfo:t.exerciseInfo,disabledData:"exercise"===t.mode?t.canDo&&t.iscando[n]:t.canDo,totalCount:t.info.length,reviewedCount:t.reviewedCount?t.reviewedCount:t.exerciseInfo?t.exerciseInfo.reviewedCount:0},on:{submitSingleAnswer:t.submitSingleAnswer,goResults:t.goResults,changeTouch:t.changeTouch}}):t._e(),"fill"==s.type?e("fill-type",{ref:"submit"+n,refInFor:!0,attrs:{itemdata:s,answer:t.testAnswer[s.id],"can-do":t.canDo,showShadow:t.info[t.info.length-1].id,"is-current":t.currentIndex===n,number:n,mode:t.mode,parentTitleAnalysis:s.parentTitle?s.parentTitle.analysis:"",parentType:s.parentType?s.parentType:"",subject:t.subject(s),exerciseMode:t.exerciseMode,exerciseInfo:t.exerciseInfo,analysis:s.analysis,disabledData:"exercise"===t.mode?t.canDo&&t.iscando[n]:t.canDo,totalCount:t.info.length,reviewedCount:t.reviewedCount?t.reviewedCount:t.exerciseInfo?t.exerciseInfo.reviewedCount:0},on:{submitSingleAnswer:t.submitSingleAnswer,goResults:t.goResults,changeTouch:t.changeTouch}}):t._e()],1)])})),1):t._e(),e("div",[e("div",{class:["left-slide__btn",0==t.currentIndex?"slide-disabled":""],on:{click:function(e){return t.last()}}},[e("i",{staticClass:"iconfont icon-arrow-left"})]),e("div",{class:["right-slide__btn",t.currentIndex==t.info.length-1?"slide-disabled":""],on:{click:function(e){return t.next()}}},[e("i",{staticClass:"iconfont icon-arrow-right"})])])],1)}),[],!1,null,null,null);e.a=U.exports}}]);