(window.webpackJsonp=window.webpackJsonp||[]).push([["webView"],{"07b4":function(t,e,i){"use strict";i("8e6e"),i("ac6a"),i("456d"),i("e7e5");var n=i("d399"),r=i("bd86"),s=i("3ce7"),o=i("2164"),a=i("2f62"),c=i("faa5");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(r.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={name:"finish-dialog",mixins:[o.a],inject:["reload"],data:function(){return{show:!0,path:""}},props:{finishResult:{type:Object,default:function(){return{}}},courseId:{type:String,default:""}},computed:l(l({},Object(a.e)("course",{allTask:function(t){return t.allTask}})),{},{rate:function(){return this.finishResult?"".concat(parseInt(this.finishResult.completionRate),"%"):"0%"},title:function(){return this.finishResult?this.allTask[this.finishResult.result.courseTaskId].title:""}}),created:function(){this.path=this.$route.path},methods:l(l({},Object(a.d)("course",{setSourceType:c.A})),{},{goNextTask:function(){var t=this;if(!this.finishResult.nextTask)return Object(n.a)("没有下一课"),void(this.show=!1);var e={courseId:this.courseId,taskId:this.finishResult.nextTask.id};s.a.getCourseData({query:e}).then((function(e){t.toLearnTask(e)}))},toLearnTask:function(t){if("create"!==t.status){var e={id:t.id};this.$store.commit("course/".concat(c.i),{nextTask:e}),this.showTypeDetail(t),this.show=!1,this.setSourceType({sourceType:"img",taskId:t.id})}else Object(n.a)("课时创建中，敬请期待")},showTypeDetail:function(t){if("published"===t.status)switch(t.type){case"video":this.playVedio(t);break;case"audio":this.playAudio(t);break;case"text":case"ppt":case"doc":this.$router.push({name:"course_web",query:{courseId:this.courseId,taskId:t.id,type:t.type,backUrl:"/course/".concat(this.courseId)}}),this.reload();break;case"live":var e=!1;if(new Date>new Date(1e3*t.endTime)){if(t.activity&&"videoGenerated"===t.activity.replayStatus)return void("self"===t.mediaSource?this.setSourceType({sourceType:"video",taskId:t.id}):this.copyPcUrl(t.courseUrl));if(t.activity&&"ungenerated"===t.activity.replayStatus)return void Object(n.a)("暂无回放");e=!0}this.$router.push({name:"live",query:{courseId:this.courseId,taskId:t.id,type:t.type,title:t.title,replay:e}});break;case"testpaper":var i=t.activity.testpaperInfo.testpaperId;this.$router.push({name:"testpaperIntro",query:{testId:i,targetId:t.id}});break;case"homework":this.$router.push({name:"homeworkIntro",query:{courseId:this.courseId,taskId:t.id}});break;case"exercise":this.$router.push({name:"exerciseIntro",query:{courseId:this.courseId,taskId:t.id}});break;default:this.copyPcUrl(t.courseUrl)}else Object(n.a)("敬请期待")},playVedio:function(t){if("self"===t.mediaSource){var e="/course/".concat(this.courseId);this.$route.path===e?this.setSourceType({sourceType:"video",taskId:t.id}):this.$router.push({path:e,query:{sourceType:"video",taskId:t.id}})}else this.copyPcUrl(t.courseUrl)},playAudio:function(t){var e="/course/".concat(this.courseId);this.$route.path===e?this.setSourceType({sourceType:"audio",taskId:t.id}):this.$router.push({path:e,query:{sourceType:"audio",taskId:t.id}})},closeFinishDialog:function(){this.show=!1,this.$emit("closeFinishDialog")}})},h=i("a6c2"),p=Object(h.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-overlay",{attrs:{show:t.show,"z-index":9999}},[i("div",{staticClass:"finish-dialog "},[i("div",{staticClass:"finish-dialog-content clearfix"},[i("div",{staticClass:"finish-dialog-top"},[i("img",{staticClass:"finish-dialog-img",attrs:{src:"static/images/reportDialog.png"}}),i("div",{staticClass:"finish-dialog-top--text"},[t._v(t._s(t.$t("courseLearning.learningCompletion")))])]),i("div",{staticClass:"finish-dialog-close",on:{click:t.closeFinishDialog}},[i("i",{staticClass:"iconfont icon-guanbi"})]),i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"progress-bar__content"},[i("div",{staticClass:"progress-bar__rate",style:{width:t.rate}})]),i("div",{staticClass:"progress-bar__text"},[t._v(t._s(t.rate))])]),i("p",{staticClass:"finish-dialog-text"},[t._v(t._s(t.$t("courseLearning.congratulationsOnCompletion")))]),[i("p",{staticClass:"text-overflow"},[t._v(t._s(t.title))]),i("div",{staticClass:"finish-dialog-btn",on:{click:t.goNextTask}},[t._v(t._s(t.$t("courseLearning.nextLesson")))])]],2)])])}),[],!1,null,null,null);e.a=p.exports},2164:function(t,e,i){"use strict";i("e17f");var n=i("2241");e.a={methods:{copyPcUrl:function(t){var e=this,i="暂不支持此类课程学习，请移步至APP或电脑「".concat(t,"」完成课程。");n.a.alert({title:"暂不支持",message:i,messageAlign:"left",confirmButtonText:"复制链接"}).then((function(){e.$copyText(t).then((function(t){console.log(t)}))}))}}}},"23f2":function(t,e,i){"use strict";i.r(e),i("8e6e"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("e7e5");var n=i("d399"),r=(i("96cf"),i("3b8d")),s=i("bd86"),o=i("32e6"),a=i.n(o),c=i("3ce7"),u=i("2f62"),l=i("faa5"),d=i("c8a5"),h=i("07b4"),p=i("7c97"),f=i("e13e"),v=i("63dd");function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var k={components:{finishDialog:h.a,OutFocusMask:p.a},mixins:[d.a,v.a],data:function(){return{finishCondition:void 0,enableFinish:!1,media:"",isPreview:this.$route.query.preview,finishResult:null,finishDialog:!1,courseId:null,taskId:null,type:null,player:null}},computed:g(g(g({},Object(u.e)(["cloudSdkCdn"])),Object(u.e)("course",{details:function(t){return t.details},joinStatus:function(t){return t.joinStatus}})),Object(u.e)({isLoading:function(t){return t.isLoading}})),created:function(){this.courseId=this.$route.query.courseId,this.taskId=this.$route.query.taskId,this.type=this.$route.query.type},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initData(),t.tryInitAIAgentSdk();case 2:case"end":return e.stop()}}),e)})))()},methods:g(g(g({},Object(u.c)(["setCloudAddress"])),Object(u.d)({setNavbarTitle:l.x})),{},{tryInitAIAgentSdk:function(){var t=this;c.a.meCourseMember({query:{id:this.$route.query.courseId}}).then((function(e){if(e.aiTeacherEnabled){var i=t.initAIAgentSdk(t.$store.state.user.aiAgentToken,{domainId:e.aiTeacherDomain,courseId:e.courseId,courseName:e.courseSetTitle},60,null,null,!0);e.studyPlanGenerated&&i.removeShortcut("plan.create")}}))},initData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.joinStatus&&t.initReport(),t.enableFinish=!!parseInt(t.details.enableFinish),e.next=4,c.a.getMedia(t.getParams()).catch((function(t){return Object(n.a)(t.message),Promise.reject(t)}));case 4:i=e.sent,["ppt","doc"].includes(t.media)?t.initPlayer(i):t.$refs.text.innerHTML=i.media.content;case 6:case"end":return e.stop()}}),e)})))()},initReport:function(){this.initReportData(this.courseId,this.taskId,this.type),this.finishDialog=!1,this.getFinishCondition()},getFinishCondition:function(){var t=this;this.getCourseData(this.courseId,this.taskId).then((function(e){t.setNavbarTitle(e.title),t.finishCondition=e.activity&&e.activity.finishCondition}))},toToast:function(){var t=this.finishCondition;if(t){var e="";if("time"===t.type){var i=Math.ceil((60*t.data-this.learnedTime)/60);e=i>0?"\n剩余 ".concat(i," 分完成"):"\n恭喜！你已完成该任务"}this.$toast({message:"完成条件：".concat(t.text).concat(e),position:"bottom"})}},getParams:function(){var t=this.$route.query,e=t.courseId,i=t.taskId,n=t.type,r=!this.joinStatus&&this.isPreview;return this.media=n,r?{query:{courseId:e,taskId:i},params:{preview:1,version:"escloud"}}:{query:{courseId:e,taskId:i},params:{version:"escloud"}}},initPlayer:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function i(){var n,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.media,e.cloudSdkCdn){i.next=4;break}return i.next=4,e.setCloudAddress();case 4:s="//".concat(e.cloudSdkCdn,"/js-sdk-v2/sdk-v1.js?")+~~(Date.now()/1e3/60),a()(s,function(){var i=Object(r.a)(regeneratorRuntime.mark((function i(r){var s,o,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r){i.next=2;break}throw r;case 2:return s={id:"player",resNo:n.resNo,token:n.token,source:{type:t.mediaType,args:n}},i.next=5,Object(f.b)();case 5:(o=i.sent).text&&(s.fingerprint={html:o.text,color:o.color,alpha:o.alpha}),Object(f.a)(),a=new window.QiQiuYun.Player(s),e.player=a,a.on("ready",(function(){})),a.on("pagechanged",(function(t){t.page===t.total&&e.finishCondition&&"end"===e.finishCondition.type&&e.reprtData({eventName:"finish"})}));case 12:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}());case 6:case"end":return i.stop()}}),i)})))()},toLearned:function(){var t=this;this.reprtData({eventName:"finish"}).then((function(e){t.finishResult=e,t.finishDialog=!0}))},reloadPage:function(t){this.courseId=t.courseId,this.taskId=t.taskId,this.type=t.type,this.initData()}})},y=i("a6c2"),b=Object(y.a)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"web-view"},[i("out-focus-mask",{attrs:{type:t.outFocusMaskType,isShow:t.isShowOutFocusMask,reportType:t.reportType},on:{outFocusMask:t.outFocusMask}}),t.isLoading?i("e-loading"):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.media,expression:"media !== 'text'"}],attrs:{id:"player"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"text"===t.media,expression:"media === 'text'"}],ref:"text",staticClass:"media-text"}),t.joinStatus?[t.isFinish?i("div",{staticClass:"web-view--btn web-view--activebtn"},[i("i",{staticClass:"iconfont icon-markdone"}),t._v("\n      学过了\n    ")]):t._e(),t.isFinish?t._e():i("div",[t.enableFinish?i("div",{staticClass:"web-view--btn",on:{click:t.toLearned}},[t._v("\n        学过了\n      ")]):t._e(),t.enableFinish?t._e():i("div",{staticClass:"web-view--btn",on:{click:t.toToast}},[t._v("\n        完成条件\n      ")])])]:t._e(),t.finishDialog?i("finishDialog",{attrs:{finishResult:t.finishResult,courseId:t.courseId},on:{reloadPage:t.reloadPage}}):t._e()],2)}),[],!1,null,null,null);e.default=b.exports},"32e6":function(t,e){function i(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function n(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}t.exports=function(t,e,r){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof e&&(r=e,e={}),e=e||{},r=r||function(){},o.type=e.type||"text/javascript",o.charset=e.charset||"utf8",o.async=!("async"in e)||!!e.async,o.src=t,e.attrs&&function(t,e){for(var i in e)t.setAttribute(i,e[i])}(o,e.attrs),e.text&&(o.text=""+e.text),("onload"in o?i:n)(o,r),o.onload||i(o,r),s.appendChild(o)}},"63dd":function(t,e,i){"use strict";i("4917"),e.a={methods:{initAIAgentSdk:function(t,e,i,n){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=new window.AgentSDK({token:t,uiIframeSrc:"".concat(window.location.origin,"/static-dist/libs/agent-web-sdk/ui/index.html"),signalServerUrl:"wss://test-ai-signal.edusoho.cn/",bottom:i,right:n,preventDefault:s,draggable:o});return a.addShortcut("plan.create",{name:"制定学习计划",icon:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M1.66665 6.33301H14.3333V13.6663C14.3333 14.0345 14.0348 14.333 13.6666 14.333H2.33332C1.96513 14.333 1.66665 14.0345 1.66665 13.6663V6.33301Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M1.66665 3.33366C1.66665 2.96547 1.96513 2.66699 2.33332 2.66699H13.6666C14.0348 2.66699 14.3333 2.96547 14.3333 3.33366V6.33366H1.66665V3.33366Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M5.33335 10.333L7.33335 12.333L11.3334 8.33301" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.33335 1.66699V4.33366" stroke="#333333" stroke-linecap="round"/>\n<path d="M10.6666 1.66699V4.33366" stroke="#333333" stroke-linecap="round"/>\n</svg>',type:"Send",data:{content:"制定学习计划"}}),e.workerUrl="".concat(window.location.origin,"/agent_worker"),a.setChatMetadata(e),a.on("clickLink",(function(t){var e=t.match(/\/course\/(\d+)\/task\/(\d+)/);if(e){var i=e[1],n=e[2];r.$router.push({name:"course",params:{id:i}}),r.$nextTick((function(){document.getElementById(n).click()})),a.hideIframe()}else window.open(t,"_blank")})),a.on("generateStudyPlan",(function(){a.removeShortcut("plan.create"),a.addShortcut("plan.check",{name:"查看学习计划",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M13 2H3C2.44772 2 2 2.44772 2 3V13C2 13.5523 2.44772 14 3 14H13C13.5523 14 14 13.5523 14 13V3C14 2.44772 13.5523 2 13 2Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M7.00016 4.33301H4.3335V6.99967H7.00016V4.33301Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M7.00016 9H4.3335V11.6667H7.00016V9Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M9 9.33301H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9 11.667H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9 4.33301H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9 6.66699H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',type:"Send",data:{content:"查看学习计划"}}),a.addShortcut("plan.recreate",{name:"重新制定学习计划",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M12.2426 12.2426C11.1569 13.3284 9.65687 14 8 14C4.6863 14 2 11.3137 2 8C2 4.6863 4.6863 2 8 2C9.65687 2 11.1569 2.67157 12.2426 3.75737C12.7953 4.31003 14 5.66667 14 5.66667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14 2.66699V5.66699H11" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n',type:"Send",data:{content:"重新制定学习计划"}})})),a.boot(),window.aiAgentSdk=a,a}}}},"7c97":function(t,e,i){"use strict";var n={props:{type:{type:String,default:""},isShow:{type:Boolean,default:!1},reportType:{type:String,default:""}},methods:{onKeepLearning:function(t){this.$emit("outFocusMask",t)}}},r=i("a6c2"),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{staticClass:"out-focus-mask"},[i("div",{staticClass:"report-go-back",on:{click:function(e){return t.$router.go(-1)}}},[i("van-icon",{attrs:{name:"arrow-left",size:"25",color:"#43bc60"}})],1),"kick_previous"===t.type?[i("div",{staticClass:"content"},[t._m(0),i("van-button",{attrs:{color:"#43bc60",size:"small"},on:{click:function(e){return t.onKeepLearning("kick_previous")}}},[t._v("\n        继续学习\n      ")])],1)]:t._e(),"reject_current"===t.type?[t._m(1)]:t._e()],2):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[e("p",{staticClass:"kick-each-other"},[this._v("请勿同时多开任务学习")]),e("p",{staticClass:"kick-each-other"},[this._v("不要一心多用哦！")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("div",{staticClass:"tips"},[e("p",{staticClass:"kick-each-other"},[this._v("请勿同时多开任务学习")]),e("p",{staticClass:"kick-each-other"},[this._v("不要一心多用哦！")])])])}],!1,null,null,null);e.a=s.exports},a556:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i("e7e5");var n=i("d399"),r=i("6647"),s=function(t){switch(t){case"course":Object(n.a)(r.a.t("goods.courseClosedToast"));break;case"classroom":Object(n.a)(r.a.t("goods.classroomClosedToast"));break;case"exercise":Object(n.a)(r.a.t("goods.exerciseClosedToast"))}}},c8a5:function(t,e,i){"use strict";i("6762"),i("2fdb");var n=i("3ce7"),r=i("faa5");i("a556"),e.a={data:function(){return{reportIntervalTime:null,reportLearnTime:null,reportFinishCondition:null,reportData:{courseId:null,taskId:null},reportResult:null,isFinish:!1,reportType:null,learnTime:0,isShowOutFocusMask:!1,outFocusMaskType:"",sign:"",record:{},absorbed:0,learnedTime:0}},beforeRouteLeave:function(t,e,i){this.sign.length>0&&localStorage.setItem("flowSign",this.sign),i()},beforeDestroy:function(){this.clearReportIntervalTime(),window.removeEventListener("beforeunload",this.onbeforeunloadFlowSign),this.toggleReportMaskHidden("remove")},methods:{initReportData:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.clearReportIntervalTime(),this.reportData={courseId:t,taskId:e},this.reportType=i,this.isFinish=!1,this.reportIntervalTime=null,this.reportLearnTime=null,this.reportResult=null,this.learnTime=0,this.reportFinishCondition=null,n&&this.initReportEvent(),this.onbeforeunload()},initReportEvent:function(){this.reprtData(),this.intervalReportData(),this.intervalReportLearnTime()},getCourseData:function(t,e){var i=this,r={courseId:t,taskId:e};return new Promise((function(t,e){n.a.getCourseData({query:r}).then((function(e){i.reportFinishCondition=e.activity.finishCondition,t(e)})).catch((function(t){e(t)}))}))},reprtData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventName:"doing",ContinuousReport:!1,watchTime:null};if(null!==this.reportData.courseId&&null!==this.reportData.taskId&&(!this.isFinish||t.ContinuousReport))if(""===this.sign){var e={client:"h5"},i=localStorage.getItem("flowSign");i&&(e.lastSign=i,localStorage.removeItem("flowSign")),this.start(t,e)}else this.reportTaskEvent(t)},start:function(t,e){var i=this;n.a.reportTaskEvent({query:{courseId:this.reportData.courseId,taskId:this.reportData.taskId,eventName:"start"},data:e}).then((function(e){if(i.handleReportResult(e),e.learnControl.allowLearn)i.sign=e.record.flowSign,i.record=e.record,i.reportTaskEvent(t);else{var n=e.learnControl.denyReason;i.reportJudge(n)}}))},reportTaskEvent:function(t){var e=this;if(0!==this.sign.length){var i={client:"h5",sign:this.sign,duration:this.learnTime,status:this.absorbed};if(t.reActive&&(i.reActive=t.reActive),this.sourceType&&"video"===this.sourceType){var r=parseInt(this.nowWatchTime-this.lastWatchTime);this.lastWatchTime=this.nowWatchTime;var s={watchData:{duration:r}};i=Object.assign(i,s)}this.learnTime=0,n.a.reportTaskEvent({query:{courseId:this.reportData.courseId,taskId:this.reportData.taskId,eventName:t.eventName},data:i}).then((function(t){if(e.handleReportResult(t),e.record=t.record,e.absorbed=0,e.sign=t.record.flowSign,!t.learnControl.allowLearn){var i=t.learnControl.denyReason;e.reportJudge(i)}})).catch((function(t){e.clearReportIntervalTime()}))}},handleReportResult:function(t){this.reportResult=t,this.learnedTime=t.learnedTime,t.taskResult&&"finish"===t.taskResult.status?(this.isFinish=!0,this.$store.commit(r.B,"finish"),this.$store.commit("course/".concat(r.F),t.completionRate)):this.$store.commit(r.B,"start")},intervalReportLearnTime:function(){var t=this;this.reportLearnTime=setInterval((function(){t.checkoutTime(),t.learnTime++}),1e3)},intervalReportData:function(){var t=this,e=60*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*1e3;this.reportIntervalTime=setInterval((function(){t.reprtData({eventName:"doing",ContinuousReport:!0})}),e)},checkoutTime:function(){this.reportFinishCondition&&["time","watchTime"].includes(this.reportFinishCondition.type)&&parseInt(this.learnTime/60,10)>=parseInt(this.reportFinishCondition.data,10)&&this.reprtData({eventName:"finish",ContinuousReport:!0})},clearReportIntervalTime:function(){clearInterval(this.reportIntervalTime),clearInterval(this.reportLearnTime),this.reportIntervalTime=null,this.reportLearnTime=null},reportJudge:function(t){"kick_previous"===t?this.kickEachOther("kick_previous"):"reject_current"===t&&(this.clearReportIntervalTime(),this.kickEachOther("reject_current"))},outFocusMask:function(t){this.absorbed=1,this.isShowOutFocusMask=!1,!this.player||"video"!==this.reportType&&"audio"!==this.reportType||this.player.play(),this.toggleReportMaskHidden("remove"),this.reprtData({eventName:"doing",ContinuousReport:!0,reActive:1})},kickEachOther:function(t){if(this.absorbed=1,"testpaper"!==this.reportType&&"live"!==this.reportType&&"homework"!==this.reportType||"kick_previous"!==t){if(this.isShowOutFocusMask=!0,this.outFocusMaskType=t,"video"===this.reportType||"audio"===this.reportType){if(this.player&&this.player.destory&&"reject_current"===t)return void this.player.destory();this.player&&this.player.pause&&this.player.pause()}this.toggleReportMaskHidden("add")}},ineffectiveLearning:function(t){this.isShowOutFocusMask||(this.absorbed=0,this.isShowOutFocusMask=!0,this.outFocusMaskType=t,this.player&&"video"===this.reportType&&this.player.pause(),this.reprtData({eventName:"doing",ContinuousReport:!0}))},toggleReportMaskHidden:function(t){"video"!==this.reportType&&"audio"!==this.reportType&&("add"===t?document.getElementsByTagName("body")[0].classList.add("report-mask-hidden"):"remove"===t&&document.getElementsByTagName("body")[0].classList.remove("report-mask-hidden"))},initVisibilitychange:function(){document.addEventListener("visibilitychange",this.visibilityState)},visibilityState:function(){"video"===this.reportType&&("hidden"===document.visibilityState?this.ineffectiveLearning("ineffective_learning"):"visible"===document.visibilityState&&this.player.pause())},onbeforeunload:function(){window.addEventListener("beforeunload",this.onbeforeunloadFlowSign)},onbeforeunloadFlowSign:function(){this.sign.length>0&&localStorage.setItem("flowSign",this.sign)}}}}}]);