(window.webpackJsonp=window.webpackJsonp||[]).push([["binding"],{"4aff":function(t,e,n){},7067:function(t,e,n){"use strict";n("e17f");var i=n("2241"),a=(n("e7e5"),n("d399")),r=n("a026"),o=n("3ce7"),s=/micromessenger/.test(navigator.userAgent.toLowerCase());e.a=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||n&&!e)a.a.fail("缺少分享参数");else{var c={domainUri:location.origin,itemUri:"",source:"h5"};o.a.marketingActivities({query:{activityId:t},data:c}).then((function(t){var o=-1!==t.url.indexOf("?")?"&":"?",c=n?"".concat(e).concat(o,"ticket=").concat(t.ticket):t.url;s?window.location.href=c:i.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{r.default.prototype.$copyText(c).then((function(){a.a.success("复制成功")}),(function(){a.a.fail("请更换浏览器复制")}))}catch(t){a.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(t){a.a.fail(t.message)}))}}},"8e6c":function(t,e,n){"use strict";n("6b54"),n("28a5"),function(t){var e,n;void 0===t.btoa&&(t.btoa=(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),function(t){var n,i,a,r,o,s,c;for(i=a=0,r=t.length,s=(r-=o=r%3)/3<<2,o>0&&(s+=4),n=new Array(s);i<r;)c=t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<8|t.charCodeAt(i++),n[a++]=e[c>>18]+e[c>>12&63]+e[c>>6&63]+e[63&c];return 1==o?(c=t.charCodeAt(i++),n[a++]="".concat(e[c>>2]+e[(3&c)<<4],"==")):2==o&&(c=t.charCodeAt(i++)<<8|t.charCodeAt(i++),n[a++]="".concat(e[c>>10]+e[c>>4&63]+e[(15&c)<<2],"=")),n.join("")})),void 0===t.atob&&(t.atob=(n=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],function(t){var e,i,a,r,o,s,c,d,u,l;if((c=t.length)%4!=0)return"";if(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\+\/\=]/.test(t))return"";for(u=c,(d="="==t.charAt(c-2)?1:"="==t.charAt(c-1)?2:0)>0&&(u-=4),u=3*(u>>2)+d,l=new Array(u),o=s=0;o<c&&-1!=(e=n[t.charCodeAt(o++)])&&-1!=(i=n[t.charCodeAt(o++)])&&(l[s++]=String.fromCharCode(e<<2|(48&i)>>4),-1!=(a=n[t.charCodeAt(o++)]))&&(l[s++]=String.fromCharCode((15&i)<<4|(60&a)>>2),-1!=(r=n[t.charCodeAt(o++)]));)l[s++]=String.fromCharCode((3&a)<<6|r);return l.join("")}));var i=2654435769;function a(t,e){var n=t.length,i=n<<2;if(e){var a=t[n-1];if(a<(i-=4)-3||a>i)return null;i=a}for(var r=0;r<n;r++)t[r]=String.fromCharCode(255&t[r],t[r]>>>8&255,t[r]>>>16&255,t[r]>>>24&255);var o=t.join("");return e?o.substring(0,i):o}function r(t,e){var n,i=t.length,a=i>>2;0!=(3&i)&&++a,e?(n=new Array(a+1))[a]=i:n=new Array(a);for(var r=0;r<i;++r)n[r>>2]|=t.charCodeAt(r)<<((3&r)<<3);return n}function o(t){return 4294967295&t}function s(t,e,n,i,a,r){return(n>>>5^e<<2)+(e>>>3^n<<4)^(t^e)+(r[3&i^a]^n)}function c(t){return t.length<4&&(t.length=4),t}function d(t){if(/^[\x00-\x7f]*$/.test(t))return t;for(var e=[],n=t.length,i=0,a=0;i<n;++i,++a){var r=t.charCodeAt(i);if(r<128)e[a]=t.charAt(i);else if(r<2048)e[a]=String.fromCharCode(192|r>>6,128|63&r);else{if(!(r<55296||r>57343)){if(i+1<n){var o=t.charCodeAt(i+1);if(r<56320&&o>=56320&&o<=57343){var s=65536+((1023&r)<<10|1023&o);e[a]=String.fromCharCode(240|s>>18&63,128|s>>12&63,128|s>>6&63,128|63&s),++i;continue}}throw new Error("Malformed string")}e[a]=String.fromCharCode(224|r>>12,128|r>>6&63,128|63&r)}}return e.join("")}function u(t,e){return(void 0===e||null===e||e<0)&&(e=t.length),0===e?"":/^[\x00-\x7f]*$/.test(t)||!/^[\x00-\xff]*$/.test(t)?e===t.length?t:t.substr(0,e):e<65535?function(t,e){for(var n=new Array(e),i=0,a=0,r=t.length;i<e&&a<r;i++){var o=t.charCodeAt(a++);switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[i]=o;break;case 12:case 13:if(!(a<r))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(31&o)<<6|63&t.charCodeAt(a++);break;case 14:if(!(a+1<r))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(15&o)<<12|(63&t.charCodeAt(a++))<<6|63&t.charCodeAt(a++);break;case 15:if(!(a+2<r))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&o)<<18|(63&t.charCodeAt(a++))<<12|(63&t.charCodeAt(a++))<<6|63&t.charCodeAt(a++))-65536;if(!(s>=0&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x".concat(s.toString(16)));n[i++]=s>>10&1023|55296,n[i]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x".concat(o.toString(16)))}}return i<e&&(n.length=i),String.fromCharCode.apply(String,n)}(t,e):function(t,e){for(var n=[],i=new Array(32768),a=0,r=0,o=t.length;a<e&&r<o;a++){var s=t.charCodeAt(r++);switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i[a]=s;break;case 12:case 13:if(!(r<o))throw new Error("Unfinished UTF-8 octet sequence");i[a]=(31&s)<<6|63&t.charCodeAt(r++);break;case 14:if(!(r+1<o))throw new Error("Unfinished UTF-8 octet sequence");i[a]=(15&s)<<12|(63&t.charCodeAt(r++))<<6|63&t.charCodeAt(r++);break;case 15:if(!(r+2<o))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&s)<<18|(63&t.charCodeAt(r++))<<12|(63&t.charCodeAt(r++))<<6|63&t.charCodeAt(r++))-65536;if(!(c>=0&&c<=1048575))throw new Error("Character outside valid Unicode range: 0x".concat(c.toString(16)));i[a++]=c>>10&1023|55296,i[a]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x".concat(s.toString(16)))}if(a>=32766){var d=a+1;i.length=d,n[n.length]=String.fromCharCode.apply(String,i),e-=d,a=-1}}return a>0&&(i.length=a,n[n.length]=String.fromCharCode.apply(String,i)),n.join("")}(t,e)}function l(t,e){return void 0===t||null===t||0===t.length?t:(t=d(t),e=d(e),a(function(t,e){var n,a,r,c,d,u,l=t.length,h=l-1;for(a=t[h],r=0,u=0|Math.floor(6+52/l);u>0;--u){for(c=(r=o(r+i))>>>2&3,d=0;d<h;++d)n=t[d+1],a=t[d]=o(t[d]+s(r,n,a,d,c,e));n=t[0],a=t[h]=o(t[h]+s(r,n,a,h,c,e))}return t}(r(t,!0),c(r(e,!1))),!1))}function h(t,e){return void 0===t||null===t||0===t.length?t:(e=d(e),u(a(function(t,e){var n,a,r,c,d,u=t.length,l=u-1;for(n=t[0],r=o(Math.floor(6+52/u)*i);0!==r;r=o(r-i)){for(c=r>>>2&3,d=l;d>0;--d)a=t[d-1],n=t[d]=o(t[d]-s(r,n,a,d,c,e));a=t[l],n=t[0]=o(t[0]-s(r,n,a,0,c,e))}return t}(r(t,!1),c(r(e,!1))),!0)))}t.XXTEA={utf8Encode:d,utf8Decode:u,encrypt:l,encryptToBase64:function(e,n){return t.btoa(l(e,n))},decrypt:h,decryptFromBase64:function(e,n){return void 0===e||null===e||0===e.length?e:h(t.atob(e),n)}}}(window)},a262:function(t,e,n){"use strict";var i=n("7067");e.a={methods:{activityHandle:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(t,e,n)}}}},a519:function(t,e,n){"use strict";n.r(e),n("a481"),n("e7e5");var i=n("d399"),a=(n("e17f"),n("2241")),r=n("db72"),o=n("a262"),s=n("d863"),c=n("2f62"),d=n("f13d"),u=n("faa5"),l=(n("8e6c"),n("7185")),h={mixins:[o.a,s.a],components:{EDrag:d.a},data:function(){return{bindingInfo:{mobile:"",smsToken:"",dragCaptchaToken:void 0,type:"register"},dragEnable:!1,dragKey:0,errorMessage:{mobile:""},validated:{mobile:!1},count:{showCount:!1,num:120,codeBtnDisable:!1},submitLoading:!1,sendSmsLoading:!1,isShowDialog:!1}},computed:Object(r.a)(Object(r.a)({},Object(c.e)({isLoading:function(t){return t.isLoading},mobileBind:function(t){return t.mobile_bind}})),{},{btnDisable:function(){return!this.bindingInfo.mobile||!this.bindingInfo.smsCode}}),methods:Object(r.a)(Object(r.a)(Object(r.a)({},Object(c.c)(["addUser","setMobile","sendSmsCenter","userLogin"])),Object(c.d)([u.w])),{},{validateMobileOrPsw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile",e=this.bindingInfo[t],n=l.a[t];return 0==e.length?(this.errorMessage[t]="",!1):"encrypt_password"===t&&e.length>20?(this.errorMessage[t]="最大输入20个字符",!1):void(this.errorMessage[t]=n.validator(e)?"":n.message)},validatedChecker:function(){var t=this.bindingInfo.mobile,e=l.a.mobile;this.validated.mobile=e.validator(t)},showDialog:function(){a.a.alert({title:"手机号已绑定，请更换手机号",confirmButtonText:"我知道了",confirmButtonColor:"#03C777",messageAlign:"left",message:"手机号已被绑定，如何处理？\n\n1、PC端登录原有手机号修改绑定手机号。\n2、原有手机号注销。\n3、如以上均不能处理，可联系网校管理员。"})},handleSmsSuccess:function(t){this.bindingInfo.dragCaptchaToken=t,this.handleSendSms()},handleSubmit:function(){var t=this,e=this.bindingInfo,n=e.mobile,a=e.smsCode,r=e.smsToken;this.submitLoading=!0,this.setMobile({query:{mobile:n},data:{smsCode:a,smsToken:r}}).then((function(e){i.a.success({duration:2e3,message:"绑定成功"}),t[u.w]({is_bind_mobile:!0}),t.afterLogin()})).catch((function(t){i.a.fail(t.message)})).finally((function(){t.submitLoading=!1}))},clickSmsBtn:function(){this.dragEnable?this.$refs.dragComponent.dragToEnd?this.$refs.dragComponent.initDragCaptcha():Object(i.a)(this.$t("toast.pleaseCompleteThePuzzleVerification")):this.handleSendSms()},handleSendSms:function(){var t=this;this.sendSmsLoading=!0,this.sendSmsCenter(this.bindingInfo).then((function(e){t.bindingInfo.smsToken=e.smsToken,t.countDown()})).catch((function(e){switch(e.code){case 4030301:case 4030302:t.dragKey++,t.bindingInfo.dragCaptchaToken="",t.bindingInfo.smsToken="",i.a.fail(e.message);break;case 4030107:t.showDialog();break;case 4030303:t.dragEnable?i.a.fail(e.message):t.dragEnable=!0;break;default:i.a.fail(e.message)}})).finally((function(){t.sendSmsLoading=!1}))},countDown:function(){var t=this;this.count.showCount=!0,this.count.codeBtnDisable=!0,this.count.num=120;var e=setInterval((function(){if(t.count.num<=0)return t.count.codeBtnDisable=!1,t.count.showCount=!1,void clearInterval(e);t.count.num--}),1e3)},mobileBindSkip:function(){var t=this.$route.query.redirect;t=t||"/",window.localStorage.setItem("mobile_bind_skip","1"),this.$router.replace({path:t})}})},f=(n("e0e2"),n("2877")),g=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"register mobile-binding"},[t.isLoading?e("e-loading"):t._e(),e("span",{staticClass:"register-title"},[t._v("绑定手机")]),e("van-field",{attrs:{border:!1,"error-message":t.errorMessage.mobile,placeholder:"请输入手机号","max-length":"11"},on:{blur:function(e){return t.validateMobileOrPsw("mobile")},keyup:function(e){return t.validatedChecker()}},model:{value:t.bindingInfo.mobile,callback:function(e){t.$set(t.bindingInfo,"mobile",e)},expression:"bindingInfo.mobile"}}),t.dragEnable?e("e-drag",{key:t.dragKey,ref:"dragComponent",on:{success:t.handleSmsSuccess}}):t._e(),e("van-field",{attrs:{border:!1,type:"text",center:"",clearable:"","max-length":"6",placeholder:"请输入验证码"},model:{value:t.bindingInfo.smsCode,callback:function(e){t.$set(t.bindingInfo,"smsCode",e)},expression:"bindingInfo.smsCode"}},[e("van-button",{attrs:{slot:"button",disabled:t.count.codeBtnDisable||!t.validated.mobile,loading:t.sendSmsLoading,"loading-text":"发送验证码中...",size:"small",type:"primary"},on:{click:t.clickSmsBtn},slot:"button"},[t._v("\n      发送验证码\n      "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.count.showCount,expression:"count.showCount"}]},[t._v("("+t._s(t.count.num)+")")])])],1),e("div",{staticClass:"binding-btn w-full"},[e("van-button",{staticClass:"primary-btn mb32 w-full",attrs:{disabled:t.btnDisable,type:"primary",loading:t.submitLoading,"loading-text":"绑定中..."},on:{click:t.handleSubmit}},[t._v("确认绑定")])],1),"option"===t.mobileBind.mobile_bind_mode?e("div",{staticClass:"mobile-bindding__skipping"},[e("span",{on:{click:t.mobileBindSkip}},[t._v("跳过")])]):t._e(),e("div",{staticClass:"binding-tip"},[t._v("绑定手机号的三大理由")]),t._m(0)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"binding-reasons"},[t("div",{staticClass:"binding-reasons__item"},[this._v("\n      1、网信办规定，互联网注册用户要提供基于移动电话号码等真实身份。\n    ")]),t("div",{staticClass:"binding-reasons__item"},[this._v("\n      2、第三方登录出现故障是，仍能用手机号顺利登录，课程学习不受影响。\n    ")]),t("div",{staticClass:"binding-reasons__item"},[this._v("\n      3、即使您忘记了第三方帐号的密码，仍能使用绑定的手机号和密码登录。\n    ")])])}],!1,null,"8edbd42c",null);e.default=g.exports},d863:function(t,e,n){"use strict";n("a481");var i=n("db72"),a=n("7067"),r=n("3ce7"),o=n("faa5"),s=n("2f62");e.a={data:function(){return{redirect:""}},computed:Object(i.a)({},Object(s.e)({user:function(t){return t.user}})),created:function(){this.redirect=decodeURIComponent(this.$route.fullPath)},methods:Object(i.a)(Object(i.a)({},Object(s.d)([o.w])),{},{afterLogin:function(){var t=this;this.checkMobileBind().then((function(e){var n=e.is_bind_mobile,i=e.mobile_bind_mode;t[o.w]({is_bind_mobile:n,mobile_bind_mode:i}),n||"closed"===i?setTimeout(t.jumpAction,1e3):t.$router.replace({name:"binding",query:{redirect:t.$route.query.redirect}})})).catch((function(){setTimeout(t.jumpAction,1e3)}))},jumpAction:function(){var t=this.$route.query.redirect?decodeURIComponent(this.$route.query.redirect):"/",e=this.$route.query.skipUrl?decodeURIComponent(this.$route.query.skipUrl):"",n=this.$route.query.callbackType,i=this.$route.query.activityId,r=decodeURIComponent(this.$route.query.callback);if(n)switch(n){case"marketing":Object(a.a)(i,r)}else e?this.$router.replace({path:t,query:{backUrl:e}}):this.$router.replace({path:t})},checkMobileBind:function(){return r.a.mobileBindCheck({query:{userId:this.user.id}})},upgradePassword:function(){this.$router.replace({name:"password_reset",query:{upgradePassword:1}})}})}},e0e2:function(t,e,n){"use strict";n("4aff")},f13d:function(t,e,n){"use strict";var i=n("75fc"),a=(n("e7e5"),n("d399")),r=n("db72"),o=(n("c5f6"),n("3ce7")),s={props:{tips:{type:String,default:"placeholder.dragTheSliderToCompleteThePuzzle"},limitType:{type:String,default:""}},data:function(){return{imgInfo:{url:"",jigsaw:"",token:""},dragState:{left:0,width:0,currentX:0,currentLeft:0,btnWidth:0,maskWidth:0},dragToEnd:!1}},created:function(){this.initDragCaptcha()},mounted:function(){var t=this.$refs.bar,e=this.$refs.dragBtn,n=t.getBoundingClientRect();Object.assign(this.dragState,{left:Number(n.left.toFixed(2)),width:t.clientWidth,btnWidth:e.offsetWidth/2})},methods:{initDragCaptcha:function(){var t=this,e={};this.limitType&&(e={limitType:this.limitType}),o.a.dragCaptcha({data:e}).then((function(e){t.imgInfo=Object(r.a)({},e),Object.assign(t.dragState,{currentLeft:0,maskWidth:0}),t.dragToEnd=!1})).catch((function(t){a.a.fail(t.message)}))},handletTouchEnd:function(){var t=this;if(!this.dragToEnd&&this.dragState.currentLeft){var e=this.getToken();this.dragToEnd=!0,o.a.dragValidate({query:{token:e}}).then((function(n){a.a.success(t.$t("e.verificationSuccess")),t.$emit("success",e)})).catch((function(e){a.a.fail(e.message),t.initDragCaptcha()}))}},handleTouchMove:function(t){if(!this.dragToEnd){t.preventDefault();var e=this.$refs.dragBtn,n=this.dragState,i=t.clientX?t.clientX.toFixed(2):t.targetTouches[0].pageX.toFixed(2)-this.$refs.drag.offsetLeft,a=(i-n.left-n.btnWidth).toFixed(2);a<0&&(a=0),i>n.width+this.$refs.drag.offsetLeft&&(a=n.width-this.$refs.dragImg.width),Object.assign(this.dragState,{currentLeft:a,maskWidth:(Number(a)+e.offsetWidth/2).toFixed(2)})}},calPositionX:function(){var t=this.$refs.dragImgBg,e=(t.naturalWidth/t.width).toFixed(2);return(Number(this.dragState.currentLeft).toFixed(2)*e).toFixed(2)},getToken:function(){var t={token:this.imgInfo.token,captcha:this.calPositionX()};return Object(i.a)(btoa(JSON.stringify(t))).reverse().join("")}}},c=n("2877"),d=Object(c.a)(s,(function(){var t=this,e=t._self._c;return e("div",{ref:"drag",staticClass:"e-drag"},[e("div",{staticClass:"e-drag-section"},[e("div",{staticClass:"e-drag-img"},[e("img",{ref:"dragImgBg",attrs:{src:t.imgInfo.url,alt:""}}),e("img",{ref:"dragImg",staticClass:"e-drag-img__dragable",style:{left:"".concat(t.dragState.currentLeft,"px")},attrs:{src:t.imgInfo.jigsaw,alt:""}})]),e("div",{ref:"bar",staticClass:"e-drag-bar"},[e("span",[t._v(t._s(t.$t(t.tips)))]),e("div",{staticClass:"e-drag-bar__mask",style:{width:"".concat(t.dragState.maskWidth,"px")}}),e("div",{ref:"dragBtn",staticClass:"e-drag-btn",style:{left:"".concat(t.dragState.currentLeft,"px")},on:{touchend:t.handletTouchEnd,touchmove:t.handleTouchMove}},[e("img",{attrs:{src:"static/images/drag.png",alt:""}})])])])])}),[],!1,null,null,null);e.a=d.exports}}]);