(window.webpackJsonp=window.webpackJsonp||[]).push([["exerciseAnalysis"],{"1fa4":function(e,t,s){"use strict";s.r(t),s("8e6e"),s("456d"),s("e7e5");var i=s("d399"),n=(s("c5f6"),s("6762"),s("2fdb"),s("ac6a"),s("bd86")),r=s("2f62"),a=s("faa5"),o=s("3ce7"),c=s("f5cc"),u=s("8ae7"),l=s("c8a5"),d=s("7c97"),h=s("6647");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"ExerciseAnalysis",filters:{type:function(e){switch(e){case"single_choice":return h.a.t("courseLearning.singleChoice");case"choice":return h.a.t("courseLearning.choice");case"essay":return h.a.t("courseLearning.essay");case"uncertain_choice":return h.a.t("courseLearning.uncertainChoice");case"determine":return h.a.t("courseLearning.determine");case"fill":return"courseLearning.fill";case"material":return h.a.t("courseLearning.material")}}},components:{itemBank:c.a,OutFocusMask:d.a},mixins:[u.a,l.a],data:function(){return{result:null,items:{},info:[],isWrongMode:!1,allList:[],wrongList:[],wrongType:[],cardSeq:0,cardShow:!1,answer:{},slideIndex:0,canDo:!1,mode:"exercise"}},computed:f({},Object(r.e)({isLoading:function(e){return e.isLoading},user:function(e){return e.user}})),beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},mounted:function(){this.initReport(),this.setNavbarTitle(this.$route.query.title),this.getexerciseResult()},methods:f(f({},Object(r.d)({setNavbarTitle:a.x})),{},{initReport:function(){this.initReportData(this.$route.query.courseId,this.$route.query.taskId,"exercise")},getexerciseResult:function(){var e=this;o.a.exerciseResult({query:{exerciseId:this.$route.query.exerciseId,exerciseResultId:this.$route.query.exerciseResultId}}).then((function(t){e.result=t,e.setNavbarTitle(t.paperName),e.title=t.paperName,e.formatData(t)}))},formatData:function(e){var t=this;e.items.forEach((function(e){if("material"!=e.type){var s=t.analysisSixType(e.type,e);t.setData(s.item,s.answer)}"material"==e.type&&e.subs.forEach((function(s){var i=t.analysisSixType(s.type,s);t.setData(i.item,i.answer,e.type,e.stem,e.analysis,e.attachments)}))}))},setData:function(e,t,s,i,n,r){if(void 0!==i&&(e.parentType=s,e.parentTitle={stem:i,analysis:n},e.parentTitle.attachments=r),this.$set(this.answer,e.id,t),this.info.push(e),this.allList.push(e),e.testResult&&"right"!==e.testResult.status||!e.testResult){var a=e.parentType?e.parentType:e.type;this.wrongType.includes(a)||this.wrongType.push(a),this.wrongList.push(e)}},formatStatus:function(e){if(e.testResult)switch(e.testResult.status){case"right":return"cicle-right";case"none":return"cicle-subjective";case"wrong":case"partRight":return"cicle-wrong";case"noAnswer":return""}},slideToNumber:function(e){var t=this,s=Number(e);this.isWrongMode?this.info.forEach((function(e,i){s===parseInt(e.seq)&&(t.cardSeq=i+1)})):this.cardSeq=s,this.cardShow=!1},showWrongList:function(){0!==this.wrongList.length?(Object(i.a)({message:"切换成功",duration:1e3}),this.isWrongMode=!this.isWrongMode,this.isWrongMode?(this.info=this.wrongList,this.cardSeq=this.isWrongItem()):(this.info=this.allList,this.cardSeq=parseInt(this.wrongList[this.slideIndex].seq)),this.slideIndex=this.cardSeq-1):Object(i.a)("当前没有错题")},isWrongItem:function(){var e=this.allList[this.slideIndex],t=1;return e.testResult&&"right"!==e.testResult.status&&this.wrongList.forEach((function(s,i){s.id==e.id&&(t=i+1)})),t}})},m=s("0c7c"),w=Object(m.a)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"paper-swiper"},[t("out-focus-mask",{attrs:{type:e.outFocusMaskType,isShow:e.isShowOutFocusMask,reportType:e.reportType},on:{outFocusMask:e.outFocusMask}}),e.isLoading?t("e-loading"):e._e(),e.info.length>0?t("item-bank",{attrs:{"is-wrong-mode":e.isWrongMode,current:e.cardSeq,info:e.info,answer:e.answer,"slide-index":e.slideIndex,"can-do":e.canDo,all:e.allList.length,"is-exercise":!0,mode:e.mode},on:{"update:current":function(t){e.cardSeq=t},"update:slideIndex":function(t){e.slideIndex=t},"update:slide-index":function(t){e.slideIndex=t}}}):e._e(),t("div",{staticClass:"paper-footer"},[t("div",[t("span",{on:{click:function(t){e.cardShow=!0}}},[t("i",{staticClass:"iconfont icon-Questioncard"}),e._v("\n        "+e._s(e.$t("courseLearning.questionCard"))+"\n      ")])]),t("div",[t("span",{class:{"footer__div__span--active":e.isWrongMode},on:{click:e.showWrongList}},[t("i",{staticClass:"cuoti"},[t("img",{attrs:{src:e.isWrongMode?"static/images/cuoti-active.png":"static/images/cuoti.png",alt:""}})]),e._v("\n        "+e._s(e.$t("courseLearning.wrongQuestion"))+"\n      ")])])]),t("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.cardShow,callback:function(t){e.cardShow=t},expression:"cardShow"}},[e.info.length>0?t("div",{staticClass:"card"},[t("div",{staticClass:"card-title"},[t("div",[t("span",{staticClass:"card-right"},[e._v(e._s(e.$t("courseLearning.right")))]),t("span",{staticClass:"card-wrong"},[e._v(e._s(e.$t("courseLearning.wrong")))]),t("span",{staticClass:"card-nofinish"},[e._v(e._s(e.$t("courseLearning.unanswered")))]),t("span",{staticClass:"card-subjective"},[e._v("主观题")])]),t("i",{staticClass:"iconfont icon-no",on:{click:function(t){e.cardShow=!1}}})]),t("div",{staticClass:"card-list"},[t("div",{staticClass:"card-homework-item"},[t("div",{staticClass:"card-item-list"},e._l(e.info,(function(s){return t("div",{key:s.id,class:["list-cicle",e.formatStatus(s)],on:{click:function(t){return e.slideToNumber(s.seq)}}},[e._v("\n              "+e._s(s.seq)+"\n            ")])})),0)])])]):e._e()])],1)}),[],!1,null,null,null);t.default=w.exports}}]);