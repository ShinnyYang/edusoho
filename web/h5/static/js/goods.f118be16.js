(window.webpackJsonp=window.webpackJsonp||[]).push([["goods"],{"8dad":function(t,e,s){"use strict";s.r(e);var o=s("2877"),i=Object(o.a)({},(function(){var t=this._self._c;return t("div",{staticClass:"goods-qr"},[this._m(0),t("div",{staticClass:"goods-qr__body"},[t("h3",{staticClass:"goods-qr__body__title"},[this._v(this._s(this.$route.query.title))]),t("p",{staticClass:"goods-qr__body__subtitle"},[this._v(this._s(this.$route.query.content))]),t("div",{staticClass:"goods-qr__body__img"},[t("img",{attrs:{src:this.$route.query.imageUrl,alt:""}}),t("span",{staticClass:"qr-border qr-border-tl"}),t("span",{staticClass:"qr-border qr-border-tr"}),t("span",{staticClass:"qr-border qr-border-bl"}),t("span",{staticClass:"qr-border qr-border-br"})])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"goods-qr__header"},[t("img",{attrs:{src:"static/images/qr_bg.png",alt:""}})])}],!1,null,null,null);e.default=i.exports},a1ae:function(t,e,s){"use strict";s.r(e),s("ac6a"),s("456d"),s("b54a"),s("a481");var o=s("c80c"),i=(s("e7e5"),s("d399")),n=(s("f386"),s("28a5"),s("96cf"),s("3b8d")),a=s("db72"),r=s("92d0"),c=s("e90f"),l=s("51a9"),d={props:["selectedPlanId"],methods:{toCertificate:function(t){this.$router.push({path:"/certificate/list/".concat(t)})}}},u=s("2877"),g=Object(u.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-certificate",on:{click:function(e){return t.toCertificate(t.selectedPlanId)}}},[e("span",[e("span",{staticClass:"certificate-icon"},[t._v(t._s(t.$t("goods.certificate")))]),t._v(t._s(t.$t("goods.certificate2")))]),e("i",{staticClass:"van-icon van-icon-arrow pull-right"})])}),[],!1,null,null,null).exports,v=(s("7f7f"),s("c5f6"),{props:{currentSku:{type:Object,default:function(){}},type:{type:String,default:"course"}},computed:{vipEntryContent:function(){var t=this.currentSku,e=t.vipLevelInfo,s=t.vipUser,o="course"==this.type?this.$t("goods.course"):this.$t("goods.classroom");return s&&s.level&&Number(s.level.seq)<Number(e.seq)?"".concat(this.$t("goods.upgrade")).concat(e.name,"，").concat(this.$t("goods.freeLearningVip")).concat(o):"".concat(this.$t("goods.joinVip")).concat(e.name,"，").concat(this.$t("goods.freeLearningVip")).concat(o)}},methods:{clickGoToVip:function(){this.$router.push({path:"/vip",query:{id:this.currentSku.vipLevelInfo.id}})}}}),p=Object(u.a)(v,(function(){var t=this._self._c;return t("div",{staticClass:"goods-vip",on:{click:this.clickGoToVip}},[t("div",{staticClass:"goods-vip__left"},[t("img",{staticClass:"vip-icon",attrs:{src:this.currentSku.vipLevelInfo.icon,alt:""}}),this._v("\n    "+this._s(this.vipEntryContent)+"\n  ")]),t("i",{staticClass:"van-icon van-icon-arrow"})])}),[],!1,null,null,null).exports,h={data:function(){return{}},props:{qrInfo:{type:Object,default:function(){}}},methods:{goto:function(t){this.$router.push({name:"goods_qr",query:{imageUrl:this.qrInfo.imageUrl||"",title:this.qrInfo.title||"",content:this.qrInfo.content||""}})}},computed:{qrTitle:function(){return 10==this.qrInfo.title.slice(0,10).length?this.qrInfo.title.slice(0,10)+"...":this.qrInfo.title.slice(0,10)}}},f=Object(u.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"enter-learning",on:{click:t.goto}},[e("div",{staticClass:"enter-learning-container"},[t._m(0),e("div",{staticClass:"enter-learning-container__text"},[e("span",{staticClass:"content"},[t._v("\n        "+t._s(t.qrTitle)+"\n        "),e("span",{staticClass:"hot"},[t._v("Hot")])])]),e("div",{staticClass:"enter-learning-container__add"},[t._v(t._s(t.$t("goods.join")))])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"enter-learning-container__icon"},[t("i",{staticClass:"iconfont icon-renqi"})])}],!1,null,null,null).exports,m=s("b7f2"),_=s("e57e"),C=(s("3b2b"),s("3ce7")),w=s("6647"),b={name:"reviews",components:{},data:function(){return this.searchReviews(),{reviews:[],paging:{limit:5,offset:0,total:0},searched:!1,searching:!1}},computed:{multiOffset:function(){return this.paging.offset}},props:{targetType:{type:String,default:null},targetId:{type:Number,default:null},needPosts:{type:Boolean,default:!0},limit:{type:Number,default:null}},methods:{searchReviews:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.targetType&&this.targetId&&(this.searching||(this.searching=!0,C.a.searchReviews({params:{targetType:this.targetType,targetId:this.targetId,parentId:0,offset:parseInt(e),limit:null==this.limit?parseInt(s):this.limit,needPosts:this.needPosts}}).then((function(e){t.reviews=t.reviews.concat(e.data),t.paging=e.paging,t.searched=!0,t.searching=!1})).catch((function(e){console.error(e),t.searching=!1}))))}},filters:{createdTime:function(t){var e=new RegExp("-","g"),s=t.replace(e,"/"),o=(s=s.slice(0,-9)).slice(11,13),i="";o>=0&&o<6?i=w.a.t("goods.beforeDawn"):o>=6&&o<12?i=w.a.t("goods.am"):o>=12&&o<18?i=w.a.t("goods.pm"):o>=18&&o<24&&(i=w.a.t("goods.night"));var n=new RegExp("T","g");return s.replace(n," "+i)}},mounted:function(){}},k=Object(u.a)(b,(function(){var t=this,e=t._self._c;return e("div",[t.reviews.length?e("div",{staticClass:"reviews"},t._l(t.reviews,(function(s){return e("div",{key:s.id,staticClass:"review-item clearfix"},[e("div",{staticClass:"pull-left review-avatar"},[e("img",{attrs:{src:s.user.avatar.large,alt:""}})]),e("div",{staticClass:"pull-left review-content"},[e("div",{staticClass:"review-content__header clearfix"},[e("span",{staticClass:"review-content__header__nickname pull-left"},[t._v(t._s(s.user.nickname))]),e("span",{staticClass:"review-content__header__time pull-right"},[t._v(t._s(t._f("createdTime")(s.createdTime)))])]),e("div",{staticClass:"review-content_rating"},[t._v("\n          "+t._s(s.target.title)+"\n          "),e("van-rate",{staticClass:"plan-rate",attrs:{readonly:"",color:"#ffd21e",value:1*s.rating,gutter:"2"}})],1),e("div",{staticClass:"review-content_text"},[t._v(t._s(s.content))]),s.posts?e("div",{staticClass:"review-posts"},t._l(s.posts,(function(o){return e("div",{key:o.id,staticClass:"review-post-item clearfix"},[e("div",{staticClass:"review-avatar pull-left"},[e("img",{attrs:{src:o.user.avatar.large,alt:""}})]),e("div",{staticClass:"review-post-content pull-left"},[e("div",{staticClass:"review-content__header clearfix"},[e("span",{staticClass:"review-content__header__nickname pull-left"},[t._v("\n                  "+t._s(o.user.nickname)+" "+t._s(t.$t("goods.reply"))+t._s(s.user.nickname)+" ：\n                ")])]),e("div",{staticClass:"review-content_text"},[t._v(t._s(o.content))])])])})),0):t._e()])])})),0):t.searched?e("div",{staticClass:"info-evaluate__item"},[t._v("\n    "+t._s(t.$t("goods.noContent"))+"\n  ")]):t._e(),t.reviews.length?e("div",[parseInt(t.paging.offset)+parseInt(t.paging.limit)<parseInt(t.paging.total)?e("div",{staticClass:"load-more__footer",on:{click:function(e){t.searchReviews(parseInt(t.paging.offset)+parseInt(t.paging.limit),t.paging.limit)}}},[t._v("\n      "+t._s(t.$t("goods.more"))+"\n    ")]):e("div",{staticClass:"load-more__footer"},[t._v("\n      "+t._s(t.$t("goods.noMore"))+"\n    ")])]):t._e()])}),[],!1,null,null,null).exports,y=s("d218"),I=s("b576"),S=s("84e1"),$=s("228a"),x=s("9498"),T=s("bad8"),j=s("ba01"),q=s("2f62"),O={data:function(){return{goods:{},product:{},currentSku:{},active:0,timer:null,flag:!0,backToTopShow:!1,componentsInfo:{},isLoading:!0,show_review:this.$store.state.goods.show_review,show_course_review:this.$store.state.goods.show_course_review,show_classroom_review:this.$store.state.goods.show_classroom_review,bindItemBankList:[]}},components:{Discount:r.a,Specs:l.a,Detail:c.a,Teacher:_.a,Reviews:k,Recommend:y.a,Buy:I.a,BackToTop:S.a,AfterjoinDirectory:$.a,ClassroomCourses:x.a,Certificate:g,EnterLearning:f,Vip:p,IconSearch:m.a,GoodsItemBank:j.a},computed:Object(a.a)(Object(a.a)(Object(a.a)({},Object(q.e)(["vipSwitch"])),Object(q.e)({goodsSetting:function(t){return t.goodsSettings}})),{},{summary:function(){return this.goods.summary?this.goods.summary:this.$t("goods.noIntrodution")}}),methods:Object(a.a)(Object(a.a)({},Object(q.c)("course",["getCourse","getCourseLessons"])),{},{getGoodsCourse:function(){var t=this;return Object(n.a)(Object(o.a)().mark((function e(){var s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.getGoodsCourse({query:{id:t.$route.params.id},params:{preview:1}});case 3:t.goods=e.sent,t.$route.query.targetId?t.changeSku(t.$route.query.targetId):t.goods.product.target.defaultCourseId?t.changeSku(t.goods.product.target.defaultCourseId):t.changeSku(t.goods.product.target.id),t.isLoading=!1,document.documentElement.scrollTop=0,s={title:t.goods.title,link:window.location.href.split("#")[0]+"#"+t.$route.path,imgUrl:t.goods.images.small,desc:t.goods.summary},t.share(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i.a.fail(e.t0.message);case 14:return e.next=16,t.getGoodsCourseComponents();case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))()},goSearch:function(){this.$router.push({path:"/search",query:{id:this.goods.product.targetId}})},goItemBank:function(){this.$router.push({path:"/goods/itemBank",query:{bindId:this.currentSku.targetId,bindType:this.goods.product.targetType}})},share:function(t){var e="";t.desc&&(e=t.desc.replace(/<\/?.+?>/g,""));var s={title:t.title||"",link:t.link,imgUrl:t.imgUrl,desc:e||this.$t("goods.findAGoodContent")};Object(T.a)(Object(a.a)({},s))},getGoodsCourseComponents:function(){var t=this;return Object(n.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getGoodsCourseComponents({query:{id:t.$route.params.id},params:{componentTypes:["teachers","reviews","recommendGoods","classroomCourses"]}});case 2:t.componentsInfo=e.sent;case 3:case"end":return e.stop()}}),e)})))()},changeSku:function(t){for(var e in this.goods.specs)this.$set(this.goods.specs[e],"active",!1),t==this.goods.specs[e].targetId&&(this.$set(this.goods.specs[e],"active",!0),this.currentSku=this.goods.specs[e]);"course"===this.goods.product.targetType&&(this.getCourseLessons({courseId:t}).then((function(t){})),this.getCourse({courseId:t}).then((function(t){}))),this.goods.hasExtension=!0},onActive:function(t,e){var s=this;clearTimeout(this.timer),this.timer=null,this.flag=!1,this.active=t;var o=document.getElementById(e).offsetTop,i=document.getElementById("goods-info__nav").offsetHeight;document.documentElement.scrollTop=document.body.scrollTop=o-i,this.timer=setTimeout((function(){s.flag=!0}),500)},handleScroll:function(){var t=this,e=document.documentElement.scrollTop||document.body.scrollTop;e>600&&!this.backToTopShow&&(this.backToTopShow=!0),e<600&&this.backToTopShow&&(this.backToTopShow=!1),this.flag&&(clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((function(){t.calcScrollTop(e)}),200))},calcScrollTop:function(t){for(var e=document.getElementById("goods-info__nav").offsetHeight,s=document.querySelectorAll(".js-scroll-top"),o=s.length-1;o>=0;o--){if(t>=s[o].offsetTop-e)return void(this.active!=o&&(this.active=o));this.active=0}},updateFavorite:function(t){this.goods.isFavorite=t},init:function(){var t=this;return Object(n.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getGoodsCourse();case 2:return e.next=4,t.getBindItemBank();case 4:case"end":return e.stop()}}),e)})))()},getBindItemBank:function(){var t=this;return Object(n.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getBindItemBank({params:{bindType:t.goods.product.targetType,bindId:t.currentSku.targetId}});case 2:t.bindItemBankList=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}),created:function(){var t=this,e=this.$route.query.targetId,s=this.$route.query.type,o=this.$route.query.hasCertificate;"course_list"===s?C.a.meCourseMember({query:{id:e}}).then((function(s){s.id?t.$router.replace({path:"/course/".concat(e),query:{hasCertificate:o}}):t.init()})).catch((function(){t.init()})):"classroom_list"===s?C.a.meClassroomMember({query:{id:e}}).then((function(s){s.id?t.$router.replace({path:"/classroom/".concat(e),query:{hasCertificate:o}}):t.init()})).catch((function(){t.init()})):this.init()},watch:{$route:function(){this.isLoading=!0,this.getGoodsCourse()}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},B=Object(u.a)(O,(function(){var t=this,e=t._self._c;return e("div",[t.isLoading?e("e-loading"):t._e(),t.goods.id?e("div",{staticClass:"goods"},[e("div",{staticClass:"goods-detail"},[e("div",{staticClass:"goods-detail__banner"},[e("img",{attrs:{src:t.goods.images.large}})]),t.goods.discount?e("discount",{attrs:{currentSku:t.currentSku,goods:t.goods}}):t._e(),e("detail",{attrs:{goods:t.goods,currentSku:t.currentSku,"goods-setting":t.goodsSetting}}),t.currentSku.vipLevelInfo&&t.vipSwitch?e("vip",{attrs:{currentSku:t.currentSku,type:t.goods.type}}):t._e(),t.goods.specs.length>1||t.currentSku.services?e("specs",{attrs:{goods:t.goods,currentSku:t.currentSku},on:{changeSku:t.changeSku}}):t._e(),t.currentSku.hasCertificate?e("certificate",{attrs:{selectedPlanId:t.currentSku.targetId}}):t._e(),t.componentsInfo.mpQrCode&&Object.keys(t.componentsInfo.mpQrCode).length?e("enter-learning",{attrs:{"qr-info":t.componentsInfo.mpQrCode}}):t._e()],1),e("div",{staticClass:"goods-info"},[e("ul",{staticClass:"goods-info__nav",attrs:{id:"goods-info__nav"}},[e("li",{on:{click:function(e){return t.onActive(0,"introduction")}}},[e("a",{class:0==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("goods.intro")))])]),e("li",{on:{click:function(e){return t.onActive(1,"teacher")}}},[e("a",{class:1==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("goods.teacher")))])]),e("li",{on:{click:function(e){return t.onActive(2,"bindItemBank")}}},[e("a",{class:2==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v("题库")])]),e("li",{on:{click:function(e){return t.onActive(3,"catalog")}}},[e("a",{class:3==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("goods.catalogue")))])]),1==t.show_course_review&&"course"===t.goods.type||1==t.show_classroom_review&&"classroom"===t.goods.type?e("li",{on:{click:function(e){return t.onActive(4,"evaluate")}}},[e("a",{class:4==t.active?"active":"",attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("goods.comment")))])]):t._e()]),e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"introduction"}},[e("div",{staticClass:"goods-info__title"},[t._v(t._s(t.$t("goods.intro")))]),e("div",{staticClass:"info-introduction",domProps:{innerHTML:t._s(t.summary)}})]),e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"teacher"}},[e("div",{staticClass:"goods-info__title"},[t._v(t._s(t.$t("goods.teacherStyle")))]),e("teacher",{attrs:{teachers:t.currentSku.teachers}})],1),e("section",{staticClass:"js-scroll-top goods-info__item flex flex-col space-y-12",attrs:{id:"bindItemBank"}},[e("div",{staticClass:"flex justify-between"},[e("div",{staticClass:"goods-info__title"},[t._v("题库")]),t.bindItemBankList.length>2?e("div",{staticClass:"flex items-center goods-info__title",staticStyle:{color:"#919399","font-weight":"400"},on:{click:t.goItemBank}},[e("div",{},[t._v(t._s("查看全部（".concat(t.bindItemBankList.length,"）")))]),e("van-icon",{attrs:{name:"arrow"}})],1):t._e()]),0===t.bindItemBankList.length?e("div",[e("div",{staticClass:"goods-info__title",staticStyle:{color:"#919399","font-weight":"400"}},[t._v("暂无题库")])]):e("div",{staticClass:"space-y-12"},[e("goods-item-bank",{attrs:{item:t.bindItemBankList[0]}}),t.bindItemBankList.length>1?e("goods-item-bank",{attrs:{item:t.bindItemBankList[1]}}):t._e()],1)]),"course"===t.goods.product.targetType?e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"catalog"}},[e("div",{staticClass:"goods-info__title"},[t._v(t._s(t.$t("goods.tableOfContents")))]),1==t.currentSku.taskDisplay?e("afterjoin-directory",{attrs:{goods:t.goods}}):e("div",{staticClass:"goods-empty-content"},[e("img",{attrs:{src:"static/images/goods/empty-content.png",alt:""}}),e("p",[t._v(t._s(t.$t("goods.tableOfContentsEmpty")))])])],1):t._e(),"classroom"===t.goods.product.targetType?e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"catalog"}},[e("div",{staticClass:"flex justify-between items-center"},[e("div",{staticClass:"goods-info__title"},[t._v(t._s(t.$t("goods.learningCatalog")))]),e("div",{staticClass:"flex items-center bg-fill-7 py-4 px-12 rounded-full",on:{click:t.goSearch}},[e("IconSearch"),e("label",{staticClass:"ml-4 text-text-6"},[t._v(t._s(t.$t("e.searchCourse")))])],1)]),t.componentsInfo.classroomCourses.length>0?e("classroom-courses",{attrs:{classroomCourses:t.componentsInfo.classroomCourses}}):e("div",{staticClass:"w-full flex flex-col items-center pt-28",staticStyle:{height:"223px"}},[e("img",{staticStyle:{width:"142px",height:"116px"},attrs:{src:"static/images/classroom/none-course.png",alt:"暂无课程"}}),e("span",{staticClass:"mt-12 text-text-6 text-14"},[t._v("暂无课程")])])],1):t._e(),1==t.show_course_review&&"course"==t.goods.type||1==t.show_classroom_review&&"classroom"==t.goods.type?e("section",{staticClass:"js-scroll-top goods-info__item",attrs:{id:"evaluate"}},[e("div",{staticClass:"goods-info__title"},[t._v(t._s(t.$t("goods.courseEvaluation")))]),1==t.show_course_review&&"course"==t.goods.type||1==t.show_classroom_review&&"classroom"==t.goods.type?e("reviews",{attrs:{"target-type":"goods","target-id":parseInt(t.$route.params.id),limit:5}}):e("div",{staticClass:"info-introduction"},[t._v("\n          "+t._s(t.$t("goods.noContent"))+"\n        ")])],1):t._e(),e("section",{staticClass:"goods-info__item"},[e("Recommend",{attrs:{goods:t.goods,recommendGoods:t.componentsInfo.recommendGoods?t.componentsInfo.recommendGoods.slice(0,4):t.componentsInfo.recommendGoods}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("goods.guessYouWantToLearn")))])])],1),e("buy",{attrs:{goods:t.goods,currentSku:t.currentSku,"is-favorite":t.goods.isFavorite},on:{"update-data":t.updateFavorite}}),e("back-to-top",{directives:[{name:"show",rawName:"v-show",value:t.backToTopShow,expression:"backToTopShow"}]})],1)]):t._e()],1)}),[],!1,null,null,null);e.default=B.exports},b7f2:function(t,e,s){"use strict";var o=s("2877"),i=Object(o.a)({},(function(){var t=this._self._c;return t("svg",{attrs:{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M10.518 9.694l2.498 2.499-.825.825-2.498-2.499a5.252 5.252 0 0 1-8.526-4.101 5.252 5.252 0 0 1 5.25-5.25 5.252 5.252 0 0 1 4.101 8.526zm-1.17-.432a4.082 4.082 0 0 0-2.931-6.927 4.082 4.082 0 0 0-4.084 4.083A4.082 4.082 0 0 0 9.26 9.349l.088-.087z",fill:"#919399"}})])}),[],!1,null,null,null);e.a=i.exports},e4ed:function(t,e,s){"use strict";s.r(e);var o={data:function(){return{value:0,content:""}},methods:{onSubmit:function(){console.log(this.value),console.log(this.content)}}},i=s("2877"),n=Object(i.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-reviews"},[e("h3",[t._v(t._s(t.$t("goods.gradeTheCourse")))]),e("van-rate",{attrs:{size:25,color:"#ffd21e","void-icon":"star","void-color":"#D8D8D8",gutter:"15px"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"goods-reviews__content",attrs:{name:"",id:""},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),e("div",{staticClass:"goods-reviews__submit",on:{click:t.onSubmit}},[t._v(t._s(t.$t("goods.submit")))])],1)}),[],!1,null,null,null);e.default=n.exports}}]);