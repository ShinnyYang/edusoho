(window.webpackJsonp=window.webpackJsonp||[]).push([["marketingWxpay"],{3067:function(e,t,a){"use strict";var n=a("d82b");a.n(n).a},8567:function(e,t,a){"use strict";a.r(t),a("e7e5");var n=a("d399"),r=(a("96cf"),a("3b8d")),s=a("3ce7"),i={name:"MarketingWXPay",data:function(){return{isLoading:!1,payInfo:null}},computed:{isWeixinBrowser:function(){return/micromessenger/.test(navigator.userAgent.toLowerCase())}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$route.query.payToken||""){t.next=4;break}return n.a.fail("缺少关键信息"),t.abrupt("return");case 4:return t.next=6,s.a.getMarketingMallPayConfig({data:{token:a}});case 6:e.payInfo=t.sent;case 7:case"end":return t.stop()}}),t)})))()},methods:{handlePay:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$route.query.payToken||"",t.next=3,s.a.checkMarketingMallPayConfig({data:{token:a}});case 3:!1===t.sent.success&&Dialog.alert({confirmButtonText:"我知道了",confirmButtonColor:"#165DFF",message:"支付方式未配置，请联系机构处理。"}),WeixinJSBridge.invoke("getBrandWCPayRequest",e.payInfo.config,(function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location.href=e.payInfo.redirectUrl+"&isNeedCheckOrderStatus=1&sn=".concat(e.payInfo.orderSn):"get_brand_wcpay_request:fail"==t.err_msg||t.err_msg}));case 6:case"end":return t.stop()}}),t)})))()}}},o=(a("3067"),a("0c7c")),c=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isWeixinBrowser&&e.payInfo?a("div",{staticClass:"marketing-wxpay"},[a("div",{staticClass:"marketing-wxpay__title"},[e._v(e._s(e.$t("marketingPay.amountLabel")))]),a("div",{staticClass:"marketing-wxpay__amount"},[a("span",{staticClass:"amount-unit"},[e._v("￥")]),a("span",{staticClass:"amount-number"},[e._v(e._s(e.payInfo.amount))])]),a("div",{staticClass:"marketing-wxpay__info"},[a("div",{staticClass:"info-label"},[e._v(e._s(e.$t("marketingPay.orderSnLabel")))]),a("div",{staticClass:"info-desc"},[e._v(e._s(e.payInfo.orderSn))])]),a("div",{staticClass:"marketing-wxpay__info",staticStyle:{border:"none"}},[a("div",{staticClass:"info-label"},[e._v(e._s(e.$t("marketingPay.acceptLabel")))]),a("div",{staticClass:"info-desc"},[e._v(e._s(e.payInfo.siteName))])]),a("div",{staticClass:"pay-btn",on:{click:e.handlePay}},[e._v("\n    "+e._s(e.$t("marketingPay.payNow"))+"\n  ")])]):e._e()}),[],!1,null,"71e014bc",null);t.default=c.exports},d82b:function(e,t,a){}}]);