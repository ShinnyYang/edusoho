(window.webpackJsonp=window.webpackJsonp||[]).push([["wrong-question-book"],{"0e98":function(e,t,s){"use strict";var n=s("0ef8");s.n(n).a},"0ef8":function(e,t,s){},1474:function(e,t,s){"use strict";var n=s("605f");s.n(n).a},"1d2c":function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d");var n=s("bd86"),i=s("2ef0"),a=s.n(i),o=s("3ce7"),r=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}var u={name:"WrongExercisesAnalysis",components:{itemReport:s("c75f").a},data:function(){return{isLoading:!1,assessment:{},answerScene:{},answerReport:{},answerRecord:{},assessmentResponse:{}}},created:function(){this.fetchData()},beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(r.e)({storageSetting:function(e){return e.storageSetting}})),provide:function(){return{getResourceToken:this.getResourceToken,settings:this.storageSetting,brushDo:this}},methods:{fetchData:function(){var e=this;this.isLoading=!0,o.a.answerRecord({query:{answerRecordId:this.$route.query.recordId}}).then((function(t){var s=t.assessment,n=t.answer_scene,i=t.answer_report,o=t.answer_record,r=t.assessment_response;a.a.assign(e,{assessment:s,answerScene:n,answerRecord:o,answerReport:i,assessmentResponse:r}),e.isLoading=!1}))},getResourceToken:function(e){return o.a.getItemDetail({params:{globalId:e}})}}},l=s("a6c2"),d=Object(l.a)(u,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"brush-exercise-report"},[this.isLoading?t("e-loading"):[t("div",{staticClass:"ibs-wap-vue"},[t("item-report",{attrs:{wrong:!0,answerRecord:this.answerRecord,answerReport:this.answerReport,assessment:this.assessment,answerScene:this.answerScene,assessmentResponse:this.assessmentResponse}})],1)]],2)}),[],!1,null,null,null);t.default=d.exports},2390:function(e,t,s){"use strict";s.r(t),s("a481");var n=s("3ce7"),i={props:{question:{type:Object,required:!0}},methods:{goToWrongQuestionDetail:function(){var e=this.question.target_type,t="myWrongQuestionBookDetail";"exercise"===e&&(t="myWrongQuestionBookExercise"),this.$router.push({name:t,params:{type:e,id:this.question.id},query:{title:this.question.target_data.title,id:this.question.id}})}}},a=s("a6c2"),o={name:"MyWrongQuestionBook",components:{Item:Object(a.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list-item",on:{click:e.goToWrongQuestionDetail}},[s("div",{staticClass:"list-item__image"},[s("img",{attrs:{src:e.question.target_data.cover.middle}})]),s("div",{staticClass:"list-item__detail"},[s("h3",{staticClass:"title line-clamp-2"},[e._v(e._s(e.question.target_data.title))]),s("p",{staticClass:"number text-overflow"},[e._v(e._s(e.question.item_num)+" "+e._s(e.$t("wrongQuestion.question")))])])])}),[],!1,null,null,null).exports,EmptyCourse:s("41dc").a},data:function(){return{isLoading:!1,active:"course",currentActive:"course",list:[{title:"wrongQuestion.fromCourse",type:"course",placeholder:"wrongQuestion.searchCourse",items:[],keyword:"",loading:!1,finished:!1,totalTitle:"wrongQuestion.numberOfWrongQuestionsInTheCourse",total:0,paging:{current:0,total:0}},{title:"wrongQuestion.fromClass",type:"classroom",placeholder:"wrongQuestion.searchClass",items:[],keyword:"",loading:!1,finished:!1,totalTitle:"wrongQuestion.numberOfWrongQuestionsInTheClass",total:0,paging:{current:0,total:0}},{title:"wrongQuestion.fromQuestionBank",type:"exercise",placeholder:"wrongQuestion.searchByQuestionBank",items:[],keyword:"",loading:!1,finished:!1,totalTitle:"wrongQuestion.numberOfWrongQuestionsInTheQuestionBank",total:0,paging:{current:0,total:0}}]}},created:function(){this.fetchWrongQuestionBooks(),this.active=this.$route.query.active},methods:{fetchWrongQuestionBooks:function(){var e=this;this.isLoading=!0,n.a.getWrongBooks().then((function(t){e.list[0].total=t.course.sum_wrong_num,e.list[1].total=t.classroom.sum_wrong_num,e.list[2].total=t.exercise.sum_wrong_num,e.isLoading=!1}))},onLoad:function(e){var t=this.list[e];t.loading=!0,n.a.getWrongBooksCertainTypes({query:{targetType:t.type},params:{keyWord:t.keyword,offset:10*t.paging.current}}).then((function(e){t.refreshing&&(t.items=[],t.refreshing=!1),t.items=t.items.concat(e.data),t.loading=!1,t.refreshing=!1;var s=e.paging.total;t.paging.total=s,t.paging.current++,t.items.length>=s&&(t.finished=!0)}))},onSearch:function(e,t){var s=this.list[e];s.keyword=t,s.refreshing=!0,s.paging.current=0,this.onLoad(e)},onClickTabs:function(e,t){e!==this.currentActive&&(this.currentActive=e,this.$router.replace({query:{active:e}}))}}},r=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("e-loading"):e._e(),s("van-tabs",{attrs:{border:!0,color:"#43c793"},on:{click:e.onClickTabs},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.list,(function(t,n){return[s("van-tab",{key:n,attrs:{title:e.$t(t.title),name:t.type}},[s("van-search",{attrs:{shape:"round",placeholder:e.$t(t.placeholder)},on:{search:function(t){return e.onSearch(n,t)}},model:{value:t.keyword,callback:function(s){e.$set(t,"keyword",s)},expression:"listItem.keyword"}}),s("van-list",{staticClass:"wrong-list",attrs:{finished:t.finished},on:{load:function(t){return e.onLoad(n)}},model:{value:t.loading,callback:function(s){e.$set(t,"loading",s)},expression:"listItem.loading"}},e._l(t.items,(function(e){return s("item",{key:e.id,attrs:{question:e}})})),1),!t.items.length&&t.finished?s("empty-course",{attrs:{"has-button":!1,text:e.$t("wrongQuestion.empty")}}):e._e(),s("div",{staticClass:"wrong-question-number"},[e._v("\n          "+e._s(e.$t(t.totalTitle))+"："+e._s(t.total)+"\n        ")])],1)]}))],2)],1)}),[],!1,null,null,null);t.default=r.exports},"2f05":function(e,t,s){},"361b":function(e,t,s){"use strict";s("a481"),s("e7e5");var n=s("d399"),i=(s("e17f"),s("2241")),a=(s("c5f6"),s("3ce7")),o=[{name:"已完成",className:"ibs-card-finish"},{name:"未完成",className:"ibs-card-nofinish"}],r=[{name:"已批阅",className:"ibs-card-none"},{name:"未批阅",className:"ibs-card-nofinish"}],c=[{name:"正确",className:"ibs-card-right"},{name:"错误",className:"ibs-card-wrong"},{name:"未作答",className:"ibs-card-nofinish"},{name:"待批阅",className:"ibs-card-none"}],u={name:"ibs-card",data:function(){return{isLeave:!1}},props:{mode:{type:String,default:"do"},sections:{type:Array,default:function(){return[]}},section_responses:{type:Array,default:function(){return[]}},answer_report:{type:Object,default:function(){}},wrongMode:{type:Boolean,default:!1},question_reports:{type:Array,default:function(){return[]}},needScore:{type:Boolean,default:!1},value:Boolean,assessmentResponse:{type:Object,default:function(){}},reviewedCount:{type:Number,default:0},all:{type:Number,default:0}},model:{prop:"value",event:"update"},inject:["brushDo"],computed:{cardShow:{get:function(){return this.value},set:function(e){this.$emit("update",e)}},statusItem:function(){switch(this.mode){case"do":return o;case"report":return c;case"review":return r;default:return""}}},methods:{slideToNumber:function(e,t,s,n,i){var a={sectionsIndex:e,itemIndex:Number(t),questionIndex:s,itemId:n};(this.wrongMode||"review"===this.mode)&&(a.questionId=i.id),this.$emit("slideTo",a),this.closeCard()},closeCard:function(){this.cardShow=!1},formatStatus:function(e,t,s){switch(this.mode){case"do":return this.getDoStatus(e,t,s);case"report":return this.getReportStatus(e,t,s);case"review":return this.getReviewStatus(e,t,s)}},getDoStatus:function(e,t,s){return this.section_responses[e].item_responses[t].question_responses[s].response.some((function(e){return""!=e}))?"ibs-cicle-active":""},getReportStatus:function(e,t,s){switch(this.answer_report.section_reports[e].item_reports[t].question_reports[s].status){case"right":return"ibs-cicle-right";case"reviewing":return"ibs-cicle-none";case"wrong":case"part_right":return"ibs-cicle-wrong";case"no_answer":return""}},getReviewStatus:function(e,t,s){var n=this.sections[e].items[t].questions[s].richTextIndex,i=this.question_reports[n];if(i)return(this.needScore?i.score||0===i.score:i.status)?"ibs-cicle-none":""},getShow:function(e,t,s,n,i){return"report"===this.mode&&this.wrongMode?"right"!==this.answer_report.section_reports[e].item_reports[t].question_reports[s].status:"review"!==this.mode||i.reviewShow},getSectionShow:function(e){return"review"!==this.mode||e.richTextNum&&e.richTextNum>0},endAnswer:function(){var e=this;i.a.confirm({title:"是否结束本次答题",confirmButtonText:"是",cancelButtonText:"否",className:"backDialog"}).then((function(){a.a.finishAnswer({query:{id:e.brushDo.recordId}}).then((function(){"wrongQuestionBook"===e.brushDo.type?e.brushDo.goResult():e.goResult()})).catch((function(e){n.a.fail(e.message)}))})).catch((function(){}))},goResult:function(){if("wrongQuestionBook"===this.brushDo.type)this.brushDo.goResult();else{this.isLeave=!0;var e={type:"chapter",title:this.$route.query.title,exerciseId:this.$route.query.exerciseId,categoryId:this.$route.query.categoryId,moduleId:this.$route.query.moduleId,isLeave:this.isLeave},t=this.assessmentResponse.answer_record_id;this.$router.replace({path:"/brushResult/".concat(t),query:e})}}}},l=s("a6c2"),d=Object(l.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{staticClass:"ibs-popup-card",style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.cardShow,callback:function(t){e.cardShow=t},expression:"cardShow"}},[s("div",{staticClass:"ibs-card"},[s("div",{staticClass:"ibs-card-title"},[s("div",e._l(e.statusItem,(function(t,n){return s("span",{key:n,class:[t.className]},[e._v(e._s(t.name))])})),0),s("i",{staticClass:"wap-icon wap-icon-no",on:{click:e.closeCard}})]),s("div",{staticClass:"ibs-card-list"},[s("div",{staticClass:"ibs-card-item"},e._l(e.sections,(function(t,n){return s("div",{key:"section"+n},[e.getSectionShow(t)?[s("div",{staticClass:"ibs-card-item-title"},[e._v("\n              "+e._s(t.name)+"\n            ")]),s("div",{staticClass:"ibs-card-item-list"},[e._l(t.items,(function(t,i){return[e._l(t.questions,(function(a,o){return[e.getShow(n,i,o,t,a)?s("div",{key:a.id,class:["ibs-list-cicle",e.formatStatus(n,i,o,a)],on:{click:function(s){return e.slideToNumber(n,t.seq,o,t.id,a)}}},[e._v("\n                    "+e._s(a.seq)+"\n                  ")]):e._e()]}))]}))],2)]:e._e()],2)})),0)])]),"1"===e.brushDo.exerciseModes&&"doing"===e.brushDo.status&&e.reviewedCount!=e.all?s("van-button",{staticClass:"end-answer__btn",attrs:{type:"primary"},on:{click:e.endAnswer}},[e._v(e._s(e.$t("courseLearning.endAnswer")))]):e._e(),e.reviewedCount===e.all&&"doing"===e.brushDo.status?s("van-button",{staticClass:"end-answer__btn",attrs:{type:"primary"},on:{click:e.goResult}},[e._v(e._s(e.$t("courseLearning.viewResult2")))]):e._e()],1)}),[],!1,null,null,null);t.a=d.exports},"36fb":function(e,t,s){"use strict";var n=s("e3e1");s.n(n).a},"392c":function(e,t,s){},"3c45":function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d"),s("a481");var n=s("bd86"),i=s("2ef0"),a=s.n(i),o=s("2f62"),r=s("faa5"),c=s("3ce7"),u=(s("4662"),s("28a2")),l=(s("4917"),s("c5f6"),s("6762"),s("2fdb"),{props:{question:{type:Object,required:!0}},computed:{questions:function(){return this.question.questions[0]}},methods:{RadioWrong:function(e){var t=this.question.questions[0].answer,s=this.question.questions[0].report.response;return!t.includes(e)&&(!!(t.includes(e)&&s.includes(e)||!t.includes(e)&&s.includes(e))||void 0)},RadioRight:function(e){var t=this.question.questions[0].answer;if(0===this.question.questions[0].report.response.length&&t.includes(e)||t.includes(e))return!0}}}),d=s("a6c2"),h=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-checkbox-group",{model:{value:e.questions.answer,callback:function(t){e.$set(e.questions,"answer",t)},expression:"questions.answer"}},e._l(e.questions.response_points,(function(t,n){return s("van-checkbox",{key:n,class:["question-option",{"van-checkbox__right":e.RadioRight(t.checkbox.val)},{"van-checkbox__wrong":e.RadioWrong(t.checkbox.val)}],attrs:{name:t.checkbox.val}},[s("i",{staticClass:"iconfont icon-zhengque1"}),s("i",{staticClass:"iconfont icon-cuowu2"}),s("div",{staticClass:"question-option__content",domProps:{innerHTML:e._s(t.checkbox.text)}}),s("span",{class:["question-option__order"],attrs:{slot:"icon"},slot:"icon"},[e._v("\n      "+e._s(t.checkbox.val+".")+"\n    ")])])})),1)}),[],!1,null,null,null).exports,m={props:{question:{type:Object,required:!0}},computed:{questions:function(){return this.question.questions[0]}},methods:{RadioWrong:function(e){var t=this.question.questions[0].answer,s=this.question.questions[0].report.response;if(s[0]===e&&s[0]!==t[0])return!0},RadioRight:function(e){var t=this.question.questions[0].answer,s=this.question.questions[0].report.response;return 0===s.length&&e===t[0]||e===t[0]||e===s[0]&&s[0]===t[0]||void 0}}},p=Object(d.a)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-radio-group",{model:{value:e.questions.answer[0],callback:function(t){e.$set(e.questions.answer,0,t)},expression:"questions.answer[0]"}},e._l(e.questions.response_points,(function(t,n){return s("van-radio",{key:n,class:["question-option",{"van-checkbox__right":e.RadioRight(t.radio.val)},{"van-checkbox__wrong":e.RadioWrong(t.radio.val)}],attrs:{name:t.radio.val}},[s("i",{staticClass:"iconfont icon-zhengque1"}),s("i",{staticClass:"iconfont icon-cuowu2"}),s("div",{staticClass:"question-option__content",domProps:{innerHTML:e._s(t.radio.text)}}),s("template",{slot:"icon"},[s("span",{class:["question-option__order"]},[e._v("\n        "+e._s(t.radio.val+".")+"\n      ")])])],2)})),1)}),[],!1,null,null,null).exports,g={props:{question:{type:Object,required:!0}},computed:{questions:function(){return this.question.questions[0]}},methods:{RadioWrong:function(e){var t=this.question.questions[0].answer,s=this.question.questions[0].report.response;if(s[0]===e&&s[0]!==t[0])return!0},RadioRight:function(e){var t=this.question.questions[0].answer,s=this.question.questions[0].report.response;return 0===s.length&&t[0]===e||e===t[0]||e===s[0]&&s[0]===t[0]||void 0}}};function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={components:{Choice:h,SingleChoice:p,Judge:Object(d.a)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-radio-group",{model:{value:e.questions.answer[0],callback:function(t){e.$set(e.questions.answer,0,t)},expression:"questions.answer[0]"}},e._l(e.questions.response_points,(function(t,n){return s("van-radio",{key:n,class:["question-option",{"van-checkbox__right":e.RadioRight(t.radio.val)},{"van-checkbox__wrong":e.RadioWrong(t.radio.val)}],attrs:{name:t.radio.val}},[s("i",{staticClass:"iconfont icon-zhengque1"}),s("i",{staticClass:"iconfont icon-cuowu2"}),s("div",{staticClass:"question-option__content"},[e._v("\n      "+e._s("T"===t.radio.val?e.$t("wrongQuestion.right2"):e.$t("wrongQuestion.wrong2"))+"\n    ")]),s("template",{slot:"icon"},[s("span",{class:["question-option__order"]})])],2)})),1)}),[],!1,null,null,null).exports,attachementPreview:s("2a5b").a},props:{total:{type:Number,required:!0},order:{type:Number,required:!0},question:{type:Object,required:!0}},data:function(){return{questionComponents:{single_choice:{name:"wrongQuestion.singleChoice",component:"SingleChoice"},text:{name:"wrongQuestion.fill",component:""},choice:{name:"wrongQuestion.choice",component:"Choice"},uncertain_choice:{name:"wrongQuestion.uncertainChoice",component:"Choice"},true_false:{name:"wrongQuestion.determine",component:"Judge"}},wrong:"static/images/exercise/wrong.png"}},provide:function(){return{getResourceToken:this.getResourceToken,settings:this.storageSetting}},computed:w(w({},Object(o.e)({storageSetting:function(e){return e.storageSetting}})),{},{questions:function(){return this.question.questions[0]},sourcesStr:function(){return a.a.join(this.question.sources,"、")},formateQuestionStem:function(){var e=this.questions.stem,t=/\[\[\]\]/g;return e.match(t)?e.replace(t,(function(){return""})):e},currentQuestionComponent:function(){return this.questionComponents[this.question.questions[0].answer_mode]},status:function(){var e={right:{color:"analysis-item_right",text:this.$t("wrongQuestion.correctAnswer2")},wrong:{color:"analysis-item_worng",text:this.$t("wrongQuestion.wrongAnswer")},partRight:{color:"analysis-item_worng",text:this.$t("wrongQuestion.wrongAnswer")},no_answer:{color:"analysis-item_noAnswer",text:this.$t("wrongQuestion.unanswered")}},t=this.questions.report,s=t.response,n=t.status;return a.a.size(s)?e[n]:e.no_answer},rightAnswer:function(){var e=this,t=this.questions,s=t.answer,n=t.answer_mode;if("true_false"===n&&(s=a.a.map(s,(function(t){return"T"===t?e.$t("wrongQuestion.right"):e.$t("wrongQuestion.wrong")}))),"text"===n){var i="";return a.a.forEach(s,(function(e,t){i+="<div>".concat(e,"</div>")})),i}return a.a.join(s,"")},yourAnswer:function(){var e=this,t=this.questions,s=t.answer_mode,n=t.report.response,i=this;if(!a.a.size(n))return"text"===s?'<img src="'.concat(this.wrong,'" alt="" class="fill-status"><span class="wrong-answer"> ').concat(this.$t("wrongQuestion.unanswered"),"</span>"):this.$t("wrongQuestion.unanswered");if("true_false"===s&&(n=a.a.map(n,(function(e){return"T"===e?i.$t("wrongQuestion.right2"):i.$t("wrongQuestion.wrong2")}))),"text"===s){var o="";return a.a.forEach(n,(function(t,s){o+='<img src="'.concat(e.wrong,'" alt="" class="fill-status"><span class="wrong-answer"> ').concat(t||e.$t("wrongQuestion.unanswered"),"</span>")})),o}return a.a.join(n,"")}}),methods:{getAttachementByType:function(e){return this.questions.attachments.filter((function(t){return t.module===e}))||[]},getResourceToken:function(e){return c.a.getItemDetail({params:{globalId:e}})},yourAnswerShow:function(){return this.question.questions[0].report.response.length>0&&""!==this.question.questions[0].report.response[0]||"text"===this.questions.answer_mode||void 0},handleClickImage:function(e){if(void 0!==e){event.stopPropagation();var t=[e];Object(u.a)({images:t})}}}},b=Object(d.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"question"},[s("div",{staticClass:"question-head"},[s("div",{staticClass:"head-left"},[e._v(e._s(e.$t("wrongQuestion.topicList")))]),s("div",{staticClass:"head-right"},[s("span",{staticClass:"right-color"},[e._v(e._s(e.order))]),e._v("\n      /"+e._s(e.total)+"\n    ")])]),s("div",{staticClass:"question-body"},[s("span",{staticClass:"ibs-tags"},[e._v("\n      "+e._s(e.$t(e.currentQuestionComponent.name))+"\n    ")]),s("div",{staticClass:"clearfix question-stem"},[s("div",{staticClass:"pull-left"},[e._v(e._s(e.order)+"、")]),s("div",{domProps:{innerHTML:e._s(e.formateQuestionStem)},on:{click:function(t){return e.handleClickImage(t.target.src)}}}),e._l(e.getAttachementByType("stem"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2),"fill"!==e.question.type?s("div",{staticClass:"question-answer"},[s(e.currentQuestionComponent.component,{tag:"component",attrs:{question:e.question}})],1):e._e(),s("div",{staticClass:"questions-analysis"},[s("div",{class:[{flex:"text"!==e.questions.answer_mode},{"justify-between":"text"!==e.questions.answer_mode},"analysis-answer"]},["text"!==e.questions.answer_mode?s("div",{staticClass:"flex items-center"},[s("span",{staticClass:"answer"},[e._v(e._s(e.$t("wrongQuestion.correctAnswer"))+"：")]),s("span",{staticClass:"options",staticStyle:{color:"#00B42A"},domProps:{innerHTML:e._s(e.rightAnswer)}})]):e._e(),e.yourAnswerShow()?s("div",{class:[{flex:"text"!==e.questions.answer_mode},{"items-center":"text"!==e.questions.answer_mode}]},[s("div",{staticClass:"answer"},[e._v(e._s(e.$t("wrongQuestion.yourAnswer"))+"：")]),s("div",{class:[e.status?e.status.color:"",{options:"text"!==e.questions.answer_mode}],domProps:{innerHTML:e._s(e.yourAnswer)}})]):e._e(),"text"===e.questions.answer_mode?s("div",{staticClass:"correct-answer"},[s("div",{staticClass:"answer"},[e._v(e._s(e.$t("wrongQuestion.correctAnswer"))+"：")]),s("div",{class:[{options:"text"!==e.questions.answer_mode}],staticStyle:{color:"#00B42A"},domProps:{innerHTML:e._s(e.rightAnswer)}})]):e._e()]),e._l(e.getAttachementByType("answer"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),s("div",{staticClass:"analysis-color"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),s("span",{staticClass:"analysis-content mt10",domProps:{innerHTML:e._s(e.questions.analysis||e.$t("wrongQuestion.noParsing"))}}),s("div",{staticClass:"analysis-content"},e._l(e.getAttachementByType("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),1)]),s("div",{staticClass:"question-situation"},[s("div",{staticClass:"situation-top"},[e._v(e._s(e.$t("wrongQuestion.source"))+"："+e._s(e.sourcesStr))]),s("div",{staticClass:"situation-bottom"},[s("span",[e._v(e._s(e.$moment(1e3*e.question.submit_time).format("YYYY-MM-DD HH:mm:ss")))]),s("span",[e._v("\n            "+e._s(e.$t("wrongQuestion.frequency"))+"：\n            "),s("span",{staticClass:"frequency"},[e._v(e._s(e.question.wrong_times))]),e._v("\n            "+e._s(e.$t("wrongQuestion.times"))+"\n          ")])])])],2)]),e.order!==e.total?s("div",{staticClass:"question-footer-shardow"}):e._e()])}),[],!1,null,null,null).exports,A={testpaper:"wrongQuestion.examTask",homework:"wrongQuestion.homeworkTask",exercise:"wrongQuestion.practiceTask"},y={name:"CourseSearch",props:{show:{type:Boolean,required:!0},poolId:{type:String,required:!0}},data:function(){return{visible:this.show,sortType:"default",currentIndex:0,searchParams:{},conditions:[{title:"wrongQuestion.allPlan",placeholder:"wrongQuestion.choosePlan",columns:[],selectdText:"wrongQuestion.choosePlan",selectdIndex:0},{title:"wrongQuestion.questionSource",placeholder:"wrongQuestion.chooseSource",columns:[],selectdText:"wrongQuestion.chooseSource",selectdIndex:0},{title:"wrongQuestion.missionName",placeholder:"wrongQuestion.chooseMission",columns:[],selectdText:"wrongQuestion.chooseMission",selectdIndex:0}]}},computed:{currentCondition:function(){return this.conditions[this.currentIndex]}},watch:{show:function(e){e&&(this.visible=e)},visible:function(e){e||this.$emit("hidden-search")}},created:function(){this.fetchCondition()},methods:{fetchCondition:function(){var e=this;c.a.getWrongQuestionCondition({query:{poolId:this.poolId},params:this.searchParams}).then((function(t){var s=t.plans,n=t.source,i=t.tasks;a.a.forEach(s,(function(e){e.text=e.title}));var o=[];a.a.forEach(n,(function(t){o.push({type:t,text:e.$t(A[t])})})),a.a.forEach(i,(function(e){e.text=e.title})),e.conditions[0].columns=s,e.conditions[1].columns=o,e.conditions[2].columns=i}))},onClickReset:function(){this.sortType="default",this.currentIndex=0,this.searchParams={},this.conditions[0].selectdIndex=0,this.conditions[1].selectdIndex=0,this.conditions[2].selectdIndex=0,this.conditions[0].selectdText=this.$t("wrongQuestion.choosePlan"),this.conditions[1].selectdText=this.$t("wrongQuestion.chooseSource"),this.conditions[2].selectdText=this.$t("wrongQuestion.chooseMission"),this.fetchCondition()},onClickSearch:function(){this.visible=!1,this.$emit("on-search",this.searchParams)},onClickSort:function(e){this.sortType=e,"default"!==e?this.searchParams.wrongTimesSort=e:delete this.searchParams.wrongTimesSort},onChange:function(e,t,s){this.currentCondition.selectdIndex=s},onClickConfirm:function(){var e=this.currentCondition,t=e.selectdIndex,s=e.columns[t];a.a.size(s)&&(this.currentCondition.selectdText=s.text,0===this.currentIndex?(this.searchParams.courseId=s.id,this.conditions[1].selectdIndex=0,this.conditions[1].selectdText=this.$t("wrongQuestion.chooseSource"),this.conditions[2].selectdIndex=0,this.conditions[2].selectdText=this.$t("wrongQuestion.chooseMission"),delete this.searchParams.courseMediaType,delete this.searchParams.courseTaskId):1===this.currentIndex?(this.searchParams.courseMediaType=s.type,this.conditions[2].selectdIndex=0,this.conditions[2].selectdText=this.$t("wrongQuestion.chooseMission"),delete this.searchParams.courseTaskId):2===this.currentIndex&&(this.searchParams.courseTaskId=s.id),this.fetchCondition())}}},_=Object(d.a)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{staticClass:"wrong-question-search",attrs:{round:"",position:"bottom"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("van-nav-bar",{attrs:{title:e.$t("wrongQuestion.filter")},on:{"click-left":e.onClickReset,"click-right":e.onClickSearch},scopedSlots:e._u([{key:"left",fn:function(){return[s("span",{staticClass:"search-reset"},[e._v(e._s(e.$t("wrongQuestion.reset")))])]},proxy:!0},{key:"right",fn:function(){return[s("span",{staticClass:"search-btn"},[e._v(e._s(e.$t("wrongQuestion.check")))])]},proxy:!0}])}),s("van-divider",{staticStyle:{"margin-top":"4px"}}),s("div",{staticClass:"search-sort"},[s("div",{staticClass:"search-sort__title"},[e._v(e._s(e.$t("wrongQuestion.sort")))]),s("div",{staticClass:"search-sort__btns"},[s("div",{class:["sort-btn",{active:"default"===e.sortType}],on:{click:function(t){return e.onClickSort("default")}}},[e._v("\n        "+e._s(e.$t("wrongQuestion.all"))+"\n      ")]),s("div",{class:["sort-btn",{active:"DESC"===e.sortType}],on:{click:function(t){return e.onClickSort("DESC")}}},[e._v("\n        "+e._s(e.$t("wrongQuestion.highToLow"))+"\n      ")]),s("div",{class:["sort-btn",{active:"ASC"===e.sortType}],on:{click:function(t){return e.onClickSort("ASC")}}},[e._v("\n        "+e._s(e.$t("wrongQuestion.LowToHigh"))+"\n      ")])])]),s("div",{staticClass:"search-checked"},e._l(e.conditions,(function(t,n){return s("div",{key:n,class:["search-checked__item",{active:e.currentIndex==n}],on:{click:function(t){e.currentIndex=n}}},[s("div",{staticClass:"checked-title text-overflow"},[e._v(e._s(e.$t(t.title)))]),s("div",{staticClass:"checked-result"},[e._v(e._s(e.$t(t.selectdText)))])])})),0),s("div",{staticClass:"search-select"},[s("div",{staticClass:"search-select__toolbar"},[e._v("\n      "+e._s(e.$t(e.currentCondition.placeholder))+"\n      "),s("div",{staticClass:"search-select__confirm",on:{click:e.onClickConfirm}},[e._v(e._s(e.$t("btn.confirm")))])]),s("van-picker",{attrs:{"swipe-duration":500,columns:e.currentCondition.columns,"default-index":e.currentCondition.selectdIndex},on:{change:e.onChange}})],1)],1)}),[],!1,null,null,null).exports,C={testpaper:"wrongQuestion.examTask",homework:"wrongQuestion.homeworkTask",exercise:"wrongQuestion.practiceTask"},x={name:"ClassroomSearch",props:{show:{type:Boolean,required:!0},poolId:{type:String,required:!0}},data:function(){return{visible:this.show,sortType:"default",currentIndex:0,searchParams:{},conditions:[{title:"wrongQuestion.courseName",placeholder:"wrongQuestion.chooseName",columns:[],selectdText:"wrongQuestion.chooseName",selectdIndex:0},{title:"wrongQuestion.questionSource",placeholder:"wrongQuestion.chooseSource",columns:[],selectdText:"wrongQuestion.chooseSource",selectdIndex:0},{title:"wrongQuestion.missionName",placeholder:"wrongQuestion.chooseMission",columns:[],selectdText:"wrongQuestion.chooseMission",selectdIndex:0}]}},computed:{currentCondition:function(){return this.conditions[this.currentIndex]}},watch:{show:function(e){e&&(this.visible=e)},visible:function(e){e||this.$emit("hidden-search")}},created:function(){this.fetchCondition()},methods:{fetchCondition:function(){var e=this;c.a.getWrongQuestionCondition({query:{poolId:this.poolId},params:this.searchParams}).then((function(t){var s=t.courseSets,n=t.mediaTypes,i=t.tasks;a.a.forEach(s,(function(e){e.text=e.title}));var o=[];a.a.forEach(n,(function(t){o.push({type:t,text:e.$t(C[t])})})),a.a.forEach(i,(function(e){e.text=e.title})),e.conditions[0].columns=s,e.conditions[1].columns=o,e.conditions[2].columns=i}))},onClickReset:function(){this.sortType="default",this.currentIndex=0,this.searchParams={},this.conditions[0].selectdIndex=0,this.conditions[1].selectdIndex=0,this.conditions[2].selectdIndex=0,this.conditions[0].selectdText=this.$t("wrongQuestion.chooseName"),this.conditions[1].selectdText=this.$t("wrongQuestion.chooseSource"),this.conditions[2].selectdText=this.$t("wrongQuestion.chooseMission"),this.fetchCondition()},onClickSearch:function(){this.visible=!1,this.$emit("on-search",this.searchParams)},onClickSort:function(e){this.sortType=e,"default"!==e?this.searchParams.wrongTimesSort=e:delete this.searchParams.wrongTimesSort},onChange:function(e,t,s){this.currentCondition.selectdIndex=s},onClickConfirm:function(){var e=this.currentCondition,t=e.selectdIndex,s=e.columns[t];a.a.size(s)&&(this.currentCondition.selectdText=s.text,0===this.currentIndex?(this.searchParams.classroomCourseSetId=s.id,this.conditions[1].selectdIndex=0,this.conditions[1].selectdText=this.$t("wrongQuestion.chooseSource"),this.conditions[2].selectdIndex=0,this.conditions[2].selectdText=this.$t("wrongQuestion.chooseMission"),delete this.searchParams.classroomMediaType,delete this.searchParams.classroomTaskId):1===this.currentIndex?(this.searchParams.classroomMediaType=s.type,this.conditions[2].selectdIndex=0,this.conditions[2].selectdText=this.$t("wrongQuestion.chooseMission"),delete this.searchParams.classroomTaskId):2===this.currentIndex&&(this.searchParams.classroomTaskId=s.id),this.fetchCondition())}}},I=Object(d.a)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{staticClass:"wrong-question-search",attrs:{round:"",position:"bottom"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("van-nav-bar",{attrs:{title:e.$t("wrongQuestion.filter")},on:{"click-left":e.onClickReset,"click-right":e.onClickSearch},scopedSlots:e._u([{key:"left",fn:function(){return[s("span",{staticClass:"search-reset"},[e._v(e._s(e.$t("wrongQuestion.reset")))])]},proxy:!0},{key:"right",fn:function(){return[s("span",{staticClass:"search-btn"},[e._v(e._s(e.$t("wrongQuestion.check")))])]},proxy:!0}])}),s("van-divider",{staticStyle:{"margin-top":"4px"}}),s("div",{staticClass:"search-sort"},[s("div",{staticClass:"search-sort__title"},[e._v(e._s(e.$t("wrongQuestion.sort")))]),s("div",{staticClass:"search-sort__btns"},[s("div",{class:["sort-btn",{active:"default"===e.sortType}],on:{click:function(t){return e.onClickSort("default")}}},[e._v("\n        "+e._s(e.$t("wrongQuestion.all"))+"\n      ")]),s("div",{class:["sort-btn",{active:"DESC"===e.sortType}],on:{click:function(t){return e.onClickSort("DESC")}}},[e._v("\n        "+e._s(e.$t("wrongQuestion.highToLow"))+"\n      ")]),s("div",{class:["sort-btn",{active:"ASC"===e.sortType}],on:{click:function(t){return e.onClickSort("ASC")}}},[e._v("\n        "+e._s(e.$t("wrongQuestion.LowToHigh"))+"\n      ")])])]),s("div",{staticClass:"search-checked"},e._l(e.conditions,(function(t,n){return s("div",{key:n,class:["search-checked__item",{active:e.currentIndex==n}],on:{click:function(t){e.currentIndex=n}}},[s("div",{staticClass:"checked-title"},[e._v(e._s(e.$t(t.title)))]),s("div",{staticClass:"checked-result"},[e._v(e._s(e.$t(t.selectdText)))])])})),0),s("div",{staticClass:"search-select"},[s("div",{staticClass:"search-select__toolbar"},[e._v("\n      "+e._s(e.$t(e.currentCondition.placeholder))+"\n      "),s("div",{staticClass:"search-select__confirm",on:{click:e.onClickConfirm}},[e._v(e._s(e.$t("btn.confirm")))])]),s("van-picker",{attrs:{"swipe-duration":500,columns:e.currentCondition.columns,"default-index":e.currentCondition.selectdIndex},on:{change:e.onChange}})],1)],1)}),[],!1,null,null,null).exports,D={name:"QuestionBankSearch",props:{show:{type:Boolean,required:!0},poolId:{type:String,required:!0},exerciseMediaType:{type:String,required:!0}},data:function(){return{visible:this.show,chapterData:[],testpaperData:[]}},watch:{show:function(e){e&&(this.visible=e)},visible:function(e){e||this.$emit("hidden-search")}},created:function(){this.fetchCondition()},methods:{fetchCondition:function(){var e=this;c.a.getWrongQuestionCondition({query:{poolId:this.poolId},params:{exerciseMediaType:this.exerciseMediaType}}).then((function(t){var s=t.chapter,n=t.testpaper;!function e(t){a.a.forEach(t,(function(t){t.status=!0,t.children&&e(t.children)}))}(s),e.chapterData=s,e.testpaperData=n}))},onClickSearch:function(e){this.visible=!1,this.$emit("on-search",e)},onClickChange:function(e){!function e(t,s){a.a.forEach(t,(function(t){if(t.id==s)return t.status=!t.status,!1;t.children&&e(t.children,s)}))}(this.chapterData,e)}}},S=Object(d.a)(D,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("van-popup",{style:{width:"80%",height:"100%",background:"#f5f5f5",borderRadius:"10px 0 0 10px"},attrs:{position:"right"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("div",{staticClass:"exercise-search"},[s("div",{staticClass:"exercise-search__title"},[e._v(e._s(e.$t("wrongQuestion.questionSource")))]),"testpaper"===e.exerciseMediaType?e._l(e.testpaperData,(function(t,n){return s("div",{key:n,staticClass:"exercise-search__item"},[s("div",{staticClass:"exercise-search__name text-overflow"},[e._v("\n          "+e._s(t.assessmentName)+"\n        ")]),s("div",{staticClass:"exercise-search__btn",on:{click:function(s){return e.onClickSearch({exerciseMediaType:"testpaper",testpaperId:t.assessmentId})}}},[e._v("\n          "+e._s(e.$t("wrongQuestion.check"))+"\n        ")])])})):e._l(e.chapterData,(function(t){return s("div",{key:t.id,staticClass:"first-chapter"},[s("div",{staticClass:"exercise-search__item"},[s("div",{staticClass:"exercise-search__name text-overflow",on:{click:function(s){return e.onClickChange(t.id)}}},[s("span",{staticClass:"first-chapter__bar"},[s("span",{staticClass:"round-ball"},[s("span",[e._v(e._s(t.status?"-":"+"))])])]),e._v("\n            "+e._s(t.name)+"\n          ")]),s("div",{staticClass:"exercise-search__btn",on:{click:function(s){return e.onClickSearch({exerciseMediaType:"chapter",chapterId:t.id})}}},[e._v("\n            "+e._s(e.$t("wrongQuestion.check"))+"\n          ")])]),t.children.length?s("div",{class:t.status?"":"hidden-chapter-children"},e._l(t.children,(function(t){return s("div",{key:t.id,staticClass:"second-chapter"},[s("div",{staticClass:"exercise-search__item"},[s("div",{staticClass:"exercise-search__name text-overflow",on:{click:function(s){return e.onClickChange(t.id)}}},[s("span",{staticClass:"second-chapter__bar"},[s("span",{staticClass:"round-ball"},[s("span",[e._v(e._s(t.status?"-":"+"))])])]),e._v("\n                "+e._s(t.name)+"\n              ")]),s("div",{staticClass:"exercise-search__btn",on:{click:function(s){return e.onClickSearch({exerciseMediaType:"chapter",chapterId:t.id})}}},[e._v("\n                "+e._s(e.$t("wrongQuestion.check"))+"\n              ")])]),t.children.length?s("div",{class:t.status?"":"hidden-chapter-children"},e._l(t.children,(function(t){return s("div",{key:t.id,staticClass:"third-chapter"},[s("div",{staticClass:"exercise-search__item"},[s("div",{staticClass:"exercise-search__name text-overflow",on:{click:function(s){return e.onClickChange(t.id)}}},[s("span",{staticClass:"third-chapter__bar"},[s("span",{staticClass:"round-ball"})]),e._v("\n                    "+e._s(t.name)+"\n                  ")]),s("div",{staticClass:"exercise-search__btn",on:{click:function(s){return e.onClickSearch({exerciseMediaType:"chapter",chapterId:t.id})}}},[e._v("\n                    "+e._s(e.$t("wrongQuestion.check"))+"\n                  ")])])])})),0):e._e()])})),0):e._e()])}))],2)])}),[],!1,null,null,null).exports,k=s("41dc");function q(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?q(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var R=document.documentElement.clientHeight-46-48,T={name:"WrongQuestionBookDetail",components:{Question:b,CourseSearch:_,ClassroomSearch:I,QuestionBankSearch:S,EmptyCourse:k.a},data:function(){return{isLoading:!1,targetType:this.$route.params.type,targetId:this.$route.params.id,exerciseMediaType:this.$route.query.type,questionList:[],pagination:{current:1,total:0,pageSize:20},finished:!1,height:R,currentIndex:0,searchParams:{},show:!1,searchComponents:{course:"CourseSearch",classroom:"ClassroomSearch",exercise:"QuestionBankSearch"}}},computed:{currentSearchComponent:function(){return this.searchComponents[this.targetType]}},beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},created:function(){this.setNavbarTitle(this.$route.query.title),this.fetchWrongQuestion()},methods:E(E({},Object(o.d)({setNavbarTitle:r.x})),{},{fetchWrongQuestion:function(){var e=this;this.isLoading=!0;var t=this.pagination,s=t.current,n=t.pageSize;c.a.getWrongBooksQuestionShow({query:{poolId:this.targetId},params:E({targetType:this.targetType,limit:n,offset:(s-1)*n,exerciseMediaType:this.exerciseMediaType},this.searchParams)}).then((function(t){var s=t.data,n=t.paging;e.questionList=a.a.concat(e.questionList,s),e.pagination.total=n.total,e.finished=!1,e.isLoading=!1,a.a.size(e.questionList)>=n.total&&(e.finished=!0)}))},onChange:function(e){this.currentIndex=e;var t=a.a.size(this.questionList)-3;!this.finished&&e>=t&&(this.pagination.current++,this.finished=!0,this.fetchWrongQuestion())},prev:function(){0!=this.currentIndex&&this.$refs.swipe.swipeTo(this.currentIndex-1)},next:function(){this.currentIndex!=this.questionList.length-1&&this.$refs.swipe.swipeTo(this.currentIndex+1)},showSearch:function(){this.show=!0},hiddenSearch:function(){this.show=!1},onSearch:function(e){this.searchParams=e,this.questionList=[],this.pagination.current=1,this.currentIndex=0,this.fetchWrongQuestion()},onClickWrongExercise:function(){this.$router.replace({name:"WrongExercisesIntro",query:E({targetType:this.$route.params.type,id:this.targetId,exerciseMediaType:this.exerciseMediaType},this.searchParams)})},goToStartAnswer:function(){this.$router.replace({name:"WrongExercisesDo",query:E({id:this.targetId},this.searchParams)})}})},Q=Object(d.a)(T,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrong-question-detail"},[e.isLoading?s("e-loading"):e._e(),e.questionList.length?s("van-swipe",{ref:"swipe",attrs:{height:e.height,duration:100,loop:!1,"show-indicators":!1,"lazy-render":!0,"initial-swipe":e.currentIndex},on:{change:e.onChange}},e._l(e.questionList,(function(t,n){return s("van-swipe-item",{key:t.id+n,staticStyle:{"overflow-y":"auto"}},[s("question",{attrs:{total:e.pagination.total,order:n+1,question:t}})],1)})),1):s("empty-course",{staticStyle:{"margin-top":"0","padding-top":"36.53333vw"},attrs:{"has-button":!1,text:e.$t("wrongQuestion.empty")}}),e.questionList.length?s("div",{staticClass:"paper-swiper"},[s("div",{class:["left-slide__btn",0==e.currentIndex?"slide-disabled":""],on:{click:function(t){return e.prev()}}},[s("i",{staticClass:"iconfont icon-arrow-left"})]),s("div",{class:["right-slide__btn",e.currentIndex==e.questionList.length-1?"slide-disabled":""],on:{click:function(t){return e.next()}}},[s("i",{staticClass:"iconfont icon-arrow-right"})])]):e._e(),s("div",{staticClass:"question-search",on:{click:e.showSearch}},[s("van-icon",{attrs:{name:"filter-o"}}),e._v("\n    "+e._s(e.$t("wrongQuestion.filter"))+"\n  ")],1),s(e.currentSearchComponent,{tag:"component",attrs:{show:e.show,"pool-id":e.targetId,"exercise-media-type":e.exerciseMediaType},on:{"hidden-search":e.hiddenSearch,"on-search":e.onSearch}}),e.questionList.length?s("div",{staticClass:"intro-footer"},[s("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:e.onClickWrongExercise}},[e._v(e._s(e.$t("wrongQuestion.exercise")))])],1):e._e()],1)}),[],!1,null,null,null);t.default=Q.exports},"41dc":function(e,t,s){"use strict";var n={props:{hasButton:{type:Boolean,default:!0},type:{type:String,default:"course"},text:{type:String,default:"暂无数据"},isSearch:{type:Boolean,default:!1}},computed:{emptyText:function(){return this.text},moreText:function(){switch(this.type){case"course_list":return this.$t("e.moreCourse");case"classroom_list":return this.$t("e.moreClass");case"item_bank_exercise":return this.$t("e.moreQuestionBanks")}return""}},methods:{jumpBack:function(){this.$router.push({name:"find",query:{redirect:"find"}})},getEmptyText:function(){return"暂无".concat("course_list"===this.type?"课程":"班级")}}},i=s("a6c2"),a=Object(i.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"empty-course"},[s("img",{staticClass:"empty-course__img",attrs:{src:e.isSearch?"static/images/classroom/none-course.png":"static/images/courseEmpty.png",alt:""}}),s("p",{staticClass:"empty-course__text"},[e._v(e._s(e.emptyText))]),e.hasButton?s("div",{staticClass:"empty-course__btn",on:{click:e.jumpBack}},[e._v("\n    + "+e._s(e.moreText)+"\n  ")]):e._e()])}),[],!1,null,null,null);t.a=a.exports},"51aa":function(e,t,s){"use strict";s("6762"),s("2fdb"),s("a481"),s("e7e5");var n=s("d399"),i=(s("6c7b"),s("e17f"),s("2241")),a=(s("ac6a"),s("96cf"),s("3b8d")),o=(s("c5f6"),s("fb44")),r=s("361b"),c={name:"ibs-count-down",data:function(){return{time:0,timeWarn:!1}},props:{limitedTime:{type:Number,default:0},usedTime:{type:Number,default:0},mode:{type:String,default:"do"},beginTime:{type:Number,default:0}},mounted:function(){this.timer()},beforeDestroy:function(){},computed:{isShow:function(){var e=1e3*this.beginTime+60*this.limitedTime*1e3-Date.parse(new Date)>0;return!(!this.limitedTime||"do"!==this.mode||!e)}},methods:{timer:function(){if(this.limitedTime){var e=Date.parse(new Date),t=1e3*this.beginTime+60*this.limitedTime*1e3-e;t<=0?this.reachTimerSubmit():this.time=t}},reachTimerSubmit:function(){this.$emit("reachTimeSubmitAnswerData")},change:function(e){e.minutes<1&&(this.timeWarn=!0)},finish:function(){this.reachTimerSubmit()}}},u=s("a6c2"),l=Object(u.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:["ibs-count-down",this.timeWarn?"ibs-count-down-warn":""]},[this.isShow?t("van-count-down",{attrs:{time:this.time,format:"HH 时 mm 分 ss 秒"},on:{change:this.change,finish:this.finish}}):this._e()],1)}),[],!1,null,null,null).exports,d=s("a8b4"),h=(s("6b54"),s("def6")),m=s("3ce7"),p=s("63dd"),g={name:"item-engine",mixins:[h.a,p.a],components:{ibsItem:o.a,card:r.a,countDown:l,ibsFooter:d.a},props:{exerciseId:{type:[String,Number],default:""},mode:{type:String,default:"do"},assessmentResponse:{type:Object,default:function(){}},answerScene:{type:Object,default:function(){}},answerRecord:{type:Object,default:function(){}},answerReport:{type:Object,default:function(){}},assessment:{type:Object,default:function(){}},showSaveProcessBtn:{type:Boolean,default:!0},exerciseInfo:{type:Array,default:function(){return[]}},wrong:{type:Boolean,default:!1}},provide:function(){return{itemEngine:this}},inject:["brushDo"],data:function(){return{section_responses:[],height:0,cardShow:!1,count:0,intervalId:null,currentItemIndex:0,sourceMap:{},current:0,items:[],renderItmes:[],hasResponses:!1,continueDo:null,reviewedCount:null,isAnswerFinished:null,touchable:!0,allItems:[],iscando:[],choiceIsCando:[],reviewedQuestion:[],fillStatus:[],EssayRadio:[],question:{},itemIndex:0,questionIndex:0,aiAgentSdk:null}},beforeDestroy:function(){this.clearTime()},beforeRouteLeave:function(e,t,s){s()},computed:{needScore:function(){return!!Number(this.answerScene.need_score)},doLookAnalysis:function(){return!!Number(this.answerScene.doing_look_analysis)}},mounted:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$nextTick((function(){e.items.forEach((function(t,s){t.questions.forEach((function(t){e.allItems.push(t)})),e.choiceIsCando[s]=!1})),e.allItems.forEach((function(t,s){e.iscando[s]=e.exerciseInfo.filter((function(e){return e.questionId+""===t.id})).length<=0})),e.tryInitAIAgentSdk()})),s=1e3*Number(e.answerScene.start_time),!(Date.parse(new Date)<s)){t.next=4;break}return e.noStartTool(),t.abrupt("return");case 4:e.setSwiperHeight(),e.getSectionResponses(),"0"===e.brushDo.exerciseModes&&e.countTime();case 7:case"end":return t.stop()}var s}),t)})))()},methods:{tryInitAIAgentSdk:function(){var e=this;m.a.getItemBankExercise({query:{id:this.$route.query.exerciseId}}).then((function(t){if(t.aiTeacherDomain){e.aiAgentSdk=e.initAIAgentSdk(e.$store.state.user.aiAgentToken,{domainId:t.aiTeacherDomain},80,20),e.aiAgentSdk.boot(),e.aiAgentSdk.showReminder({title:"Hi，我是小知老师～",content:"我将在你答题过程中随时为你答疑解惑",duration:5e3});var s=document.getElementById("agent-sdk-floating-button");if(!s)return;s.addEventListener("click",Object(a.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getQuestion();case 2:e.aiAgentSdk.showReminder({title:"遇到问题啦？",content:"小知老师来为你理清解题思路～",buttonContent:"teacher.question",duration:5e3,workflow:{workflow:"teacher.question.idea",inputs:{domainId:t.aiTeacherDomain,question:e.question.question}},chatContent:e.question.content});case 3:case"end":return s.stop()}}),s)}))))}})).catch((function(e){console.log(e)}))},changeIsCando:function(e,t){this.iscando[e]=t},changeChoiceCando:function(e,t){this.choiceIsCando[e]=t},slideTo:function(e){var t=this,s="item".concat(e.itemId);this.current=e.itemIndex-1,this.changeRenderItems(this.current),this.fastSlide(),this.$nextTick((function(){var n=t.$refs[s][0].$refs["childSwiper".concat(e.itemId)],i=Math.max(e.questionIndex,0);n.$swiper.slideTo(i,0,!1)}))},judgelNoAnswer:function(e){var t=0;return e.forEach((function(e){e.item_responses.forEach((function(e){e.question_responses.forEach((function(e){e.response.some((function(e){return""!=e}))||(t+=1)}))}))})),t},noStartTool:function(){var e,t,s,n,a,o,r,c;i.a.alert({title:"考试说明",message:"考试未开始，请在".concat((e=this.answerScene.start_time,t=new Date(1e3*e),s=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),o=t.getHours(),r=t.getMinutes(),c=t.getSeconds(),"".concat([s,n,a].map((function(e){return(e=e.toString())[1]?e:"0".concat(e)})).join("-")," ").concat([o,r,c].map((function(e){return(e=e.toString())[1]?e:"0".concat(e)})).join(":"))),"之后再来"),getContainer:"#ibs-item-bank"}).then((function(){}))},getSectionResponses:function(){"do"===this.mode&&this.assessmentResponse.section_responses.length>0&&(this.section_responses=this.assessmentResponse.section_responses,this.hasResponses=!0),this.formateSections()},formateSections:function(){var e=this;this.assessment.sections.forEach((function(t,s){e.hasResponses?e.formateItems(t.items,s):e.section_responses.push({section_id:t.id,item_responses:e.formateItems(t.items,s)})})),this.changeRenderItems(0),this.slideToContinue()},formateItems:function(e,t){var s=this,n=[];return e.forEach((function(e,i){e.sectionIndex=t,e.itemIndex=i,s.hasResponses?(s.items.push(e),s.formateQuestions(e,e.questions,t,i)):(s.items.push(e),n.push({item_id:e.id,question_responses:s.formateQuestions(e,e.questions,t,i)}))})),n},formateQuestions:function(e,t,s,n){var i=this,a=[];return t.forEach((function(t,o){if(i.hasResponses)i.getContinueDo(s,n,o,e);else{1==Number(t.isDelete)&&(t.response_points=[]);var r=t.response_points.length?t.response_points.length:0;a.push({question_id:t.id,response:i.initResponse(t.answer_mode,r)})}})),a},getContinueDo:function(e,t,s,n){var i=this.assessmentResponse.section_responses[e].item_responses[t].question_responses[s].response.some((function(e){return""!=e}));this.continueDo||i||(this.continueDo={sectionsIndex:e,itemIndex:Number(n.seq),questionIndex:s})},slideToContinue:function(){if(this.continueDo){var e=this.items[this.continueDo.itemIndex-1],t={sectionsIndex:this.continueDo.sectionsIndex,itemIndex:e.seq,questionIndex:this.continueDo.questionIndex,itemId:e.id};this.slideTo(t)}},setSourceMap:function(e,t,s,n,i){e.sectionIndex=s,e.ItemIndex=n,t.sectionIndex=s,t.ItemIndex=n,t.questionIndex=i,this.sourceMap["item_".concat(e.id)]=e,this.sourceMap["question_".concat(t.id)]=t},showcard:function(){this.cardShow=!0},initResponse:function(e,t){var s=[];return"text"===e?s=Array(t).fill(""):"single_choice"!==e&&"rich_text"!==e&&"true_false"!==e||(s=[""]),s},getUserAnwer:function(e,t){return this.section_responses[e].item_responses[t]},changeAnswer:function(e,t){this.section_responses[t[0]].item_responses[t[1]]=e},countTime:function(){var e=this;null==this.intervalId&&(this.intervalId=setInterval((function(){e.count+=1,e.count%180==0&&e.trigger()}),1e3))},submitPaper:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.judgelNoAnswer(this.section_responses),n=t?"提交":"保存进度",a=t?"题目已经做完，确认提交吗?":"题目已经做完，确认保存进度，下次继续吗?";return s&&(a="还有".concat(s,t?"题未做，确认提交吗？":"题未做，确认保存进度，下次继续吗？")),new Promise((function(s,o){i.a.confirm({title:n,cancelButtonText:1==e.isAnswerFinished?"取消":"确认",confirmButtonText:1==e.isAnswerFinished?"退出答题":"继续答题",message:1==e.isAnswerFinished?"题目已经做完，是否返回列表？":a,getContainer:"#ibs-item-bank",className:"backDialog"}).then((function(){1==e.isAnswerFinished?(e.goResult(),document.getElementsByClassName("backDialog")[0].remove(),s()):(document.getElementsByClassName("backDialog")[0].remove(),s())})).catch((function(){1==e.isAnswerFinished?document.getElementsByClassName("backDialog")[0].remove():"1"==e.brushDo.exerciseModes?e.finishAnswer():(t?e.answerData():e.saveAnswerData(),document.getElementsByClassName("backDialog")[0].remove(),s())}))}))},trigger:function(){var e=this.getResponse();e.used_time=this.count,this.$emit("timeSaveAnswerData",e),Object(n.a)({message:"已保存",getContainer:function(){return document.querySelector("#ibs-item-bank")}})},reachTimeSubmitAnswerData:function(){var e=this.getResponse();e.used_time=this.count+Number(this.answerRecord.used_time),this.$emit("reachTimeSubmitAnswerData",e),this.clearTime()},saveAnswerData:function(){var e=this.getResponse();e.used_time=this.count+Number(this.answerRecord.used_time),this.$emit("saveAnswerData",e),this.clearTime()},answerData:function(){var e=this.getResponse();e.used_time=this.count+Number(this.answerRecord.used_time),this.$emit("getAnswerData",e),this.clearTime()},clearTime:function(){clearInterval(this.intervalId),this.intervalId=null},getResponse:function(){var e={};return e.assessment_id=this.assessment.id,e.answer_record_id=this.answerRecord.id,e.section_responses=this.section_responses,e.exerciseId=this.exerciseId,e.type="exercise",e},changeReviewedCount:function(e,t){this.reviewedCount=e,this.isAnswerFinished=t},finishAnswer:function(){var e=this;m.a.finishAnswer({query:{id:this.brushDo.recordId}}).then((function(){e.goResult()})).catch((function(e){n.a.fail(e.message)}))},goResult:function(){var e={type:"chapter",title:this.$route.query.title,exerciseId:this.$route.query.exerciseId,categoryId:this.$route.query.categoryId,moduleId:this.$route.query.moduleId,isLeave:!0,backUrl:"/item_bank_exercise/".concat(this.$route.query.exerciseId,"?categoryId=").concat(this.$route.query.categoryId)},t=this.assessmentResponse.answer_record_id;this.$router.replace({path:"/brushResult/".concat(t),query:e})},changeTouch:function(e){this.touchable=e},noChangeTouch:function(e){this.touchable=e},updataIsAnswerFinished:function(e,t,s,n){this.reviewedQuestion.includes(n)||this.reviewedQuestion.push(s),this.isAnswerFinished=e,t&&(this.reviewedCount=this.reviewedCount+1)},submitedQuestionStatus:function(e){this.fillStatus.push(e)},changeEssayRadio:function(e){0===this.EssayRadio.filter((function(t){return t.questionId===e.questionId})).length&&this.EssayRadio.push(e)}}},f=Object(u.a)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ibs-item-bank",attrs:{id:"ibs-item-bank"}},[this.section_responses.length>0&&e.items.length>0?[s("swiper",{ref:"mySwiper",class:{"swiper-no-swiping":!e.touchable},attrs:{height:e.height,loop:!1,speed:500},on:{slideNextTransitionEnd:e.slideNextTransitionEnd,slidePrevTransitionEnd:e.slidePrevTransitionEnd}},[e._l(e.renderItmes,(function(t){return[s("swiper-slide",{key:"paper"+t.id,ref:"paper"+t.id,refInFor:!0,staticClass:"ibs-paper-item",staticStyle:{"overflow-x":"hidden","z-index":"1 !important"},style:{height:e.height+"px"}},[s("ibs-item",{ref:"item"+t.id,refInFor:!0,attrs:{item:t,mode:e.mode,doLookAnalysis:e.doLookAnalysis,itemUserAnswer:e.getUserAnwer(t.sectionIndex,t.itemIndex),needScore:e.needScore,all:Number(e.assessment.question_count),keys:[t.sectionIndex,t.itemIndex],current:e.current,itemLength:e.items.length,showAnalysis:e.doLookAnalysis,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished,items:e.items,wrong:e.wrong,exerciseInfo:e.exerciseInfo,iscando:e.iscando,fillStatus:e.fillStatus,choiceIsCando:e.choiceIsCando,reviewedQuestion:e.reviewedQuestion,EssayRadio:e.EssayRadio},on:{changeIsCando:e.changeIsCando,changeChoiceCando:e.changeChoiceCando,changeTouch:e.changeTouch,noChangeTouch:e.noChangeTouch,updataIsAnswerFinished:e.updataIsAnswerFinished,changeAnswer:e.changeAnswer,changeEssayRadio:e.changeEssayRadio,changeReviewedCount:e.changeReviewedCount,submitedQuestionStatus:e.submitedQuestionStatus,itemSlideNext:e.itemSlideNext,itemSlidePrev:e.itemSlidePrev,questionSlideChange:e.questionSlideChange}})],1)]}))],2),s("card",{ref:"card",attrs:{mode:e.mode,sections:e.assessment.sections,section_responses:e.section_responses,assessmentResponse:e.assessmentResponse,all:Number(e.assessment.question_count),reviewedCount:e.reviewedCount},on:{slideTo:e.slideTo},model:{value:e.cardShow,callback:function(t){e.cardShow=t},expression:"cardShow"}}),"0"===e.brushDo.exerciseModes?s("ibs-footer",{attrs:{mode:e.mode,"show-save-process-btn":e.showSaveProcessBtn},on:{showcard:e.showcard,submitPaper:e.submitPaper}}):e._e(),s("countDown",{attrs:{mode:e.mode,limitedTime:Number(e.answerScene.limited_time),usedTime:Number(e.answerRecord.used_time),beginTime:Number(e.answerRecord.begin_time)},on:{reachTimeSubmitAnswerData:e.reachTimeSubmitAnswerData}})]:e._e()],2)}),[],!1,null,null,null);t.a=f.exports},"605f":function(e,t,s){},"6f7e":function(e,t,s){"use strict";var n=s("90c9");s.n(n).a},"7e0a":function(e,t,s){"use strict";var n=s("392c");s.n(n).a},"8fde":function(e,t,s){"use strict";var n=s("2f05");s.n(n).a},"90c9":function(e,t,s){},"975c":function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d"),s("a481"),s("e7e5");var n=s("d399"),i=s("bd86"),a=s("2ef0"),o=s.n(a),r=s("3ce7"),c=s("2f62");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}var l={name:"WrongQuestionDo",components:{itemEngine:s("51aa").a},data:function(){return{poolId:this.$route.query.id,isLoading:!1,assessment:{},answerScene:{},answerRecord:{},assessmentResponse:{},status:"",reviewedCount:0,recordId:"",exerciseModes:this.$route.query.exerciseMode,type:"wrongQuestionBook"}},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(i.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(c.e)({storageSetting:function(e){return e.storageSetting}})),beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},provide:function(){return{getResourceToken:this.getResourceToken,settings:this.storageSetting,brushDo:this}},created:function(){this.fetchQuestion()},methods:{fetchQuestion:function(){var e=this;this.isLoading=!0;var t=o.a.assign({},this.$route.query);delete t.id,r.a.getWrongQuestionStartAnswer({query:{poolId:this.poolId},data:t}).then((function(t){var s=t.assessment,n=t.assessment_response,i=t.answer_scene,a=t.answer_record;o.a.assign(e,{assessment:s,answerScene:i,answerRecord:a,assessmentResponse:n,status:a.status}),e.recordId=a.id,e.isLoading=!1}))},getAnswerData:function(e){var t=this;n.a.loading({message:this.$t("wrongQuestion.submitting"),forbidClick:!0}),r.a.submitWrongQuestionAnswer({query:{poolId:this.poolId,recordId:this.answerRecord.id},data:e}).then((function(e){n.a.clear(),t.goResult()})).catch((function(e){n.a.clear(),t.$toast(e.message)}))},goResult:function(){this.$router.replace({name:"WrongExercisesResult",query:{recordId:this.answerRecord.id}})},getResourceToken:function(e){return r.a.getItemDetail({params:{globalId:e}})}}},d=s("a6c2"),h=Object(d.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.isLoading?t("e-loading"):t("div",{staticClass:"ibs-wap-vue"},[t("item-engine",{ref:"itemEngine",attrs:{wrong:!0,answerRecord:this.answerRecord,assessmentResponse:this.assessmentResponse,assessment:this.assessment,answerScene:this.answerScene,"show-save-process-btn":!1},on:{getAnswerData:this.getAnswerData}})],1)],1)}),[],!1,null,null,null);t.default=h.exports},"99dc":function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d"),s("c5f6");var n=s("bd86"),i=s("3ce7"),a=s("2f62"),o=s("2ef0"),r=s.n(o);function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"WrongQuestionResult",data:function(){return{isLoading:!0,answerRecord:{},reports:{}}},provide:function(){return{getResourceToken:this.getResourceToken,settings:this.storageSetting,brushDo:this}},computed:u(u({},Object(a.e)({storageSetting:function(e){return e.storageSetting}})),{},{usedTime:function(){var e=parseInt(this.answerRecord.used_time)||0;return e<=60?1:Math.round(e/60)},rightRate:function(){return parseInt(this.reports.right_question_num/this.reports.question_count*100)}}),beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},created:function(){this.fetchAnswerRecord()},methods:{fetchAnswerRecord:function(){var e=this,t={answerRecordId:Number(this.$route.query.recordId)};i.a.answerRecord({query:t}).then((function(t){e.answerRecord=t.answer_record,e.reports=t.answer_report.section_reports[0],e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$toast(t.message)}))},getStatusClass:function(e){var t={right:"circle-green",wrong:"circle-orange",partRight:"circle-orange",no_answer:"circle-gray"},s=e.question_reports[0],n=s.response,i=s.status;return r.a.size(n)?t[i]:t.no_answer},viewAnalysis:function(){this.$router.push({name:"WrongExercisesAnalysis",query:{recordId:this.$route.query.recordId}})},getResourceToken:function(e){return i.a.getItemDetail({params:{globalId:e}})}}},d=s("a6c2"),h=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrong-question-result"},[e.isLoading?s("e-loading"):e._e(),s("div",{staticClass:"result-data"},[s("div",{staticClass:"result-data__item"},[e._v("\n      "+e._s(e.$t("wrongQuestion.correctRate"))+"\n      "),s("div",{staticClass:"result-data__bottom data-number-green"},[s("span",{staticClass:"data-number"},[e._v(e._s(e.rightRate))]),e._v("%\n      ")])]),s("div",{staticClass:"result-data__item"},[e._v("\n      "+e._s(e.$t("wrongQuestion.timeSpentOnTheQuestion"))+"\n      "),s("div",{staticClass:"result-data__bottom data-number-gray"},[s("span",{staticClass:"data-number"},[e._v(e._s(e.usedTime))]),e._v("\n        "+e._s(e.$t("wrongQuestion.minutes"))+"\n      ")])])]),s("div",{staticClass:"result-tag"},[s("div",{staticClass:"result-tag-item clearfix"},[s("div",{staticClass:"result-tag-item__circle circle-green"}),e._v("\n      "+e._s(e.$t("wrongQuestion.right2"))+"\n    ")]),s("div",{staticClass:"result-tag-item clearfix"},[s("div",{staticClass:"result-tag-item__circle circle-orange"}),e._v("\n      "+e._s(e.$t("wrongQuestion.wrong2"))+"\n    ")]),s("div",{staticClass:"result-tag-item clearfix"},[s("div",{staticClass:"result-tag-item__circle circle-gray"}),e._v("\n      "+e._s(e.$t("wrongQuestion.unanswered"))+"\n    ")])]),s("div",{staticClass:"result-panel"},[s("ul",{staticClass:"result-list"},e._l(e.reports.item_reports,(function(t,n){return s("li",{key:n,class:["result-list__item testpaper-number",e.getStatusClass(t)]},[e._v("\n        "+e._s(n+1)+"\n      ")])})),0)]),s("div",{staticClass:"result-footer"},[s("van-button",{staticClass:"result-footer__btn",attrs:{type:"primary"},on:{click:function(t){return e.viewAnalysis()}}},[e._v("\n      "+e._s(e.$t("wrongQuestion.viewParsed"))+"\n    ")])],1)],1)}),[],!1,null,null,null);t.default=h.exports},b695:function(e,t,s){"use strict";var n=s("e7bd");s.n(n).a},c545:function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d");var n=s("bd86"),i=(s("a481"),s("e7e5"),s("d399")),a=(s("c5f6"),s("3ce7"));function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}var r={data:function(){return{activeIcon:"static/images/exercise/active-icon.png",defaultIcon:"static/images/exercise/default-icon.png",activeQuestions:"static/images/exercise/active-on-questions.png",defaultQuestions:"static/images/exercise/default-on-questions.png",radio:"0",questionsNum:20,targetId:this.$route.query.id,targetType:this.$route.query.targetType,exerciseMediaType:this.$route.query.exerciseMediaType,searchParams:this.$route.query.searchParams,wrongNumCount:null}},created:function(){this.getWrongNumCount()},beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},methods:{blurInput:function(e){Number(e.target.value)>this.wrongNumCount&&(this.questionsNum=this.wrongNumCount,i.a.fail("超出输入范围"))},getWrongNumCount:function(){var e=this;a.a.getWrongNumCount({query:{poolId:this.targetId},params:{targetType:this.targetType,exerciseMediaType:this.exerciseMediaType}}).then((function(t){e.wrongNumCount=t.wrongNumCount,e.questionsNum=Math.min(e.questionsNum,e.wrongNumCount)})).catch((function(e){i.a.fail(e.message)}))},startExercise:function(){return"0"===this.questionsNum?i.a.fail(this.$t("courseLearning.theNumberAnswers")):""===this.questionsNum?i.a.fail(this.$t("courseLearning.theNumberblank")):void this.$router.replace({name:"WrongExercisesDo",query:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({exerciseMode:this.radio,itemNum:this.questionsNum,id:this.targetId,exerciseMediaType:this.exerciseMediaType},this.searchParams)})}}},c=(s("d309"),s("a6c2")),u=Object(c.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"answer-layout"},[s("div",{staticClass:"answer-mode"},[s("div",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("courseLearning.answerMode"))+"\n      ")]),s("van-radio-group",{staticClass:"choose-mode-group-radio",model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[s("van-radio",{staticClass:"choose-mode-radio",attrs:{name:"0"},scopedSlots:e._u([{key:"icon",fn:function(t){return[s("img",{staticClass:"img-icon",attrs:{src:t.checked?e.activeIcon:e.defaultIcon}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"props.checked"}],staticClass:"iconfont icon-check"})]}}])},[e._v("\n          "+e._s(e.$t("courseLearning.testMode"))+"\n          ")]),s("van-radio",{staticClass:"choose-mode-radio",attrs:{name:"1"},scopedSlots:e._u([{key:"icon",fn:function(t){return[s("img",{staticClass:"img-icon",attrs:{src:t.checked?e.activeQuestions:e.defaultQuestions}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"props.checked"}],staticClass:"iconfont icon-check"})]}}])},[e._v("\n          "+e._s(e.$t("courseLearning.answerOneQuestionAtTime"))+"\n          ")])],1)],1),s("div",{staticClass:"amswer-num"},[s("div",{staticClass:"questions-num"},[s("span",[e._v(e._s(e.$t("courseLearning.displayQuantity")))]),s("van-field",{staticClass:"input-num",attrs:{type:"digit",clearable:"",placeholder:e.$t("courseLearning.pleaseEnterNumberQuestions")},on:{blur:e.blurInput},model:{value:e.questionsNum,callback:function(t){e.questionsNum=t},expression:"questionsNum"}})],1),s("div",{staticClass:"questions-num-tips"},[e._v("\n        "+e._s(e.$t("courseLearning.questionsNumTips"))+"\n      ")])])]),s("div",{staticClass:"intro-footer"},[s("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:e.startExercise}},[e._v(e._s(e.$t("courseLearning.startAnsweringQuestions")))])],1)])}),[],!1,null,"5c218944",null);t.default=u.exports},c75f:function(e,t,s){"use strict";s("e7e5");var n=s("d399"),i=(s("ac6a"),s("96cf"),s("3b8d")),a=(s("c5f6"),s("fb44")),o=s("361b"),r=s("a8b4"),c=s("def6"),u=s("3ce7"),l=s("63dd"),d=0,h=0,m=0,p={name:"item-report",mixins:[c.a,l.a],components:{ibsItem:a.a,card:o.a,ibsFooter:r.a},provide:function(){return{itemEngine:this}},inject:["brushDo"],props:{mode:{type:String,default:"report"},answerScene:{type:Object,default:function(){}},answerRecord:{type:Object,default:function(){}},answerReport:{type:Object,default:function(){}},assessment:{type:Object,default:function(){}},assessmentResponse:{type:Object,default:function(){}},wrong:{type:Boolean,default:!1}},data:function(){return{section_responses:[],height:0,cardShow:!1,wrongMode:!1,currentItemIndex:0,sourceMap:{},hasWrong:!1,current:0,items:[],wrongItems:[],defaultItems:[],renderItmes:[],answerAttachments:{},question:{},itemIndex:0,questionIndex:0,aiAgentSdk:null}},computed:{needScore:function(){return!!Number(this.answerScene.need_score)}},mounted:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setSwiperHeight(),e.getSectionResponses(),e.tryInitAIAgentSdk();case 3:case"end":return t.stop()}}),t)})))()},methods:{tryInitAIAgentSdk:function(){var e=this;u.a.getItemBankExercise({query:{id:this.$route.query.exerciseId}}).then((function(t){if(t.aiTeacherDomain){e.aiAgentSdk=e.initAIAgentSdk(e.$store.state.user.aiAgentToken,{domainId:t.aiTeacherDomain},80,20),e.aiAgentSdk.boot(),e.aiAgentSdk.showReminder({title:"战绩新鲜出炉",content:"别独自琢磨，快找小知老师唠唠，一起解锁答题背后的奥秘～",duration:5e3});var s=document.getElementById("agent-sdk-floating-button");if(!s)return;s.addEventListener("click",Object(i.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getQuestion();case 2:e.aiAgentSdk.showReminder({title:"遇到问题啦？",content:"小知老师来为你理清解题思路～",buttonContent:"teacher.question",duration:5e3,workflow:{workflow:"teacher.question.analysis",inputs:{domainId:t.aiTeacherDomain,question:e.question.question}},chatContent:e.question.content});case 3:case"end":return s.stop()}}),s)}))))}})).catch((function(e){console.log(e)}))},getResponseAttachments:function(){var e=this;this.assessmentResponse.section_responses&&this.assessmentResponse.section_responses.forEach((function(t){t.item_responses.forEach((function(t){t.question_responses.forEach((function(t){e.answerAttachments[t.question_id]=t.attachments}))}))}))},resetDefaultData:function(){d=0,h=0,m=0},slideTo:function(e){var t=this,s="item".concat(e.itemId),n=Math.max(e.itemIndex-1,0),i=Math.max(e.questionIndex,0);this.wrongMode&&(n=Math.max(this.sourceMap["item_".concat(e.itemId)].wrongIndex,0),i=Math.max(this.sourceMap["question_".concat(e.questionId)].wrongIndex)),this.current=n,this.changeRenderItems(this.current),this.fastSlide(),this.$nextTick((function(){t.$refs[s][0].$refs["childSwiper".concat(e.itemId)].$swiper.slideTo(i,0,!1)}))},getSectionResponses:function(){this.section_responses=this.answerReport.section_reports,this.formateSections()},formateSections:function(){var e=this;this.getResponseAttachments(),this.assessment.sections.forEach((function(t,s){e.formateItems(t.items,s)})),this.items=this.defaultItems,this.changeRenderItems(0)},formateItems:function(e,t){var s=this;e.forEach((function(e,n){var i=s.answerReport.section_reports[t].item_reports[n].right_question_num,a=s.answerReport.section_reports[t].item_reports[n].question_count;e.sectionIndex=t,e.itemIndex=n,s.defaultItems.push(e),i<a&&s.wrongItems.push(e),s.formateQuestions(e,e.questions,t,n)}))},formateQuestions:function(e,t,s,n){var i=this;t.forEach((function(t,a){t.attachments=t.attachments.concat(i.answerAttachments[t.id]||[]),i.getQuestionWrongIndex(e,t,s,n,a)}))},getQuestionWrongIndex:function(e,t,s,n,i){"right"!==this.answerReport.section_reports[s].item_reports[n].question_reports[i].status&&(this.hasWrong=!0,d!==e.id&&(d=e.id,h=0,e.wrongIndex||(e.wrongIndex=m,m++)),t.wrongIndex||(t.wrongIndex=h,h++)),this.setSourceMap(e,t,s,n,i),this.resetDefaultData()},setSourceMap:function(e,t,s,n,i){e.sectionIndex=s,e.itemIndex=n,t.sectionIndex=s,t.ItemIndex=n,t.questionIndex=i;var a=this.answerReport.section_reports[s].item_reports[n];e.wrongNum=a.question_count-a.right_question_num,this.sourceMap["item_".concat(e.id)]=e,this.sourceMap["question_".concat(t.id)]=t},showcard:function(){this.cardShow=!0},getUserAnwer:function(e,t){return this.answerReport.section_reports[e].item_reports[t]},getUserReport:function(e,t){return this.answerReport.section_reports[e].item_reports[t]},changeswiper:function(){this.currentItemIndex=this.$refs.mySwiper.$swiper.activeIndex},getIsWrong:function(e,t){return!this.wrongMode||Number(this.answerReport.section_reports[e].item_reports[t].right_question_num)<Number(this.answerReport.section_reports[e].item_reports[t].question_count)},lookWrong:function(){var e=this;if(this.hasWrong)if(this.wrongMode=!this.wrongMode,this.wrongMode){var t=this.items[this.current],s=Number(t.id),i="item".concat(s),a=this.sourceMap["item_".concat(s)],o=Number(a.sectionIndex),r=Number(a.itemIndex),c=this.$refs[i][0].$refs["childSwiper".concat(s)],u=c.$swiper.activeIndex,l=this.assessment.sections[o].items[r].questions[u];this.items=this.wrongItems,this.itemIndex=0,this.questionIndex=0,a.wrongIndex?(this.current=a.wrongIndex,this.changeRenderItems(this.current),this.fastSlide(),l.wrongIndex&&this.$nextTick((function(){c.$swiper.slideTo(l.wrongIndex,0,!1)}))):(this.current=0,this.changeRenderItems(this.current),this.fastSlide())}else this.$nextTick((function(){e.items=e.defaultItems,e.current=0,e.changeRenderItems(e.current),e.fastSlide()}));else Object(n.a)({message:"没有错题",getContainer:"#ibs-item-bank"})}}},g=s("a6c2"),f=Object(g.a)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ibs-item-bank",attrs:{id:"ibs-item-bank"}},[this.section_responses.length>0?[s("swiper",{ref:"mySwiper",attrs:{height:e.height,loop:!1,speed:500},on:{slideNextTransitionEnd:e.slideNextTransitionEnd,slidePrevTransitionEnd:e.slidePrevTransitionEnd}},[e._l(e.renderItmes,(function(t){return[s("swiper-slide",{key:"paper"+t.id,ref:"paper"+t.id,refInFor:!0,staticClass:"ibs-paper-item",style:{height:e.height+"px"}},[s("ibs-item",{ref:"item"+t.id,refInFor:!0,attrs:{item:t,items:e.items,mode:e.mode,wrongMode:e.wrongMode,itemUserAnswer:e.getUserAnwer(t.sectionIndex,t.itemIndex),needScore:e.needScore,all:Number(e.assessment.question_count),keys:[t.sectionIndex,t.itemIndex],itemUserReport:e.getUserReport(t.sectionIndex,t.itemIndex),showAnalysis:!0,showReport:!0,current:e.current,wrong:e.wrong,itemLength:e.items.length,exerciseInfo:e.answerRecord},on:{itemSlideNext:e.itemSlideNext,itemSlidePrev:e.itemSlidePrev,questionSlideChange:e.questionSlideChange}})],1)]}))],2),s("card",{attrs:{mode:e.mode,sections:e.assessment.sections,section_responses:e.section_responses,answer_report:e.answerReport,wrongMode:e.wrongMode},on:{slideTo:e.slideTo},model:{value:e.cardShow,callback:function(t){e.cardShow=t},expression:"cardShow"}}),s("ibs-footer",{attrs:{mode:e.mode},on:{showcard:e.showcard,lookWrong:e.lookWrong}})]:e._e()],2)}),[],!1,null,null,null);t.a=f.exports},d170:function(e,t,s){},d309:function(e,t,s){"use strict";var n=s("d170");s.n(n).a},d697:function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d");var n=s("bd86"),i=s("3ce7"),a=s("2f62"),o=s("faa5");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"myWrongQuestionBookExercise",components:{EmptyCourse:s("41dc").a},data:function(){return{isLoading:!1,exerciseList:[],poolId:this.$route.query.id,title:this.$route.query.title}},created:function(){this.setNavbarTitle(this.title),this.fetchExerciseDetail()},methods:c(c({},Object(a.d)({setNavbarTitle:o.x})),{},{fetchExerciseDetail:function(){var e=this;this.isLoading=!0,i.a.getWrongQuestionExercise({query:{poolId:this.poolId}}).then((function(t){e.isLoading=!1,e.exerciseList=t}))},goToWrongQuestionDetail:function(e){this.$router.push({name:"myWrongQuestionBookDetail",params:{type:"exercise",id:this.poolId},query:{title:this.title,type:e}})}})},l=s("a6c2"),d=Object(l.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("e-loading"):e._e(),s("div",{staticClass:"wrong-list",staticStyle:{"padding-top":"16px"}},[e._l(e.exerciseList,(function(t,n){return s("div",{key:n,staticClass:"list-item",on:{click:function(s){return e.goToWrongQuestionDetail(t.type)}}},[s("div",{staticClass:"list-item__image"},[s("img",{attrs:{src:t.cover.middle}})]),s("div",{staticClass:"list-item__detail"},[s("h3",{staticClass:"title text-overflow"},[e._v(e._s(t.module))]),s("p",{staticClass:"number text-overflow"},[e._v(e._s(t.wrong_number)+" "+e._s(e.$t("wrongQuestion.question")))])])])})),e.exerciseList.length||e.isLoading?e._e():s("empty-course",{attrs:{"has-button":!1,text:e.$t("wrongQuestion.empty")}})],2)],1)}),[],!1,null,null,null);t.default=d.exports},e3e1:function(e,t,s){},e7bd:function(e,t,s){},fb44:function(e,t,s){"use strict";s("a481"),s("96cf");var n=s("3b8d"),i=(s("e7e5"),s("d399")),a=(s("28a5"),s("ac6a"),s("c5f6"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("7f7f"),s("6b54"),{props:{itemData:{type:Object,default:function(){return{}}},commonData:{type:Object,default:function(){return{}}},attachements:{type:Array,default:function(){return[]}},currentItem:{type:Object,default:function(){return{}}},reviewedCount:{type:Number,default:0},totalCount:{type:Number,default:0},showShadow:{type:String,default:""},exerciseInfo:{type:Array,default:function(){return[]}},disabledData:{type:Boolean,default:!1},questionStatus:{type:String,default:""},wrong:{type:Boolean,default:!1},mode:{type:String,default:"do"},isAnswerFinished:{type:Number,default:0},reviewedQuestion:{type:Array,default:function(){return[]}},fillStatus:{type:Array,default:function(){return[]}},EssayRadio:{typeof:Array,default:function(){return[]}}},computed:{disabled:function(){return"do"!==this.itemData.mode}}}),o=(s("6762"),s("2fdb"),{methods:{reportAnswer:function(e,t,s,n){var i="";return"report"!==e?"":(s.includes(t)&&(i+="ibs-subject-option__order_wrong "),n.includes(t)&&(i+="ibs-subject-option__order_right"),i)}}}),r=function(e){switch(e){case"text":return"填空题";case"single_choice":return"单选题";case"choice":return"多选题";case"rich_text":return"问答题";case"uncertain_choice":return"不定项";case"true_false":return"判断题";default:return""}},c=s("def6");
/*! load-scripts v2.0.0 | (c) 2018-present Chen Fengyuan | MIT */
function u(...e){return Promise.all(e.map(e=>new Promise((t,s)=>{const n=document.head||document.body||document.documentElement;if(n.querySelector(`script[src*="${e}"]`))return void t(e);const i=document.createElement("script"),a=()=>{i.onerror=null,i.onload=null};i.onerror=()=>{a(),s(new Error("Failed to load script: "+e))},i.onload=()=>{a(),t(e)},i.async=!0,i.src=e,n.appendChild(i)})))}s("4917");var l={audio:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAS1BMVEUAAABgu2Bgul9gul+f35+a5Jhgul9guWBgul5gu15guWBgul9gul5gumBgu15gul9gumBgu1+I2IZgul6Z5JeL2YmR3o95zHdxx28P/4dOAAAAE3RSTlMAQJ+/EM/fIJDvEM+AMHBgUK/PwGlb5wAAAjlJREFUeNrt3N1u2zAMhmFK2vTrn2RM2t7/lY7F1gRdZxirxPgrxvfcwgNbTnwgkCzLsixLubr4WPjT/fhGqiVfuKvrd1XhxL1dL4rC1HgAUE+YIo8Aqglr5CFANWHmMUAt4cyDgFrCMBQoQswbKMCbEHEH3oHDhW0YUEdYeTxQhHhbUIA6QqcCFCE4UITgQBGCA0UIDhQhOFCE4EARggNFCA4UIThQhOBAEYIDRQgOFCE4UITgQBGCA0UIDhQhOFCERwOfL3vCg4F82RUeDLzuC48F8tO+8Fjgy2VfeCiQn8cK70DopzwWyC/Xp8FCxw/OGdCABjTgu74usERoYHRE1S05oAITvTWfcihwwEDvS24KUEBPH0tncCBRRgdSQAc6dCAVdGBDBwZ0INwjdusp0b0J7SXJLMXz4iq9tqD9Dq58q/kpB7h/koD7uWVAAxrQgAY0oAENaEADGtCABjTg/wzM6MAVHBgTNrCcCBIYf5dnwgOW7CrdwgPmVx0wcCWCBi6EDfQEDkzgwEBbRQzgRFuBnFnYBDoQoKeNPAgw0kYRBLi15ARzbqb9/UKgk0eePrYWICC39OdVAe3slp/prXrKEfFwWQleCq18ldNvBjSgAX9lQAMacGc9AxrQgDvrHQ5M/ODmvpFC+lX6xyI/tNY31ko/T4T9lsxdo9X0C0TYt3AmIuRdmOkz1cYPKtahIybH+1LPkE79Wuoac6re1DsoljUrPlFvaT23wgqV6JdKlmVZlqXbT5+0CuolQf16AAAAAElFTkSuQmCC",video:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAATlBMVEUAAACLbNOMa9SIateLatTPv+/LvOuMatSMcNyLatSLa9SMatSMatSKatWLatSLadSKatWMatS4pOSLatTLvOu7p+Wjid2SctfBr+izneK03+pEAAAAE3RSTlMAQL8ggBDP3xCQz5/vMO9wYK/PFAxd6QAAAiVJREFUeNrt3N2K2zAQhuGxxq0ky85Px0l27/9GOwtlaUtYJY5GHtjvPQzk48EoJ8E2IYQQQsalY4mzbO7XDzKNyywvdflpKhzl1S6roZAnaQC0E3KUFkAzYYrSBGgmzNIGaCVcpBHQShiaAlXo8wIq8FPo8QR+AI2EUzOgjTBJe6AK/R1BBdoIBxOgCp0DVegcqELnQBU6B6rQOVCFzoEqdA5UoXOgCp0DVegcqELnQBU6B6rQOVCFzoEqdA5UoXOgCncHvq8V4d7A61oT7gy8rVXhvkC51IX7Am9rXbgrUK4mwkGcC1sC5fZWF+4J1K7vb42Fg3RuABBAAAH8JwABBLCyByCAAFb2AAQQQPmikMevy0Hudi49gHHYeFvVPOiuPTAy0SbhxB8f2wNPGxcyURfggR7tIH81n6gTMGy68yYy+QMG+Swn8gycj0SegXEh18DI5BvI5BsYyDkweweOAAIIIIDfHFi8Aw/JOVCyd6CM3oFSknOgRHYOlMOxHzBue+AjdwNKokr3KZF7ATM9VpH/hKdOQBnpkcb7X1w6AKVUx9IQ5E4TpzP+Yf0TgAACWNkDEEAAK3sAAghgZQ9AAAGs7AEIIICVPQAB/PZAls4t9FxJOpfoyaJ0baJny9K1QuT7V7LQ0wXpWCDyfQkXIvJ8CjNtKU3SqZgMXjHZ0sd7vqSz3sS0vVHMG+mluIhlc2F6NT6dp1kMmmM5JkIIIYRs+w0UNMmnBMQlQgAAAABJRU5ErkJggg==",ppt:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAUVBMVEUAAADfYDTfYDDeXzHvr6/wtqPfYDDeYDHfYDDeXzHeXzHfXzHfXzHdYDHfYDHeYDHeXzDeYDHeXzLrnIDeXzHwt6LroYbha0DlhGDtqpHplnhmzG3pAAAAFHRSTlMAQEDfEM8ggBDvz7+fYDCQcFCvz/A/iYQAAAJdSURBVHja7dzhbpswFIbhU7wZ29iQdIek7f1f6M6PjdCtiUWx8Vf1vH8tRY8QCmBbJk3TNE2rnDtF4/nT/fpBVbPR864uP6sKe97bZa4otIELAOsJreESwGpCZ7gIsJpw4jLAWsKRCwFrCYeiQBFiXkABLkLEO/AGLC4MxYB1hI7LA0WIdwsKsI7wqQpQhOBAEYIDRQgOFCE4UITgQBGCA0UIDhQhOFCE4EARggNFCA4UIThQhOBAEYIDRQgOFCE4UITNgW9zRtga+DLnhI2B1zkrbAvkS17YFnid88KmQH6pIRQguLAkkK+veWFToBDfXssKBXhwnQIVqEAFvuvLAIez/b/uPA0gwJ7uZZMBAEZ6VDLNgWNuub4x0FOuU1ugoWwJHUgJHUg9OpAGdGAHATSrwnOidREB+O/ImtgBAt8/BAdEIJ9oqYcEsl0GR0zgREuYQE9LBhK4etcZMIGdAncCHThwNeohgWkZdJB/M6vBMyLQW1qKgEAz0i0DB/S9o1sJ4XWrX5U6R+sMAvBBJ4hX/vtZjw10BvyzM4J/uEduCWTKZANDA5NnZODT0H6Gle429gFhjvrjJ8kUgweZ5acl0GUIBSpQgQpUoAIVqEAFKlCBRYAOFLj86hkUONCfDCjw76rwhLu5LKTRpgC8+w1+e54CFajAOylQgQrkxylQgd8eaPngRtqW44NztDHDhxZoaxMfWqStdXxoI21u4AMbiLAv4UhEyHfhRJ/JBT4o44oeMVneZ1se0pkv2JbHnObraVc2cs18tLQ3m56D5wp5E0+ONE3TNK1uvwF3ch6uj7dPzAAAAABJRU5ErkJggg==",pptx:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAUVBMVEUAAADfYDTfYDDeXzHvr6/wtqPfYDDeYDHfYDDeXzHeXzHfXzHfXzHdYDHfYDHeYDHeXzDeYDHeXzLrnIDeXzHwt6LroYbha0DlhGDtqpHplnhmzG3pAAAAFHRSTlMAQEDfEM8ggBDvz7+fYDCQcFCvz/A/iYQAAAJdSURBVHja7dzhbpswFIbhU7wZ29iQdIek7f1f6M6PjdCtiUWx8Vf1vH8tRY8QCmBbJk3TNE2rnDtF4/nT/fpBVbPR864uP6sKe97bZa4otIELAOsJreESwGpCZ7gIsJpw4jLAWsKRCwFrCYeiQBFiXkABLkLEO/AGLC4MxYB1hI7LA0WIdwsKsI7wqQpQhOBAEYIDRQgOFCE4UITgQBGCA0UIDhQhOFCE4EARggNFCA4UIThQhOBAEYIDRQgOFCE4UITNgW9zRtga+DLnhI2B1zkrbAvkS17YFnid88KmQH6pIRQguLAkkK+veWFToBDfXssKBXhwnQIVqEAFvuvLAIez/b/uPA0gwJ7uZZMBAEZ6VDLNgWNuub4x0FOuU1ugoWwJHUgJHUg9OpAGdGAHATSrwnOidREB+O/ImtgBAt8/BAdEIJ9oqYcEsl0GR0zgREuYQE9LBhK4etcZMIGdAncCHThwNeohgWkZdJB/M6vBMyLQW1qKgEAz0i0DB/S9o1sJ4XWrX5U6R+sMAvBBJ4hX/vtZjw10BvyzM4J/uEduCWTKZANDA5NnZODT0H6Gle429gFhjvrjJ8kUgweZ5acl0GUIBSpQgQpUoAIVqEAFKlCBRYAOFLj86hkUONCfDCjw76rwhLu5LKTRpgC8+w1+e54CFajAOylQgQrkxylQgd8eaPngRtqW44NztDHDhxZoaxMfWqStdXxoI21u4AMbiLAv4UhEyHfhRJ/JBT4o44oeMVneZ1se0pkv2JbHnObraVc2cs18tLQ3m56D5wp5E0+ONE3TNK1uvwF3ch6uj7dPzAAAAABJRU5ErkJggg==",doc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAUVBMVEUAAABNh+dQh+dPh+apyfRQgN9Ph+ZQh+dOheROhuZOheZPhuZOhuZOhuZOhuZOh+ZSi+pPhuZPh+ZQheSWue9OhuapxvOevvFwnuuFre9ZjuhAHZO1AAAAFXRSTlMAYECfXxC/IJBwgO/vz1DfMN+vMFCo01ueAAADvElEQVR42u3a2XKbMBQGYKGVxSx2KznJ+z9oLzypID8nLjU60mT0X3VMLD5rO3SQqKmpqampqal5PWbq1f/nt0gcaf1LuWuRMnL0L+YeUgp7718HJhQqfwYwnbD1pwCjsLzx/QQmETp/EjAKy5uAERh0oR34Fxh0iSskAs8XjqcB0wiNPw2YRijPA6YRTucB0wibNMCgSwcGXTow6NKBQZcODLp0YNClA4MuHRh06cCgSwcGXTow6NKBQZcODLp0YNClA4MuHRh0fuB7+F5YOjDo3MC38EyYGejvaYSNZ+vCoPMC/ftzYV7gx/0UIQLL7sNTgf7j/f5MyA1E49v3WQ4DmSMrsAIrsAI3qcCfDWylEFL5Axk6I0wzMwGbw29Dr+7x8mVkAarPv7H/DHTiETdwAN3hlz02vkJlAF6+e11mu6bFmdaLz3ScQBzj6+MuLX3znnWIRU9cuZE/6cYB7Kg3jop4GX6LzbIsEkvdbyLGvoFflBRIjxh1YGSBNZIIiG11OJLYU1dYVamAuGs4HEkcewX7UjIgTsIZ13DcaWBqSiagN3uQEV7YA7zlAk57kF6sYoY9+MgFbCOEuoPd+WPnmYC4LuNnuL5lbJMBSFc7RZ2sip8pBiBd7SY4uYRLng+ocMczYpsefssvzwfERy4LR5ewzjECsdo10MIA64kT2H1dDQ5aUF8ng+cD4iPXSLQAj1pcwIvZ9lQrIAbqHA8Qt1+qeQt1jguI1e4qdtJBnWMDQteslsK0Icn4OSMQH7miSm4rx2qqMgJhea61l7V8rWUD4oP8sHKM696EOscDxGoXe9Nt67SE9jiAWGRd/NpG3sZ/3viAWO3Mdu+TexcGfqCljof3AiM9AxCrHWSi5D07EJuMm92O3OYAtgIyx9kJQ88PxKGU1IUpCxCHsqVmp8oCxMf8kbrZnAOIk9DRF/IAr9R3LnAhBxD/p2Spu91yAbvdvQSLyZALeKP2Egu7Dz8Q55qidqAuCxBbnanBtzmAONd+UVXG+BxAdPTUo47MAsS5NlL3a3MCJ6patCDPA2ypL1xAzgtEx426YZMDiGPsyE18zgu8LA8fdQ7AqOwHe5RcZH/xGNssSzfXk0dEKrACK/BJexVYgRX4pL0KrMAKfNJeBT7L5JnjDgKdZ44RBzN41oziaKxnjToM7Dxr5GGgYR3jqzie3jOmEcdjZk+ngA4UYvFcuX5ugoVWk2ERjxS6ksF3IAvDPBydeCGmT0wcOvFiXJOupgy2MeKMLLJJEOlETU3NT88fCCsl2s8Xx2oAAAAASUVORK5CYII=",docx:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAUVBMVEUAAABNh+dQh+dPh+apyfRQgN9Ph+ZQh+dOheROhuZOheZPhuZOhuZOhuZOhuZOh+ZSi+pPhuZPh+ZQheSWue9OhuapxvOevvFwnuuFre9ZjuhAHZO1AAAAFXRSTlMAYECfXxC/IJBwgO/vz1DfMN+vMFCo01ueAAADvElEQVR42u3a2XKbMBQGYKGVxSx2KznJ+z9oLzypID8nLjU60mT0X3VMLD5rO3SQqKmpqampqal5PWbq1f/nt0gcaf1LuWuRMnL0L+YeUgp7718HJhQqfwYwnbD1pwCjsLzx/QQmETp/EjAKy5uAERh0oR34Fxh0iSskAs8XjqcB0wiNPw2YRijPA6YRTucB0wibNMCgSwcGXTow6NKBQZcODLp0YNClA4MuHRh06cCgSwcGXTow6NKBQZcODLp0YNClA4MuHRh0fuB7+F5YOjDo3MC38EyYGejvaYSNZ+vCoPMC/ftzYV7gx/0UIQLL7sNTgf7j/f5MyA1E49v3WQ4DmSMrsAIrsAI3qcCfDWylEFL5Axk6I0wzMwGbw29Dr+7x8mVkAarPv7H/DHTiETdwAN3hlz02vkJlAF6+e11mu6bFmdaLz3ScQBzj6+MuLX3znnWIRU9cuZE/6cYB7Kg3jop4GX6LzbIsEkvdbyLGvoFflBRIjxh1YGSBNZIIiG11OJLYU1dYVamAuGs4HEkcewX7UjIgTsIZ13DcaWBqSiagN3uQEV7YA7zlAk57kF6sYoY9+MgFbCOEuoPd+WPnmYC4LuNnuL5lbJMBSFc7RZ2sip8pBiBd7SY4uYRLng+ocMczYpsefssvzwfERy4LR5ewzjECsdo10MIA64kT2H1dDQ5aUF8ng+cD4iPXSLQAj1pcwIvZ9lQrIAbqHA8Qt1+qeQt1jguI1e4qdtJBnWMDQteslsK0Icn4OSMQH7miSm4rx2qqMgJhea61l7V8rWUD4oP8sHKM696EOscDxGoXe9Nt67SE9jiAWGRd/NpG3sZ/3viAWO3Mdu+TexcGfqCljof3AiM9AxCrHWSi5D07EJuMm92O3OYAtgIyx9kJQ88PxKGU1IUpCxCHsqVmp8oCxMf8kbrZnAOIk9DRF/IAr9R3LnAhBxD/p2Spu91yAbvdvQSLyZALeKP2Egu7Dz8Q55qidqAuCxBbnanBtzmAONd+UVXG+BxAdPTUo47MAsS5NlL3a3MCJ6patCDPA2ypL1xAzgtEx426YZMDiGPsyE18zgu8LA8fdQ7AqOwHe5RcZH/xGNssSzfXk0dEKrACK/BJexVYgRX4pL0KrMAKfNJeBT7L5JnjDgKdZ44RBzN41oziaKxnjToM7Dxr5GGgYR3jqzie3jOmEcdjZk+ngA4UYvFcuX5ugoVWk2ERjxS6ksF3IAvDPBydeCGmT0wcOvFiXJOupgy2MeKMLLJJEOlETU3NT88fCCsl2s8Xx2oAAAAASUVORK5CYII=",pdf:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAATlBMVEUAAADfYDLfYDDvr6/wtqPeXzHfYDDdYDDeXzHeXzHfXzHfXzLeYDHeXzHeYDHeYDLfYDDfYDLeYDHrnIDeXzHwt6LsooflhGDhbkPplnjsKT+gAAAAFHRSTlMAQCAQz98QYO+Av59wz1CQMK/fzwUGIJMAAAOaSURBVHja7NbBkoMgEARQZFcEEU1qR5P8/4/urJPokaoNE/pAX/TS5StEHNPS0tLS0qIcN8Xe07/z82VUY6Ont7J9qwoDvZttVRTaRAWAekLbUwmgmtD1VASoJlyoDFBLeKFCQC3hWA4oQswFFKAIEXegAFWEqRhQR+ioMFCEeFuQgTrCTgXIQnAgC8GBLAQHshAcyEJwIAvBgSwEB7IQHMhCcCALwYEsBAeyEBzIQnAgC8GBLAQHshAcyMLqwMeaEdYG3tacsDKQ1qywMnDLC+sC72teWBVINxVhR+DCkkC6b3lhPaAQH1thYUcfTteADdiADZiLjyFce1ign6QYQIHevpoXTOBwVgMi0JszzgMCR2mlyXAWQOAiJVnJARAY9tJMZPlyAQQO5rl0M18sMvDvxgECg5SeUkDg8jqjB9BXHI0R2Qz6kSRp+f05HSDQSyuRAz0HSWaF6FH/JDTvrSkazogIlGnQWcNBHBboelYt4rhF/qzOkECyRzViAqejmjCB8aiOmMDfds5tN3IQBqDEkjH3XMT/f+tq1iGlg7artBrXVTlPjDRMjpzByIlFfpuqU5B4nto8iOZE6V5cvekICgWBm9Z5Mjh1gryGyVmendQJwnlrV8OsygQD39nuOkGX4HLtcQg83+6aBLFbGsGcrIoEW1XcCjyG8PHRHccRjsOJC45JGp9TItAGpmGXFMQFxwD2hiOA3yKIw7pdzb+I3yFIw4S2lkeskxfEITZhLdZ0QKfr5QXpXaXkAr2TW847jyH91SzSgi2AnJebXQ+FvioAcUG6Kjnn2W4AUmZ9QcExB4YPrwDFx/TwX4QFXeEAPgUPKGYkY0airGAEM2BLdGd0CcZULSkYltHuaT+LT1/ZBRM1lv/YMRjfkqLdq5zgypfdymA3kmMqy0LRVTFBd3rR3vKxrhfaCG3jOgeo6417ts0vnQNdLQHNL7bHlqCrZwGh+bUR6hJcrqJo45HX1fURL6vEI1DWlsJhK1fpAahLEDktY/Mzu7LGHi7M0+XntXUecQRpaX76WqOs6fAKe7d876eyuez6KRt0dr85Yj3v1LbnZU8puh/XPzgFp+AU7JmCU3AK1o+ZglPw1wtCFWYz97BVGGtuglWULH6s1f3WL92rZJM/Wu1u24juED4CqPlfuJrPYHMVAq3kEZP3QZA8pPM+GSSPOb2PN18CYn0lLoL5KkB7dvUFuCMmayaTyWQyeS1/AKtBL8WRjteoAAAAAElFTkSuQmCC",xls:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAS1BMVEUAAABIpWBIo2BIpF9IomBIo1+u17dJo19Io19Jo19QqGBIpF9Jo2BMo2JJpF9Jo2BJo1+ZzKZIo1+s1bdttYCfz6yGwpZernJ6vIu659ZwAAAAEnRSTlMAYECfIN9f74CPEL9wMM9Qr1BwWUG9AAADG0lEQVR42u3c23KbMBCA4QV0QhycrnLo+z9pO5k2iypblBqxO5397zJM7G+MkC3kBDRN0zRN054v3sLw732DxvUTPtWbg5b1Kz7ZW2opDIjPAxsKBzwD2E444jlAEoo7v5/AVkKDZwFJKG4AEjA5oS/gFzA5iVcIAc8XrqcB2wgjngZsI+zPA7YR3s4DthF2bYDJSQcmJx2YnHRgctKByUkHJicdmJx0YHLSgclJByYnHZicdGBy0oHJSQcmJx2YnHRgcvzA91QXSgcmxw38SHtCZiCmXSEz8HVfyAvE930hLxDf9oW8QPzeQEjAa06zYwJSH6/1Fl7gfr0CFahABWYpUIEKxL9q6o3pLD7Ih8UsnWUEhuq+njWfR41lAw7wq6n6nIYNuMBvgseyAORnAlZ3zlY6GpiAvra9bA0/EDeGuGJeB9QLF3AEyvjyEPtFkj3qjJssbJr4gDYCNWQnnwqs7yRARZqQZ6AWZAKWlJ4mcMpYXqBfymFoTXbieYFoY3E5ZGb+j1vFXBOyGYYfiF0+DCfYZCUAvQFqtNlP7B9Yi7kGeqA6/k/Um2FYZqwU4INHXwWsSWiuKQsSFk00DIt6Eau6r+ZyAMoC4gJ5g4x18cNhOAtZuD+aa4yUOwsPp2t5QGtg2ygO2EHeKgwYimnGiwJaKJolAb2BslEQcIY7RSsGOMDdFinAbIaJQM1CgFtfyFd5IoB/rOJGoKKERdOUg/IrpucH5qu4cpXHDryVv7TCppUPWA5AW7mxyQS0sMnefbaOC1gMt/DoZgMXsHLB5pe2gJ2mbBVX0vl3mn72Uh6TtNMEoVzl8W/k+M0Jrp7/mX2nKdrqFTRwAQPNJLU5yHgeIC3lQv1t+oXxnWQ0AMuID7Id/aMBJiCi91jLbg7rtz62KVCBCsR6ClSgArGeAhWoQKynQAW2Bt7w4gwcy+DFRTiYx0tb4WgTXtoAR5vx0no4WvR4YRaOF/DCOqh3eLtXwAsI0GPbyvt07H/Cu/dNYqFXct1Xb7HYvNXAE8XQmOgDPJnpJmyVn+YIZ7T0XYNuBjRN+9/7AbrEwBGtP7rRAAAAAElFTkSuQmCC",xlsx:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAS1BMVEUAAABIpWBIo2BIpF9IomBIo1+u17dJo19Io19Jo19QqGBIpF9Jo2BMo2JJpF9Jo2BJo1+ZzKZIo1+s1bdttYCfz6yGwpZernJ6vIu659ZwAAAAEnRSTlMAYECfIN9f74CPEL9wMM9Qr1BwWUG9AAADG0lEQVR42u3c23KbMBCA4QV0QhycrnLo+z9pO5k2iypblBqxO5397zJM7G+MkC3kBDRN0zRN054v3sLw732DxvUTPtWbg5b1Kz7ZW2opDIjPAxsKBzwD2E444jlAEoo7v5/AVkKDZwFJKG4AEjA5oS/gFzA5iVcIAc8XrqcB2wgjngZsI+zPA7YR3s4DthF2bYDJSQcmJx2YnHRgctKByUkHJicdmJx0YHLSgclJByYnHZicdGBy0oHJSQcmJx2YnHRgcvzA91QXSgcmxw38SHtCZiCmXSEz8HVfyAvE930hLxDf9oW8QPzeQEjAa06zYwJSH6/1Fl7gfr0CFahABWYpUIEKxL9q6o3pLD7Ih8UsnWUEhuq+njWfR41lAw7wq6n6nIYNuMBvgseyAORnAlZ3zlY6GpiAvra9bA0/EDeGuGJeB9QLF3AEyvjyEPtFkj3qjJssbJr4gDYCNWQnnwqs7yRARZqQZ6AWZAKWlJ4mcMpYXqBfymFoTXbieYFoY3E5ZGb+j1vFXBOyGYYfiF0+DCfYZCUAvQFqtNlP7B9Yi7kGeqA6/k/Um2FYZqwU4INHXwWsSWiuKQsSFk00DIt6Eau6r+ZyAMoC4gJ5g4x18cNhOAtZuD+aa4yUOwsPp2t5QGtg2ygO2EHeKgwYimnGiwJaKJolAb2BslEQcIY7RSsGOMDdFinAbIaJQM1CgFtfyFd5IoB/rOJGoKKERdOUg/IrpucH5qu4cpXHDryVv7TCppUPWA5AW7mxyQS0sMnefbaOC1gMt/DoZgMXsHLB5pe2gJ2mbBVX0vl3mn72Uh6TtNMEoVzl8W/k+M0Jrp7/mX2nKdrqFTRwAQPNJLU5yHgeIC3lQv1t+oXxnWQ0AMuID7Id/aMBJiCi91jLbg7rtz62KVCBCsR6ClSgArGeAhWoQKynQAW2Bt7w4gwcy+DFRTiYx0tb4WgTXtoAR5vx0no4WvR4YRaOF/DCOqh3eLtXwAsI0GPbyvt07H/Cu/dNYqFXct1Xb7HYvNXAE8XQmOgDPJnpJmyVn+YIZ7T0XYNuBjRN+9/7AbrEwBGtP7rRAAAAAElFTkSuQmCC",other:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAUVBMVEUAAABQh+evz++pxvNQh+dPh+ZOheZQgN9Oh+ZOhuZPh+ZPhuZOheVQielPhuZPhuZOhuZOhuZPiOZOhuaOse9OhuapxvOStvBwnutXjeiHru5GSeLhAAAAFXRSTlMAQBDPIJ+AEN/Pv++QMN9gcFCv788LzAT2AAACc0lEQVR42u3c227bMAyAYXrT2ac4nZy07/+gY26KDVtrxxRpFuX/AMQHRb5wJBgsy7Isi7l48emlHu7XD2DNecRRuv1kFYZK7bYyCl2uDYB8QpdqCyCbMKbaBMgmHGobIJdwrI2AXMLSFIhCnQuIwHehxh34ADIJczMgjzDW9kAU6tuCCOQRdixAFCoHolA5EIXKgShUDkShciAKlQNRqByIQuVAFCoHolA5EIXKgShUDkShciAKlQNRqByIQuVAFJ4OfFsJQgngfSUIJYCvK0EoAaw3glAE+LoShBLAeucQIlC58AFU/St3tWn3t1tbIQKF6wxoQAMa8K8MaEADbswzoAENWJ+vz34IIfiSNQJLGOG92PmkC+j/nT8nPcDy3+lIVAK8wAe5qwZgP8LHhfOBk4PPCmcDe/QRhPzABbYaTgUGwh01CeBEGCUCXGBP/jRggV25nhdIHzqcBJwIw0SAM+ytnAEsXYS9uTlJA72D55qTJLDv4PkGOeDk4EiBFUj3oVAIuMDRriJAD4eLvQTQwfGCANADodjzAxegVPiBkQS8sAMnILWwAwsN6AyYacCRHfiifQ9WRwIGfuCFBMz8wEJ7RviBOOp4XgKYKQsoAazDYV/iBNKfk5jFXpoCwccBpL91Yl0SfS+e5ueInZf/6+M6jxH25LpQ6uknTV/hrM6ABjTgHxnQgAbcmGdAAxpwY54BDWjAjXkGNOC3B7oq3Ej4pBBH9CPAVEXLhDsaInkA3U/JSDh6lqgA6F7CxwJq3oUD4dRAoikSzl0EmhzhI50CZdpFHPYCkHK+ctZ7B9TcfM19ZahP/hLBsizLsnj7DcN6FTzwRZuzAAAAAElFTkSuQmCC",preview:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAclBMVEUAAABYWlpYXFxYWlpZW1tYWlpYW1vl5evn5+tRXV1YXFzm5uzl5uzk5+taWlpZWVlXWlrf3+9YWVlWWVnl5uvl5etZWlrl5utZW1tXWlrk5erq6urk5+paYGBVWlrf39/l5uxZWlrl5evn5+vl5utYWlrPScmYAAAAJHRSTlMAnyDf74C/kCAQQN+fQDBwzxBgUM/Pr++PkIAwMDAwEO+QgH/dkb0JAAABiklEQVRIx+3XyW7DIBQFUB6Tjac4caZm6Pju//9iMSat1I3BWVSRchdBRjrhQQgyYkxb1JyVXVOKKeuCF6RYB7vjw6kVWbk0fvRRF1yXIjtlzYX/ZPZ2gT5wKxpuxKJ8+qG3fF6GW64Fs1gY5id+4ofEbjBEZAaZjyuLW/pNHpYj1T3R3moAqsrAgxe2crEG8twk482fsaTyOhFfvZW+dUapnsJ6EbBKwlJN9qoxRnVRdymYoEcrtZ+2rOKTU+gTsIwVEig87/ESls13z2KPVGhVrPM1Pn9Au1nsR4jtT0f8EnSz2MKGVkPGaejQGqj5kStgmMo/ijj3uBQmYbXttL4dcJTCHQE59aqk31mjd2GfTdlMRWOYxbHw/aglaWjbRWsS97YJ+/M3jgASKThqUHejRgMvOf9n5bnaG2OoB6BXeSfJxvMYbVz2GdatyFpLq+qxjt4nfuL/xzW3y+yFt6Lg0yIb3vJbPiy7JjCX911QxHrL3JzzaPv1zru3Oy5l3oaUzTZP1kU7um+nSVMnXPP4TQAAAABJRU5ErkJggg=="},d={name:"itemBankResourcePreview",props:{attachment:{type:Object,require:!0}},inject:["getResourceToken","settings","language"],data:function(){return{isLoaded:!1,isShow:!1,disableVideoIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAA\nAOVBMVEUAAADPz8/MzMzMzMzIyMjMzMzLy8vLy8vNzc3MzMzMzMzKysrNzc3MzMzLy8vNzc3MzMzMzMzMzMwPcwYrAAAAEnR\nSTlMAEM/fIO9wQKC/YDB/kICPUG9Rq5a2AAAB1ElEQVRIx82WW7aDIAxFDe+3tvMf7G1RbogBbf+aL2Gxk0NIwOVXDDazupe\ntxsLnlF3lszOx2o9iJfFkJsMt99CE+BSNGI2j6iJcW6S92RS8dEdb/D+aJhi4Y4E3QOZD07GOOXFgdpBneSQYBuDOaTOWY/S\nMXG8yoPag7jyfmENG7pLMaZZx0yREMilR5wUpq/d+KtS8MI6p1WexEicuzdQAQANKcnBhHL6WUaEB7SnHCQagxV3iqDM9bQjf\nx8jvAVlFGoLvMvfFBgRs5s4oaEwH1NJeKNhMp5FWwC0WBmLvc60bfloGovle74ZHnrECGci3qjA7DlVzkOUXqiMElwuQ9uGXY\nMbi+Fwq7RzzHmFy1CWYe78qADsZBvJ7j53MFJRD7L7kCjCAtKOeFDnDestM63xzvK09a2QdujfzCP0QpHDFucwN3Zxrd256J6\ntTX1hIG4A4rmTlyJGDvr4eSwXE8bzw+1JdXf7NdORvnIQbknNL3MXcksih2EpO1abpk+yw02ccJ/lTzrk5CWLaDWH3uS/wg5pt\nTgMMxOh4uFacLNi7xUakfeWaKJj9WqDJdByWfMrY/qHKMrRA0dg8Avm4R7flG7NZ4AX+pYE1xbmslh+yP6jDPH3+K7RyAAAAAElFTkSuQmCC",icons:l,resourceStatus:{waiting:"等待转码",doing:"转码中...",error:"转码失败"},randomId:Math.floor(100*Math.random())}},computed:{isMedia:function(){return["video","audio"].indexOf(this.attachment.file_type)>-1},iconSrc:function(){var e=this.attachment,t=e.ext,s=e.file_type;return"other"===s?l.other:"document"===s?l[t]:l[s]},disableVideo:function(){var e=this.settings,t=e.isEncryptionPlus,s=e.securityVideoPlayer;return!!t&&(!(!s||this.isWechat())||!s)},playerId:function(){return"player"+this.attachment.id+"-"+this.randomId}},methods:{isWechat:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},loadPlayer:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getResourceToken&&!e.isLoaded){t.next=2;break}return t.abrupt("return");case 2:if(window.QiQiuYun){t.next=5;break}return t.next=5,u("https://service-cdn.qiqiuyun.net/js-sdk-v2/sdk-v1.js?".concat(Date.now()));case 5:return s=function(t){return e.isLoaded=!0,new window.QiQiuYun.Player(Object.assign(t))},t.next=8,e.getResourceToken(e.attachment.global_id);case 8:(n=t.sent).data.id=e.playerId,n.data.language="en"===e.language?"en":"zh-CN",s(n.data);case 12:case"end":return t.stop()}}),t)})))()},previewFile:function(){this.loadPlayer(),this.isMedia||(this.isShow=!0)}}},h=(s("8fde"),s("a6c2")),m=Object(h.a)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{margin:"12px 0 0"}},[e.disableVideo&&e.isMedia?s("div",{staticClass:"ibs-attachment-preview"},[s("img",{staticStyle:{width:"24px","margin-right":"8px"},attrs:{src:e.disableVideoIcon}}),s("div",{staticClass:"text-overflow text-12",staticStyle:{flex:"1",color:"#999"}},[e.settings.securityVideoPlayer&&!this.isWechat()?[e._v("\n        该浏览器不支持视频播放，请使用微信或APP\n      ")]:[e._v("\n        该浏览器不支持视频播放，请使用APP\n      ")]],2)]):!e.isMedia||e.isMedia&&!e.isLoaded?s("div",{staticClass:"ibs-attachment-preview"},[s("img",{staticClass:"ibs-attachment-preview__icon",attrs:{src:e.iconSrc}}),s("div",{staticClass:"text-overflow",staticStyle:{flex:"1"}},[e._v("\n      "+e._s(this.attachment.file_name)+"\n    ")]),"other"!==e.attachment.file_type&&"audio"!==e.attachment.file_type&&"success"!==e.attachment.convert_status?s("div",{staticClass:"ibs-attachment-preview__status"},[e._v("\n      "+e._s(e.resourceStatus[e.attachment.convert_status])+"\n    ")]):e._e(),"other"==e.attachment.file_type?s("div",{staticClass:"ibs-attachment-preview__status"},[e._v("\n      请前往PC网校下载!\n    ")]):e._e(),"other"!==e.attachment.file_type&&"success"===e.attachment.convert_status||"audio"===e.attachment.file_type?s("img",{staticClass:"review-img",staticStyle:{"margin-left":"8px"},attrs:{width:"30",height:"30",src:e.icons.preview},on:{click:e.previewFile}}):e._e()]):e._e(),e.isMedia?s("div",{attrs:{id:e.playerId}}):e._e(),e.isMedia?e._e():s("van-popup",{style:{height:"70%"},attrs:{closeable:"","close-on-click-overlay":!0,"close-icon":"close",position:"bottom","get-container":"body"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[s("div",{staticStyle:{height:"52px",display:"flex","justify-content":"center","align-items":"center",color:"#272E3B"}},[s("div",{staticClass:"text-overflow",staticStyle:{width:"300px","text-align":"center"}},[e._v("\n        "+e._s(e.attachment.file_name)+"\n      ")])]),s("div",{staticStyle:{width:"100%",height:"calc(100% - 52px)"},attrs:{id:e.playerId}})])],1)}),[],!1,null,"d7ac69f6",null).exports,p=s("240b");function g(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(e){if("string"==typeof e)return f(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,r=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==s.return||s.return()}finally{if(r)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var w=document.documentElement.clientWidth,v={name:"single-choice",mixins:[a,o,c.a],data:function(){return{answer:this.itemData.userAnwer,width:w,isShowDownIcon:null,isShowUpIcon:!1,question:[],refreshKey:!0,answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},components:{attachementPreview:m},props:{exerciseInfo:{type:[Array,Object],default:function(){return[]}}},inject:["brushDo"],computed:{subject:function(){return"".concat(r(this.commonData.questionsType))}},mounted:function(){var e=document.getElementById("current".concat(this.currentItem.id));e&&(this.isShowDownIcon=e.childNodes[0].offsetWidth>234)},methods:{changeAnswer:function(e){if("do"===this.itemData.mode){var t={item_id:this.commonData.item_id,question_id:this.commonData.questionId,type:"single-choice",seq:Number(this.commonData.current)};this.$emit("changeAnswer",e,this.itemData.keys,t)}},RadioRight:function(e){return!(!this.wrong&&this.disabledData)&&(0===this.answer.length&&e===this.commonData.answer[0]||e===this.commonData.answer[0]||e===this.answer[0]&&this.answer[0]===this.commonData.answer[0]||void 0)},RadioWrong:function(e){return!(!this.wrong&&this.disabledData)&&(this.answer[0]===e&&this.answer[0]!==this.commonData.answer[0]||void 0)},getAttachmentTypeData:function(e){return this.attachements.filter((function(t){return t.module===e}))},getAttachementByType:function(e){return this.currentItem.attachments.filter((function(t){return t.module===e}))},goBrushResult:function(){"wrongQuestionBook"===this.brushDo.type?this.brushDo.goResult():"lessonTask"===this.brushDo.type&&this.$emit("goBrushResult")},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},getAiAnalysis:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s,n,i,a,o,r,c,u,l,d,h,m,f,w,v,b,A,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.commonData.questionId,n={role:"student",questionId:s,answerRecordId:e.exerciseInfo.id},i=!1,a=[],e.answerData[s]="",e.stopAnswer[s]=!1,o=setInterval((function(){0!==a.length&&(e.stopAnswer[s]&&clearInterval(o),e.answerData[s]+=a.shift(),0===a.length&&i&&(clearInterval(o),e.stopAiExplain=!1,e.anewAiExplain=!0),e.$refs.aiAnalysis.innerHTML=e.answerData[s])}),50),t.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":p.a.state.token},body:JSON.stringify(n)});case 9:r=t.sent,c=r.body.getReader(),u=new TextDecoder,l="";case 13:return t.next=16,c.read();case 16:d=t.sent,h=d.done,m=d.value,f=(l+u.decode(m)).split("\n\n"),w=1,v=g(f);try{for(v.s();!(b=v.n()).done;)A=b.value,w==f.length?l=A:("message"===(y=JSON.parse(A.slice(5))).event&&a.push(y.answer),w++)}catch(e){v.e(e)}finally{v.f()}if(!h){t.next=26;break}return i=!0,t.abrupt("break",28);case 26:t.next=13;break;case 28:case"end":return t.stop()}}),t)})))()},stopAiAnalysis:function(){var e=this.commonData.questionId;this.stopAnswer[e]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},b=(s("7e0a"),Object(h.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{height:"100% !important"}},["material"===e.currentItem.type?s("div",{staticClass:"ibs-subject-material"},[s("div",{class:["ibs-material-stem-nowrap",e.isShowDownIcon?"ibs-material-stem":""]},[s("span",{staticClass:"ibs-material-tags"},[e._v("\n          "+e._s(e.$t("courseLearning.material"))+"\n        ")]),s("span",{staticClass:"ibs-material-text ibs-material-icon",attrs:{id:"current"+e.currentItem.id},domProps:{innerHTML:e._s(e.currentItem.material)},on:{click:function(t){return e.handleClickImage(t.target)}}})]),s("i",{class:["iconfont","icon-arrow-up",{"ibs-show-up-icon":e.isShowDownIcon}],on:{click:e.changeUpIcon}}),s("i",{class:["iconfont","icon-arrow-down",{"ibs-show-down-icon":e.isShowUpIcon}],on:{click:e.changeDownIcon}}),e._l(e.getAttachementByType("material"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2):e._e(),s("div",{staticClass:"ibs-subject-card"},[s("div",{staticClass:"ibs-subject-stem"},["material"!==e.currentItem.type?s("span",{staticClass:"ibs-tags"},[e._v("\n          "+e._s(e.subject)+"\n        ")]):e._e(),s("div",["material"===e.currentItem.type?s("span",{staticClass:"ibs-serial-number"},[s("span",{staticClass:"ibs-material-type"},[e._v("["+e._s(e.subject)+"] ")]),e._v(" "+e._s(Number(e.commonData.current))+"、")]):s("span",{staticClass:"ibs-serial-number"},[e._v(e._s(Number(e.commonData.current))+"、")]),s("div",{staticClass:"ibs-rich-text",domProps:{innerHTML:e._s(e.getStem())},on:{click:function(t){return e.handleClickImage(t.target)}}})])]),e._l(e.getAttachmentTypeData("stem"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),s("div",{staticClass:"ibs-subject"},[s("van-radio-group",{staticClass:"ibs-answer-paper",attrs:{disabled:!e.disabledData,refreshKey:e.refreshKey},on:{change:e.changeAnswer},model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}},e._l(e.itemData.question.response_points,(function(t,n){return s("van-radio",{key:n,class:["ibs-subject-option",{active:"doing"===e.brushDo.status&&e.answer[0]===t.radio.val},{"van-checked__right":e.RadioRight(t.radio.val)},{"van-checked__wrong":e.RadioWrong(t.radio.val)}],attrs:{name:t.radio.val},scopedSlots:e._u([{key:"icon",fn:function(n){return[s("span",{class:["ibs-subject-option__order",n,e.reportAnswer(e.itemData.mode,t.radio.val,e.itemData.userAnwer,e.itemData.question.answer)]},[e._v(e._s(t.radio.val+"."))])]}}],null,!0)},[s("i",{staticClass:"iconfont icon-a-Frame34723"}),s("i",{staticClass:"iconfont icon-zhengque1"}),s("i",{staticClass:"iconfont icon-cuowu2"}),s("div",{staticClass:"ibs-subject-option__content",domProps:{innerHTML:e._s(t.radio.text)},on:{click:function(t){return e.handleClickImage(t.target)}}})])})),1)],1),e.disabledData?e._e():s("div",{staticClass:"ibs-one-questions-analysis"},[s("div",{staticClass:"flex justify-between ibs-analysis-answer"},[s("div",{staticClass:"flex items-center"},[s("span",{staticClass:"ibs-answer"},[e._v(e._s(e.$t("courseLearning.referenceAnswer"))+"：")]),s("span",{staticClass:"ibs-options",staticStyle:{color:"#00B42A"}},[e._v(e._s(e.commonData.answer[0]))])]),e.answer.length>0&&""!=e.answer[0]?s("div",{staticClass:"flex items-center"},[s("span",{staticClass:"ibs-answer"},[e._v(e._s(e.$t("courseLearning.selectedAnswer"))+"：")]),s("span",{staticClass:"ibs-options"},[e._v(e._s(e.answer[0]))])]):e._e()]),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.score"))+"："+e._s(e.commonData.report?e.commonData.report.score:0)+"\n        ")]):e._e(),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.comment"))+"："+e._s(e.commonData.report?""===e.commonData.report.comment?"--":e.commonData.report.comment:"")+"\n        ")]):e._e(),s("div",{staticClass:"ibs-analysis-color"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),e.commonData.analysis?s("span",{domProps:{innerHTML:e._s(e.commonData.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",{ref:"aiAnalysis"},[e._v(e._s(e.$t("courseLearning.noParsing")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commonData.aiAnalysisEnable,expression:"commonData.aiAnalysisEnable"}],staticClass:"ai-analysis"},[s("p",{staticClass:"ai-tittle"},[e._v(e._s(e.$t("courseLearning.aiAssistant")))]),s("div",{staticClass:"ai-content"},[s("div",{staticClass:"ai-content-left"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.analysis")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.stopAiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.stopGeneration")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.reGenerate")))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[e._v(e._s(e.$t("courseLearning.beGenerating")))])]),e._m(0)])]),e._l(e.getAttachmentTypeData("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)],2),e.isShowFooterShadow()?s("div",{staticClass:"ibs-footer-shadow"}):e._e(),e.disabledData||"material"!==e.currentItem.type?e._e():s("div",{staticClass:"ibs-subject-footer"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),""!==e.currentItem.analysis?s("span",{domProps:{innerHTML:e._s(e.currentItem.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",[e._v(e._s(e.$t("courseLearning.noParsing")))]),e._l(e.getAttachementByType("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2),1==e.isAnswerFinished?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:function(t){return e.goBrushResult()}}},[e._v(e._s(e.$t("courseLearning.viewResult2")))])],1):e._e()])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"0127d3ef",null).exports),A=(s("e17f"),s("2241"));function y(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(e){if("string"==typeof e)return _(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,r=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==s.return||s.return()}finally{if(r)throw a}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}s("55dd");var C=document.documentElement.clientWidth,x={mixins:[o,a,c.a],data:function(){return{answer:this.itemData.userAnwer.sort(),width:C,isShowDownIcon:null,isShowUpIcon:!1,question:[],refreshKey:!0,answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},components:{attachementPreview:m},props:{exerciseInfo:{type:Object,default:function(){}}},inject:["brushDo"],computed:{subject:function(){return"".concat(r(this.commonData.questionsType))}},mounted:function(){var e=document.getElementById("current".concat(this.currentItem.id));e&&(this.isShowDownIcon=e.childNodes[0].offsetWidth>234)},methods:{filterAnswerOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s=e.map((function(s,n){if(-1!=t.indexOf(e[n]))return t[t.indexOf(e[n])]}));return s.length>0?s.sort().join(""):""},changeAnswer:function(e){"do"===this.itemData.mode&&this.$emit("changeAnswer",e,this.itemData.keys)},RadioRight:function(e,t){return!(!this.wrong&&this.disabledData)&&(!(0!==this.answer.length||!this.commonData.answer.includes(e))||!(!this.commonData.answer.includes(e)||this.answer.includes(e))||this.commonData.answer.includes(e))},RadioWrong:function(e,t){if(!this.wrong&&this.disabledData)return!1;if(this.commonData.answer.includes(e))return!1;var s=this.commonData.answer.includes(e)&&!this.answer.includes(e),n=!this.commonData.answer.includes(e)&&this.answer.includes(e);return!(!s&&!n)||void 0},filterOrders:function(){return this.commonData.answer.length>0?this.commonData.answer.join(""):""},getAttachmentTypeData:function(e){return this.attachements.filter((function(t){return t.module===e}))},getAttachementByType:function(e){return this.currentItem.attachments.filter((function(t){return t.module===e}))},submitTopic:function(){var e=this,t={item_id:this.commonData.item_id,question_id:this.commonData.questionId,seq:Number(this.commonData.current)};if(0!==this.answer.length)return this.$emit("changeTouch"),void this.$emit("submitSingleAnswer",this.answer,t);A.a.confirm({message:this.$t("courseLearning.questionNotAnswer"),confirmButtonText:this.$t("courseLearning.continueAnswer"),cancelButtonText:this.$t("btn.confirm")}).then((function(){})).catch((function(){e.$emit("submitSingleAnswer",e.answer,t),e.$emit("changeTouch")}))},goBrushResult:function(){"wrongQuestionBook"===this.brushDo.type?this.brushDo.goResult():"lessonTask"===this.brushDo.type&&this.$emit("goBrushResult")},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},getAiAnalysis:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s,n,i,a,o,r,c,u,l,d,h,m,g,f,w,v,b,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.commonData.questionId,n={role:"student",questionId:s,answerRecordId:e.exerciseInfo.id},i=!1,a=[],e.answerData[s]="",e.stopAnswer[s]=!1,o=setInterval((function(){0!==a.length&&(e.stopAnswer[s]&&clearInterval(o),e.answerData[s]+=a.shift(),0===a.length&&i&&(clearInterval(o),e.stopAiExplain=!1,e.anewAiExplain=!0),e.$refs.aiAnalysis.innerHTML=e.answerData[s])}),50),t.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":p.a.state.token},body:JSON.stringify(n)});case 9:r=t.sent,c=r.body.getReader(),u=new TextDecoder,l="";case 13:return t.next=16,c.read();case 16:d=t.sent,h=d.done,m=d.value,g=(l+u.decode(m)).split("\n\n"),f=1,w=y(g);try{for(w.s();!(v=w.n()).done;)b=v.value,f==g.length?l=b:("message"===(A=JSON.parse(b.slice(5))).event&&a.push(A.answer),f++)}catch(e){w.e(e)}finally{w.f()}if(!h){t.next=26;break}return i=!0,t.abrupt("break",28);case 26:t.next=13;break;case 28:case"end":return t.stop()}}),t)})))()},stopAiAnalysis:function(){var e=this.commonData.questionId;this.stopAnswer[e]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},I=(s("b695"),Object(h.a)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{height:"100% !important",position:"relative"}},["material"===e.currentItem.type?s("div",{staticClass:"ibs-subject-material"},[s("div",{class:["ibs-material-stem-nowrap",e.isShowDownIcon?"ibs-material-stem":""]},[s("span",{staticClass:"ibs-material-tags"},[e._v("\n          "+e._s(e.$t("courseLearning.material"))+"\n        ")]),s("span",{staticClass:"ibs-material-text",attrs:{id:"current"+e.currentItem.id},domProps:{innerHTML:e._s(e.currentItem.material)},on:{click:function(t){return e.handleClickImage(t.target)}}})]),s("i",{class:["iconfont","icon-arrow-up",{"ibs-show-up-icon":e.isShowDownIcon}],on:{click:e.changeUpIcon}}),s("i",{class:["iconfont","icon-arrow-down",{"ibs-show-down-icon":e.isShowUpIcon}],on:{click:e.changeDownIcon}}),e._l(e.getAttachementByType("material"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2):e._e(),s("div",{staticClass:"ibs-subject-card"},[s("div",{staticClass:"ibs-subject-stem"},["material"!==e.currentItem.type?s("span",{staticClass:"ibs-tags"},[e._v("\n          "+e._s(e.subject)+"\n        ")]):e._e(),s("div",["material"===e.currentItem.type?s("span",{staticClass:"ibs-serial-number"},[s("span",{staticClass:"ibs-material-type"},[e._v("["+e._s(e.subject)+"] ")]),e._v(" "+e._s(Number(e.commonData.current))+"、")]):s("span",{staticClass:"ibs-serial-number"},[e._v(e._s(Number(e.commonData.current))+"、")]),s("div",{staticClass:"ibs-rich-text",domProps:{innerHTML:e._s(e.getStem())},on:{click:function(t){return e.handleClickImage(t.target)}}})])]),e._l(e.getAttachmentTypeData("stem"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),s("div",{staticClass:"ibs-subject"},[s("van-checkbox-group",{staticClass:"ibs-answer-paper",on:{change:e.changeAnswer},model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}},e._l(e.itemData.question.response_points,(function(t,n){return s("van-checkbox",{key:n,class:["ibs-subject-option",{active:"doing"===e.brushDo.status&&e.itemData.userAnwer.includes(t.checkbox.val)},{"van-checkbox__right":e.RadioRight(t.checkbox.val,n)},{"van-checkbox__wrong":e.RadioWrong(t.checkbox.val)}],attrs:{name:t.checkbox.val,disabled:!e.disabledData,refreshKey:e.refreshKey}},[s("i",{staticClass:"iconfont icon-a-Frame34723"}),s("i",{staticClass:"iconfont icon-zhengque1"}),s("i",{staticClass:"iconfont icon-cuowu2"}),s("div",{staticClass:"ibs-subject-option__content",domProps:{innerHTML:e._s(t.checkbox.text)},on:{click:function(t){return e.handleClickImage(t.target)}}}),s("span",{class:["ibs-subject-option__order","ibs-subject-option__order--square"],attrs:{slot:"icon"},slot:"icon"},[e._v(e._s(t.checkbox.val+"."))])])})),1)],1),e.disabledData?e._e():s("div",{staticClass:"ibs-one-questions-analysis"},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-none font-14 leading-28"},[e._v(e._s(e.$t("courseLearning.referenceAnswer"))+"：")]),s("span",{staticClass:"font-20 break-all",staticStyle:{color:"#00B42A"}},[e._v(e._s(e.filterOrders()))])]),e.answer.length>0?s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-none font-14 leading-28"},[e._v(e._s(e.$t("courseLearning.selectedAnswer"))+"：")]),s("span",{staticClass:"font-20 break-all"},[e._v(e._s(e.filterAnswerOrders(e.answer)))])]):e._e(),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.score"))+"："+e._s(e.commonData.report?e.commonData.report.score:0)+"\n        ")]):e._e(),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.comment"))+"："+e._s(e.commonData.report?""===e.commonData.report.comment?"--":e.commonData.report.comment:"")+"\n        ")]):e._e(),s("div",{staticClass:"ibs-analysis-color"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),e.commonData.analysis?s("span",{domProps:{innerHTML:e._s(e.commonData.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",{ref:"aiAnalysis"},[e._v(e._s(e.$t("courseLearning.noParsing")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commonData.aiAnalysisEnable,expression:"commonData.aiAnalysisEnable"}],staticClass:"ai-analysis"},[s("p",{staticClass:"ai-tittle"},[e._v(e._s(e.$t("courseLearning.aiAssistant")))]),s("div",{staticClass:"ai-content"},[s("div",{staticClass:"ai-content-left"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.analysis")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.stopAiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.stopGeneration")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.reGenerate")))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[e._v(e._s(e.$t("courseLearning.beGenerating")))])]),e._m(0)])]),e._l(e.getAttachmentTypeData("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)],2),e.isShowFooterShadow()?s("div",{staticClass:"ibs-footer-shadow"}):e._e(),e.disabledData||"material"!==e.currentItem.type?e._e():s("div",{staticClass:"ibs-subject-footer"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),""!==e.currentItem.analysis?s("span",{domProps:{innerHTML:e._s(e.currentItem.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",[e._v(e._s(e.$t("courseLearning.noParsing")))]),e._l(e.getAttachementByType("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)]),e.disabledData&&"1"===e.brushDo.exerciseModes?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:e.submitTopic}},[e._v(e._s(e.$t("courseLearning.submitATopic")))])],1):e._e(),1==e.isAnswerFinished?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:function(t){return e.goBrushResult()}}},[e._v(e._s(e.$t("courseLearning.viewResult2")))])],1):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"887a0af4",null).exports);function D(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(e){if("string"==typeof e)return S(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?S(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,r=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==s.return||s.return()}finally{if(r)throw a}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var k=document.documentElement.clientWidth,q={name:"judge",mixins:[a,o,c.a],data:function(){return{width:k,answer:this.itemData.userAnwer,isShowDownIcon:null,isShowUpIcon:!1,question:[],refreshKey:!0,answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},components:{attachementPreview:m},props:{exerciseInfo:{type:Array,default:function(){return[]}}},inject:["brushDo"],computed:{subject:function(){return"".concat(r(this.commonData.questionsType))}},mounted:function(){var e=document.getElementById("current".concat(this.currentItem.id));e&&(this.isShowDownIcon=e.childNodes[0].offsetWidth>234)},methods:{changeAnswer:function(e){if("do"===this.itemData.mode){var t={item_id:this.commonData.item_id,question_id:this.commonData.questionId,type:"judge",seq:Number(this.commonData.current)};this.$emit("changeAnswer",e,this.itemData.keys,t)}},getIcons:function(e){return"F"===e?"wap-icon-no":"T"===e?"wap-icon-yes":void 0},RadioWrong:function(e){return!(!this.wrong&&this.disabledData)&&(this.answer[0]===e&&this.answer[0]!==this.commonData.answer[0]||void 0)},RadioRight:function(e){return!(!this.wrong&&this.disabledData)&&(0===this.answer.length&&this.commonData.answer[0]===e||e===this.commonData.answer[0]||e===this.answer[0]&&this.answer[0]===this.commonData.answer[0]||void 0)},getAttachmentTypeData:function(e){return this.attachements.filter((function(t){return t.module===e}))},getAttachementByType:function(e){return this.currentItem.attachments.filter((function(t){return t.module===e}))},goBrushResult:function(){"wrongQuestionBook"===this.brushDo.type?this.brushDo.goResult():"lessonTask"===this.brushDo.type&&this.$emit("goBrushResult")},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},getAiAnalysis:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s,n,i,a,o,r,c,u,l,d,h,m,g,f,w,v,b,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.commonData.questionId,n={role:"student",questionId:s,answerRecordId:e.exerciseInfo.id},i=!1,a=[],e.answerData[s]="",e.stopAnswer[s]=!1,o=setInterval((function(){0!==a.length&&(e.stopAnswer[s]&&clearInterval(o),e.answerData[s]+=a.shift(),0===a.length&&i&&(clearInterval(o),e.stopAiExplain=!1,e.anewAiExplain=!0),e.$refs.aiAnalysis.innerHTML=e.answerData[s])}),50),t.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":p.a.state.token},body:JSON.stringify(n)});case 9:r=t.sent,c=r.body.getReader(),u=new TextDecoder,l="";case 13:return t.next=16,c.read();case 16:d=t.sent,h=d.done,m=d.value,g=(l+u.decode(m)).split("\n\n"),f=1,w=D(g);try{for(w.s();!(v=w.n()).done;)b=v.value,f==g.length?l=b:("message"===(A=JSON.parse(b.slice(5))).event&&a.push(A.answer),f++)}catch(e){w.e(e)}finally{w.f()}if(!h){t.next=26;break}return i=!0,t.abrupt("break",28);case 26:t.next=13;break;case 28:case"end":return t.stop()}}),t)})))()},stopAiAnalysis:function(){var e=this.commonData.questionId;this.stopAnswer[e]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},E=(s("36fb"),Object(h.a)(q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",["material"===e.currentItem.type?s("div",{staticClass:"ibs-subject-material"},[s("div",{class:["ibs-material-stem-nowrap",e.isShowDownIcon?"ibs-material-stem":""]},[s("span",{staticClass:"ibs-material-tags"},[e._v("\n        "+e._s(e.$t("courseLearning.material"))+"\n      ")]),s("span",{staticClass:"ibs-material-text",attrs:{id:"current"+e.currentItem.id},domProps:{innerHTML:e._s(e.currentItem.material)},on:{click:function(t){return e.handleClickImage(t.target)}}})]),s("i",{class:["iconfont","icon-arrow-up",{"ibs-show-up-icon":e.isShowDownIcon}],on:{click:e.changeUpIcon}}),s("i",{class:["iconfont","icon-arrow-down",{"ibs-show-down-icon":e.isShowUpIcon}],on:{click:e.changeDownIcon}}),e._l(e.getAttachementByType("material"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2):e._e(),s("div",{staticClass:"ibs-subject-card"},[s("div",{staticClass:"ibs-subject-stem"},["material"!==e.currentItem.type?s("span",{staticClass:"ibs-tags"},[e._v("\n        "+e._s(e.subject)+"\n      ")]):e._e(),s("div",["material"===e.currentItem.type?s("span",{staticClass:"ibs-serial-number"},[s("span",{staticClass:"ibs-material-type"},[e._v("["+e._s(e.subject)+"] ")]),e._v(" "+e._s(Number(e.commonData.current))+"、")]):s("span",{staticClass:"ibs-serial-number"},[e._v(e._s(Number(e.commonData.current))+".")]),s("div",{staticClass:"ibs-rich-text",domProps:{innerHTML:e._s(e.getStem())},on:{click:function(t){return e.handleClickImage(t.target)}}})])]),e._l(e.getAttachmentTypeData("stem"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),s("div",{staticClass:"ibs-subject"},[s("van-radio-group",{staticClass:"ibs-answer-paper",attrs:{disabled:!e.disabledData,refreshKey:e.refreshKey},on:{change:e.changeAnswer},model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}},e._l(e.itemData.question.response_points,(function(t,n){return s("van-radio",{key:n,class:["ibs-subject-option","ibs-subject-option--determine",{active:"doing"===e.brushDo.status&&t.radio.val===e.answer[0]},{"van-checked__right":e.RadioRight(t.radio.val)},{"van-checked__wrong":e.RadioWrong(t.radio.val)}],attrs:{name:t.radio.val}},[s("i",{staticClass:"iconfont icon-a-Frame34723"}),s("i",{staticClass:"iconfont icon-zhengque1"}),s("i",{staticClass:"iconfont icon-cuowu2"}),s("div",{staticClass:"ibs-subject-option__content"},[e._v(e._s(t.radio.text))])])})),1)],1),e.disabledData?e._e():s("div",{staticClass:"ibs-one-questions-analysis"},[s("div",{staticClass:"flex justify-between ibs-analysis-answer"},[s("div",{staticClass:"flex items-center"},[s("span",{staticClass:"ibs-answer"},[e._v(e._s(e.$t("courseLearning.referenceAnswer"))+"：")]),s("span",{staticClass:"ibs-options",staticStyle:{color:"#00B42A"}},[e._v(e._s("T"===e.commonData.answer[0]?e.$t("courseLearning.right"):e.$t("courseLearning.wrong")))])]),e.answer.length>0?s("div",{staticClass:"flex items-center"},[s("span",{staticClass:"ibs-answer"},[e._v(e._s(e.$t("courseLearning.selectedAnswer"))+"：")]),s("span",{staticClass:"ibs-options"},[e._v(e._s("T"===e.answer[0]?e.$t("courseLearning.right"):e.$t("courseLearning.wrong")))])]):e._e()]),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.score"))+"："+e._s(e.commonData.report?e.commonData.report.score:0)+"\n        ")]):e._e(),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.comment"))+"："+e._s(e.commonData.report?""===e.commonData.report.comment?"--":e.commonData.report.comment:"")+"\n        ")]):e._e(),s("div",{staticClass:"ibs-analysis-color"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),e.commonData.analysis?s("span",{domProps:{innerHTML:e._s(e.commonData.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",{ref:"aiAnalysis"},[e._v(e._s(e.$t("courseLearning.noParsing")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commonData.aiAnalysisEnable,expression:"commonData.aiAnalysisEnable"}],staticClass:"ai-analysis"},[s("p",{staticClass:"ai-tittle"},[e._v(e._s(e.$t("courseLearning.aiAssistant")))]),s("div",{staticClass:"ai-content"},[s("div",{staticClass:"ai-content-left"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.analysis")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.stopAiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.stopGeneration")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.reGenerate")))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[e._v(e._s(e.$t("courseLearning.beGenerating")))])]),e._m(0)])]),e._l(e.getAttachmentTypeData("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)],2),e.isShowFooterShadow()?s("div",{staticClass:"ibs-footer-shadow"}):e._e(),e.disabledData||"material"!==e.currentItem.type?e._e():s("div",{staticClass:"ibs-subject-footer"},[s("span",{staticClass:"float-left"},[e._v(e._s(e.$t("courseLearning.analyze"))+"：")]),""!==e.currentItem.analysis?s("span",{domProps:{innerHTML:e._s(e.currentItem.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",[e._v(e._s(e.$t("courseLearning.noParsing")))]),e._l(e.getAttachementByType("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2),1==e.isAnswerFinished?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:function(t){return e.goBrushResult()}}},[e._v(e._s(e.$t("courseLearning.viewResult2")))])],1):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"77b7787b",null).exports),R=s("3ce7");function T(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(e){if("string"==typeof e)return Q(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,r=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==s.return||s.return()}finally{if(r)throw a}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var B=document.documentElement.clientWidth,L={name:"essay",mixins:[a,c.a],inject:["brushDo"],data:function(){return{answer:this.itemData.userAnwer[0],fileList:[],imgs:[],fileStr:"",answerText:"",width:B,isShowDownIcon:null,isShowUpIcon:!1,status:"",activeIcon:"static/images/itemBankExercise/grasp-active.png",defaultIcon:"static/images/itemBankExercise/grasp.png",activeQuestions:"static/images/itemBankExercise/not-master-active.png",defaultQuestions:"static/images/itemBankExercise/not-master.png",question:[],refreshKey:!0,reviewDisabled:!1,rigth:"static/images/exercise/rigth.png",wrongImg:"static/images/exercise/wrong.png",answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},components:{attachementPreview:m},props:{exerciseInfo:{type:Object,default:function(){}}},computed:{placeholder:{get:function(){return this.disabled?this.$t("wrongQuestion.unanswered"):this.$t("courseLearning.yourAreAnswer")+"..."}},subject:function(){return"".concat(r(this.commonData.questionsType))}},watch:{answerText:{handler:function(e){this.answer=e+this.fileStr}},imgs:{handler:function(e){var t=this;this.fileStr="",e.forEach((function(e){t.fileStr+='<img src="'.concat(e,'"></img>')})),this.answer=this.answerText+this.fileStr,this.changeAnswer()},deep:!0}},mounted:function(){this.initReviewQuestion(),this.refreshReviewStatus(),this.initEssayRadio();var e=document.getElementById("current".concat(this.currentItem.id));e&&(this.isShowDownIcon=e.childNodes[0].offsetWidth>234)},methods:{initEssayRadio:function(){var e=this,t=this.EssayRadio.filter((function(t){return t.questionId+""===e.itemData.question.id}));t.length>0&&(this.status=t[0].status,0===this.reviewedQuestion.filter((function(t){return t.questionId+""===e.itemData.question.id})).length&&0!==this.reviewedQuestion.length&&(this.reviewDisabled=!1))},initReviewQuestion:function(){var e=this,t=this.reviewedQuestion.filter((function(t){return t.questionId+""===e.itemData.question.id}));t.length>0&&(this.status=t[0].status,this.reviewDisabled=!0)},refreshReviewStatus:function(){var e=this,t=this.exerciseInfo.filter((function(t){return t.questionId+""===e.itemData.question.id}));t.length>0&&(this.status=t[0].status,this.reviewDisabled=!0)},changeAnswer:function(e){var t,s,n,i,a,o=this;(t=function(){var e={item_id:o.commonData.item_id,question_id:o.commonData.questionId,type:"essay"};o.$nextTick((function(){o.$emit("changeAnswer",o.answer,o.itemData.keys,e)}))},s=500,n=!0,a=0,function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];if(n)i&&clearTimeout(i),i=setTimeout((function(){t.apply(void 0,o)}),s);else{var c=(new Date).getTime();if(c-a<s)return;a=c,t.apply(void 0,o)}})()},afterRead:function(e){var t=this,s=new FormData;s.append("file",e.content),s.append("group","course"),R.a.updateFile({data:s}).then((function(e){t.imgs.push(e.uri)})).catch((function(e){i.a.fail(e.message)}))},deleteImgItem:function(e,t){this.imgs.splice(t.index,1)},getAttachmentTypeData:function(e){return this.attachements.filter((function(t){return t.module===e}))},getAttachementByType:function(e){return this.currentItem.attachments.filter((function(t){return t.module===e}))},submitTopic:function(){var e=this,t={item_id:this.commonData.item_id,question_id:this.commonData.questionId,seq:Number(this.commonData.current)},s=new Array(this.answer);if(this.answer)return this.$emit("changeTouch"),void this.$emit("submitSingleAnswer",s,t);A.a.confirm({message:this.$t("courseLearning.questionNotAnswer"),confirmButtonText:this.$t("courseLearning.continueAnswer"),cancelButtonText:this.$t("btn.confirm")}).then((function(){})).catch((function(){e.$emit("submitSingleAnswer",s,t),e.$emit("changeTouch")}))},goBrushResult:function(){"wrongQuestionBook"===this.brushDo.type?this.brushDo.goResult():"lessonTask"===this.brushDo.type&&this.$emit("goBrushResult")},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},singleQuestionSubmission:function(){var e=this;""!==this.status?R.a.singleQuestionSubmission({query:{id:this.brushDo.answerRecord.id},data:{admission_ticket:this.brushDo.answerRecord.admission_ticket,assessment_id:this.brushDo.answerRecord.assessment_id,section_id:this.currentItem.section_id,item_id:this.commonData.item_id,question_id:this.commonData.questionId,status:this.status}}).then((function(t){Object(i.a)({message:e.$t("wrongQuestion.completeReview"),icon:"passed"}),e.status=t.status,e.reviewDisabled=!0;var s={status:t.status,questionId:t.questionId};"right"===t.status&&e.$emit("nextSkipQuestion"),e.$emit("updataIsAnswerFinished",t.isAnswerFinished,!0,s,t.questionId)})).catch((function(e){i.a.fail(e.message)})):A.a.alert({message:this.$t("wrongQuestion.questionNotReviewed")}).then((function(){}))},changeEssayRadio:function(e){var t={status:e,questionId:this.commonData.questionId};this.$emit("changeEssayRadio",t)},getAiAnalysis:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s,n,i,a,o,r,c,u,l,d,h,m,g,f,w,v,b,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.commonData.questionId,n={role:"student",questionId:s,answerRecordId:e.exerciseInfo.id},i=!1,a=[],e.answerData[s]="",e.stopAnswer[s]=!1,o=setInterval((function(){0!==a.length&&(e.stopAnswer[s]&&clearInterval(o),e.answerData[s]+=a.shift(),0===a.length&&i&&(clearInterval(o),e.stopAiExplain=!1,e.anewAiExplain=!0),e.$refs.aiAnalysis.innerHTML=e.answerData[s])}),50),t.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":p.a.state.token},body:JSON.stringify(n)});case 9:r=t.sent,c=r.body.getReader(),u=new TextDecoder,l="";case 13:return t.next=16,c.read();case 16:d=t.sent,h=d.done,m=d.value,g=(l+u.decode(m)).split("\n\n"),f=1,w=T(g);try{for(w.s();!(v=w.n()).done;)b=v.value,f==g.length?l=b:("message"===(A=JSON.parse(b.slice(5))).event&&a.push(A.answer),f++)}catch(e){w.e(e)}finally{w.f()}if(!h){t.next=26;break}return i=!0,t.abrupt("break",28);case 26:t.next=13;break;case 28:case"end":return t.stop()}}),t)})))()},stopAiAnalysis:function(){var e=this.commonData.questionId;this.stopAnswer[e]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},O=(s("0e98"),Object(h.a)(L,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{height:"100% !important"}},["material"===e.currentItem.type?s("div",{staticClass:"ibs-subject-material"},[s("div",{class:["ibs-material-stem-nowrap",e.isShowDownIcon?"ibs-material-stem":""]},[s("span",{staticClass:"ibs-material-tags"},[e._v("\n          "+e._s(e.$t("courseLearning.material"))+"\n        ")]),s("span",{staticClass:"ibs-material-text",attrs:{id:"current"+e.currentItem.id},domProps:{innerHTML:e._s(e.currentItem.material)},on:{click:function(t){return e.handleClickImage(t.target)}}})]),s("i",{class:["iconfont","icon-arrow-up",{"ibs-show-up-icon":e.isShowDownIcon}],on:{click:e.changeUpIcon}}),s("i",{class:["iconfont","icon-arrow-down",{"ibs-show-down-icon":e.isShowUpIcon}],on:{click:e.changeDownIcon}}),e._l(e.getAttachementByType("material"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2):e._e(),s("div",{staticClass:"ibs-subject-card"},[s("div",{staticClass:"ibs-subject-stem"},["material"!==e.currentItem.type?s("span",{staticClass:"ibs-tags"},[e._v("\n          "+e._s(e.subject)+"\n        ")]):e._e(),s("div",["material"===e.currentItem.type?s("span",{staticClass:"ibs-serial-number"},[s("span",{staticClass:"ibs-material-type"},[e._v("["+e._s(e.subject)+"] ")]),e._v(" "+e._s(Number(e.commonData.current))+"、")]):s("span",{staticClass:"ibs-serial-number"},[e._v(e._s(Number(e.commonData.current))+"、")]),s("div",{staticClass:"ibs-rich-text",domProps:{innerHTML:e._s(e.getStem())},on:{click:function(t){return e.handleClickImage(t.target)}}})])]),e._l(e.getAttachmentTypeData("stem"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),e.disabledData?s("div",{staticClass:"ibs-subject ibs-essay"},[s("div",{staticClass:"ibs-answer-paper"},[s("van-field",{staticClass:"ibs-essay-input",attrs:{placeholder:e.placeholder,autosize:{maxHeight:132,minHeight:132},disabled:!e.disabledData,"label-width":"0px",type:"textarea"},on:{input:e.changeAnswer},model:{value:e.answerText,callback:function(t){e.answerText=t},expression:"answerText"}}),e.disabled?e._e():s("div",{staticClass:"discussion-create__upload"},[s("van-uploader",{attrs:{"after-read":e.afterRead,"max-count":5},on:{delete:e.deleteImgItem},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1)]):e._e(),e.disabledData?e._e():s("div",{staticClass:"ibs-answer-paper"},[e.disabledData?e._e():s("div",{staticClass:"ibs-answer-paper"},[s("div",{staticClass:"ibs-your-answer"},[e._v(e._s(e.$t("courseLearning.yourAreAnswer"))+"：")]),s("div",[s("div",["right"===e.status||"right"===e.commonData.report.status?s("img",{staticClass:"ibs-fill-status",attrs:{src:e.rigth,alt:""}}):e._e(),"wrong"===e.status||"wrong"===e.commonData.report.status||"no_answer"===e.commonData.report.status?s("img",{staticClass:"ibs-fill-status",attrs:{src:e.wrongImg,alt:""}}):e._e(),e.answer?s("span",{class:["ibs-essay-answer",{"ibs-is-wrong-answer":"wrong"===e.status},{"ibs-is-right-answer":"right"===e.status},{"ibs-is-right-answer":"right"===e.commonData.report.status},{"ibs-is-wrong-answer":"wrong"===e.commonData.report.status}],staticStyle:{color:"#37393D"},domProps:{innerHTML:e._s(e.answer)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",{class:["ibs-your-answer",{"ibs-is-wrong-answer":"wrong"===e.status},{"ibs-is-right-answer":"right"===e.status},{"ibs-is-right-answer":"right"===e.commonData.report.status},{"ibs-is-wrong-answer":"wrong"===e.commonData.report.status}]},[e._v(" "+e._s(e.$t("courseLearning.unanswered")))])])]),s("div",{staticClass:"ibs-your-answer mt-16"},[e._v("\n            "+e._s(e.$t("courseLearning.correctAnswer"))+"：\n          ")]),s("div",{staticClass:"mb-16"},[s("span",{staticClass:"ibs-is-right-answer",domProps:{innerHTML:e._s(e.commonData.answer[0])},on:{click:function(t){return e.handleClickImage(t.target)}}})]),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n            "+e._s(e.$t("courseLearning.score"))+"："),s("div",[e._v(e._s(e.commonData.report?e.commonData.report.score:0))])]):e._e(),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n            "+e._s(e.$t("courseLearning.comment"))+"："),s("div",[e._v(e._s(e.commonData.report?""===e.commonData.report.comment?"--":e.commonData.report.comment:""))])]):e._e(),s("div",{staticClass:"ibs-analysis-color"},[e._v("\n            "+e._s(e.$t("courseLearning.analyze"))+"：\n            "),e.commonData.analysis?s("span",{domProps:{innerHTML:e._s(e.commonData.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("div",{ref:"aiAnalysis"},[e._v(e._s(e.$t("courseLearning.noParsing")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commonData.aiAnalysisEnable,expression:"commonData.aiAnalysisEnable"}],staticClass:"ai-analysis"},[s("p",{staticClass:"ai-tittle"},[e._v(e._s(e.$t("courseLearning.aiAssistant")))]),s("div",{staticClass:"ai-content"},[s("div",{staticClass:"ai-content-left"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.analysis")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.stopAiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.stopGeneration")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.reGenerate")))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[e._v(e._s(e.$t("courseLearning.beGenerating")))])]),e._m(0)])]),e._l(e.getAttachmentTypeData("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)])],2),e.isShowFooterShadow()?s("div",{staticClass:"ibs-footer-shadow"}):e._e(),e.disabledData||"material"!==e.currentItem.type?e._e():s("div",{staticClass:"ibs-subject-footer"},[e._v("\n      "+e._s(e.$t("courseLearning.analyze"))+"：\n      "),""!==e.currentItem.analysis?s("span",{domProps:{innerHTML:e._s(e.currentItem.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",[e._v(e._s(e.$t("courseLearning.noParsing")))]),e._l(e.getAttachementByType("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)]),e.disabledData||"do"!==e.mode?e._e():s("div",{staticClass:"self-judging"},[s("div",{staticClass:"self-judging-title"},[e._v(e._s(e.$t("courseLearning.selfJudging")))]),s("div",{staticClass:"self-judging-change-radio"},[s("van-radio-group",{staticClass:"self-judging-group-radio",attrs:{disabled:e.reviewDisabled},on:{change:e.changeEssayRadio},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[s("van-radio",{staticClass:"self-judging-radio",attrs:{name:"right"},scopedSlots:e._u([{key:"icon",fn:function(t){return[s("img",{staticClass:"img-icon",attrs:{src:t.checked?e.activeIcon:e.defaultIcon}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"props.checked"}],staticClass:"iconfont icon-check"})]}}],null,!1,4172389107)},[e._v("\n          "+e._s(e.$t("courseLearning.haveMastered"))+"\n          ")]),s("van-radio",{staticClass:"self-judging-radio",attrs:{name:"wrong"},scopedSlots:e._u([{key:"icon",fn:function(t){return[s("img",{staticClass:"img-icon",attrs:{src:t.checked?e.activeQuestions:e.defaultQuestions}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"props.checked"}],staticClass:"iconfont icon-check"})]}}],null,!1,134390003)},[e._v("\n          "+e._s(e.$t("courseLearning.notQuiteUnderstand"))+"\n          ")])],1)],1)]),e.disabledData&&"1"===e.brushDo.exerciseModes?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:e.submitTopic}},[e._v(e._s(e.$t("courseLearning.submitATopic")))])],1):e._e(),e.reviewDisabled||e.disabledData||"do"!==e.mode?e._e():s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"},on:{click:e.singleQuestionSubmission}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"}},[e._v(e._s(e.$t("wrongQuestion.completeReview")))])],1),1==e.isAnswerFinished?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:function(t){return e.goBrushResult()}}},[e._v(e._s(e.$t("courseLearning.viewResult2")))])],1):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"74ffb96a",null).exports);function j(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,t){if(e){if("string"==typeof e)return M(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,r=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return o=e.done,e},e:function(e){r=!0,a=e},f:function(){try{o||null==s.return||s.return()}finally{if(r)throw a}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var $=document.documentElement.clientWidth,P={name:"fill",mixins:[a,c.a],data:function(){return{width:$,answer:this.itemData.userAnwer,rigth:"static/images/exercise/rigth.png",wrongImg:"static/images/exercise/wrong.png",isShowDownIcon:null,isShowUpIcon:!1,question:[],refreshKey:!0,status:"",answerData:{},stopAnswer:{},isShowAiExplain:!0,stopAiExplain:!1,anewAiExplain:!1}},components:{attachementPreview:m},props:{exerciseInfo:{type:Object,default:function(){}}},inject:["brushDo"],computed:{placeholder:{get:function(){return this.disabled?"未作答":"请填写答案"}},subject:function(){return"".concat(r(this.commonData.questionsType))}},watch:{questionStatus:{handler:function(e,t){e.length>0&&(this.status=e)}}},mounted:function(){var e=this,t=this.fillStatus.filter((function(t){return t.question_id+""===e.commonData.questionId}));t.length>0&&(this.status=t[0].status);var s=document.getElementById("current".concat(this.currentItem.id));s&&(this.isShowDownIcon=s.childNodes[0].offsetWidth>234)},methods:{filterFillHtml:function(e){var t=/\[\[\]\]/g;if(!e.match(t))return e;var s=1;return e.replace(t,(function(){return"<span> (".concat(s++,") ____</span>")}))},changeAnswer:function(){this.$emit("changeAnswer",this.answer,this.itemData.keys)},getAttachmentTypeData:function(e){return this.attachements.filter((function(t){return t.module===e}))},getAttachementByType:function(e){return this.currentItem.attachments.filter((function(t){return t.module===e}))},submitTopic:function(){var e=this,t=this.answer.some((function(e){return""===e})),s={item_id:this.commonData.item_id,question_id:this.commonData.questionId,seq:Number(this.commonData.current)};if(!t)return this.$emit("changeTouch"),void this.$emit("submitSingleAnswer",this.answer,s,"fill");A.a.confirm({message:this.$t("courseLearning.questionNotAnswer"),confirmButtonText:this.$t("courseLearning.continueAnswer"),cancelButtonText:this.$t("btn.confirm")}).then((function(){})).catch((function(){e.$emit("submitSingleAnswer",e.answer,s,"fill"),e.$emit("changeTouch")}))},goBrushResult:function(){"wrongQuestionBook"===this.brushDo.type?this.brushDo.goResult():"lessonTask"===this.brushDo.type&&this.$emit("goBrushResult")},changeUpIcon:function(){this.isShowUpIcon=!0,this.isShowDownIcon=!1},changeDownIcon:function(){this.isShowUpIcon=!1,this.isShowDownIcon=!0},getAiAnalysis:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s,n,i,a,o,r,c,u,l,d,h,m,g,f,w,v,b,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.commonData.questionId,n={role:"student",questionId:s,answerRecordId:e.exerciseInfo.id},i=!1,a=[],e.answerData[s]="",e.stopAnswer[s]=!1,o=setInterval((function(){0!==a.length&&(e.stopAnswer[s]&&clearInterval(o),e.answerData[s]+=a.shift(),0===a.length&&i&&(clearInterval(o),e.stopAiExplain=!1,e.anewAiExplain=!0),e.$refs.aiAnalysis.innerHTML=e.answerData[s])}),50),t.next=9,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json","X-Auth-Token":p.a.state.token},body:JSON.stringify(n)});case 9:r=t.sent,c=r.body.getReader(),u=new TextDecoder,l="";case 13:return t.next=16,c.read();case 16:d=t.sent,h=d.done,m=d.value,g=(l+u.decode(m)).split("\n\n"),f=1,w=j(g);try{for(w.s();!(v=w.n()).done;)b=v.value,f==g.length?l=b:("message"===(A=JSON.parse(b.slice(5))).event&&a.push(A.answer),f++)}catch(e){w.e(e)}finally{w.f()}if(!h){t.next=26;break}return i=!0,t.abrupt("break",28);case 26:t.next=13;break;case 28:case"end":return t.stop()}}),t)})))()},stopAiAnalysis:function(){var e=this.commonData.questionId;this.stopAnswer[e]=!0},aiGeneration:function(){this.isShowAiExplain=!1,this.stopAiExplain=!0,this.anewAiExplain=!1,this.getAiAnalysis()},stopAiGeneration:function(){this.stopAiExplain=!1,this.isShowAiExplain=!1,this.anewAiExplain=!0,this.stopAiAnalysis()}}},N=(s("1474"),Object(h.a)(P,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",["material"===e.currentItem.type?s("div",{staticClass:"ibs-subject-material"},[s("div",{class:["ibs-material-stem-nowrap",e.isShowDownIcon?"ibs-material-stem":""]},[s("span",{staticClass:"ibs-material-tags"},[e._v("\n        "+e._s(e.$t("courseLearning.material"))+"\n      ")]),s("span",{staticClass:"ibs-material-text",attrs:{id:"current"+e.currentItem.id},domProps:{innerHTML:e._s(e.currentItem.material)},on:{click:function(t){return e.handleClickImage(t.target)}}})]),s("i",{class:["iconfont","icon-arrow-up",{"ibs-show-up-icon":e.isShowDownIcon}],on:{click:e.changeUpIcon}}),s("i",{class:["iconfont","icon-arrow-down",{"ibs-show-down-icon":e.isShowUpIcon}],on:{click:e.changeDownIcon}}),e._l(e.getAttachementByType("material"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2):e._e(),s("div",{staticClass:"ibs-subject-card"},[s("div",{staticClass:"ibs-subject-stem"},["material"!==e.currentItem.type?s("span",{staticClass:"ibs-tags"},[e._v("\n        "+e._s(e.subject)+"\n      ")]):e._e(),s("div",["material"===e.currentItem.type?s("span",{staticClass:"ibs-serial-number"},[s("span",{staticClass:"ibs-material-type"},[e._v("["+e._s(e.subject)+"] ")]),e._v(" "+e._s(Number(e.commonData.current))+"、")]):s("span",{staticClass:"ibs-serial-number"},[e._v(e._s(Number(e.commonData.current))+"、")]),s("div",{staticClass:"ibs-rich-text",domProps:{innerHTML:e._s(e.getStem())},on:{click:function(t){return e.handleClickImage(t.target)}}})])]),e._l(e.getAttachmentTypeData("stem"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})})),e.disabledData?s("div",{staticClass:"ibs-subject ibs-fill"},[s("div",e._l(e.itemData.question.answer,(function(t,n){return s("div",{key:n,class:{"ibs-field-bottom":n!=e.commonData.answer.length-1}},[s("van-field",{staticClass:"ibs-fill-input",attrs:{placeholder:"doing"===e.brushDo.status?"("+(n+1)+")"+e.$t("courseLearning.pleaseEnterYourAnswer"):e.$t("courseLearning.unanswered"),"label-width":"0px",type:"textarea",rows:"1",autosize:"",disabled:!e.disabledData},on:{input:e.changeAnswer},model:{value:e.answer[n],callback:function(t){e.$set(e.answer,n,t)},expression:"answer[index]"}})],1)})),0)]):e._e(),e.disabledData?e._e():s("div",{staticClass:"ibs-answer-paper"},[s("div",{staticClass:"ibs-your-answer"},[e._v(e._s(e.$t("courseLearning.yourAreAnswer"))+"：")]),s("div",["right"===e.status||"right"===e.commonData.report.status?s("img",{staticClass:"ibs-fill-status",attrs:{src:e.rigth,alt:""}}):e._e(),"wrong"===e.status||"wrong"===e.commonData.report.status||"no_answer"===e.commonData.report.status?s("img",{staticClass:"ibs-fill-status",attrs:{src:e.wrongImg,alt:""}}):e._e(),e.disabledData||0!==e.answer.length?e._e():s("span",{staticClass:"ibs-your-answer ibs-is-wrong-answer"},[e._v(" "+e._s(e.$t("courseLearning.unanswered")))]),e._l(e.answer,(function(t,n){return s("span",{key:n,class:["right"===e.status?"ibs-is-right-answer":"ibs-is-wrong-answer","right"===e.commonData.report.status?"ibs-is-right-answer":"ibs-is-wrong-answer"]},[e._v(e._s(e.answer.length-1===n?""===t?e.$t("courseLearning.unanswered"):t:(""===t?e.$t("courseLearning.unanswered"):t)+";"))])}))],2),s("div",{staticClass:"ibs-your-answer mt-16"},[e._v("\n          "+e._s(e.$t("courseLearning.correctAnswer"))+"：\n        ")]),s("div",{staticClass:"mb-16"},e._l(e.commonData.answer,(function(t,n){return s("span",{key:n,staticClass:"ibs-is-right-answer"},[e._v(" "+e._s(e.commonData.answer.length-1===n?t:t+";"))])})),0),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.score"))+"："),s("div",[e._v(e._s(e.commonData.report?e.commonData.report.score:0))])]):e._e(),"assessment"==e.$route.query.type?s("div",{staticClass:"ibs-analysis-color mb-8"},[e._v("\n          "+e._s(e.$t("courseLearning.comment"))+"："),s("div",[e._v(e._s(e.commonData.report?""===e.commonData.report.comment?"--":e.commonData.report.comment:""))])]):e._e(),s("div",{staticClass:"ibs-analysis-color"},[e._v("\n          "+e._s(e.$t("courseLearning.analyze"))+"：\n          "),e.commonData.analysis?s("span",{domProps:{innerHTML:e._s(e.commonData.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("div",{ref:"aiAnalysis"},[e._v(e._s(e.$t("courseLearning.noParsing")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commonData.aiAnalysisEnable,expression:"commonData.aiAnalysisEnable"}],staticClass:"ai-analysis"},[s("p",{staticClass:"ai-tittle"},[e._v(e._s(e.$t("courseLearning.aiAssistant")))]),s("div",{staticClass:"ai-content"},[s("div",{staticClass:"ai-content-left"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAiExplain,expression:"isShowAiExplain"}],staticClass:"ai-btn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-ai.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.analysis")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.stopAiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-stop.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.stopGeneration")))])]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.anewAiExplain,expression:"anewAiExplain"}],staticClass:"ai-stopbtn",on:{click:function(t){return e.aiGeneration()}}},[s("img",{staticClass:"ai-img",attrs:{src:"static/images/explain-anew.png"}}),s("span",{staticClass:"ai-left-text"},[e._v(e._s(e.$t("courseLearning.reGenerate")))])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.stopAiExplain,expression:"stopAiExplain"}],staticClass:"ai-left-tittle"},[e._v(e._s(e.$t("courseLearning.beGenerating")))])]),e._m(0)])]),e._l(e.getAttachmentTypeData("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2)],2),e.isShowFooterShadow()?s("div",{staticClass:"ibs-footer-shadow"}):e._e(),e.disabledData||"material"!==e.currentItem.type?e._e():s("div",{staticClass:"ibs-subject-footer"},[e._v("\n    "+e._s(e.$t("courseLearning.analyze"))+"：\n    "),""!==e.currentItem.analysis?s("span",{domProps:{innerHTML:e._s(e.currentItem.analysis)},on:{click:function(t){return e.handleClickImage(t.target)}}}):s("span",[e._v(e._s(e.$t("courseLearning.noParsing")))]),e._l(e.getAttachementByType("analysis"),(function(e){return s("attachement-preview",{key:e.id,attrs:{attachment:e}})}))],2),e.disabledData&&"1"===e.brushDo.exerciseModes?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:e.submitTopic}},[e._v(e._s(e.$t("courseLearning.submitATopic")))])],1):e._e(),1==e.isAnswerFinished?s("div",{staticClass:"ibs-submit-footer",style:{width:e.width+"px"}},[s("van-button",{staticClass:"ibs-submit-footer-btn",style:{width:e.width-20+"px"},attrs:{type:"primary"},on:{click:function(t){return e.goBrushResult()}}},[e._v(e._s(e.$t("courseLearning.viewResult2")))])],1):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"ai-right-img",attrs:{src:"static/images/explain-ai-img.png"}})])}],!1,null,"467c8c18",null).exports),F={name:"ibs-slide-btn",components:{},props:{isLast:{type:Boolean,default:!1},isFrist:{type:Boolean,default:!1}},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{slidePrev:function(){this.$emit("slidePrev")},slideNext:function(){this.$emit("slideNext")}}},U=Object(h.a)(F,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ibs-slide-btn"},[s("div",{class:["left-slide__btn",e.isFrist?"slide-disabled":""],on:{click:function(t){return e.slidePrev()}}},[s("i",{staticClass:"wap-icon wap-icon-arrow-left"})]),s("div",{class:["right-slide__btn",e.isLast?"slide-disabled":""],on:{click:function(t){return e.slideNext()}}},[s("i",{staticClass:"wap-icon wap-icon-arrow-right"})])])}),[],!1,null,null,null).exports,Y={mixins:[{methods:{dispatch:function(e,t,s){for(var n=this.$parent||this.$root,i=n.$options.name;n&&(!i||i!==e);)(n=n.$parent)&&(i=n.$options.name);n&&n.$emit.apply(n,[t].concat(s))},broadcast:function(e,t,s){(function e(t,s,n){this.$children.forEach((function(i){i.$options.name===t?i.$emit.apply(i,[s].concat(n)):e.apply(i,[t,s].concat([n]))}))}).call(this,e,t,s)}}}],components:{},data:function(){return{score:"",status:"",activeIcon:"static/images/itemBankExercise/grasp-active.png",defaultIcon:"static/images/itemBankExercise/grasp.png",activeQuestions:"static/images/itemBankExercise/not-master-active.png",defaultQuestions:"static/images/itemBankExercise/not-master.png"}},props:{needScore:{type:Boolean,default:!1},questionId:{type:String,default:""},reviewStatus:{type:Object,default:function(){return{}}},questionScore:{type:Number,default:0}},computed:{},created:function(){this.status=this.reviewStatus.status},methods:{changeScore:function(e){e<0&&(i.a.fail("不得低于0分"),this.score=0),e>this.questionScore&&(i.a.fail("不得高于".concat(this.questionScore,"分")),this.score=this.questionScore);var t={score:this.score,questionId:this.questionId};this.dispatch("item-review","changeScore",t)},changeStatus:function(e){var t={status:e,questionId:this.questionId};this.$emit("changeReviewList",t)}}},z=(s("6f7e"),{components:{review:Object(h.a)(Y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ibs-review"},[e.needScore?[e._m(0),s("div",[s("van-field",{attrs:{type:"number",placeholder:"请输入自评得分",label:""},on:{input:e.changeScore},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1)]:[s("div",{staticClass:"ibs-self-judging"},[s("div",{staticClass:"ibs-review-title"},[e._v(e._s(e.$t("courseLearning.selfJudging")))]),s("div",{staticClass:"ibs-self-judging-change-radio"},[s("van-radio-group",{staticClass:"ibs-self-judging-group-radio",on:{change:e.changeStatus},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[s("van-radio",{staticClass:"ibs-self-judging-radio",attrs:{name:"right"},scopedSlots:e._u([{key:"icon",fn:function(t){return[s("img",{staticClass:"img-icon",attrs:{src:t.checked?e.activeIcon:e.defaultIcon}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"props.checked"}],staticClass:"iconfont icon-check"})]}}])},[e._v("\n            "+e._s(e.$t("courseLearning.haveMastered"))+"\n            ")]),s("van-radio",{staticClass:"ibs-self-judging-radio",attrs:{name:"wrong"},scopedSlots:e._u([{key:"icon",fn:function(t){return[s("img",{staticClass:"img-icon",attrs:{src:t.checked?e.activeQuestions:e.defaultQuestions}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"props.checked"}],staticClass:"iconfont icon-check"})]}}])},[e._v("\n            "+e._s(e.$t("courseLearning.notQuiteUnderstand"))+"\n            ")])],1)],1)])]],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ibs-review-title"},[this._v("\n      题目得分"),t("span",[this._v("(最低0分，最高满分)")])])}],!1,null,"3da9cadf",null).exports},data:function(){return{}},props:{mode:{type:String,default:"do"},commonData:{type:Object,default:function(){return{}}},showAnalysis:{type:Boolean,default:!1},showReport:{type:Boolean,default:!1},showReview:{type:Boolean,default:!1},attachements:{type:Array,default:function(){return[]}},reviewStatus:{type:Object,default:function(){return{}}}},computed:{},watch:{},created:function(){},methods:{getAttachmentTypeData:function(e){return this.attachements.filter((function(t){return t.module===e}))},changeReviewList:function(e){this.$emit("changeReviewList",e)}}}),W=Object(h.a)(z,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[e._t("default"),e.showReview?s("review",{key:e.reviewStatus.status,attrs:{needScore:e.commonData.showScore,questionId:e.commonData.questionId,questionScore:e.commonData.score,reviewStatus:e.reviewStatus},on:{changeReviewList:e.changeReviewList}}):e._e()],2)}),[],!1,null,null,null).exports,H={name:"sectionTitle",props:{all:{type:Number,default:0},current:{type:Number,default:0},itemType:{type:String,default:""},questionsType:{type:String,default:""},score:{type:Number,default:0},showScore:{type:Boolean,default:!0},reviewedCount:{type:Number,default:0}},inject:["brushDo","itemEngine"],computed:{subject:function(){return"".concat(r(this.questionsType))}}},G=Object(h.a)(H,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["doing"===e.brushDo.status?"0"===e.brushDo.exerciseModes?"ibs-head-top":"ibs-one-questions-head":"ibs-head-top"]},["1"===e.brushDo.exerciseModes&&"doing"===e.brushDo.status?s("div",{staticClass:"w-full"},[s("div",{staticClass:"flex justify-between items-end mb-8"},[s("span",{staticClass:"text-14 ibs-answer-progress"},[e._v(e._s(e.$t("courseLearning.answerProgress"))+" "),s("span",{staticClass:"ibs-current-num"},[e._v(e._s(e.reviewedCount?e.reviewedCount:e.brushDo.reviewedCount)+" "),s("span",{staticClass:"ibs-total-number"},[e._v(" /"+e._s(e.all))])])]),s("span",{staticClass:"text-12 ibs-answer-card",on:{click:function(t){e.itemEngine.cardShow=!0}}},[e._v(e._s(e.$t("courseLearning.answerSheet")))])]),s("van-progress",{attrs:{percentage:(e.reviewedCount?e.reviewedCount:e.brushDo.reviewedCount)/e.all*100,"stroke-width":"8","track-color":"#E9E9EB","show-pivot":!1}})],1):s("div",{staticClass:"flex justify-between w-full"},[s("div",{staticClass:"ibs-head-left"},[e._v("\n      "+e._s(e.subject)+"\n      "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showScore,expression:"showScore"}],staticClass:"ibs-left-color"},[e._v("["+e._s(e.score)+"分]")])]),s("div",{staticClass:"ibs-head-right"},[s("span",{staticClass:"ibs-right-color"},[e._v(e._s(e.current))]),e._v("/"+e._s(e.all)+"\n    ")])])])}),[],!1,null,null,null).exports,J=s("2ef0"),K=s.n(J),Z=document.documentElement.clientWidth,X={name:"ibs-item",components:{sectionTitle:G,singleChoice:b,judge:E,choice:I,essay:O,fill:N,answerModel:W,ibsSlide:U},data:function(){return{height:0,swiperActiveIndex:0,materialAnalysis:!1,isLeave:!1,status:"",reviewList:[],touchable:!0,showShadow:"",width:Z}},props:{item:{type:Object,default:function(){}},mode:{type:String,default:"do"},itemUserAnswer:{type:Object,default:function(){}},needScore:{type:Boolean,default:!0},all:{type:Number,default:0},keys:{type:Array,default:function(){return[]}},iscando:{type:Array,default:function(){return[]}},choiceIsCando:{type:Array,default:function(){return[]}},question_reports:{type:Array,default:function(){return[]}},itemUserReport:{type:Object,default:function(){}},wrongMode:{type:Boolean,default:!1},doLookAnalysis:{type:Boolean,default:!1},current:{type:Number,default:0},itemLength:{type:Number,default:0},reviewedCount:{type:Number,default:0},exerciseInfo:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}},wrong:{type:Boolean,default:!1},isAnswerFinished:{type:Number,default:0},reviewedQuestion:{type:Array,default:function(){return[]}},fillStatus:{type:Array,default:function(){return[]}},EssayRadio:{type:Array,default:function(){return[]}}},inject:["brushDo"],computed:{canShowAnalysis:function(){return this.doLookAnalysis&&"do"===this.mode?this.materialAnalysis:"report"===this.mode},isLast:function(){var e=this.item.questions.length-1;return"report"===this.mode&&this.wrongMode&&(e=this.item.wrongNum-1),"review"===this.mode&&(e=this.item.reviewNum-1),this.current===this.itemLength-1&&this.swiperActiveIndex===e},isFrist:function(){return 0===this.current&&0===this.swiperActiveIndex}},mounted:function(){var e=this;this.$nextTick((function(){if("do"===e.mode){var t=[];e.items.forEach((function(s,n){s.questions.forEach((function(e,s){t.push(e)})),e.showShadow=t[t.length-1].id}))}})),this.setSwiperHeight()},methods:{changeReviewList:function(e){this.$emit("changeStatus",e)},slideChange:function(e){var t="childSwiper".concat(this.item.id);this.swiperActiveIndex=this.$refs[t].$swiper.activeIndex,this.$emit("questionSlideChange",this.swiperActiveIndex)},setSwiperHeight:function(){var e=document.getElementById("ibs-item-bank").offsetTop,t=document.documentElement.clientHeight;this.height=t-e},getUserAnwer:function(e){return"do"!==this.mode?this.itemUserAnswer.question_reports[e].response:this.itemUserAnswer.question_responses[e].response},getQuestionReport:function(e){return"do"!==this.mode?this.itemUserAnswer.question_reports[e]:{}},changeAnswer:function(e,t,s){this.itemUserAnswer.question_responses[t].response=[e],this.$emit("changeAnswer",this.itemUserAnswer,this.keys),"1"===this.brushDo.answerRecord.exercise_mode&&"essay"!==s.type&&(this.notSwiperChangeTouch(!1),this.touchable=!1,this.submitSingleAnswer(e.split(""),s))},submitSingleAnswer:K.a.debounce((function(e,t,s){var n=this;R.a.submitSingleAnswer({query:{id:this.brushDo.answerRecord.id},data:{admission_ticket:this.brushDo.answerRecord.admission_ticket,assessment_id:this.brushDo.answerRecord.assessment_id,exerciseMode:this.brushDo.answerRecord.exercise_mode,section_id:this.item.section_id,item_id:t.item_id,question_id:t.question_id,response:e}}).then((function(e){var i=t.seq-1;if(n.$refs["submit"+i][0].refreshChoice(e),n.status=e.status,n.wrong?(n.changeChoiceCando(),"right"===e.status&&setTimeout((function(){n.slideNext(!0)}),1e3)):"right"===e.status?(setTimeout((function(){n.slideNext(!0)}),1e3),n.$emit("changeIsCando",i,!1)):n.$emit("changeIsCando",i,!1),n.swiperChangeTouch(!0),n.touchable=!0,"fill"===s){var a={status:e.status,question_id:t.question_id};n.$emit("submitedQuestionStatus",a)}n.$emit("changeReviewedCount",e.reviewedCount,e.isAnswerFinished)})).catch((function(e){n.touchable=!0,n.swiperChangeTouch(!0),i.a.fail(e.message)}))}),1e3),changeAnswerArray:function(e,t){this.itemUserAnswer.question_responses[t].response=e,this.$emit("changeAnswer",this.itemUserAnswer,this.keys)},getShow:function(e,t){return"report"===this.mode&&this.wrongMode?"right"!==this.itemUserReport.question_reports[e].status:"review"!==this.mode||t.reviewShow},getItemProps:function(e,t){return{mode:this.mode,keys:t,question:e,userAnwer:this.getUserAnwer(t)}},getAnswerModeProps:function(e,t){return{questionsType:e.answer_mode,score:Number(e.score)||0,current:Number(e.seq),showScore:this.needScore,all:this.all,questionStem:e.stem,answer:e.answer,report:this.getQuestionReport(t),analysis:e.analysis,doLookAnalysis:this.doLookAnalysis,questionId:e.id,item_id:e.item_id,aiAnalysisEnable:e.aiAnalysisEnable}},showMaterialAnalysis:function(e){"material"===this.item.type&&(this.materialAnalysis=e)},changeChoiceCando:function(){this.$emit("changeChoiceCando",this.current,!0)},slidePrev:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.touchable){t.next=2;break}return t.abrupt("return");case 2:s="childSwiper".concat(e.item.id),e.$refs[s].$swiper.slidePrev()||e.$emit("itemSlidePrev");case 5:case"end":return t.stop()}}),t)})))()},slideNext:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.touchable||e){s.next=2;break}return s.abrupt("return");case 2:n="childSwiper".concat(t.item.id),t.$refs[n].$swiper.slideNext()&&!e||t.$emit("itemSlideNext");case 5:case"end":return s.stop()}}),s)})))()},goBrushResult:function(){this.isLeave=!0;var e={type:"chapter",title:this.$route.query.title,exerciseId:this.$route.query.exerciseId,categoryId:this.$route.query.categoryId,moduleId:this.$route.query.moduleId,isLeave:this.isLeave,backUrl:"/item_bank_exercise/".concat(this.$route.query.exerciseId,"?categoryId=").concat(this.$route.query.categoryId)},t=this.brushDo.recordId;this.$router.replace({path:"/brushResult/".concat(t),query:e})},nextSkipQuestion:function(){var e=this;setTimeout((function(){e.slideNext(!0)}),2e3)},changeTouch:function(){this.touchable=!1,this.notSwiperChangeTouch(!1)},swiperChangeTouch:function(e){this.$emit("changeTouch",e)},notSwiperChangeTouch:function(e){this.$emit("noChangeTouch",e)},updataIsAnswerFinished:function(e,t,s,n){this.$emit("updataIsAnswerFinished",e,t,s,n)},changeEssayRadio:function(e){this.$emit("changeEssayRadio",e)}}},V=Object(h.a)(X,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.item?s("div",{staticStyle:{height:"100% !important"}},[s("swiper",{ref:"childSwiper"+e.item.id,staticClass:"ibs-question-swiper  ibs-paper-item",attrs:{height:e.height,nested:!0,speed:500,resistanceRatio:0,touchable:e.touchable,"show-indicators":!1},on:{slideChange:e.slideChange}},[e._l(e.item.questions,(function(t,n){return[e.getShow(n,t)&&!e.wrong?s("swiper-slide",{key:t.id,class:"do"==e.mode&&e.iscando[Number(t.seq)-1]?"ibs-exercise-do":"ibs-exercise-analysis"},[[s("sectionTitle",{attrs:{questionsType:e.getAnswerModeProps(t,n).questionsType,score:e.getAnswerModeProps(t,n).score,current:e.getAnswerModeProps(t,n).current,showScore:e.getAnswerModeProps(t,n).showScore,all:e.getAnswerModeProps(t,n).all,reviewedCount:e.reviewedCount}}),s("answer-model",e._b({attrs:{mode:e.mode,activeIndex:e.swiperActiveIndex,commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,reviewStatus:e.question_reports[e.current]},on:{changeReviewList:e.changeReviewList,showMaterialAnalysis:e.showMaterialAnalysis}},"answer-model",e.$attrs,!1),["aiPersonality"===e.brushDo.assessment.type?s("div",{staticClass:"ai-personal-notice"},[s("van-notice-bar",{staticClass:"notice-border",attrs:{mode:"closeable",color:"#37393D",scrollable:!1,background:"#edf9f2"},scopedSlots:e._u([{key:"left-icon",fn:function(){return[s("img",{staticClass:"notice-ai-img",attrs:{src:"static/images/AI.png"}})]},proxy:!0}],null,!0)},[s("span",[e._v(e._s(e.$t("courseLearning.exerciseAiTips")))])])],1):e._e(),"single_choice"===t.answer_mode?s("singleChoice",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,wrong:e.wrong,currentItem:e.item,totalCount:e.all,showShadow:e.showShadow,reviewedCount:e.reviewedCount,disabledData:"report"!==e.mode&&(0===e.iscando.length||"do"===e.mode&&e.iscando[Number(t.seq)-1])&&"review"!==e.mode,exerciseInfo:e.exerciseInfo,isAnswerFinished:e.isAnswerFinished},on:{changeAnswer:e.changeAnswer,goBrushResult:e.goBrushResult}}):e._e(),"true_false"===t.answer_mode?s("judge",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,wrong:e.wrong,totalCount:e.all,showShadow:e.showShadow,disabledData:"report"!==e.mode&&(0===e.iscando.length||"do"===e.mode&&e.iscando[Number(t.seq)-1])&&"review"!==e.mode,exerciseInfo:e.exerciseInfo,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished},on:{changeAnswer:e.changeAnswer,goBrushResult:e.goBrushResult}}):e._e(),"choice"===t.answer_mode||"uncertain_choice"===t.answer_mode?s("choice",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,totalCount:e.all,wrong:e.wrong,showShadow:e.showShadow,exerciseInfo:e.exerciseInfo,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished,disabledData:"report"!==e.mode&&(0===e.iscando.length||"do"===e.mode&&e.iscando[Number(t.seq)-1])&&"review"!==e.mode},on:{submitSingleAnswer:e.submitSingleAnswer,changeAnswer:e.changeAnswerArray,goBrushResult:e.goBrushResult}}):e._e(),"rich_text"===t.answer_mode?s("essay",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,totalCount:e.all,wrong:e.wrong,questionStatus:e.status,showShadow:e.showShadow,exerciseInfo:e.exerciseInfo,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished,reviewedQuestion:e.reviewedQuestion,EssayRadio:e.EssayRadio,disabledData:"report"!==e.mode&&(0===e.iscando.length||"do"===e.mode&&e.iscando[Number(t.seq)-1])&&"review"!==e.mode},on:{nextSkipQuestion:e.nextSkipQuestion,updataIsAnswerFinished:e.updataIsAnswerFinished,submitSingleAnswer:e.submitSingleAnswer,changeAnswer:e.changeAnswer,goBrushResult:e.goBrushResult,changeEssayRadio:e.changeEssayRadio}}):e._e(),"text"===t.answer_mode?s("fill",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,totalCount:e.all,wrong:e.wrong,questionStatus:e.status,showShadow:e.showShadow,fillStatus:e.fillStatus,exerciseInfo:e.exerciseInfo,disabledData:"report"!==e.mode&&(0===e.iscando.length||"do"===e.mode&&e.iscando[Number(t.seq)-1])&&"review"!==e.mode,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished},on:{submitSingleAnswer:e.submitSingleAnswer,changeAnswer:e.changeAnswerArray,goBrushResult:e.goBrushResult}}):e._e()],1)]],2):e._e(),e.getShow(n,t)&&e.wrong?s("swiper-slide",{key:t.id,class:"do"!=e.mode||e.choiceIsCando[Number(t.seq)-1]?"ibs-exercise-analysis":"ibs-exercise-do"},[[s("sectionTitle",{attrs:{questionsType:e.getAnswerModeProps(t,n).questionsType,score:e.getAnswerModeProps(t,n).score,current:e.getAnswerModeProps(t,n).current,showScore:e.getAnswerModeProps(t,n).showScore,all:e.getAnswerModeProps(t,n).all,reviewedCount:e.reviewedCount}}),s("answer-model",e._b({attrs:{mode:e.mode,activeIndex:e.swiperActiveIndex,commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,reviewStatus:e.question_reports[e.current]},on:{changeReviewList:e.changeReviewList,showMaterialAnalysis:e.showMaterialAnalysis}},"answer-model",e.$attrs,!1),["single_choice"===t.answer_mode?s("singleChoice",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,wrong:e.wrong,currentItem:e.item,totalCount:e.all,showShadow:e.showShadow,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished,disabledData:"report"!==e.mode&&(0===e.choiceIsCando.length||"do"===e.mode&&!e.choiceIsCando[Number(t.seq)-1]),exerciseInfo:e.exerciseInfo},on:{changeChoiceCando:e.changeChoiceCando,changeAnswer:e.changeAnswer,goBrushResult:e.goBrushResult}}):e._e(),"true_false"===t.answer_mode?s("judge",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,wrong:e.wrong,totalCount:e.all,showShadow:e.showShadow,disabledData:"report"!==e.mode&&(0===e.choiceIsCando.length||"do"===e.mode&&!e.choiceIsCando[Number(t.seq)-1]),exerciseInfo:e.exerciseInfo,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished},on:{changeChoiceCando:e.changeChoiceCando,changeAnswer:e.changeAnswer,goBrushResult:e.goBrushResult}}):e._e(),"choice"===t.answer_mode||"uncertain_choice"===t.answer_mode?s("choice",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,totalCount:e.all,wrong:e.wrong,showShadow:e.showShadow,exerciseInfo:e.exerciseInfo,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished,disabledData:"report"!==e.mode&&(0===e.choiceIsCando.length||"do"===e.mode&&!e.choiceIsCando[Number(t.seq)-1])},on:{changeChoiceCando:e.changeChoiceCando,submitSingleAnswer:e.submitSingleAnswer,changeTouch:e.changeTouch,changeAnswer:e.changeAnswerArray,goBrushResult:e.goBrushResult}}):e._e(),"rich_text"===t.answer_mode?s("essay",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,totalCount:e.all,wrong:e.wrong,questionStatus:e.status,showShadow:e.showShadow,exerciseInfo:e.exerciseInfo,reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished,disabledData:0===e.iscando.length||"do"===e.mode&&!e.choiceIsCando[Number(t.seq)-1]},on:{changeTouch:e.changeTouch,submitSingleAnswer:e.submitSingleAnswer,changeAnswer:e.changeAnswer,goBrushResult:e.goBrushResult}}):e._e(),"text"===t.answer_mode?s("fill",{ref:"submit"+(Number(t.seq)-1),refInFor:!0,attrs:{mode:e.mode,itemData:e.getItemProps(t,n),commonData:e.getAnswerModeProps(t,n),attachements:e.getItemProps(t,n).question.attachments,currentItem:e.item,totalCount:e.all,wrong:e.wrong,showShadow:e.showShadow,exerciseInfo:e.exerciseInfo,questionStatus:e.status,fillStatus:e.fillStatus,disabledData:0===e.iscando.length||"do"===e.mode&&!e.choiceIsCando[Number(t.seq)-1],reviewedCount:e.reviewedCount,isAnswerFinished:e.isAnswerFinished},on:{changeTouch:e.changeTouch,submitSingleAnswer:e.submitSingleAnswer,changeAnswer:e.changeAnswerArray,goBrushResult:e.goBrushResult}}):e._e()],1)]],2):e._e()]}))],2),s("ibs-slide",{attrs:{isLast:e.isLast,isFrist:e.isFrist},on:{slidePrev:e.slidePrev,slideNext:e.slideNext}})],1):e._e()}),[],!1,null,null,null);t.a=V.exports}}]);