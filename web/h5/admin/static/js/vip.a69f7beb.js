(window.webpackJsonp=window.webpackJsonp||[]).push([["vip"],{"1f93":function(t,e,i){"use strict";i("3ad5")},"3ad5":function(t,e,i){},"90b2":function(t,e,i){},"9b37":function(t,e,i){"use strict";i("90b2")},a9a0:function(t,e,i){"use strict";i.r(e);var s=i("db72"),a=(i("7f7f"),i("7514"),i("75fc")),r=i("c80c"),n=(i("a481"),i("96cf"),i("3b8d")),c=(i("c5f6"),i("3ce7")),o=i("2f62"),u=i("faa5"),l=i("7212"),p=(i("a7a3"),{name:"PriceItem",props:{item:{type:Object,default:function(){return{}}},activePriceId:[Number,String]},computed:{price:function(){var t=this.item.price,e=t.currency,i=t.amount,s=t.coinAmount,a=t.coinName;return"RMB"==e?"".concat(i).concat(this.$t("vip.cny")):"".concat(s).concat(a)},isActive:function(){return this.item.id==this.activePriceId}},methods:{clickPrice:function(){this.$emit("clickPriceItem",this.item)}}}),d=(i("9b37"),i("2877")),v=Object(d.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col justify-between price-item",class:{active:t.isActive},on:{click:function(e){return t.clickPrice()}}},["first"===t.item.type?e("span",{staticClass:"first-tag"},[t._v("\n    "+t._s(t.item.tag)+"\n  ")]):t._e(),e("div",{staticClass:"font-bold text-14",staticStyle:{color:"#000"}},[t._v(t._s(t.item.title))]),e("div",{staticClass:"flex items-center justify-between"},[e("div",{staticClass:"text-14 mr-20",staticStyle:{color:"#FF7A34"}},[t._v(t._s(t.price))]),e("van-radio-group",{attrs:{value:t.activePriceId}},[e("van-radio",{attrs:{name:t.item.id,"checked-color":"#EAB86A","icon-size":16}})],1)],1)])}),[],!1,null,"f66b7682",null).exports,f=i("763b"),h=i("8da3"),m={components:{Swiper:l.Swiper,SwiperSlide:l.SwiperSlide,PriceItem:v,eRowClass:h.a},data:function(){var t=this;return{swiperOption:{loop:!1,centeredSlides:!0,slidesPerView:1.28,observer:!0,observeParents:!0,on:{slideChange:function(e){t.activeIndex=t.swiper.activeIndex,t.getActivePrice()}}},vipOpenSwiperOption:{slidesPerView:2.4},user:{},vipInfo:{},levels:[{courses:{data:[]},classrooms:{data:[]}}],activeIndex:0,activePrice:null,isLoading:!1,typeList:"course_list",ajaxLoading:!1,getDataFinished:!1,vipCourseData:{},vipClassroomData:{}}},filters:{courseListData:f.a},computed:Object(s.a)(Object(s.a)(Object(s.a)({},Object(o.e)(["vipSwitch","courseSettings","classroomSettings"])),Object(o.e)({userInfo:function(t){return t.user},vipOpenStatus:function(t){return t.vip.vipOpenStatus},upgradeMode:function(t){return t.vip.upgradeMode},showNumberData:function(t){return t.goodsSettings.show_number_data}})),{},{currentCourseList:function(){return this.currentLevel&&this.vipCourseData[this.currentLevel.id]?this.vipCourseData[this.currentLevel.id]:{}},currentClassroomList:function(){return this.currentLevel&&this.vipClassroomData[this.currentLevel.id]?this.vipClassroomData[this.currentLevel.id]:{}},config:function(){return{type:"price",showStudent:!this.courseSettings||Number(this.courseSettings.show_student_num_enabled),classRoomShowStudent:!this.classroomSettings||this.classroomSettings.show_student_num_enabled}},vipDated:function(){if(!this.vipInfo)return!0;var t=new Date(this.vipInfo.deadline).getTime();return(new Date).getTime()>t},swiper:function(){return this.$refs.mySwiper.$swiper},currentLevel:function(){return this.levels[this.activeIndex]||{}},userLevelStatus:function(){var t=this.vipInfo?this.vipInfo.seq:0,e=this.currentLevel.seq;return 0===t||this.vipDated?"opening":t===e?"renew":t<e?"upgrade":"low"},vipBuyStatus:function(){var t=this.activePrice?this.activePrice.title:"";return{opening:{text:this.$t("vip.openPrivileges",{title:t}),status:!0,type:this.$t("vip.open")},renew:{text:this.$t("vip.renewPrivileges",{title:t}),status:!0,type:this.$t("vip.renew")},upgrade:{text:this.$t("vip.upgradeToCurrentMemberPrivileges"),status:!0,type:this.$t("vip.upgrade")},low:{text:this.$t("vip.rankLowerThanPurchasedMembers"),status:!1,type:this.$t("vip.lowerThan")}}[this.userLevelStatus]},vipUpgradeMode:function(){return"upgrade"==this.userLevelStatus&&"remain_period"==this.upgradeMode}}),created:function(){var t=this;return Object(n.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!0,t.$store.state.token){e.next=4;break}return t.$router.replace({name:"login",query:{redirect:t.$route.fullPath}}),e.abrupt("return");case 4:if(null!==t.vipOpenStatus){e.next=7;break}return e.next=7,t.getVipOpenStatus();case 7:if(t.vipOpenStatus){e.next=10;break}return t.$router.push({path:"/",query:{redirect:t.$route.fullPath}}),e.abrupt("return");case 10:t.getVipDetail();case 11:case"end":return e.stop()}}),e)})))()},methods:Object(s.a)(Object(s.a)({},Object(o.c)("vip",["getVipOpenStatus"])),{},{getVipCourseData:function(){var t=this;if(this.currentLevel){var e=this.vipCourseData[this.currentLevel.id]||{offset:0,data:[]};if(!e.getDataFinished){var i={levelId:this.currentLevel.id,offset:e.offset};c.a.getVipCourses({params:i}).then((function(i){var s=i.data,r=i.paging;e.data=[].concat(Object(a.a)(e.data),Object(a.a)(s)),e.offset=e.data.length,e.paging=r,e.data.length==r.total&&(e.getDataFinished=!0),t.$set(t.vipCourseData,t.currentLevel.id,e)})).finally((function(){t.ajaxLoading=!1}))}}},getVipClassroomData:function(){var t=this;if(this.currentLevel){var e=this.vipClassroomData[this.currentLevel.id]||{offset:0,data:[]};if(!e.getDataFinished){var i={levelId:this.currentLevel.id,offset:e.offset};c.a.getVipClasses({params:i}).then((function(i){var s=i.data,r=i.paging;e.data=[].concat(Object(a.a)(e.data),Object(a.a)(s)),e.offset=e.data.length,e.paging=r,e.data.length==r.total&&(e.getDataFinished=!0),t.$set(t.vipClassroomData,t.currentLevel.id,e)})).finally((function(){t.ajaxLoading=!1}))}}},getVipDetail:function(){var t=this,e=this.$route.query.id;c.a.getVipDetail().then((function(i){t.isLoading=!1;var s=i.levels,a=i.vipUser;t.levels=s,t.user=a?a.user:null,t.vipInfo=a.vip;var r=a?a.vip:null,n=t.userInfo;n.vip=r,t.$store.commit(u.G,n);var c=r?r.levelId:s[0].id;c=isNaN(e)?c:e,t.getVipIndex(c,s)}))},getVipIndex:function(t,e){var i=0;e.find((function(e,s){if(e.id===t)return i=s,e})),this.activeIndex=i||0,this.initSwiperActiveIndex(),this.getActivePrice()},vipStatus:function(t){if(!this.vipInfo)return this.$t("vip.youAreNotAVipYet");var e=Number(this.vipInfo.seq),i=this.vipInfo.deadline,s=Number(t.seq);return this.vipDated?e===s?this.$t("vip.membershipExpired"):this.$t("vip.youAreNotAVipYet"):e===s?"".concat(this.$t("vip.membershipUntil"),"：").concat(this.$moment(i).format("YYYY/MM/DD")):e>s?this.$t("vip.rankLowerThanPurchasedMembers"):this.$t("vip.notMemberPleaseUpgrade")},initSwiperActiveIndex:function(){var t=this;this.$nextTick((function(){t.swiper.slideTo(t.activeIndex,0)}))},getActivePrice:function(){var t=this.levels[this.activeIndex].sellModes;this.activePrice=t.length>0?t[0]:null},clickPriceItem:function(t){this.activePrice=t},clickVipBuy:function(){this.user?this.vipBuyStatus.status&&this.activePrice&&this.$router.replace({name:"order",params:{id:this.activePrice.id,unit:this.activePrice.specUnit,num:this.activePrice.duration,type:this.vipBuyStatus.type},query:{targetType:"vip"}}):this.$router.push({path:"/login",query:{redirect:"/vip"}})}})},g=(i("1f93"),Object(d.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"vip-detail"},[t.isLoading?e("e-loading"):t._e(),t.user?e("div",{staticClass:"flex px-16 pt-12"},[t.user.avatar?e("img",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:t.user.avatar.large}}):t._e(),e("div",{staticClass:"ml-8 text-text-1",staticStyle:{color:"#464244"}},[e("div",{staticClass:"font-bold text-14"},[t._v(t._s(t.user.nickname))]),e("div",{staticClass:"font-normal text-12 opacity-80"},[t._v(t._s(t.vipStatus(t.currentLevel)))])])]):t._e(),e("div",{staticClass:"mt-20 vip-swiper"},[e("swiper",{ref:"mySwiper",staticClass:"swiper",attrs:{options:t.swiperOption}},t._l(t.levels,(function(i,s){return e("swiper-slide",{key:s,staticStyle:{"border-radius":"8px","overflow-y":"hidden"}},[t.vipInfo&&t.vipInfo.levelId===i.id?e("div",{staticClass:"current-level-tag"},[t._v("当前等级")]):t._e(),e("img",{staticStyle:{width:"100%","border-radius":"8px"},attrs:{src:i.background||"static/images/vip_bg.png"}}),e("div",{staticClass:"absolute font-bold text-center text-14",staticStyle:{top:"36px",left:"20px"}},[e("div",{staticClass:"text-text-1"},[t._v(t._s(i.name))]),e("img",{staticClass:"inline-block mt-16",staticStyle:{width:"50px"},attrs:{src:i.icon}})]),e("div",{staticClass:"absolute flex items-center justify-center font-normal text-12",staticStyle:{width:"74px",height:"24px","mix-blend-mode":"screen",border:"1px solid #fff","border-radius":"16px",right:"16px",bottom:"30px","background-color":"white","font-weight":"600"},on:{click:function(e){return t.$router.push("/vip/".concat(i.id,"/desc"))}}},[t._v("\n          "+t._s(t.$t("vip.exclusiveIntroduction"))+" >\n        ")])])})),1)],1),t.vipUpgradeMode?e("div",{staticClass:"mx-16 my-20 vip-upgrade"},[e("span",{staticClass:"vip-upgrade__deadline"},[t._v("\n      "+t._s(t.$t("vip.memberUpgradePeriodTo"))+"："+t._s(t.$moment(t.vipInfo.deadline).format("YYYY/MM/DD"))+"\n    ")])]):e("swiper",{staticStyle:{padding:"20px 0 20px 16px"},attrs:{options:t.vipOpenSwiperOption}},t._l(t.currentLevel.sellModes,(function(i){return e("swiper-slide",{key:i.id},[e("div",{staticClass:"flex"},[e("price-item",{attrs:{item:i,activePriceId:t.activePrice.id},on:{clickPriceItem:t.clickPriceItem}}),e("div",{staticStyle:{width:"16px",height:"80px","background-color":"transparent"}})],1)])})),1),e("div",{staticClass:"flex px-16 mb-16 text-14",staticStyle:{color:"#4E5969"}},[e("div",{staticClass:"mr-24 nav-item",class:{active:"course_list"===t.typeList},on:{click:function(e){t.typeList="course_list"}}},[e("div",{staticClass:"relative",staticStyle:{"z-index":"2"}},[t._v(t._s(t.$t("vip.membersCourse")))])]),e("div",{staticClass:"nav-item",class:{active:"classroom_list"===t.typeList},on:{click:function(e){t.typeList="classroom_list"}}},[e("div",{staticClass:"relative",staticStyle:{"z-index":"2"}},[t._v(t._s(t.$t("vip.membersClass")))])])]),e("div",{staticClass:"fixed bottom-0 left-0 right-0 z-20 px-16 py-8 bg-text-1"},[e("div",{staticClass:"flex items-center justify-center w-full font-bold text-text-1",class:{disabled:!t.vipBuyStatus.status},staticStyle:{height:"40px","border-radius":"20px","background-color":"#E7B15C"},on:{click:t.clickVipBuy}},[t._v("\n      "+t._s(t.vipBuyStatus.text)+"\n    ")])]),"course_list"===t.typeList&&t.currentLevel.id?e("van-list",{staticStyle:{"padding-bottom":"40px"},attrs:{finished:t.currentCourseList.getDataFinished},on:{load:t.getVipCourseData},model:{value:t.ajaxLoading,callback:function(e){t.ajaxLoading=e},expression:"ajaxLoading"}},t._l(t.currentCourseList.data,(function(i){return e("e-row-class",{key:i.id,attrs:{course:t._f("courseListData")(i,Object(s.a)(Object(s.a)({},t.config),{},{typeList:"course_list"}),"new"),discountType:i.courseSet.discountType,discount:i.courseSet.discount,"course-type":i.courseSet.type,"type-list":"course_list",type:"price",showNumberData:t.showNumberData}})})),1):t._e(),"classroom_list"===t.typeList&&t.currentLevel.id?e("van-list",{staticStyle:{"padding-bottom":"40px"},attrs:{finished:t.currentClassroomList.getDataFinished},on:{load:t.getVipClassroomData},model:{value:t.ajaxLoading,callback:function(e){t.ajaxLoading=e},expression:"ajaxLoading"}},t._l(t.currentClassroomList.data,(function(i){return e("e-row-class",{key:i.id,attrs:{course:t._f("courseListData")(i,Object(s.a)(Object(s.a)({},t.config),{},{typeList:"classroom_list"}),"new"),"type-list":"classroom_list",type:"price",showNumberData:t.showNumberData}})})),1):t._e()],1)}),[],!1,null,"93cd7856",null));e.default=g.exports}}]);