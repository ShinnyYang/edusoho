(window.webpackJsonp=window.webpackJsonp||[]).push([["exerciseAnalysis"],{"1fa4":function(e,t,s){"use strict";s.r(t),s("8e6e"),s("456d"),s("e7e5");var i=s("d399"),r=(s("c5f6"),s("6762"),s("2fdb"),s("ac6a"),s("bd86")),n=s("2f62"),a=s("faa5"),o=s("3ce7"),c=s("f5cc"),u=s("8ae7"),l=s("c8a5"),d=s("7c97"),h=s("6647");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"ExerciseAnalysis",filters:{type:function(e){switch(e){case"single_choice":return h.a.t("courseLearning.singleChoice");case"choice":return h.a.t("courseLearning.choice");case"essay":return h.a.t("courseLearning.essay");case"uncertain_choice":return h.a.t("courseLearning.uncertainChoice");case"determine":return h.a.t("courseLearning.determine");case"fill":return"courseLearning.fill";case"material":return h.a.t("courseLearning.material")}}},components:{IbsFooter:s("a8b4").a,itemBank:c.a,OutFocusMask:d.a},mixins:[u.a,l.a],data:function(){return{result:null,items:{},info:[],isWrongMode:!1,allList:[],wrongList:[],wrongType:[],cardSeq:0,cardShow:!1,answer:{},slideIndex:0,canDo:!1,mode:"exercise"}},computed:p({},Object(n.e)({isLoading:function(e){return e.isLoading},user:function(e){return e.user}})),beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},mounted:function(){this.initReport(),this.setNavbarTitle(this.$route.query.title),this.getexerciseResult()},methods:p(p({},Object(n.d)({setNavbarTitle:a.x})),{},{showCard:function(){this.cardShow=!0},initReport:function(){this.initReportData(this.$route.query.courseId,this.$route.query.taskId,"exercise")},getexerciseResult:function(){var e=this;o.a.exerciseResult({query:{exerciseId:this.$route.query.exerciseId,exerciseResultId:this.$route.query.exerciseResultId}}).then((function(t){e.result=t,e.setNavbarTitle(t.paperName),e.title=t.paperName,e.formatData(t)}))},formatData:function(e){var t=this;e.items.forEach((function(e){if("material"!=e.type){var s=t.analysisSixType(e.type,e);t.setData(s.item,s.answer)}"material"==e.type&&e.subs.forEach((function(s){var i=t.analysisSixType(s.type,s);t.setData(i.item,i.answer,e.type,e.stem,e.analysis,e.attachments)}))}))},setData:function(e,t,s,i,r,n){if(void 0!==i&&(e.parentType=s,e.parentTitle={stem:i,analysis:r},e.parentTitle.attachments=n),this.$set(this.answer,e.id,t),this.info.push(e),this.allList.push(e),e.testResult&&"right"!==e.testResult.status||!e.testResult){var a=e.parentType?e.parentType:e.type;this.wrongType.includes(a)||this.wrongType.push(a),this.wrongList.push(e)}},formatStatus:function(e){if(e.testResult)switch(e.testResult.status){case"right":return"cicle-right";case"none":return"cicle-subjective";case"wrong":case"partRight":return"cicle-wrong";case"noAnswer":return""}},slideToNumber:function(e){var t=this,s=Number(e);this.isWrongMode?this.info.forEach((function(e,i){s===parseInt(e.seq)&&(t.cardSeq=i+1)})):this.cardSeq=s,this.cardShow=!1},showWrongList:function(){0!==this.wrongList.length?(Object(i.a)({message:"切换成功",duration:1e3}),this.isWrongMode=!this.isWrongMode,this.isWrongMode?(this.info=this.wrongList,this.cardSeq=this.isWrongItem()):(this.info=this.allList,this.cardSeq=parseInt(this.wrongList[this.slideIndex].seq)),this.slideIndex=this.cardSeq-1):Object(i.a)("当前没有错题")},isWrongItem:function(){var e=this.allList[this.slideIndex],t=1;return e.testResult&&"right"!==e.testResult.status&&this.wrongList.forEach((function(s,i){s.id==e.id&&(t=i+1)})),t}})},m=s("a6c2"),w=Object(m.a)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"paper-swiper"},[s("out-focus-mask",{attrs:{type:e.outFocusMaskType,isShow:e.isShowOutFocusMask,reportType:e.reportType},on:{outFocusMask:e.outFocusMask}}),e.isLoading?s("e-loading"):e._e(),e.info.length>0?s("item-bank",{attrs:{"is-wrong-mode":e.isWrongMode,current:e.cardSeq,info:e.info,answer:e.answer,"slide-index":e.slideIndex,"can-do":e.canDo,all:e.allList.length,"is-exercise":!0,mode:e.mode,exerciseInfo:e.result},on:{"update:current":function(t){e.cardSeq=t},"update:slideIndex":function(t){e.slideIndex=t},"update:slide-index":function(t){e.slideIndex=t}}}):e._e(),s("ibs-footer",{attrs:{mode:"report"},on:{showcard:e.showCard,lookWrong:e.showWrongList}}),s("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.cardShow,callback:function(t){e.cardShow=t},expression:"cardShow"}},[e.info.length>0?s("div",{staticClass:"card"},[s("div",{staticClass:"card-title"},[s("div",[s("span",{staticClass:"card-right"},[e._v(e._s(e.$t("courseLearning.right")))]),s("span",{staticClass:"card-wrong"},[e._v(e._s(e.$t("courseLearning.wrong")))]),s("span",{staticClass:"card-nofinish"},[e._v(e._s(e.$t("courseLearning.unanswered")))]),s("span",{staticClass:"card-subjective"},[e._v("主观题")])]),s("i",{staticClass:"iconfont icon-no",on:{click:function(t){e.cardShow=!1}}})]),s("div",{staticClass:"card-list"},[s("div",{staticClass:"card-homework-item"},[s("div",{staticClass:"card-item-list"},e._l(e.info,(function(t){return s("div",{key:t.id,class:["list-cicle",e.formatStatus(t)],on:{click:function(s){return e.slideToNumber(t.seq)}}},[e._v("\n                "+e._s(t.seq)+"\n              ")])})),0)])])]):e._e()])],1)}),[],!1,null,null,null);t.default=w.exports}}]);