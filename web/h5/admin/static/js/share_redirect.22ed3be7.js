(window.webpackJsonp=window.webpackJsonp||[]).push([["share_redirect"],{7067:function(e,t,i){"use strict";i("e17f");var r=i("2241"),n=(i("e7e5"),i("d399")),c=i("a026"),o=i("3ce7"),a=/micromessenger/.test(navigator.userAgent.toLowerCase());t.a=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||i&&!t)n.a.fail("缺少分享参数");else{var u={domainUri:location.origin,itemUri:"",source:"h5"};o.a.marketingActivities({query:{activityId:e},data:u}).then((function(e){var o=-1!==e.url.indexOf("?")?"&":"?",u=i?"".concat(t).concat(o,"ticket=").concat(e.ticket):e.url;a?window.location.href=u:r.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{c.default.prototype.$copyText(u).then((function(){n.a.success("复制成功")}),(function(){n.a.fail("请更换浏览器复制")}))}catch(e){n.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(e){n.a.fail(e.message)}))}}},"847b":function(e,t,i){"use strict";i.r(t);var r=i("a262"),n=i("d863"),c={name:"ShareRedirect",mixins:[r.a,n.a],data:function(){return{}},mounted:function(){this.afterLogin()}},o=i("2877"),a=Object(o.a)(c,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null);t.default=a.exports},a262:function(e,t,i){"use strict";var r=i("7067");t.a={methods:{activityHandle:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(r.a)(e,t,i)}}}},d863:function(e,t,i){"use strict";i("a481");var r=i("db72"),n=i("7067"),c=i("3ce7"),o=i("faa5"),a=i("2f62");t.a={data:function(){return{redirect:""}},computed:Object(r.a)({},Object(a.e)({user:function(e){return e.user}})),created:function(){this.redirect=decodeURIComponent(this.$route.fullPath)},methods:Object(r.a)(Object(r.a)({},Object(a.d)([o.w])),{},{afterLogin:function(){var e=this;this.checkMobileBind().then((function(t){var i=t.is_bind_mobile,r=t.mobile_bind_mode;e[o.w]({is_bind_mobile:i,mobile_bind_mode:r}),i||"closed"===r?setTimeout(e.jumpAction,1e3):e.$router.replace({name:"binding",query:{redirect:e.$route.query.redirect}})})).catch((function(){setTimeout(e.jumpAction,1e3)}))},jumpAction:function(){var e=this.$route.query.redirect?decodeURIComponent(this.$route.query.redirect):"/",t=this.$route.query.skipUrl?decodeURIComponent(this.$route.query.skipUrl):"",i=this.$route.query.callbackType,r=this.$route.query.activityId,c=decodeURIComponent(this.$route.query.callback);if(i)switch(i){case"marketing":Object(n.a)(r,c)}else t?this.$router.replace({path:e,query:{backUrl:t}}):this.$router.replace({path:e})},checkMobileBind:function(){return c.a.mobileBindCheck({query:{userId:this.user.id}})},upgradePassword:function(){this.$router.replace({name:"password_reset",query:{upgradePassword:1}})}})}}}]);