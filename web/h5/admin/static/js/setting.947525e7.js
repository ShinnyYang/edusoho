(window.webpackJsonp=window.webpackJsonp||[]).push([["setting"],{"008c":function(t,e,a){"use strict";a("6955")},"0876":function(t,e,a){"use strict";a("bd98")},"08a6":function(t,e,a){"use strict";a.r(e),a("d263"),a("7f7f"),a("e7e5");var i=a("d399"),s=(a("e17f"),a("2241")),o=a("db72"),l=a("2f62"),n=a("3ce7"),r=a("faa5"),c={components:{VueCropper:a("7e79").VueCropper},data:function(){return{settings:[{name:"setting.heads",info:""},{name:"setting.nickname",info:""},{name:"setting.language",info:""}],dialogVisible:!1,imageCropped:!1,option:{img:"",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedNumber:[1,1],fixed:!0,high:!1,enlarge:2}}},computed:Object(o.a)({},Object(l.e)({user:function(t){return t.user},isLoading:function(t){return t.isLoading}})),created:function(){this.$set(this.settings[0],"info",this.user.avatar.large),this.$set(this.settings[1],"info",this.user.nickname),this.$set(this.settings[2],"info",this.$t("lang.language"))},methods:Object(o.a)(Object(o.a)({},Object(l.c)(["setAvatar"])),{},{handleSetting:function(t){switch(t){case 0:break;case 1:this.$router.push({name:"setting_nickname",query:{nickname:""==this.user.nickname?"":this.user.nickname}});break;case 2:this.$router.push({name:"settingLang"})}},logout:function(){var t=this;s.a.confirm({title:this.$t("setting.dropOut"),message:this.$t("setting.dropOutCancelConfirm"),confirmButtonText:this.$t("btn.confirm"),cancelButtonText:this.$t("btn.cancel")}).then((function(){t.$store.commit(r.H,{token:"",user:{}}),window.localStorage.setItem("mobile_bind_skip","0"),t.$router.push({name:"my"})}))},stopCropFn:function(){var t=this,e=this.$refs.cropper[0];e.stopCrop(),this.dialogVisible=!1,e.getCropData((function(e){t.imageCropped=!0,t.uploadImg(e),t.option.img=e}))},beforeUpload:function(t){var e=this,a=t.type,s=t.size/1024/1024;if(-1!==a.indexOf("image"))if(s>2)i.a.fail(this.$t("setting.fileSizeMustNotExceed2MB"));else{this.dialogVisible=!0;var o=new FileReader;o.onload=function(){e.option.img=o.result},o.readAsDataURL(t)}else i.a.fail(this.$t("setting.fileTypeOnlySupportsImageFormat"))},uploadImg:function(t){var e=this;if(this.imageCropped){this.imageCropped=!1;var a=new FormData;a.append("file",t),a.append("group","user"),n.a.updateFile({data:a}).then((function(a){e.$set(e.settings[0],"info",t.content),e.setAvatar({avatarId:a.id}).then((function(){i.a.success(e.$t("setting.modifySuccess"))})).catch((function(t){i.a.fail(t.message)}))})).catch((function(t){i.a.fail(t.message)}))}}})},u=(a("008c"),a("2877")),d=Object(u.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"my_setting"},[t.isLoading?e("e-loading"):t._e(),t._l(t.settings,(function(a,i){return e("div",{key:i,staticClass:"my_setting-item",on:{click:function(e){return t.handleSetting(i)}}},[e("span",{staticClass:"my_setting-title title-18"},[t._v(t._s(t.$t(a.name)))]),e("div",{staticClass:"my_setting-content"},[i?t._e():e("img",{staticClass:"my_setting-avatar",attrs:{src:a.info||t.option.img,alt:""}}),i?e("span",[t._v(t._s(a.info))]):t._e(),e("img",{staticClass:"my_setting-more",attrs:{src:"static/images/more.png",alt:""}})]),i?t._e():e("van-uploader",{attrs:{"before-read":t.beforeUpload}},[e("van-popup",{attrs:{overlay:!1,position:"top"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e("div",{staticClass:"cropper-container"},[e("vueCropper",{directives:[{name:"show",rawName:"v-show",value:t.option.img,expression:"option.img"}],ref:"cropper",refInFor:!0,attrs:{img:t.option.img,fixed:t.option.fixed,enlarge:t.option.enlarge,"auto-crop":t.option.autoCrop,"fixed-number":t.option.fixedNumber,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight}})],1),e("div",{staticClass:"dialog-footer"},[e("van-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("btn.cancel")))]),e("van-button",{attrs:{type:"primary"},on:{click:t.stopCropFn}},[t._v(t._s(t.$t("btn.confirm")))])],1)])],1)],1)})),e("div",{staticClass:"log-out-btn title-18",on:{click:t.logout}},[e("span",[t._v(t._s(t.$t("btn.dropOut")))])])],2)}),[],!1,null,null,null);e.default=d.exports},"25ab":function(t,e,a){"use strict";a.r(e),a("7f7f"),a("8615"),a("456d"),a("ac6a");var i=a("db72"),s=a("ded5"),o=a("3d97"),l=a("5f16"),n=a("28fb"),r=(a("386d"),a("4917"),a("3b2b"),a("515e")),c=a("92a2"),u=a("5b91"),d=a("a89d"),p=a("5e2f"),m=a("f953"),g=a("2f62"),h={data:function(){return{}},props:{portal:{type:String,default:""}},computed:Object(i.a)(Object(i.a)({},Object(g.e)(["settings"])),{},{headImg:function(){switch(this.portal){case"miniprogram":return"static/images/miniprogram_head.jpg";case"apps":return"static/images/app_head.jpg";default:return"static/images/find_head_url.jpg"}},headTitle:function(){switch(this.portal){case"miniprogram":return"小程序";case"apps":return this.settings.name;default:return"微网校"}}})},f=a("2877"),v=Object(f.a)(h,(function(){var t=this._self._c;return t("div",[t("img",{staticClass:"find-head-img",attrs:{src:this.headImg,alt:""}}),t("div",{staticClass:"find-navbar",class:"find-navbar-".concat(this.portal)},["apps"===this.portal?t("i",{staticClass:"iconfont icon-search"}):this._e(),t("i",{staticClass:"h5-icon h5-icon-houtui"}),this._v(this._s(this.headTitle)+"\n  ")])])}),[],!1,null,null,null).exports,y=a("b76a"),b=a.n(y),_={name:"h5-home",components:{moduleTemplate:p.a,draggable:b.a,findFooter:m.a,findHeader:v},mixins:[u.a],data:function(){return{windowHeight:document.documentElement.clientHeight,title:"EduSoho 微网校",modules:[],saveFlag:0,startValidate:!1,incomplete:!0,validateResults:[],currentModuleIndex:0,baseModules:l.c,marketingModules:l.d,typeCount:{},pathName:this.$route.name,couponSwitch:0,moduleLength:0,menuStyle:{},quitDialogVisible:!1}},computed:Object(i.a)(Object(i.a)({},Object(g.e)(["isLoading","vipLevels","vipSettings","vipSetupStatus","vipPlugin"])),{},{stopDraggleClasses:function(){return".module-frame__setting, .find-footer,.search__container, .el-dialog__header, .el-dialog__footer"},portal:function(){return c.a[this.pathName]}}),created:function(){this.setStyle(),this.getFind(),this.getCourseCategories(),this.getClassCategories(),this.getItemBankCategories(),this.getCouponSwitch(),this.getCreateMarketingUrl()},beforeDestroy:function(){document.getElementById("app").style.background="#ffffff"},methods:Object(i.a)(Object(i.a)({},Object(g.c)(["getCourseCategories","getClassCategories","getItemBankCategories","deleteDraft","saveDraft","getDraft","getTemplate","getCreateMarketingUrl"])),{},{getFind:function(){var t,e,a,i=(t=new RegExp("(^|&)".concat("template","=([^&]*)(&|$)"),"i"),e=window.location.search.substr(1).match(t),a="",null!==e&&(a=e[2]),t=null,e=null,null==a||""===a||"undefined"===a?"":a);i?this.getTheme(i):this.load()},setStyle:function(){document.getElementById("app").style.background="#f5f5f5",this.menuStyle={height:this.windowHeight+"px",overflow:"auto"}},getCouponSwitch:function(){var t=this;s.a.getCouponSetting().then((function(e){t.couponSwitch=parseInt(e.enabled,10)}))},moduleCountInit:function(){for(var t=new n.a,e=0,a=this.modules.length;e<a;e++)t.addByType(this.modules[e].type);this.typeCount=t},isActive:function(t){return t===this.currentModuleIndex},activeModule:function(t){this.currentModuleIndex=t},updateModule:function(t,e){this.validateResults[e]=t.incomplete},removeModule:function(t,e){this.typeCount.removeByType(t.type),this.currentModuleIndex=Math.max(this.currentModuleIndex-1,0),this.modules.splice(e,1)},scrollBottom:function(){var t=document.body.clientHeight;window.scroll({top:t,left:0,behavior:"smooth"})},addModule:function(t,e){var a=this;switch(t.default.type){case"vip":if(!this.vipSetupStatus)return;if(Object(r.a)("1.7.26",this.vipPlugin.version))return void this.$confirm("请升级会员插件","提示",{confirmButtonText:"去升级",cancelButtonText:"取消"}).then((function(){window.open(window.location.origin+"/admin/app/upgrades")})).catch((function(){}));if(!(this.vipSettings&&this.vipSettings.enabled&&this.vipSettings.h5Enabled))return void this.$confirm("会员功能未开启","提示",{confirmButtonText:"去开启",cancelButtonText:"取消"}).then((function(){window.open(window.location.origin+"/admin/v2/setting/vip")})).catch((function(){}));if(!this.vipLevels||!this.vipLevels.length)return void this.$confirm("请先设置会员等级","提示",{confirmButtonText:"去设置",cancelButtonText:"取消"}).then((function(){window.open(window.location.origin+"/admin/setting/vip/level")})).catch((function(){}));break;case"coupon":if(!this.couponSwitch)return void this.$confirm("优惠券功能未开通","提示",{confirmButtonText:"去开通",cancelButtonText:"取消"}).then((function(){window.open(window.location.origin+"/admin/setting/coupon")})).catch((function(){}))}if("search"===t.default.type&&this.typeCount.getCounterByType(t.default.type)>=1)this.$message({message:"搜索组件最多添加 1 个",type:"warning"});else if(this.typeCount.getCounterByType(t.default.type)>=5)this.$message({message:"同一类型组件最多添加 5 个",type:"warning"});else{this.moduleLength=this.moduleLength+1,this.typeCount.addByType(t.default.type);var i=JSON.parse(JSON.stringify(t.default));i.oldIndex=this.moduleLength,this.modules.push(i),this.currentModuleIndex=Math.max(this.modules.length-1,0),setTimeout((function(){a.scrollBottom()}),500)}},getTheme:function(t){var e=this;this.getTemplate({portal:this.portal,template:t}).then((function(t){e.formateRes(t)})).catch((function(t){e.formateErr(t)}))},load:function(){var t=this,e=1==this.$route.query.draft?"draft":"published";this.getDraft({portal:this.portal,type:"discovery",mode:e}).then((function(e){t.formateRes(e)})).catch((function(e){t.formateErr(e)}))},formateRes:function(t){var e=this;Object.keys(t).forEach((function(a,i){t[a]=e.formateH5Display(t[a].type,t[a]),t[a].oldIndex=i})),this.moduleLength=Object.keys(t).length-1,this.modules=Object.values(t),this.moduleCountInit()},formateErr:function(t){this.moduleCountInit(),this.$message({message:t.message,type:"error"})},formateH5Display:function(t,e){return"course_list"!==t&&"classroom_list"!==t||e.data.displayStyle||("app"===this.portal?e.data.displayStyle="distichous":"h5"===this.portal&&(e.data.displayStyle="row")),e},quit:function(){this.quitDialogVisible=!0},reset:function(){var t=this;this.quitDialogVisible=!1,this.deleteDraft({portal:this.portal,type:"discovery",mode:"draft"}).then((function(t){parent.location.href=parent.location.href})).catch((function(e){t.$message({message:e.message||"取消失败",type:"error"})}))},save:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.startValidate=!0,this.saveFlag++,setTimeout((function(){var i,s;i=e.modules,s="published"===t,e.startValidate=!1,e.validate(),a&&(i=Object(d.a)(e.modules,"moduleType")),e.incomplete||e.saveDraft({data:i,mode:t,portal:e.portal,type:"discovery"}).then((function(){if(e.saveFlag=0,s)return e.$message({message:"发布成功",type:"success"}),void(parent.location.href=parent.location.href);e.$store.commit(o.g,i),e.toPreview(s)})).catch((function(t){e.$message({message:t.message||"发布失败，请重新尝试",type:"error"})}))}),500)},toPreview:function(t){this.$router.push({name:"preview",query:{times:10,preview:t?0:1,duration:300,from:this.pathName}})},validate:function(){for(var t=0;t<this.modules.length;t++)if(this.validateResults[t])return void(this.incomplete=this.validateResults[t]);this.incomplete=!1},startDrag:function(){for(var t=document.getElementsByClassName("module-frame__setting"),e=0;e<t.length;e++)t[e].style.display="none"},endDrag:function(){document.getElementsByClassName("module-frame__setting")[this.currentModuleIndex].style.display="block"}})},C=Object(f.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h5-home",style:{minHeight:t.windowHeight+"px"}},[e("div",{staticClass:"h5-home-left",style:t.menuStyle},[e("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-0",collapse:!1}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("span",[t._v(t._s(t.$t("sidebar.basicComponents")))])]),e("el-menu-item-group",t._l(t.baseModules,(function(a,i){return e("el-menu-item",{key:"base-".concat(i),attrs:{index:"1-".concat(i)},on:{click:function(e){return t.addModule(a,i)}}},[e("i",{class:["iconfont",a.icon]}),t._v("\n            "+t._s(t.$t(a.name))+"\n          ")])})),1)],2),e("el-submenu",{attrs:{index:"2"}},[e("template",{slot:"title"},[e("span",[t._v(t._s(t.$t("sidebar.marketingComponents")))])]),e("el-menu-item-group",t._l(t.marketingModules,(function(a,i){return e("el-menu-item",{key:"marketing-".concat(i),attrs:{index:"2-".concat(i)},on:{click:function(e){return t.addModule(a,i)}}},[e("i",{class:["iconfont",a.icon]}),t._v("\n            "+t._s(t.$t(a.name))+"\n          ")])})),1)],2)],1)],1),e("div",{staticClass:"el-full"},[e("div",{staticClass:"h5-home-center"},[e("div",{staticClass:"setting-page setting-page-h5",class:{"setting-page-miniprogram":"miniprogram"===t.portal}},[e("find-header",{attrs:{portal:t.portal}}),e("div",{staticClass:"find-body"},[e("draggable",{attrs:{options:{filter:t.stopDraggleClasses,preventOnFilter:!1,forceFallback:!0}},on:{start:t.startDrag,end:t.endDrag},model:{value:t.modules,callback:function(e){t.modules=e},expression:"modules"}},t._l(t.modules,(function(a,i){return e("module-template",{key:i,attrs:{saveFlag:t.saveFlag,startValidate:t.startValidate,index:i,module:a,active:t.isActive(i),moduleKey:"".concat(a.type,"-").concat(i)},on:{activeModule:t.activeModule,updateModule:function(e){return t.updateModule(e,i)},removeModule:function(e){return t.removeModule(e,i)}}})})),1)],1),e("find-footer",{attrs:{portal:t.portal}})],1)])]),e("div",{staticClass:"setting-button-group"},[e("el-button",{staticClass:"setting-button-group__button btn-border-primary",staticStyle:{"font-size":"14px"},attrs:{size:"mini",disabled:t.isLoading},on:{click:t.quit}},[t._v(t._s(t.$t("btn.cancel")))]),e("el-button",{staticClass:"setting-button-group__button btn-border-primary",staticStyle:{"font-size":"14px"},attrs:{size:"mini",disabled:t.isLoading},on:{click:function(e){return t.save("draft")}}},[t._v(t._s(t.$t("btn.preview")))]),e("el-button",{staticClass:"setting-button-group__button",staticStyle:{"font-size":"14px"},attrs:{type:"primary",size:"mini",disabled:t.isLoading},on:{click:function(e){return t.save("published")}}},[t._v(t._s(t.$t("btn.savaAndPublish")))])],1),e("el-dialog",{attrs:{title:"提示",visible:t.quitDialogVisible,width:"30%"},on:{"update:visible":function(e){t.quitDialogVisible=e}}},[e("div",{staticClass:"mtl"},[t._v("退出后编辑的内容不会保存，是否退出？")]),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.quitDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("退出")])],1)])],1)}),[],!1,null,null,null);e.default=C.exports},"28fb":function(t,e,a){"use strict";var i=a("d225"),s=a("b0b4"),o=function(){return Object(s.a)((function t(){Object(i.a)(this,t),this.moduleCounter={}}),[{key:"getInstance",value:function(){return this.moduleCounter}},{key:"getCounterByType",value:function(t){return this.moduleCounter[t]||0}},{key:"addByType",value:function(t){var e=this.moduleCounter[t];return isNaN(e)||e<0?(this.moduleCounter[t]=1,0):(this.moduleCounter[t]=e+1,this.moduleCounter[t])}},{key:"removeByType",value:function(t){var e=this.moduleCounter[t];return isNaN(e)||e<0?(this.moduleCounter[t]=0,0):(this.moduleCounter[t]=e-1,this.moduleCounter[t])}}])}();e.a=o},4917:function(t,e,a){"use strict";var i=a("cb7c"),s=a("9def"),o=a("0390"),l=a("5f1b");a("214f")("match",1,(function(t,e,a,n){return[function(a){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=n(a,t,this);if(e.done)return e.value;var r=i(t),c=String(this);if(!r.global)return l(r,c);var u=r.unicode;r.lastIndex=0;for(var d,p=[],m=0;null!==(d=l(r,c));){var g=String(d[0]);p[m]=g,""===g&&(r.lastIndex=o(c,s(r.lastIndex),u)),m++}return 0===m?null:p}]}))},"4b8f":function(t,e,a){"use strict";a("7fb5")},"515e":function(t,e,a){"use strict";a("28a5"),e.a=function(t,e){for(var a=t.split("."),i=e.split("."),s=a.length,o=i.length,l=Math.min(s,o),n=0;n<l;n+=1){if(a[n]>i[n])return!0;if(a[n]<i[n])return!1}return o<s}},"5b91":function(t,e,a){"use strict";var i=a("db72"),s=a("2f62");e.a={computed:Object(i.a)({},Object(s.e)(["createMarketingUrl"]))}},"5e2f":function(t,e,a){"use strict";a("6762"),a("2fdb"),a("386d"),a("b54a"),a("c5f6");var i=a("db72"),s=(a("7f7f"),a("5f16")),o=(a("d263"),a("a481"),a("ded5")),l=a("7e79"),n={components:{VueCropper:l.VueCropper},props:["item","index","active","itemNum","courseSets"],data:function(){return{activeIndex:this.active,option:{img:"",autoCrop:!0,autoCropWidth:686,autoCropHeight:272,fixedNumber:[686,272],fixed:!0,high:!1,enlarge:2},appFixedNumber:[343,136],linkOptions:[{key:0,type:"course_list",label:this.$t("carousel.chooseCourse")},{key:1,type:"classroom_list",label:this.$t("carousel.chooseClass")},{key:2,type:"vip",label:this.$t("carousel.chooseMember")}],imageCropped:!1,dialogVisible:!1,pathName:this.$route.name,type:"",radio:"insideLink",linkUrl:""}},computed:{linkTextShow:function(){return"vip"===this.type?"会员专区":this.item.link.target&&this.item.link.target.displayedTitle}},watch:{courseSets:function(t){console.log(t[0],"courseSets"),t.length?this.item.link.target={id:t[0].id,title:t[0].title,courseSetId:t[0].courseSetId,displayedTitle:t[0].displayedTitle}:this.item.link.target=null}},created:function(){this.type=this.item.link.type,"url"===this.item.link.type&&(this.radio="url")},methods:{beforeUpload:function(t){var e=this,a=t.type,i=t.size/1024/1024;if(-1!==a.indexOf("image"))if(i>2)this.$message({message:"文件大小不得超过 2 MB",type:"error"});else{this.dialogVisible=!0;var s=new FileReader;s.onload=function(){e.option.img=s.result},s.readAsDataURL(t)}else this.$message({message:"文件类型仅支持图片格式",type:"error"})},stopCrop:function(){var t=this;this.$refs.cropper.stopCrop(),this.dialogVisible=!1,this.$refs.cropper.getCropData((function(e){t.imageCropped=!0,t.uploadImg(e)}))},uploadImg:function(t){var e=this;if(this.imageCropped){this.imageCropped=!1;var a=new FormData;a.append("file",t),a.append("group","system"),o.a.uploadFile({data:a}).then((function(t){"miniprogramSetting"===e.pathName&&(t.uri=t.uri.replace(/^(\/\/)|(http:\/\/)/,"https://")),e.item.image=t,e.$emit("selected",{selectIndex:e.activeIndex,imageUrl:t.uri}),e.$message({message:"图片上传成功",type:"success"})})).catch((function(t){e.$message({message:t.message,type:"error"})}))}},selected:function(t){this.imgAdress=this.item.image.uri,this.activeIndex=t,this.$emit("selected",{selectIndex:t,imageUrl:this.item.image.uri})},handleRemove:function(t,e,a){t.stopPropagation(),a>1?this.$emit("remove",e):this.$message({message:"至少要留一张轮播图",type:"warning"})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleClose:function(){this.type="",this.$emit("removeCourseLink",this.index)},insideLinkHandle:function(t){this.type=t,this.$emit("chooseCourse",{value:t,index:this.index})},changeLinkUrl:function(t){this.$emit("setOutLink",{type:"url",url:t,index:this.index})}}},r=(a("f1d4"),a("2877")),c=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"clearfix carousel-item",class:{active:t.active===t.index},on:{click:function(e){return t.selected(t.index)}}},[e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"label-item"},[t._v("轮播图：")]),e("el-upload",{staticClass:"add-img",attrs:{"http-request":t.uploadImg,"before-upload":t.beforeUpload,"show-file-list":!1,action:"string",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.item.image.uri,expression:"item.image.uri"}],staticClass:"carousel-img",attrs:{src:t.item.image.uri}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.image.uri,expression:"item.image.uri"}],staticClass:"carousel-img-mask"},[t._v(t._s(t.$t("carousel.replacePicture")))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.item.image.uri,expression:"!item.image.uri"}]},[e("i",{staticClass:"text-18"},[t._v("+")]),t._v(t._s(t.$t("carousel.addPictures")))])])],1),e("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0,title:"提示:通过鼠标滚轮缩放图片",width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"setting-carousel-cropper-container"},[e("vueCropper",{directives:[{name:"show",rawName:"v-show",value:t.option.img,expression:"option.img"}],ref:"cropper",attrs:{img:t.option.img,fixed:t.option.fixed,enlarge:t.option.enlarge,"auto-crop":t.option.autoCrop,"fixed-number":"appSetting"===t.pathName?t.appFixedNumber:t.option.fixedNumber,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("btn.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.stopCrop}},[t._v(t._s(t.$t("btn.confirm")))])],1)]),e("img",{directives:[{name:"show",rawName:"v-show",value:t.active===t.index,expression:"active === index"}],staticClass:"icon-delete",attrs:{src:"static/images/delete.png"},on:{click:function(e){return t.handleRemove(e,t.index,t.itemNum)}}}),e("div",{staticClass:"add-choose"},[e("div",{staticClass:"label-item"},[t._v("链接：")]),e("div",{staticStyle:{height:"24px",flex:"1",display:"flex","align-items":"center","flex-wrap":"wrap"}},[e("el-radio",{attrs:{label:"insideLink"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("carousel.siteLink")))])],1)]),"insideLink"===t.radio?e("div",{staticClass:"add-inner"},[t.linkTextShow?t._e():e("el-dropdown",[e("el-button",{staticClass:"el-dropdown-link",attrs:{size:"mini"}},[t._v("\n        "+t._s(t.$t("carousel.addLink"))+"\n      ")]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.linkOptions,(function(a){return e("el-dropdown-item",{key:a.key,nativeOn:{click:function(e){return t.insideLinkHandle(a.type)}}},[t._v(t._s(a.label))])})),1)],1),t.linkTextShow?e("el-tag",{staticStyle:{"max-width":"150px",width:"fit-content",display:"flex","align-items":"center"},attrs:{"disable-transitions":!0,closable:""},on:{close:t.handleClose}},[e("el-tooltip",{staticClass:"text-content ellipsis",attrs:{effect:"dark",placement:"top"}},[e("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.linkTextShow))]),e("span",[t._v(t._s(t.linkTextShow))])])],1):t._e()],1):t._e()],1)}),[],!1,null,"014f04bf",null).exports,u={props:{containerClass:{type:String,default:""},isActive:{type:Boolean,default:!1},isIncomplete:{type:Boolean,default:!1}},data:function(){return{pathName:this.$route.name,windowHeight:document.documentElement.clientHeight,settingStyle:{}}},mounted:function(){"h5Setting"===this.pathName&&(this.settingStyle={height:this.windowHeight+"px",overflow:"auto",background:"#ffffff"})}},d=Object(r.a)(u,(function(){var t=this._self._c;return t("div",{staticClass:"module-frame",class:this.containerClass},[[t("div",{staticClass:"module-frame__preview",class:{active:this.isActive,incomplete:this.isIncomplete}},[this._t("preview")],2)],[t("div",{directives:[{name:"show",rawName:"v-show",value:this.isActive,expression:"isActive"}],staticClass:"module-frame__setting",style:this.settingStyle},[this._t("setting")],2)],this._t("modal")],2)}),[],!1,null,null,null).exports,p=a("5b91"),m=a("2f62"),g=a("0d25"),h={name:"slideshow-link-modal",mixins:[p.a],components:{},props:{courseList:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},type:{type:String,default:"course_list"}},data:function(){return{tableKey:0,keyWord:"",courseSetList:[],selectedCourseSet:null,valueDefault:s.h,typeTextDefault:s.g,loading:!1,pagination:{current:1,pageSize:5,total:0}}},computed:{modalVisible:{get:function(){return this.visible},set:function(t){this.$emit("visibleChange",t)}},valueKey:function(){return this.valueDefault[this.type].key},typeText:function(){return this.typeTextDefault[this.type].text},nameColumn:function(){return"course_list"===this.type?{label:"课程名称"}:{label:"班级名称"}}},watch:{visible:function(t){t&&(this.keyWord="",this.searchHandler(),this.selectedCourseSet=this.courseList[0])}},methods:Object(i.a)(Object(i.a)({formatTime:g.formatTime},Object(m.c)(["getCourseList","getClassList"])),{},{beforeCloseHandler:function(){this.modalVisible=!1},saveHandler:function(){if(this.modalVisible=!1,this.selectedCourseSet){var t=[this.selectedCourseSet];this.$emit("updateCourses",t)}},searchHandler:function(){var t,e,a,i=this,s=(t=this.keyWord,e=(this.pagination.current-1)*this.pagination.pageSize,a=this.pagination.pageSize,{classroom_list:{apiName:"getClassList",params:{title:t,offset:e,limit:a,sort:"-createdTime"}},course_list:{apiName:"getCourseList",params:{courseSetTitle:t,offset:e,limit:a,sort:"-createdTime"}}});this.loading=!0,this[s[this.type].apiName](s[this.type].params).then((function(t){i.courseSetList=t.data,i.pagination.total=t.paging.total})).catch((function(t){i.$message({message:t.message,type:"error"})})).finally((function(){i.loading=!1}))},searchLink:function(){this.pagination.current=1,this.searchHandler()},handleCurrentChange:function(t){this.pagination.current=t,this.searchHandler()},selectLink:function(t){this.selectedCourseSet=t},clearLink:function(){this.selectedCourseSet=null}})},f=(a("0876"),Object(r.a)(h,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"80%",visible:t.modalVisible,"before-close":t.beforeCloseHandler,"custom-class":"slideshow-link-modal","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"2vh"},on:{"update:visible":function(e){t.modalVisible=e}}},[e("div",{staticClass:"course-modal__header",attrs:{slot:"title"},slot:"title"},[e("span",{staticClass:"header__title"},[t._v("选择"+t._s(t.typeText))]),e("span",{staticClass:"header__subtitle"},[t._v("仅显示"+t._s("coupon"===t.type?"未过期的":"已发布")+t._s(t.typeText))]),["groupon","seckill","cut"].includes(t.type)?e("a",{staticClass:"color-primary pull-right text-12 mrl",attrs:{href:"".concat(t.createMarketingUrl,"_").concat(t.type),target:"_blank"}},[t._v("创建活动")]):t._e()]),e("div",{staticClass:"flex justify-center",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"text-14 btn-border-primary",attrs:{size:"small"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取 消")]),e("el-button",{staticClass:"text-14",attrs:{type:"primary",size:"small"},on:{click:t.saveHandler}},[t._v("保 存")])],1),e("div",{staticClass:"course-modal__body"},[e("div",{staticClass:"search__container flex items-center"},[e("span",{staticClass:"search__label whitespace-nowrap"},[t._v(t._s(t.typeText)+"名称：")]),e("el-input",{staticStyle:{width:"250px","margin-right":"12px"},attrs:{placeholder:"请输入".concat(t.typeText,"名称"),size:"small"},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.searchLink}},[t._v("搜索")])],1)]),e("div",{staticClass:"relative"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb-20",staticStyle:{width:"100%"},attrs:{data:t.courseSetList,"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[e("el-table-column",{attrs:{label:t.nameColumn.label},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"text-nowrap truncate"},[t._v(t._s("course_list"===t.type?a.row.courseSetTitle:a.row.title))])]}}])}),e("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),"classroom_list"===t.type?e("el-table-column",{attrs:{prop:"courseNum",label:"课程数量"}}):t._e(),e("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"text-nowrap"},[t._v(t._s(t.formatTime(new Date(a.row.createdTime))))])]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.selectLink(a.row)}}},[t._v("选择")])]}}])})],1)],1),e("div",{staticClass:"w-full flex flex-row-reverse"},[e("el-pagination",{attrs:{"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),e("div",{staticClass:"flex items-center mt-20"},[e("div",{staticClass:"text-14 text-[#313131] h-40 mr-12",staticStyle:{"line-height":"40px"}},[t._v("已选"+t._s(t.typeText)+"：\n      "),t.selectedCourseSet&&"course_list"===t.type?e("span",[t._v(t._s(t.selectedCourseSet.courseSetTitle))]):t._e(),t.selectedCourseSet&&"classroom_list"===t.type?e("span",[t._v(t._s(t.selectedCourseSet.title))]):t._e()]),t.selectedCourseSet?e("el-button",{attrs:{type:"text"},on:{click:t.clearLink}},[t._v("清除")]):t._e()],1)])}),[],!1,null,null,null).exports),v={name:"e-suggest",props:{suggest:{type:Array,default:function(){return[]}}},methods:{prev:function(){this.$refs.suggestCarousel.prev()},next:function(){this.$refs.suggestCarousel.next()}}},y=Object(r.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"setting-tip"},[t.suggest.length>=2?[e("div",{staticClass:"tip__arrow tip__left",on:{click:t.prev}},[e("i",{staticClass:"iconfont icon-arrow-left"})]),e("div",{staticClass:"tip__arrow tip__right",on:{click:t.next}},[e("i",{staticClass:"iconfont icon-arrow-right"})])]:t._e(),e("el-carousel",{ref:"suggestCarousel",attrs:{interval:-1,arrow:"never",autoplay:!1,"indicator-position":"none",height:"auto","initial-index":0}},t._l(t.suggest,(function(a){return e("el-carousel-item",{key:a},[e("div",{staticClass:"setting-tip__main"},[e("div",{staticClass:"setting-tip__title"},[e("i",{staticClass:"iconfont icon-jianyi"}),t._v(t._s(t.$t("e.decorationSuggestions"))+"：\n        ")]),e("div",{staticClass:"setting-tip__content"},[t._v(t._s(a))])])])})),1)],2)}),[],!1,null,null,null).exports,b={components:{item:c,moduleFrame:d,slideshowLinkModal:f,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{activeItemIndex:0,modalVisible:!1,courseSets:[],type:"course_list",pathName:this.$route.name}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){console.log("changed copyModuleData")}},carouselImage:function(){return this.copyModuleData.data[this.activeItemIndex]&&this.copyModuleData.data[this.activeItemIndex].image.uri},carouselTitle:function(){return this.copyModuleData.data[this.activeItemIndex]&&this.copyModuleData.data[this.activeItemIndex].title},itemNum:function(){return this.copyModuleData.data.length},addBtnShow:function(){return this.itemNum<5}},watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0}},methods:{addItem:function(){var t=JSON.stringify(s.f.slideShow.data[0]),e=JSON.parse(t);this.copyModuleData.data.push(e)},selected:function(t){this.activeItemIndex=t.selectIndex},getUpdatedCourses:function(t){var e=this.copyModuleData.data[this.activeItemIndex].link;if("classroom_list"===this.type)return this.courseSets[this.activeItemIndex]=[{id:t[0].id,title:t[0].title,displayedTitle:t[0].title}],void(e.type="classroom");this.courseSets[this.activeItemIndex]=[{id:t[0].id,courseSetId:t[0].courseSet.id,title:t[0].title||t[0].courseSetTitle,displayedTitle:t[0].displayedTitle}],e.type="course"},modalVisibleHandler:function(t){this.modalVisible=t},openModal:function(t){var e=t.value,a=t.index;"vip"!==e?this.modalVisible=!0:this.copyModuleData.data[a].link.type="vip",this.type=e,this.activeItemIndex=a},itemRemove:function(t){this.activeItemIndex=t-1,this.copyModuleData.data.splice(t,1)},removeCourseLink:function(t){this.type="",this.copyModuleData.data[t].link.type="",this.copyModuleData.data[t].link.target=null,this.courseSets[this.activeItemIndex]=[]},setOutLink:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index;this.copyModuleData.data[e].link=Object(i.a)({},t)}}},_=Object(r.a)(b,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{"is-active":t.isActive,"is-incomplete":t.isIncomplete,"container-class":"setting-carousel"}},[e("div",{staticClass:"carousel-image-container",class:{"carousel-image-container__app":"appSetting"===t.pathName},attrs:{slot:"preview"},slot:"preview"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.carouselImage,expression:"carouselImage"}],staticClass:"carousel-image",attrs:{src:t.carouselImage}}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.carouselImage,expression:"!carouselImage"}],staticClass:"image-mask",class:{"image-mask__app":"appSetting"===t.pathName}},[t._v("\n      "+t._s(t.$t("carousel.carousel"))+"\n    ")])]),e("div",{staticClass:"carousel-allocate",attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("carousel.carouselSettings"))+"\n      "),"appSetting"!==t.pathName?e("div",{staticClass:"help-text"},[t._v("\n        "+t._s(t.$t("carousel.tips"))+"\n      ")]):e("div",{staticClass:"help-text"},[t._v("\n        "+t._s(t.$t("carousel.tips2"))+"\n      ")])]),t._l(t.copyModuleData.data,(function(a,i){return e("div",{key:i},[e("item",{attrs:{item:a,index:i,active:t.activeItemIndex,"item-num":t.itemNum,"course-sets":t.courseSets[i]},on:{selected:t.selected,chooseCourse:t.openModal,remove:t.itemRemove,removeCourseLink:t.removeCourseLink,setOutLink:t.setOutLink}})],1)})),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addBtnShow,expression:"addBtnShow"}],staticClass:"btn-add-item",attrs:{type:"info",size:"medium"},on:{click:t.addItem}},[t._v(t._s(t.$t("carousel.addCarousel")))])],2),e("slideshow-link-modal",{attrs:{slot:"modal",type:["course_list","classroom_list"].includes(t.type)?t.type:"course_list",visible:t.modalVisible,"course-list":t.courseSets[t.activeItemIndex]||[]},on:{visibleChange:t.modalVisibleHandler,updateCourses:t.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,C=(a("55dd"),a("6b54"),a("b76a")),D=a.n(C),k=a("062f"),w=a("75fc"),x={open_course_list:[{col:5,title:"课程名称",label:"title"},{col:5,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],course_list:[{col:5,title:"课程名称",label:"displayedTitle"},{col:3,title:"商品价格",label:"price"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],classroom_list:[{col:4,title:"班级名称",label:"title"},{col:2,title:"商品价格",label:"price"},{col:2,title:"课程数量",label:"courseNum"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],groupon:[{col:4,title:"活动名称",label:"name"},{col:1,title:"商品原价",label:"rule",subProperty:"originPrice"},{col:1,title:"团长价格",label:"rule",subProperty:"ownerPrice"},{col:1,title:"团员价格",label:"rule",subProperty:"memberPrice"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],cut:[{col:3,title:"活动名称",label:"name"},{col:2,title:"商品原价",label:"originPrice"},{col:1,title:"最低售价",label:"rule",subProperty:"lowestPrice"},{col:1,title:"砍价次数",label:"rule",subProperty:"times"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],seckill:[{col:3,title:"活动名称",label:"name"},{col:2,title:"商品原价",label:"rule",subProperty:"originPrice"},{col:1,title:"秒杀价",label:"rule",subProperty:"seckillPrice"},{col:1,title:"商品个数",label:"rule",subProperty:"productSum"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],coupon:[{col:3,title:"优惠券名称",label:"name"},{col:2,title:"前缀",label:"prefix"},{col:3,title:"优惠内容",label:"rate"},{col:1,title:"剩余/总量",label:"generatedNum"},{col:1,title:"有效期至",label:"deadline"},{col:0,title:"操作",label:"delete"}]},M=function(t,e,a){var i=a?a.toLocaleLowerCase():e.toLocaleLowerCase(),s=a?t[e][a]:t[e];if(i.includes("price"))return s?"".concat(s,"元"):"未设置";switch(e){case"deadline":if(t.deadlineMode&&"day"===t.deadlineMode)return"领取".concat(t.fixedDay,"天后有效");if(!t.deadline)return"未知日期";var o=new Date(t.deadline);return Object(g.formatTime)(o).slice(0,10);case"createdTime":if(!t.createdTime)return"未知日期";var l=new Date(t.createdTime);return Object(g.formatTime)(l);case"delete":return"移除";case"generatedNum":return"".concat(t.unreceivedNum," / ").concat(t.generatedNum);case"rate":var n="折扣",r="折",c=t.targetDetail.numType,u=t.targetDetail.product,d="全部商品";if("single"===c)switch(u){case"course":case"classroom":d="指定商品";break;case"vip":d="指定会员";break;default:d=""}else if("all"===c)switch(u){case"course":d="全部课程";break;case"classroom":d="全部班级";break;case"all":d="全部商品";break;case"vip":d="全部会员";break;default:d=""}else switch(u){case"course":case"classroom":d="部分商品";break;default:d=""}return"minus"===t.type&&(n="抵价",r="元"),"".concat(n+t.rate+r," / ").concat(d);default:return a?t[e][a]:t[e]}},T={name:"course-table",components:{draggable:D.a},props:{courseList:{type:Array,default:[]},type:{type:String,default:"course_list"}},data:function(){return{head:x}},computed:{courseSets:{get:function(){return this.courseList},set:function(t){this.$emit("updateCourses",t)}}},filters:{tableFilter:M},methods:{tdClass:function(t){return"td-col-".concat(t)},deleteItem:function(t,e){t&&(this.courseSets.splice(e,1),this.courseSets=this.courseSets)}}},A=Object(r.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"course-table"},[e("div",{staticClass:"course-table__th"},t._l(t.head[t.type],(function(a,i){return e("span",{key:i,staticClass:"course-table__td",class:t.tdClass(a.col)},[t._v(t._s(a.title))])})),0),e("draggable",{model:{value:t.courseSets,callback:function(e){t.courseSets=e},expression:"courseSets"}},t._l(t.courseSets,(function(a,i){return e("div",{key:i,staticClass:"course-table__tr"},[e("div",{staticClass:"tr-content"},[t._l(t.head[t.type],(function(s,o){return[0!==o?e("span",{staticClass:"course-table__td text-overflow course-table__td-space",class:[t.tdClass(s.col),{delete:"delete"===s.label}],on:{click:function(e){return t.deleteItem("delete"===s.label,i)}}},[t._v("\n            "+t._s(t._f("tableFilter")(a,s.label,s.subProperty)))]):t._e(),0===o?e("el-tooltip",{class:["text-content","td-col-".concat(s.col)],attrs:{disabled:a[s.label].length<=20,placement:"top-start",effect:"dark"}},[e("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("tableFilter")(a,s.label)))]),e("span",{staticClass:"course-table__td text-overflow"},[t._v(t._s(t._f("tableFilter")(a,s.label)))])]):t._e()]}))],2)])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.courseSets.length,expression:"!courseSets.length"}],staticClass:"course-table__empty"},[t._v("暂无数据")])],1)}),[],!1,null,null,null).exports,$={name:"course-modal",mixins:[p.a],components:{courseTable:A},props:{courseList:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},limit:{default:""},type:{type:String,default:"course_list"}},data:function(){return{tableKey:0,keyWord:"",courseSets:this.courseList,courseListIds:[],valueDefault:s.h,typeTextDefault:s.g,hideLoading:!1}},computed:{modalVisible:{get:function(){return this.visible},set:function(t){this.$emit("visibleChange",t)}},valueKey:function(){return this.valueDefault[this.type].key},typeText:function(){return this.typeTextDefault[this.type].text}},watch:{visible:function(t){t&&(this.tableKey++,this.courseSets=this.courseList,this.restoreListIds(),this.keyWord="")}},created:function(){this.restoreListIds()},methods:Object(i.a)(Object(i.a)({},Object(m.c)(["getCourseList","getClassList","getMarketingList","getCouponList","getOpenCourseList"])),{},{restoreListIds:function(){this.courseListIds=[];for(var t=0;t<this.courseSets.length;t++)this.courseListIds.push(this.courseSets[t].id)},getUpdatedCourses:function(t){this.courseSets=t,this.restoreListIds()},beforeCloseHandler:function(){this.modalVisible=!1},saveHandler:function(){this.modalVisible=!1,this.courseSets.length&&this.$emit("updateCourses",this.courseSets)},selectHandler:function(t){this.courseSets.length>=window.parseInt(this.limit,10)?this.$message({message:"当前最多可选 ".concat(this.limit," 个").concat(this.typeText),type:"warning"}):this.courseListIds.includes(t.id)?this.$message({message:"重复添加了哦",type:"warning"}):(this.courseListIds.push(t.id),this.courseSets=[].concat(Object(w.a)(this.courseSets),[t]))},searchHandler:function(t,e){var a=this,i=function(t,e){return{open_course_list:{apiName:"getOpenCourseList",params:{title:e}},classroom_list:{apiName:"getClassList",params:{title:e}},course_list:{apiName:"getCourseList",params:{courseSetTitle:e}},groupon:{apiName:"getMarketingList",params:{name:e,statuses:"ongoing,unstart",type:t}},coupon:{apiName:"getCouponList",params:{name:e,unexpired:1,unreceivedNumGt:0}},cut:{apiName:"getMarketingList",params:{name:e,statuses:"ongoing,unstart",type:t}},seckill:{apiName:"getMarketingList",params:{name:e,statuses:"ongoing,unstart",type:t,productRemaind_GT:"0"}}}}(this.type,t);this.hideLoading=!1,this[i[this.type].apiName](i[this.type].params).then((function(t){e(t.data)})).catch((function(t){a.hideLoading=!0,a.$message({message:t.message,type:"error"})}))}})},S=Object(r.a)($,(function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:"90%",visible:t.modalVisible,"before-close":t.beforeCloseHandler,"close-on-click-modal":!1},on:{"update:visible":function(e){t.modalVisible=e}}},[e("div",{staticClass:"course-modal__header",attrs:{slot:"title"},slot:"title"},[e("span",{staticClass:"header__title"},[t._v("选择"+t._s(t.typeText))]),e("span",{staticClass:"header__subtitle"},[t._v("仅显示"+t._s("coupon"===t.type?"未过期的":"已发布")+t._s(t.typeText))]),["groupon","seckill","cut"].includes(t.type)?e("a",{staticClass:"color-primary pull-right text-12 mrl",attrs:{href:"".concat(t.createMarketingUrl,"_").concat(t.type),target:"_blank"}},[t._v("创建活动")]):t._e()]),e("div",{staticClass:"course-modal__body"},[e("div",{staticClass:"search__container"},[e("span",{staticClass:"search__label"},[t._v("选择"+t._s(t.typeText)+"：")]),e("el-autocomplete",{staticClass:"inline-input search__input",attrs:{size:"medium",placeholder:"搜索".concat(t.typeText),"value-key":t.valueKey,clearable:!0,autofocus:!0,"hide-loading":t.hideLoading,"trigger-on-focus":!1,"fetch-suggestions":t.searchHandler},on:{select:t.selectHandler},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}})],1),e("div",{staticClass:"help-text mbs"},[t._v("拖动"+t._s(t.typeText)+"名称可调整排序")])]),e("course-table",{key:t.tableKey,attrs:{courseList:t.courseSets,type:t.type},on:{updateCourses:t.getUpdatedCourses}}),e("span",{staticClass:"course-modal__footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"text-14 btn-border-primary",attrs:{size:"small"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取 消")]),e("el-button",{staticClass:"text-14",attrs:{type:"primary",size:"small"},on:{click:t.saveHandler}},[t._v("保 存")])],1)],1)}),[],!1,null,null,null).exports,I={name:"SettingCell",props:["customClass","leftClass","rightClass","title"]},L=Object(r.a)(I,(function(){var t=this._self._c;return t("div",{staticClass:"default-item-setting__section clearfix",class:this.customClass},[t("p",{staticClass:"pull-left section-left",class:this.leftClass},[this._v(this._s(this.title))]),t("div",{staticClass:"section-right",class:this.rightClass},[this._t("default")],2)])}),[],!1,null,null,null).exports,O=a("bd34"),N=a("92a2"),B={course_list:"courseList.course",classroom_list:"courseList.class"},j={components:{"e-course-list":k.a,draggable:D.a,courseModal:S,moduleFrame:d,settingCell:L,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,limitOptions:[1,2,3,4,5,6,7,8],type:this.moduleData.type,layoutOptions:[{value:"row",label:this.$t("courseList.rowByColumn")},{value:"distichous",label:this.$t("courseList.oneRowAndTwoColumn")}],sortOptions:[{value:"-studentNum",label:this.$t("courseList.joinMost")},{value:"-createdTime",label:this.$t("courseList.recentlyCreated")},{value:"-rating",label:this.$t("courseList.highestScore")},{value:"recommendedSeq",label:"".concat(this.$t("courseList.recommend")).concat(this.$t(B[this.moduleData.type]))}],cascaderProps:{label:"name",value:"id"},pathName:this.$route.name,categoryTempId:this.moduleData.data.categoryIdArray||["0"],categoryDiggered:!1,dateOptions:[{value:"7",label:this.$t("courseList.last7Days")},{value:"30",label:this.$t("courseList.last30Days")},{value:"90",label:this.$t("courseList.last90Days")},{value:"0",label:this.$t("courseList.allHistory")}]}},computed:Object(i.a)(Object(i.a)({},Object(m.e)(["courseCategories","classCategories"])),{},{typeLabel:function(){return this.$t(B[this.type])},isActive:{get:function(){return this.active},set:function(){}},uiStyle:{get:function(){return"miniprogramSetting"===this.$route.name||"miniprogramSetting"===this.$route.query.from?"old":"new"}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){console.log("changed copyModuleData")}},showDateOptions:function(){var t=this.moduleData.data.sort===this.sortOptions[1].value,e=this.moduleData.data.sort===this.sortOptions[3].value;return(t||e)&&(this.moduleData.data.lastDays="0"),!t&&!e},sourceType:{get:function(){return this.copyModuleData.data.sourceType},set:function(t){this.copyModuleData.data.sourceType=t}},sort:{get:function(){return this.copyModuleData.data.sort},set:function(t){this.copyModuleData.data.sort=t}},displayStyle:{get:function(){return this.copyModuleData.data.displayStyle},set:function(t){this.copyModuleData.data.displayStyle=t}},lastDays:{get:function(){return this.copyModuleData.data.lastDays.toString()},set:function(t){this.copyModuleData.data.lastDays=t}},limit:{get:function(){return this.copyModuleData.data.limit},set:function(t){this.copyModuleData.data.limit=t}},categoryId:{get:function(){return this.copyModuleData.data.categoryId},set:function(t){this.copyModuleData.data.categoryId=t}},portal:function(){return N.a[this.pathName]}}),watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0},categoryTempId:{handler:function(t){if(t.length){var e=t.length-1;this.moduleData.data.categoryIdArray=t,this.moduleData.data.categoryId=t[e]}}},courseCategories:{handler:function(t){var e=this;t&&!this.categoryDiggered&&(Object(O.a)(t,(function(t,a){return a&&e.categoryTempId,t})),this.categoryDiggered=!0)},immediate:!0},classCategories:{handler:function(t){var e=this;t&&!this.categoryDiggered&&(Object(O.a)(t,(function(t,a){return a&&e.categoryTempId,t})),this.categoryDiggered=!0,this.categoryTempId=["0"])},immediate:!0},sourceType:function(t){this.limit="condition"===t?4:8}},methods:Object(i.a)(Object(i.a)({},Object(m.c)(["getCourseList","getClassList"])),{},{getUpdatedCourses:function(t){this.copyModuleData.data.items=t},modalVisibleHandler:function(t){this.modalVisible=t},openModal:function(){this.modalVisible=!0},deleteCourse:function(t){this.copyModuleData.data.items.splice(t,1)},fetchCourse:function(t){var e=this,a=t.params;t.index,"custom"!==this.sourceType&&("course_list"!==this.type?this.getClassList(a).then((function(t){e.moduleData.data.items=t.data||[]})).catch((function(t){e.$message({message:t.message,type:"error"})})):this.getCourseList(a).then((function(t){e.moduleData.data.items=t.data||[]})).catch((function(t){e.$message({message:t.message,type:"error"})})))}})},V=Object(r.a)(j,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{"is-active":t.isActive,"is-incomplete":t.isIncomplete,"container-class":"setting-course"}},[e("div",{staticClass:"find-page__part",attrs:{slot:"preview"},slot:"preview"},[e("e-course-list",{attrs:{"course-list":t.copyModuleData.data,feedback:!1,"type-list":t.type,"show-mode":"admin",uiStyle:t.uiStyle},on:{fetchCourse:t.fetchCourse}})],1),e("div",{attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("courseList.settingList",{type:t.typeLabel}))+"\n      "),"miniprogram"===t.portal&&["班级","class"].includes(t.typeLabel)?e("div",{staticClass:"text-12 color-gray mts"},[t._v("\n        使用班级配置功能，小程序版本需要升级到1.3.1及以上\n      ")]):t._e()]),e("div",{staticClass:"clearfix default-allocate__content"},[e("setting-cell",{attrs:{title:t.$t("courseList.listName"),"left-class":"required-option"}},[e("el-input",{attrs:{size:"mini","max-length":"15",placeholder:t.$t("courseList.pleaseEnterTheNameOfTheList"),clearable:""},model:{value:t.copyModuleData.data.title,callback:function(e){t.$set(t.copyModuleData.data,"title",e)},expression:"copyModuleData.data.title"}})],1),"miniprogram"!==t.portal?e("setting-cell",{attrs:{title:t.$t("courseList.sortOrder3")}},[e("el-select",{attrs:{placeholder:t.$t("courseList.sortOrder"),size:"mini"},model:{value:t.displayStyle,callback:function(e){t.displayStyle=e},expression:"displayStyle"}},t._l(t.layoutOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),e("setting-cell",{attrs:{title:t.$t("courseList.source",{type:t.typeLabel})}},[e("el-radio",{attrs:{label:"condition"},model:{value:t.sourceType,callback:function(e){t.sourceType=e},expression:"sourceType"}},[t._v(t._s(t.$t("courseList.sorts",{type:t.typeLabel})))]),e("el-radio",{attrs:{label:"custom"},model:{value:t.sourceType,callback:function(e){t.sourceType=e},expression:"sourceType"}},[t._v(t._s(t.$t("courseList.custom")))])],1),e("setting-cell",{attrs:{title:t.$t("courseList.sorts2",{type:t.typeLabel})}},[e("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{options:"course_list"===t.type?t.courseCategories:t.classCategories,props:t.cascaderProps,size:"mini",placeholder:t.$t("courseList.pleaseEnterTheNameOfTheList"),filterable:"","change-on-select":""},model:{value:t.categoryTempId,callback:function(e){t.categoryTempId=e},expression:"categoryTempId"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.sourceType,expression:"sourceType === 'custom'"}],staticClass:"required-option"},[e("el-button",{attrs:{size:"mini"},on:{click:t.openModal}},[t._v(t._s(t.$t("courseList.choose"))+t._s(t.typeLabel))])],1)],1),e("draggable",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.sourceType&&t.copyModuleData.data.items.length,expression:"sourceType === 'custom' && copyModuleData.data.items.length"}],staticClass:"default-draggable__list",model:{value:t.copyModuleData.data.items,callback:function(e){t.$set(t.copyModuleData.data,"items",e)},expression:"copyModuleData.data.items"}},t._l(t.copyModuleData.data.items,(function(a,i){return e("div",{key:i,staticClass:"default-draggable__item"},[e("div",{staticClass:"default-draggable__title text-overflow"},[t._v("\n            "+t._s(a.displayedTitle||a.title)+"\n          ")]),e("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(e){return t.deleteCourse(i)}}})])})),0),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:t.$t("courseList.sortOrder2")}},[e("div",{staticClass:"section-right__item pull-left"},[e("el-select",{attrs:{placeholder:"顺序",size:"mini"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},t._l(t.sortOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showDateOptions,expression:"showDateOptions"}],staticClass:"section-right__item pull-right"},[e("el-select",{attrs:{placeholder:"时间区间",size:"mini"},model:{value:t.lastDays,callback:function(e){t.lastDays=e},expression:"lastDays"}},t._l(t.dateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:t.$t("courseList.theNumberOfDisplay")}},[e("el-select",{attrs:{placeholder:"请选择个数",size:"mini"},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}},t._l(t.limitOptions,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1),e("course-modal",{attrs:{slot:"modal",visible:t.modalVisible,limit:t.limit,type:t.type,"course-list":t.copyModuleData.data.items},on:{visibleChange:t.modalVisibleHandler,updateCourses:t.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,H={open_course_list:"课程"},P={components:{"e-openCourse-list":a("48dd").a,draggable:D.a,courseModal:S,moduleFrame:d,settingCell:L,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,limitOptions:[1,2,3,4,5,6,7,8],type:this.moduleData.type,cascaderProps:{label:"name",value:"id"},pathName:this.$route.name,categoryTempId:this.moduleData.data.categoryIdArray||["0"],categoryDiggered:!1,dateOptions:[{value:"7",label:"前后7天"},{value:"30",label:"前后30天"},{value:"90",label:"前后90天"},{value:"0",label:"所有"}]}},computed:Object(i.a)(Object(i.a)({},Object(m.e)(["courseCategories"])),{},{typeLabel:function(){return H[this.type]},isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){console.log("changed copyModuleData")}},sourceType:{get:function(){return this.copyModuleData.data.sourceType},set:function(t){this.copyModuleData.data.sourceType=t}},displayStyle:{get:function(){return this.copyModuleData.data.displayStyle},set:function(t){this.copyModuleData.data.displayStyle=t}},limitDays:{get:function(){return this.copyModuleData.data.limitDays.toString()},set:function(t){this.copyModuleData.data.limitDays=t}},limit:{get:function(){return this.copyModuleData.data.limit},set:function(t){this.copyModuleData.data.limit=t}},categoryId:{get:function(){return this.copyModuleData.data.categoryId},set:function(t){this.copyModuleData.data.categoryId=t}},portal:function(){return N.a[this.pathName]}}),watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0},categoryTempId:{handler:function(t){if(t.length){var e=t.length-1;this.moduleData.data.categoryIdArray=t,this.moduleData.data.categoryId=t[e]}}},courseCategories:{handler:function(t){var e=this;t&&!this.categoryDiggered&&(Object(O.a)(t,(function(t,a){return a&&e.categoryTempId,t})),this.categoryDiggered=!0)},immediate:!0},sourceType:function(t){this.limit="condition"===t?4:8}},methods:Object(i.a)(Object(i.a)({},Object(m.c)(["getOpenCourseList"])),{},{getUpdatedCourses:function(t){this.copyModuleData.data.items=t},modalVisibleHandler:function(t){this.modalVisible=t},openModal:function(){this.modalVisible=!0},deleteCourse:function(t){this.copyModuleData.data.items.splice(t,1)},fetchCourse:function(t){var e=this,a=t.params;t.index,console.log(this.sourceType),"custom"!==this.sourceType&&this.getOpenCourseList(a).then((function(t){e.moduleData.data.items=t.data})).catch((function(t){e.$message({message:t.message,type:"error"})}))}})},F=Object(r.a)(P,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{"is-active":t.isActive,"is-incomplete":t.isIncomplete,"container-class":"setting-course"}},[e("div",{staticClass:"find-page__part",attrs:{slot:"preview"},slot:"preview"},[e("e-openCourse-list",{attrs:{"course-list":t.copyModuleData.data,feedback:!1,"type-list":t.type,"show-mode":"admin"},on:{fetchCourse:t.fetchCourse}})],1),e("div",{attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      公开课列表设置\n      "),e("div",{staticClass:"text-12 color-gray mts"},[t._v("\n        注意：仅含直播公开课内容，不包含录播公开课\n      ")])]),e("div",{staticClass:"default-allocate__content clearfix"},[e("setting-cell",{attrs:{title:"列表名称：","left-class":"required-option"}},[e("el-input",{attrs:{size:"mini","max-length":"15",placeholder:"请输入列表名称",clearable:""},model:{value:t.copyModuleData.data.title,callback:function(e){t.$set(t.copyModuleData.data,"title",e)},expression:"copyModuleData.data.title"}})],1),e("setting-cell",{attrs:{title:t.typeLabel+"来源："}},[e("el-radio",{attrs:{label:"condition"},model:{value:t.sourceType,callback:function(e){t.sourceType=e},expression:"sourceType"}},[t._v(t._s(t.typeLabel)+"分类")]),e("el-radio",{attrs:{label:"custom"},model:{value:t.sourceType,callback:function(e){t.sourceType=e},expression:"sourceType"}},[t._v("自定义")])],1),e("setting-cell",{attrs:{title:t.typeLabel+"分类："}},[e("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{options:t.courseCategories,props:t.cascaderProps,size:"mini",placeholder:"请输入列表名称",filterable:"","change-on-select":""},model:{value:t.categoryTempId,callback:function(e){t.categoryTempId=e},expression:"categoryTempId"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.sourceType,expression:"sourceType === 'custom'"}],staticClass:"required-option"},[e("el-button",{attrs:{size:"mini"},on:{click:t.openModal}},[t._v("选择"+t._s(t.typeLabel))])],1)],1),e("draggable",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.sourceType&&t.copyModuleData.data.items.length,expression:"sourceType === 'custom' && copyModuleData.data.items.length"}],staticClass:"default-draggable__list",model:{value:t.copyModuleData.data.items,callback:function(e){t.$set(t.copyModuleData.data,"items",e)},expression:"copyModuleData.data.items"}},t._l(t.copyModuleData.data.items,(function(a,i){return e("div",{key:i,staticClass:"default-draggable__item"},[e("div",{staticClass:"default-draggable__title text-overflow"},[t._v("\n            "+t._s(a.displayedTitle||a.title)+"\n          ")]),e("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(e){return t.deleteCourse(i)}}})])})),0),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:"排列顺序："}},[e("div",{staticClass:"section-right__item"},[e("el-select",{attrs:{placeholder:"时间区间",size:"mini"},model:{value:t.limitDays,callback:function(e){t.limitDays=e},expression:"limitDays"}},t._l(t.dateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:"显示个数："}},[e("el-select",{attrs:{placeholder:"请选择个数",size:"mini"},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}},t._l(t.limitOptions,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1),e("course-modal",{attrs:{slot:"modal",visible:t.modalVisible,limit:t.limit,type:t.type,"course-list":t.copyModuleData.data.items},on:{visibleChange:t.modalVisibleHandler,updateCourses:t.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,E={components:{"e-item-bank":a("28e4").a,draggable:D.a,moduleFrame:d,settingCell:L,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,type:this.moduleData.type,layoutOptions:[{value:"row",label:this.$t("questionBankList.rowByColumn")},{value:"distichous",label:this.$t("questionBankList.oneRowAndTwoColumn")}],sortOptions:[{value:"-studentNum",label:this.$t("questionBankList.joinMost")},{value:"-createdTime",label:this.$t("questionBankList.recentlyCreated")},{value:"-rating",label:this.$t("questionBankList.highestScore")},{value:"recommendedSeq",label:this.$t("questionBankList.recommend")}],cascaderProps:{label:"name",value:"id"},pathName:this.$route.name,categoryTempId:this.moduleData.data.categoryIdArray||["0"],categoryDiggered:!1,dateOptions:[{value:"7",label:this.$t("questionBankList.last7Days")},{value:"30",label:this.$t("questionBankList.last30Days")},{value:"90",label:this.$t("questionBankList.last90Days")},{value:"0",label:this.$t("questionBankList.allHistory")}]}},computed:Object(i.a)(Object(i.a)({},Object(m.e)(["courseCategories","classCategories","itemBankCategories"])),{},{isActive:{get:function(){return this.active},set:function(){}},uiStyle:{get:function(){return"miniprogramSetting"===this.$route.name||"miniprogramSetting"===this.$route.query.from?"old":"new"}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){console.log("changed copyModuleData")}},showDateOptions:function(){var t=this.moduleData.data.sort===this.sortOptions[1].value,e=this.moduleData.data.sort===this.sortOptions[3].value;return(t||e)&&(this.moduleData.data.lastDays="0"),!t&&!e},sourceType:{get:function(){return this.copyModuleData.data.sourceType},set:function(t){this.copyModuleData.data.sourceType=t}},sort:{get:function(){return this.copyModuleData.data.sort},set:function(t){this.copyModuleData.data.sort=t,this.fetchItemBankList()}},lastDays:{get:function(){return this.copyModuleData.data.lastDays.toString()},set:function(t){this.copyModuleData.data.lastDays=t,this.fetchItemBankList()}},portal:function(){return N.a[this.pathName]}}),watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0},categoryTempId:{handler:function(t){if(t.length){var e=t.length-1;this.moduleData.data.categoryIdArray=t,this.moduleData.data.categoryId=t[e],this.fetchItemBankList()}}},courseCategories:{handler:function(t){var e=this;if(t&&!this.categoryDiggered){var a=!1;return Object(O.a)(t,(function(t,i){return i&&(a=i==e.categoryTempId),t})),this.categoryDiggered=!0,!!a||void 0}},immediate:!0},itemBankCategories:{handler:function(t){var e=this;if(t&&!this.categoryDiggered){var a=!1;return Object(O.a)(t,(function(t,i){return i&&(a=i==e.categoryTempId),t})),this.categoryDiggered=!0,!!a||void 0}},immediate:!0},classCategories:{handler:function(t){var e=this;if(t&&!this.categoryDiggered){var a=!1;Object(O.a)(t,(function(t,i){return i&&(a=i==e.categoryTempId),t})),this.categoryDiggered=!0,a||(this.categoryTempId=["0"])}},immediate:!0}},created:function(){this.fetchItemBankList()},methods:Object(i.a)(Object(i.a)({},Object(m.c)(["getItemBankList"])),{},{getUpdatedCourses:function(t){this.copyModuleData.data.items=t},modalVisibleHandler:function(t){this.modalVisible=t},openModal:function(){this.modalVisible=!0},deleteCourse:function(t){this.copyModuleData.data.items.splice(t,1)},fetchItemBankList:function(){var t=this;"custom"!==this.sourceType&&this.getItemBankList({limit:3,sort:this.sort,lastDays:this.lastDays,categoryId:this.categoryTempId.at(-1)}).then((function(e){t.moduleData.data.items=e.data||[]})).catch((function(e){t.$message({message:e.message,type:"error"})}))}})},q=Object(r.a)(E,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{"is-active":t.isActive,"is-incomplete":t.isIncomplete,"container-class":"setting-course"}},[e("div",{staticClass:"find-page__part",attrs:{slot:"preview"},slot:"preview"},[e("e-item-bank",{attrs:{itembank:t.copyModuleData.data,feedback:!1,"show-mode":"admin"}})],1),e("div",{attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v(t._s(t.$t("questionBankList.questionBankSettingList")))]),e("div",{staticClass:"clearfix default-allocate__content"},[e("setting-cell",{attrs:{title:t.$t("questionBankList.listName"),"left-class":"required-option"}},[e("el-input",{attrs:{size:"mini","max-length":"15",placeholder:t.$t("questionBankList.pleaseEnterTheNameOfTheList"),clearable:""},model:{value:t.copyModuleData.data.title,callback:function(e){t.$set(t.copyModuleData.data,"title",e)},expression:"copyModuleData.data.title"}})],1),e("setting-cell",{attrs:{title:t.$t("questionBankList.questionBank")+t.$t("questionBankList.classification")}},[e("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{options:t.itemBankCategories,props:t.cascaderProps,size:"mini",placeholder:t.$t("questionBankList.pleaseEnterTheNameOfTheList"),filterable:"","change-on-select":""},model:{value:t.categoryTempId,callback:function(e){t.categoryTempId=e},expression:"categoryTempId"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.sourceType,expression:"sourceType === 'custom'"}],staticClass:"required-option"},[e("el-button",{attrs:{size:"mini"},on:{click:t.openModal}},[t._v(t._s(t.$t("questionBankList.choose"))+t._s(t.$t("questionBankList.questionBank")))])],1)],1),e("draggable",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.sourceType&&t.copyModuleData.data.items.length,expression:"sourceType === 'custom' && copyModuleData.data.items.length"}],staticClass:"default-draggable__list",model:{value:t.copyModuleData.data.items,callback:function(e){t.$set(t.copyModuleData.data,"items",e)},expression:"copyModuleData.data.items"}},t._l(t.copyModuleData.data.items,(function(a,i){return e("div",{key:i,staticClass:"default-draggable__item"},[e("div",{staticClass:"default-draggable__title text-overflow"},[t._v("\n            "+t._s(a.displayedTitle||a.title)+"\n          ")]),e("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(e){return t.deleteCourse(i)}}})])})),0),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===t.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:t.$t("questionBankList.sortOrder2")}},[e("div",{staticClass:"section-right__item pull-left"},[e("el-select",{attrs:{placeholder:"顺序",size:"mini"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},t._l(t.sortOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"section-right__item pull-right"},[e("el-select",{attrs:{placeholder:"时间区间",size:"mini"},model:{value:t.lastDays,callback:function(e){t.lastDays=e},expression:"lastDays"}},t._l(t.dateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",{staticStyle:{"margin-top":"12px",color:"#86909C","font-size":"14px"}},[t._v("最多显示3个题库")])],1)],1)])}),[],!1,null,null,null).exports,z=(a("ac6a"),a("28a5"),window.location),U=z.protocol,R=z.pathname,W=z.host,Q={components:{VueCropper:l.VueCropper,settingCell:L},props:["item","index","active"],data:function(){return{baseUri:"".concat(U,"//").concat(W).concat(R.split("/").slice(0,-1).join("/"),"/"),chooseVisible:!1,chooseType:"",imgChooseList:[["static/images/graphic/list/1/0.open@2x.png","static/images/graphic/list/1/1.type@2x.png","static/images/graphic/list/1/10.classroom@2x.png","static/images/graphic/list/1/11.vip2@2x.png","static/images/graphic/list/1/12.class@2x.png","static/images/graphic/list/1/2.class@2x.png","static/images/graphic/list/1/3.new@2x.png","static/images/graphic/list/1/4.free@2x.png","static/images/graphic/list/1/5.live@2x.png","static/images/graphic/list/1/6.problem@2x.png","static/images/graphic/list/1/7.series@2x.png","static/images/graphic/list/1/8.hot@2x.png","static/images/graphic/list/1/9.vip@2x.png"]],appTypeBaseList:[{value:"openCourse",label:"公开课分类"},{value:"classroom",label:"班级分类"},{value:"course",label:"课程分类"}],h5TypeBaseList:[{value:"classroom",label:"班级分类"},{value:"course",label:"课程分类"},{value:"vip",label:"会员专区"}],typeText:{openCourse:this.$t("navigation.openClassSorts"),classroom:this.$t("navigation.classSorts"),course:this.$t("navigation.courseSorts"),vip:this.$t("navigation.memberSorts")},groupList:[],activeIndex:this.active,option:{img:"",outputType:"png",autoCrop:!0,autoCropWidth:80,autoCropHeight:80,fixedNumber:[80,80],fixed:!0,high:!1,enlarge:2},imageCropped:!1,dialogVisible:!1,pathName:this.$route.name}},computed:Object(i.a)(Object(i.a)({},Object(m.e)(["isLoading","vipLevels","vipSettings","vipSetupStatus","vipPlugin","settings"])),{},{vipDisabled:function(){return!(this.vipSetupStatus&&this.vipSettings&&this.vipSettings.enabled&&this.vipSettings.h5Enabled)},typeOptions:function(){if("h5Setting"===this.pathName)return this.h5TypeBaseList;if("appSetting"===this.pathName){var t=this.vipDisabled?[]:[{value:"vip",label:"会员专区"}];return[].concat(t,Object(w.a)(this.appTypeBaseList))}}}),created:function(){this.getCurrentType()},methods:Object(i.a)(Object(i.a)({},Object(m.c)(["getCategoryType"])),{},{getCurrentType:function(){var t=this;this.groupList.length=0,this.item.link.type&&"vip"!==this.item.link.type&&this.getCategoryType({type:this.item.link.type}).then((function(e){e.forEach((function(e){t.groupList.push(e)}))}))},getTypeText:function(t){return this.typeText[t]},setCurrentImg:function(t){this.item.image.uri=this.baseUri+t,this.chooseVisible=!1},handleRemove:function(t,e){this.$emit("removeItem",t)},getDefaultImg:function(t){switch(t){case"openCourse":return"static/images/openCourse.png";case"course":return"static/images/hotcourse.png";case"classroom":return"static/images/hotclass.png";default:return"".concat(this.baseUri,"static/images/graphic/default/icon@2x.png")}},beforeUpload:function(t){this.chooseVisible=!1;var e=t.type,a=t.size/1024/1024;-1!==e.indexOf("image")?a>2?this.$message({message:"文件大小不得超过 2 MB",type:"error"}):this.readFail(t):this.$message({message:"文件类型仅支持图片格式",type:"error"})},chooseImg:function(){this.chooseVisible=!0},readFail:function(t){var e=this;this.dialogVisible=!0;var a=new FileReader;a.onload=function(){e.option.img=a.result},a.readAsDataURL(t)},stopCrop:function(){var t=this;this.$refs.cropper.stopCrop(),this.dialogVisible=!1,this.$refs.cropper.getCropData((function(e){t.imageCropped=!0,t.uploadImg(e)}))},uploadImg:function(t){if(this.imageCropped){this.imageCropped=!1;var e=new FormData;e.append("file",t),e.append("group","system"),this.sendUploadFile(e)}},sendUploadFile:function(t){var e=this;o.a.uploadFile({data:t}).then((function(t){"miniprogramSetting"===e.pathName&&(t.uri=t.uri.replace(/^(\/\/)|(http:\/\/)/,"https://")),e.item.image=t,e.$emit("selected",{selectIndex:e.activeIndex,imageUrl:t.uri}),e.$message({message:"图片上传成功",type:"success"})})).catch((function(t){e.$message({message:t.message,type:"error"})}))},selected:function(t){this.imgAdress=this.item.image.uri,this.activeIndex=t,this.$emit("selected",{selectIndex:t,imageUrl:this.item.image.uri})}}),watch:{"item.link.type":{handler:function(t){this.getCurrentType()}}}},J={components:{item:Object(r.a)(Q,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"clearfix graphic-navigation-item",class:{active:t.active===t.index},on:{click:function(e){return t.selected(t.index)}}},[e("div",{staticClass:"clearfix graphic-navigation-item-left"},[e("div",{staticClass:"add-img",on:{click:t.chooseImg}},[t.item.image.uri?e("img",{staticClass:"graphic-navigation-img",attrs:{src:t.item.image.uri}}):e("img",{staticClass:"graphic-navigation-img",attrs:{src:t.getDefaultImg(t.item.link.type)}}),e("div",{staticClass:"graphic-navigation-img-mask"},[t._v("\n        "+t._s(t.$t("navigation.replacePicture"))+"\n      ")])])]),e("div",{staticClass:"clearfix graphic-navigation-item-right"},[e("div",{staticClass:"add-title"},[t._v("\n      "+t._s(t.$t("navigation.title"))),e("el-input",{attrs:{size:"mini",placeholder:"请输入标题",maxlength:"20",clearable:""},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}})],1),e("div",{staticClass:"add-title"},[t._v("\n      "+t._s(t.$t("navigation.linkSource"))+"\n      "),e("el-select",{attrs:{placeholder:"请选择",size:"mini",width:"150px"},model:{value:t.item.link.type,callback:function(e){t.$set(t.item.link,"type",e)},expression:"item.link.type"}},t._l(t.typeOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.groupList.length,expression:"groupList.length"}],staticClass:"add-choose"},[t._v("\n      "+t._s(t.getTypeText(t.item.link.type))+"\n      "),e("el-select",{attrs:{placeholder:"请选择",size:"mini",width:"150px"},model:{value:t.item.link.categoryId,callback:function(e){t.$set(t.item.link,"categoryId",e)},expression:"item.link.categoryId"}},t._l(t.groupList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),e("img",{directives:[{name:"show",rawName:"v-show",value:t.active===t.index,expression:"active === index"}],staticClass:"icon-delete",attrs:{src:"static/images/delete.png"},on:{click:function(e){return t.handleRemove(t.index)}}}),e("el-dialog",{attrs:{visible:t.chooseVisible,"append-to-body":!0,title:"选择图片",width:"60%"},on:{"update:visible":function(e){t.chooseVisible=e}}},[e("div",{staticClass:"setting-graphicNavigation-choose-container"},t._l(t.imgChooseList,(function(a,i){return e("div",{key:i,staticClass:"choose-container-group"},t._l(a,(function(a,i){return e("div",{key:i,staticClass:"choose-container-group-item"},[e("img",{staticClass:"graphic-navigation-img",attrs:{src:a},on:{click:function(e){return t.setCurrentImg(a)}}})])})),0)})),0),e("div",{staticClass:"setting-graphicNavigation-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.chooseVisible=!1}}},[t._v("取 消")]),e("el-upload",{staticClass:"upload-img",attrs:{"http-request":t.uploadImg,"before-upload":t.beforeUpload,"show-file-list":!1,action:"string",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP"}},[e("el-button",{attrs:{type:"primary"}},[t._v("上传图片")])],1)],1)]),e("el-dialog",{attrs:{visible:t.dialogVisible,title:"提示:通过鼠标滚轮缩放图片",width:"80%","append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"setting-graphicNavigation-cropper-container"},[e("vueCropper",{directives:[{name:"show",rawName:"v-show",value:t.option.img,expression:"option.img"}],ref:"cropper",attrs:{img:t.option.img,fixed:t.option.fixed,enlarge:t.option.enlarge,"auto-crop":t.option.autoCrop,"fixed-number":t.option.fixedNumber,"auto-crop-width":t.option.autoCropWidth,"auto-crop-height":t.option.autoCropHeight,outputType:t.option.outputType}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.stopCrop}},[t._v("确 定")])],1)])],1)}),[],!1,null,null,null).exports,moduleFrame:d,"e-graphic-navigation":a("7f80").a,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{activeItemIndex:0,pathName:this.$route.name}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return console.log(this.moduleData),this.moduleData},set:function(){console.log("changed copyModuleData")}}},watch:{copyModuleData:{handler:function(t){console.log("update",t),this.$emit("updateModule",t)},deep:!0}},methods:{selected:function(t){this.activeItemIndex=t.selectIndex},removeHanlder:function(t){this.copyModuleData.data.length<=1?this.$message({message:"不得少于1个",type:"info"}):this.copyModuleData.data.splice(t,1)},addHandler:function(){this.copyModuleData.data.length>=10?this.$message({message:"最多上传10个",type:"info"}):this.copyModuleData.data.push({title:"",image:{url:"",uri:""},link:{}})}}},G=Object(r.a)(J,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{"is-active":t.isActive,"is-incomplete":t.isIncomplete,"container-class":"setting-graphicNavigation"}},[e("div",{attrs:{slot:"preview"},slot:"preview"},[e("e-graphic-navigation",{attrs:{graphicNavigation:t.copyModuleData.data}})],1),e("div",{staticClass:"carousel-allocate",attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("navigation.navigationSettings"))+"\n      "),e("div",{staticClass:"help-text"},[t._v("\n        "+t._s(t.$t("navigation.tips"))+"\n      ")])]),t._l(t.copyModuleData.data,(function(a,i){return e("div",{key:i},[e("item",{attrs:{item:a,index:i,active:t.activeItemIndex},on:{selected:t.selected,removeItem:t.removeHanlder}})],1)})),e("el-button",{staticClass:"setting-graphicNavigation-add",attrs:{type:"primary"},on:{click:t.addHandler}},[t._v(t._s(t.$t("navigation.addNavigation")))])],2)])}),[],!1,null,null,null).exports,K={components:{moduleFrame:d,settingCell:L,courseModal:S,poster:a("00e4").a,"e-suggest":y},data:function(){return{modalVisible:!1,imgAdress:"http://www.esdev.com/themes/jianmo/img/banner_net.jpg",courseSets:[],imageMode:["responsive","size-fit"],linkOptions:[{key:0,type:"course_list",label:this.$t("imageAds.chooseCourse")},{key:1,type:"classroom_list",label:this.$t("imageAds.chooseClass")},{key:2,type:"vip",label:this.$t("imageAds.chooseMember")}],pathName:this.$route.name,type:"course_list",radio:"insideLink"}},props:{active:{type:Boolean,default:!1},moduleData:{type:Object},incomplete:{type:Boolean,default:!1}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData.data},set:function(){}},courseLinkText:{get:function(){if("vip"===this.type)return"会员专区";var t=this.courseSets[0];return t?"course_list"===this.type?t.displayedTitle:t.title:this.copyModuleData.link.target?this.copyModuleData.link.target.displayedTitle:void 0},set:function(){}}},watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0},radio:function(t){var e=this.moduleData.data.link;if("insideLink"!==t)"miniprogramSetting"!==this.pathName&&(e.type="url");else{var a="classroom_list"===this.type?"classroom":"course";e.type=a}}},created:function(){"miniprogramSetting"!==this.pathName&&(this.type=this.moduleData.data.link.type,"url"===this.moduleData.data.link.type&&(this.radio="url"))},methods:{beforeUpload:function(t){var e=t.type,a=t.size/1024/1024,i="";if(-1===e.indexOf("image")?i="文件类型仅支持图片格式":a>2&&(i="文件大小不得超过 2 MB"),i)return this.$message({type:"error",message:i}),!1},uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),a.append("group","system"),o.a.uploadFile({data:a}).then((function(t){"miniprogramSetting"===e.pathName&&(t.uri=t.uri.replace(/^(\/\/)|(http:\/\/)/,"https://")),e.copyModuleData.image=t,e.$message({message:"图片上传成功",type:"success"})})).catch((function(t){e.$message({message:t.message,type:"error"})}))},modalVisibleHandler:function(t){this.modalVisible=t},getUpdatedCourses:function(t){if(this.courseSets=t,t.length){if("classroom_list"===this.type)return this.moduleData.data.link.target={id:t[0].id,title:t[0].title,courseSetId:t[0].id},void(this.moduleData.data.link.type="classroom");this.moduleData.data.link.target={id:t[0].id,title:t[0].title||t[0].courseSetTitle,courseSetId:t[0].courseSet.id,displayedTitle:t[0].displayedTitle},this.moduleData.data.link.type="course"}},removeCourseLink:function(){this.courseSets=[],this.$set(this.copyModuleData.link,"target",null)},handleClose:function(){this.type="",this.moduleData.data.link.type="",this.removeCourseLink()},insideLinkHandle:function(t){"vip"!==t?this.modalVisible=!0:this.moduleData.data.link.type="vip",this.type=t}}},Z=Object(r.a)(K,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{containerClass:"setting-poster",isActive:t.isActive,isIncomplete:t.isIncomplete}},[e("div",{staticClass:"poster-image-container",attrs:{slot:"preview"},slot:"preview"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.copyModuleData.image.uri,expression:"!copyModuleData.image.uri"}],staticClass:"image-mask"},[t._v("\n      "+t._s(t.$t("imageAds.adPictures2"))+"\n    ")]),e("poster",{directives:[{name:"show",rawName:"v-show",value:t.copyModuleData.image.uri,expression:"copyModuleData.image.uri"}],class:t.imageMode[t.copyModuleData.responsive],attrs:{poster:t.copyModuleData,feedback:!1}})],1),e("div",{staticClass:"poster-allocate",attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("imageAds.imageAdsSettings"))+"\n      "),e("div",{staticClass:"help-text"},[t._v("\n        "+t._s(t.$t("imageAds.tips"))+"\n      ")])]),e("div",{staticClass:"clearfix default-allocate__content"},[e("setting-cell",{attrs:{title:t.$t("imageAds.adPictures"),customClass:"poster-item-setting__section",leftClass:"required-option"}},[e("el-upload",{attrs:{action:"string",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP","http-request":t.uploadImg,"before-upload":t.beforeUpload,"show-file-list":!1}},[e("div",{staticClass:"image-uploader"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.copyModuleData.image.uri,expression:"copyModuleData.image.uri"}],staticClass:"poster-img",attrs:{src:t.copyModuleData.image.uri}}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.copyModuleData.image.uri,expression:"!copyModuleData.image.uri"}],staticClass:"add-img"},[e("span",[e("i",{staticClass:"text-18"},[t._v("+")]),t._v(" "+t._s(t.$t("imageAds.addPictures")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.copyModuleData.image.uri,expression:"copyModuleData.image.uri"}],staticClass:"uploader-mask"},[t._v("\n              "+t._s(t.$t("imageAds.replacePicture"))+"\n            ")])])])],1),e("setting-cell",{attrs:{title:t.$t("imageAds.links"),customClass:"poster-item-setting__section"}},[e("el-radio",{attrs:{label:"insideLink"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("imageAds.siteLink")))]),"miniprogramSetting"!==t.pathName?e("el-radio",{attrs:{label:"url"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("imageAds.customLink")))]):t._e()],1),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"url"!==t.radio,expression:"radio !== 'url'"}],attrs:{title:"",customClass:"poster-item-setting__section"}},[e("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:!t.courseLinkText,expression:"!courseLinkText"}]},[e("el-button",{staticClass:"el-dropdown-link",attrs:{size:"mini"}},[t._v("\n            "+t._s(t.$t("imageAds.addLink"))+"\n          ")]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.linkOptions,(function(a){return e("el-dropdown-item",{key:a.key,nativeOn:{click:function(e){return t.insideLinkHandle(a.type)}}},[t._v(t._s(a.label))])})),1)],1),e("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.courseLinkText,expression:"courseLinkText"}],staticClass:"courseLink",attrs:{closable:"","disable-transitions":!0},on:{close:t.handleClose}},[e("el-tooltip",{staticClass:"text-content ellipsis",attrs:{effect:"dark",placement:"top"}},[e("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.courseLinkText))]),e("span",[t._v(t._s(t.courseLinkText))])])],1)],1),e("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"url"===t.radio,expression:"radio === 'url'"}],attrs:{title:"输入链接：",customClass:"poster-item-setting__section"}},[e("el-input",{attrs:{size:"mini",placeholder:"例如 http://www.eduosho.com",clearable:""},model:{value:t.copyModuleData.link.url,callback:function(e){t.$set(t.copyModuleData.link,"url",e)},expression:"copyModuleData.link.url"}})],1),e("setting-cell",{attrs:{title:t.$t("imageAds.adaptiveMobilePhoneScreen"),customClass:"poster-item-setting__section"}},[e("el-radio",{attrs:{label:"1"},model:{value:t.copyModuleData.responsive,callback:function(e){t.$set(t.copyModuleData,"responsive",e)},expression:"copyModuleData.responsive"}},[t._v(t._s(t.$t("btn.open")))]),e("el-radio",{attrs:{label:"0"},model:{value:t.copyModuleData.responsive,callback:function(e){t.$set(t.copyModuleData,"responsive",e)},expression:"copyModuleData.responsive"}},[t._v(t._s(t.$t("btn.close")))])],1)],1)],1),e("course-modal",{attrs:{slot:"modal",visible:t.modalVisible,type:["course_list","classroom_list"].includes(t.type)?t.type:"course_list",limit:"1",courseList:t.courseSets},on:{visibleChange:t.modalVisibleHandler,updateCourses:t.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,X=a("5af2"),Y={components:{moduleFrame:d,courseModal:S,draggable:D.a,settingCell:L,"e-coupon":X.a,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,imgAdress:"http://www.esdev.com/themes/jianmo/img/banner_net.jpg",imageMode:["responsive","size-fit"],pathName:this.$route.name,type:"coupon"}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}},radio:{get:function(){return this.copyModuleData.data.titleShow},set:function(t){this.copyModuleData.data.titleShow=t}},portal:function(){return N.a[this.pathName]}},watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0},radio:function(t){this.showTitle(t)}},methods:{modalVisibleHandler:function(t){this.modalVisible=t},getUpdatedCourses:function(t){this.copyModuleData.data.items=t,t.length},addCoupon:function(){this.modalVisible=!0},removeCourseLink:function(t){this.copyModuleData.data.items.splice(t,1)},handleClose:function(t){this.removeCourseLink(t)},showTitle:function(){this.copyModuleData.data.titleShow=this.radio}}},tt=Object(r.a)(Y,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{"is-active":t.isActive,"is-incomplete":t.isIncomplete,"container-class":"setting-coupon"}},[e("div",{staticClass:"find-page__part coupon-preview__container",attrs:{slot:"preview"},slot:"preview"},[e("e-coupon",{attrs:{coupons:t.copyModuleData.data.items,feedback:!1,"show-title":t.radio}})],1),e("div",{staticClass:"coupon-allocate",attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("coupon.couponSetting"))+"\n      "),"miniprogram"===t.portal?e("div",{staticClass:"text-12 color-gray mts"},[t._v("\n        使用优惠券配置功能，小程序版本需要升级到1.3.2及以上\n      ")]):t._e()]),e("div",{staticClass:"default-allocate__content"},[e("setting-cell",{attrs:{title:t.$t("coupon.title")}},[e("el-radio",{attrs:{label:"show"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("coupon.display")))]),e("el-radio",{attrs:{label:"unshow"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("coupon.noDisplay")))])],1),e("setting-cell",{attrs:{title:t.$t("coupon.selectCoupons"),"left-class":"required-option"}},[e("el-button",{attrs:{size:"mini"},on:{click:t.addCoupon}},[t._v(t._s(t.$t("coupon.addCoupons")))])],1),t.copyModuleData.data.items?e("div",[e("draggable",{staticClass:"default-draggable__list",model:{value:t.copyModuleData.data.items,callback:function(e){t.$set(t.copyModuleData.data,"items",e)},expression:"copyModuleData.data.items"}},t._l(t.copyModuleData.data.items,(function(a,i){return e("div",{key:i,staticClass:"default-draggable__item"},[e("div",{staticClass:"default-draggable__title text-overflow"},[t._v("\n              "+t._s(a.name)+"\n            ")]),e("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(e){return t.handleClose(i)}}})])})),0)],1):t._e()],1)],1),e("course-modal",{attrs:{slot:"modal",visible:t.modalVisible,type:t.type,"course-list":t.copyModuleData.data.items,limit:"10"},on:{visibleChange:t.modalVisibleHandler,updateCourses:t.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,et={name:"vip",components:{moduleFrame:d,settingCell:L,vipList:a("0468").a,"e-suggest":y},data:function(){return{pathName:this.$route.name}},props:{active:{type:Boolean,default:!1},moduleData:{type:Object},incomplete:{type:Boolean,default:!1}},computed:Object(i.a)(Object(i.a)({},Object(m.e)(["vipLevels"])),{},{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData.data},set:function(){}},sort:{get:function(){return this.moduleData.data.sort},set:function(t){this.moduleData.data.sort=t}},items:{get:function(){return this.moduleData.data.items},set:function(t){this.moduleData.data.items=t}},radio:{get:function(){return this.copyModuleData.titleShow},set:function(t){this.copyModuleData.titleShow=t}},portal:function(){return N.a[this.pathName]}}),watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0},sort:function(){this.items=this.items.reverse()},radio:function(t){this.showTitle(t)}},created:function(){var t;Array.isArray(this.items)&&this.items.length>0||(t=this.items).push.apply(t,Object(w.a)(this.vipLevels))},methods:{showTitle:function(){this.copyModuleData.titleShow=this.radio}}},at=Object(r.a)(et,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{containerClass:"setting-vip",isActive:t.isActive,isIncomplete:t.isIncomplete}},[e("div",{attrs:{slot:"preview"},slot:"preview"},[e("vip-list",{attrs:{items:t.items,sort:t.copyModuleData.sort,feedback:!1,showTitle:t.radio}})],1),e("div",{attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("member.memberSettings"))+"\n      "),"miniprogram"===t.portal?e("div",{staticClass:"text-12 color-gray mts"},[t._v("\n        使用会员专区配置功能，小程序版本需要升级到1.3.4及以上\n      ")]):t._e()]),e("div",{staticClass:"default-allocate__content clearfix"},[e("setting-cell",{attrs:{title:t.$t("member.title")}},[e("el-radio",{attrs:{label:"show"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("member.display")))]),e("el-radio",{attrs:{label:"unshow"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("member.noDisplay")))])],1),e("setting-cell",{attrs:{title:t.$t("member.sortOrder")}},[e("el-radio",{attrs:{label:"asc"},model:{value:t.copyModuleData.sort,callback:function(e){t.$set(t.copyModuleData,"sort",e)},expression:"copyModuleData.sort"}},[t._v(t._s(t.$t("member.lowToHigh")))]),e("el-radio",{attrs:{label:"desc"},model:{value:t.copyModuleData.sort,callback:function(e){t.$set(t.copyModuleData,"sort",e)},expression:"copyModuleData.sort"}},[t._v(t._s(t.$t("member.highToLow")))])],1),e("div",{staticClass:"default-draggable__list still-draggable__list"},t._l(t.items,(function(a,i){return e("div",{key:i,staticClass:"default-draggable__item"},[e("div",{staticClass:"default-draggable__title text-overflow"},[t._v("\n            "+t._s(a.name)+"\n          ")])])})),0)],1)],1)])}),[],!1,null,null,null).exports,it={name:"search",components:{moduleFrame:d,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{searchIcon:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAA\nICAgICAQICAgIDAgIDAwYEAwMDAwcFBQQGCAcJCAgHCAgJCg0LCQoMCggICw8LDA0ODg8OCQsQERA\nOEQ0ODg7/2wBDAQIDAwMDAwcEBAcOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4O\nDg4ODg4ODg4ODg4ODg4ODg7/wgARCAAgACADAREAAhEBAxEB/8QAGgAAAgIDAAAAAAAAAAAAAAAABw\ngCBgQFCf/EABcBAQEBAQAAAAAAAAAAAAAAAAMEAgH/2gAMAwEAAhADEAAAAOszBUFxpudcGV1arncK\nKrBTCpUHWO5daVwmpSzssnpYaCjrp3nT/8QALhAAAQQBAgUCAwkAAAAAAAAAAQIDBAUGBxEACBIhQRM\niJDGCEBgjYpGSsbLy/9oACAEBAAE/ANZNY8ho9QafSjSioZyXVm5Z9cJkH4WnijfeS+dx4B2SSP6JXG\n5bNRL5gWOoPMbmr96573G8cmmBDZUfCED+QlHF1I1y5bWWskssola4aSsrAuk2DITcVTRUB6qHOrd4An\nuVE/QPeMdyCoynB6rI6GaixprKMiRDkN7gONqG4Ox2IPggjcHseOWxtN/r/wAxudWH4127m71Mgr7qYi\nxCQ2gHwCCAR+QfZNhRLKll10+OiXClMqZksuDdLjagUqSR5BBIPHJ249B0Qz3Dy8t+Bi2eWNXWlZJ6WEl\nCwn9y1q+vh+4+7bz1ZRZ5IlcbSHUmSmWLgoKmau1APWl0gEpDhKj/AIWRElRZ1czMhSW5UV5AWy8y4Foc\nSe4UFDcEHwRxrZrhj2k2DuMtuou8+ngMUGORiXJMt9Z6WyUJ7pQCdyTt1bdKd1EDjl305sNMeWWtpr5fXl\nNi+7a3p3CvinyCpJI7EpSEIJHYlBI4v6CjyrFJ1DkdZGuqWWjokQ5jIcbcHzHY+Qe4I7ggEEEcO8nuDw5b4\nxDPM8wKteWVLrKPIiiN9IWhSv1UeJ/JppUrS+8raxdoMxmAORcssZ6pE+O+g9Tbm46U7dQ7hIBI40tYz2Jo\nXRQtTXIj2axmyxPkQnvUbkhCilDpOw9ykBJV2+fH/8QAHREAAgMAAwEBAAAAAAAAAAAAAAECAxESITETQf/aA\nAgBAgEBPwCEElrPql4hcZrP048NLHiw9IvC5adWR69HForrZZIjsBX6uyN7JuJ//8QAHBEAAgMAAwEAAAAAAAA\nAAAAAAAECERIDECIh/9oACAEDAQE/AG7FCxLBF6IfepKyPkXgUrJTONFaRnJgif/Z"}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}}},watch:{copyModuleData:{handler:function(t){this.$emit("updateModule",t)},deep:!0}}},st=(a("4b8f"),Object(r.a)(it,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{containerClass:"setting-search",isActive:t.isActive,isIncomplete:t.isIncomplete}},[e("div",{attrs:{slot:"preview"},slot:"preview"},[e("van-search",{staticStyle:{padding:"10px 16px","background-color":"#f7f9fa"},attrs:{shape:"round","left-icon":"static/images/search-icon.jpg",placeholder:t.$t("search.placeholder")}})],1),e("div",{attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("search.searchSettings"))+"\n    ")]),e("div",{staticClass:"text-14 color-gray mts"},[e("i",{staticClass:"el-icon-warning"}),t._v("\n      "+t._s(t.$t("search.atPresent"))+"\n    ")])],1)])}),[],!1,null,"247f39ff",null).exports),ot={name:"marketing-groupon",components:{moduleFrame:d,courseModal:S,activity:a("e32a").a,settingCell:L,"e-suggest":y},props:{active:{type:Boolean,default:!1},moduleData:{type:Object},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,courseSets:[],pathName:this.$route.name}},computed:{copyModuleData:{get:function(){return this.moduleData.data},set:function(){}},activityName:function(){return this.moduleData.data.activity.name},activityTitle:function(){var t=this.moduleData.type;return"seckill"===t?this.$t("groupPurchase.flashSaleSettings"):"cut"===t?this.$t("groupPurchase.bargainSettings"):this.$t("groupPurchase.groupPurchaseSetting")},radio:{get:function(){return this.copyModuleData.titleShow},set:function(t){this.copyModuleData.titleShow=t}},portal:function(){return N.a[this.pathName]}},methods:{modalVisibleHandler:function(t){this.modalVisible=t},openModal:function(){this.modalVisible=!0},getUpdatedCourses:function(t){this.courseSets=t,t.length&&(this.copyModuleData.activity=t[0])},removeActivity:function(){this.courseSets=[],this.$set(this.copyModuleData,"activity",{})},handleClose:function(){this.removeActivity()}}},lt=Object(r.a)(ot,(function(){var t=this,e=t._self._c;return e("module-frame",{attrs:{containerClass:"setting-groupon",isActive:t.active,isIncomplete:t.incomplete}},[e("div",{staticClass:"groupon-container",attrs:{slot:"preview"},slot:"preview"},[e("activity",{attrs:{activity:t.copyModuleData.activity,tag:t.copyModuleData.tag,showTitle:t.radio,type:t.moduleData.type,feedback:!1}})],1),e("div",{staticClass:"groupon-allocate",attrs:{slot:"setting"},slot:"setting"},[t.moduleData.tips?e("e-suggest",{key:t.moduleData.moduleType,attrs:{suggest:t.moduleData.tips}}):t._e(),e("header",{staticClass:"title"},[t._v("\n      "+t._s(t.activityTitle)+"\n      "),"miniprogram"===t.portal?e("div",{staticClass:"text-12 color-gray mts"},[t._v("\n        营销活动配置即将发布，敬请期待...\n      ")]):t._e()]),e("div",{staticClass:"groupon-item-setting clearfix"},[e("div",{staticClass:"groupon-item-setting__section clearfix"},[e("setting-cell",{staticClass:"mbm",attrs:{title:t.$t("groupPurchase.title")}},[e("el-radio",{attrs:{label:"show"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("groupPurchase.display")))]),e("el-radio",{attrs:{label:"unshow"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("groupPurchase.noDisplay")))])],1),e("p",{staticClass:"pull-left section-left"},[t._v(t._s(t.$t("groupPurchase.activity")))]),e("div",{staticClass:"section-right"},[e("div",{staticClass:"required-option"},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.activityName,expression:"!activityName"}],attrs:{type:"info",size:"mini"},on:{click:t.openModal}},[t._v(t._s(t.$t("groupPurchase.selectActivity")))]),e("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.activityName,expression:"activityName"}],staticClass:"courseLink",attrs:{closable:"","disable-transitions":!0},on:{close:t.handleClose}},[e("el-tooltip",{staticClass:"text-content ellipsis",attrs:{effect:"dark",placement:"top"}},[e("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.activityName))]),e("span",[t._v(t._s(t.activityName))])])],1)],1)])],1),e("div",{staticClass:"groupon-item-setting__section clearfix"},[e("p",{staticClass:"pull-left section-left"},[t._v(t._s(t.$t("groupPurchase.activityLabel")))]),e("div",{staticClass:"section-right pull-left"},[e("el-input",{attrs:{size:"mini",maxLength:"8",placeholder:t.$t("groupPurchase.placeholder"),clearable:""},model:{value:t.copyModuleData.tag,callback:function(e){t.$set(t.copyModuleData,"tag",e)},expression:"copyModuleData.tag"}})],1)])])],1),e("course-modal",{attrs:{slot:"modal",visible:t.modalVisible,limit:"1",courseList:t.courseSets,type:t.moduleData.type},on:{visibleChange:t.modalVisibleHandler,updateCourses:t.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,nt=a("a026"),rt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("slide_show"===t.type)for(var a=0;a<t.data.length;a+=1)if(!t.data[a].image.uri)return e&&nt.default.prototype.$message({message:"请完善轮播图模块信息！",type:"error"}),!0;if("course_list"===t.type){var i=t.data.items.length;if(!t.data.title||"custom"===t.data.sourceType&&!i)return e&&nt.default.prototype.$message({message:"请完善课程模块信息！",type:"error"}),!0}if("graphic_navigation"===t.type)for(var s=0;s<t.data.length;s+=1){var o=t.data[s],l=o.image.uri,n=o.title,r=o.link.type;if(!l||!n||!r)return e&&nt.default.prototype.$message({message:"请完善图文导航模块信息！",type:"error"}),!0}if("classroom_list"===t.type){var c=t.data.items.length;if(!t.data.title||"custom"===t.data.sourceType&&!c)return e&&nt.default.prototype.$message({message:"请完善班级模块信息！",type:"error"}),!0}if("open_course_list"===t.type){var u=t.data.items.length;if(!t.data.title||"custom"===t.data.sourceType&&!u)return e&&nt.default.prototype.$message({message:"请完善公开课模块信息！",type:"error"}),!0}if("item_bank_exercise"===t.type){var d=t.data.items.length;if(!t.data.title||"custom"===t.data.sourceType&&!d)return e&&nt.default.prototype.$message({message:"请完善题库模块信息！",type:"error"}),!0}return"poster"!==t.type||t.data.image.uri?["groupon","seckill","cut"].includes(t.type)&&!t.data.activity.id?(e&&nt.default.prototype.$message({message:"请完善".concat({seckill:"秒杀",cut:"砍价",groupon:"拼团"}[t.type],"模块信息！"),type:"error"}),!0):"coupon"===t.type&&!t.data.items.length&&(e&&nt.default.prototype.$message({message:"请完善优惠券模块信息！",type:"error"}),!0):(e&&nt.default.prototype.$message({message:"请完善广告模块信息！",type:"error"}),!0)},ct={components:{carousel:_,course:V,poster:Z,"marketing-activity":lt,coupon:tt,vip:at,openCourse:F,graphicNavigation:G,Search:st,itemBank:q},props:{module:{type:Object,default:function(){return{}}},active:{type:Boolean,default:!0},index:{type:Number,default:0},moduleKey:{type:String,default:"demo-1"},saveFlag:{type:Number,default:0},startValidate:{type:Boolean,default:!1}},computed:{isActive:{get:function(){return this.active},set:function(){this.active||this.$emit("activeModule",this.index)}},validateFuc:function(){return!!this.saveFlag&&rt(this.module)}},watch:{saveFlag:function(t){t&&this.triggerValidate()}},created:function(){this.module.moduleType=this.moduleKey,this.triggerValidate()},updated:function(){this.module.moduleType=this.moduleKey},data:function(){return{incomplete:!1,moduleDefault:s.f}},methods:{activeModule:function(){this.isActive=!0},updateHandler:function(){},triggerValidate:function(){if("poster"===this.module.type){var t=this.module.data.link;"url"===t.type?t.target=null:t.url=""}var e=rt(this.module,this.startValidate);this.$emit("updateModule",{incomplete:e,updateModule:this.module})},handleRemove:function(t,e){this.$emit("removeModule",t)}}},ut=Object(r.a)(ct,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"module-template",on:{click:t.activeModule}},[t.module.type===t.moduleDefault.slideShow.type?e("carousel",{key:"carousel"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.courseList.type?e("course",{key:"course"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.classList.type?e("course",{key:"classroom"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.poster.type?e("poster",{key:"poster"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.coupon.type?e("coupon",{key:"coupon"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.vip.type?e("vip",{key:"vip"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.graphicNavigation.type?e("graphic-navigation",{key:"navigation"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.search.type?e("Search",{key:"search"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.openCourseList.type?e("open-course",{key:"openCourse"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),t.module.type===t.moduleDefault.itemBankList.type?e("item-bank",{key:"itemBankExercise"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),[t.moduleDefault.groupon.type,t.moduleDefault.cut.type,t.moduleDefault.seckill.type].includes(t.module.type)?e("marketing-activity",{key:"marketing"+t.module.oldIndex,attrs:{active:t.isActive,moduleData:t.module,incomplete:t.validateFuc},on:{updateModule:function(e){return t.updateHandler(t.module,t.index)}}}):t._e(),e("img",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"icon-delete",attrs:{src:"static/images/delete.png"},on:{click:function(e){return t.handleRemove(t.module,t.index)}}})],1)}),[],!1,null,null,null);e.a=ut.exports},"5f16":function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"c",(function(){return p})),a.d(e,"d",(function(){return m})),a.d(e,"h",(function(){return g})),a.d(e,"g",(function(){return h})),a("386d"),a("28a5");var i=window.location,s=i.protocol,o=i.pathname,l=i.host,n="".concat(s,"//").concat(l).concat(o.split("/").slice(0,-1).join("/"),"/"),r={slideShow:{type:"slide_show",moduleType:"",data:[{title:"",image:{},link:{type:"course",target:null,url:""}}]},courseList:{type:"course_list",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"0",sort:"recommendedSeq",lastDays:"0",limit:"4",displayStyle:"distichous",items:[]}},classList:{type:"classroom_list",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"0",sort:"recommendedSeq",lastDays:"0",limit:"4",displayStyle:"distichous",items:[]}},openCourseList:{type:"open_course_list",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"0",limitDays:"0",limit:"4",displayStyle:"distichous",items:[]}},itemBankList:{type:"item_bank_exercise",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"",sort:"recommendedSeq",lastDays:"0",limit:"4",displayStyle:"distichous",items:[]}},graphicNavigation:{type:"graphic_navigation",moduleType:"navigation-1",data:[{title:"班级",image:{url:"",uri:"".concat(n,"static/images/hotclass.png")},link:{type:"classroom",target:"跳转班级“全部”列表",url:""}},{title:"课程",image:{url:"",uri:"".concat(n,"static/images/openCourse.png")},link:{type:"openCourse",target:"跳转公开课“全部”列表",url:""}},{title:"会员专区",image:{url:"",uri:"".concat(n,"static/images/openCourse.png")},link:{type:"openCourse",target:"跳转会员页面",url:""}}]},h5GraphicNavigation:{type:"graphic_navigation",moduleType:"navigation-1",data:[{title:"班级",image:{url:"",uri:"static/images/hotclass.png"},link:{type:"classroom",target:"跳转班级“全部”列表",url:""}},{title:"课程",image:{url:"",uri:"static/images/openCourse.png"},link:{type:"course",target:"跳转公课程“全部”列表",url:""}},{title:"会员专区",image:{url:"",uri:"static/images/vip.png"},link:{type:"vip",target:"跳转会员页面",url:""}}]},poster:{type:"poster",moduleType:"",data:{image:{},link:{type:"course",target:{},url:""},responsive:"1"}},groupon:{type:"groupon",moduleType:"",data:{activity:{},tag:"",titleShow:"show"}},cut:{type:"cut",moduleType:"",data:{activity:{},tag:"",titleShow:"show"}},seckill:{type:"seckill",moduleType:"",data:{activity:{},tag:"",titleShow:"show"}},coupon:{type:"coupon",moduleType:"",data:{items:[],titleShow:"show"}},vip:{type:"vip",moduleType:"",data:{items:[],sort:"asc",title:"",titleShow:"show"}},search:{type:"search",moduleType:"",data:{}}},c=[{name:"sidebar.carousel",default:r.slideShow},{name:"sidebar.courseList",default:r.courseList},{name:"sidebar.classList",default:r.classList},{name:"sidebar.imageAds",default:r.poster},{name:"sidebar.coupon",default:r.coupon},{name:"sidebar.memberArea",default:r.vip}],u=[{name:"sidebar.groupPurchase",default:r.groupon},{name:"sidebar.bargain",default:r.cut},{name:"sidebar.flashSale",default:r.seckill}],d=[{name:"sidebar.carousel",default:r.slideShow},{name:"sidebar.courseList",default:r.courseList},{name:"sidebar.classList",default:r.classList},{name:"sidebar.imageAds",default:r.poster},{name:"sidebar.coupon",default:r.coupon},{name:"sidebar.memberArea",default:r.vip},{name:"sidebar.navigation",default:r.graphicNavigation},{name:"sidebar.openClassList",default:r.openCourseList},{name:"sidebar.questionBankList",default:r.itemBankList}],p=[{name:"sidebar.carousel",default:r.slideShow,icon:"icon-lunbotu"},{name:"sidebar.courseList",default:r.courseList,icon:"icon-kechengliebiao"},{name:"sidebar.classList",default:r.classList,icon:"icon-banjiliebiao"},{name:"sidebar.imageAds",default:r.poster,icon:"icon-tuwenguanggao"},{name:"sidebar.navigation",default:r.h5GraphicNavigation,icon:"icon-tuwendaohang"},{name:"sidebar.search",default:r.search,icon:"icon-sousuo"},{name:"sidebar.questionBankList",default:r.itemBankList}],m=[{name:"sidebar.coupon",default:r.coupon,icon:"icon-youhuiquan"},{name:"sidebar.groupPurchase",default:r.groupon,icon:"icon-pintuan"},{name:"sidebar.bargain",default:r.cut,icon:"icon-kanjia"},{name:"sidebar.flashSale",default:r.seckill,icon:"icon-miaosha"}],g={classroom_list:{key:"title"},course_list:{key:"displayedTitle"},open_course_list:{key:"title"},groupon:{key:"name"},coupon:{key:"name"},cut:{key:"name"},seckill:{key:"name"}},h={course_list:{text:"课程"},classroom_list:{text:"班级"},open_course_list:{text:"公开课"},question_bank_list:{text:"题库"},groupon:{text:"活动"},coupon:{text:"优惠券"},cut:{text:"活动"},seckill:{text:"活动"}}},6955:function(t,e,a){},"7fb5":function(t,e,a){},a89d:function(t,e,a){"use strict";e.a=function(t,e){for(var a={},i=0;i<t.length&&t[i][e];i+=1)a[t[i][e]]=t[i];return a}},bd98:function(t,e,a){},ece5:function(t,e,a){},f1d4:function(t,e,a){"use strict";a("ece5")}}]);