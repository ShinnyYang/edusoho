(window.webpackJsonp=window.webpackJsonp||[]).push([["order"],{"639e":function(t,e,s){"use strict";s("7f7f"),s("c5f6");var a={name:"ECoupon",mixins:[s("8813").a],props:{showButton:{type:Boolean,default:!0},showSelecet:{type:Boolean,default:!1},coupon:{type:Object,default:function(){return{}}},index:{type:Number,default:-1},active:{type:Number,default:-1}},data:function(){return{}},created:function(){},methods:{onSelect:function(){this.showSelecet&&this.$emit("chooseItem",{index:this.index,itemData:this.coupon})},couponHandle:function(){this.$emit("couponHandle",this.coupon)}}},i=s("2877"),o=Object(i.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"coupon-container e-coupon",on:{click:t.onSelect}},[e("div",{staticClass:"e-coupon__container clearfix e-coupon-single"},[e("div",{key:t.index,staticClass:"e-coupon__body"},[e("div",{staticClass:"e-coupon__header clearfix"},[e("span",{staticClass:"e-coupon__price",domProps:{innerHTML:t._s(t.priceHtml(t.coupon))}}),e("div",{staticClass:"e-coupon__name"},[e("div",{staticClass:"text-overflow text-14 coupon-name"},[t._v("\n            "+t._s(t.coupon.name||t.$t("e.coupon"))+"\n          ")]),t.coupon.deadlineMode&&"time"!==t.coupon.deadlineMode?t._e():e("span",{staticClass:"text-10"},[t._v(t._s(t.timeExpire(t.coupon.createdTime,t.coupon.deadline)))]),"day"!==t.coupon.deadlineMode||t.coupon.currentUserCoupon?t._e():e("span",{staticClass:"text-10"},[t._v(t._s(t.$t("e.validWithinDayAfterReceiving",{number:t.coupon.fixedDay})))]),"day"===t.coupon.deadlineMode&&t.coupon.currentUserCoupon?e("span",{staticClass:"text-10"},[t._v(t._s(t.timeExpire(t.coupon.createdTime,t.coupon.currentUserCoupon.deadline)))]):t._e()]),t.coupon.currentUserCoupon?e("div",{staticClass:"stamp"}):t._e(),t.showSelecet?e("div",{staticClass:"e-coupon__select-circle"},[e("i",{staticClass:"select-icon",class:t.index===t.active?"h5-icon h5-icon-check":""})]):t._e(),t.showButton&&!t.coupon.currentUserCoupon?e("span",{staticClass:"coupon-button",on:{click:t.couponHandle}},[t._v(t._s(t.$t("e.getCoupons")))]):t._e()]),e("div",{staticClass:"e-coupon__middle"}),e("div",{staticClass:"e-coupon__bottom text-overflow"},[t._v("\n        "+t._s(t.$t("e.availableRange"))+"："+t._s(t.scopeFilter(t.coupon))+"\n      ")])])])])}),[],!1,null,null,null);e.a=o.exports},8807:function(t,e,s){"use strict";s("a481"),s("ac6a"),s("456d"),s("7f7f"),s("c5f6");var a=s("db72"),i=s("2f62"),o={props:{type:{type:String,default:"price"},course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}}},data:function(){return{isFree:0==this.course.price}},computed:Object(a.a)(Object(a.a)({},Object(i.e)(["courseSettings"])),{},{rate:function(){return parseInt(this.course.publishedTaskNum)?parseInt(this.course.progress.percent):0},showStudent:function(){return!this.courseSettings||Number(this.courseSettings.show_student_num_enabled)}}),filters:{numFilter:function(t){return t?parseFloat(t).toFixed(2):""}},methods:{goToPay:function(){this.$router.replace({path:"/pay",query:{id:this.order.id,source:"order",sn:this.order.sn,targetId:this.order.targetId,targetType:this.order.targetType}})},displayPrice:function(t){var e,s=this.type;if("order"===s){var a=t.currency,i=t.coinAmount,o=t.coinName,r=t.amount;return"coin"===a?(e=i?(i/100).toFixed(2):"",e="".concat(e," ").concat(o)):"RMB"===a&&(e=r?(r/100).toFixed(2):"",e="¥ ".concat(e)),e}if("confirmOrder"===s){var n=t.priceType,c=t.coinPayAmount,l=t.coinName,u=t.totalPrice;return"Coin"===n?(e=c?parseFloat(c).toFixed(2):"",e="".concat(e," ").concat(l)):"RMB"===n&&(e="¥ ".concat(u)),e}}}},r=s("2877"),n=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"e-course-switch-box"},["price"===t.type?e("div",{staticClass:"switch-box"},[e("span",{staticClass:"text-12"},[t.isFree?e("p",{staticClass:"free"},[t._v(t._s(t.$t("e.free")))]):t._e(),t.isFree?t._e():e("p",{staticClass:"price"},[t._v("¥ "+t._s(t.course.price))])]),e("span",{staticClass:"text-12"},[t.showStudent?e("p",[t._v(t._s(t.$t("e.personStudying",{number:t.course.studentNum})))]):t._e()])]):t._e(),"order"===t.type?e("div",{staticClass:"switch-box"},[e("span",{staticClass:"text-12"},[t.isFree?e("p",{staticClass:"free"},[t._v(t._s(t.$t("e.free")))]):t._e(),t.isFree?t._e():e("p",{staticClass:"price"},[t._v("\n        "+t._s(t.displayPrice(t.order.priceConvert))+"\n      ")])]),e("span",{staticClass:"text-12"},["created"!==t.order.status&&"paying"!==t.order.status?e("p",{class:t.order.status},[t._v("\n        "+t._s(t._f("filterOrderStatus")(t.order.status))+"\n      ")]):t._e(),"created"===t.order.status||"paying"===t.order.status?e("span",{staticClass:"order-pay",on:{click:t.goToPay}},[t._v(t._s(t._f("filterOrderStatus")(t.order.status)))]):t._e()])]):t._e(),"confirmOrder"===t.type?e("div",{staticClass:"switch-box"},[e("span",{staticClass:"text-12"},[e("p",{staticClass:"price"},[t._v(t._s(t.displayPrice(t.order)))])])]):t._e(),"rank"===t.type?e("div",{staticClass:"rank-box"},[e("div",{staticClass:"progress round-conner"},[e("div",{staticClass:"curRate round-conner",style:{width:t.rate+"%"}})]),e("span",[t._v(t._s(this.rate)+"%")])]):t._e()])}),[],!1,null,null,null).exports,c=s("a556"),l={components:{switchBox:n},props:{course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}},classroom:{type:Object,default:function(){return{}}},type:{type:String,default:"price"},feedback:{type:Boolean,default:!0},typeList:{type:String,default:"course_list"},duration:{type:[Number,String],default:0}},data:function(){return{pathName:this.$route.name}},computed:{imgSrc:function(){if("classroom_list"===this.typeList)return this.course.cover.middle;var t=this.course.courseSet;return(t?t.cover.middle:this.order.cover.middle)||""},title:function(){return"classroom_list"===this.typeList?this.course.title:this.course.courseSetTitle||(this.course.courseSet?this.course.courseSet.title:"")||this.order.title},teachPlan:function(){return!!this.course.title&&this.course.title},imgClass:function(){return"vip"===this.typeList?"e-vip__img":"e-course__img"}},watch:{course:{handler:function(t){var e=t.courseSet;if("miniprogramSetting"===this.pathName&&e)for(var s=Object.keys(e.cover),a=0;a<s.length;a++)e.cover[s[a]]=e.cover[s[a]].replace(/^(\/\/)|(http:\/\/)/,"https://")},immediate:!0}},methods:{onClick:function(t){var e,s="order"===this.type;if(!s&&!parseInt(null===(e=this.course)||void 0===e?void 0:e.canLearn))return Object(c.a)("course");if(this.feedback&&"vip"!==this.typeList){var a=this.course.id||this.order.targetId;"SPAN"!==t.target.tagName?s?"course"===this.typeList||"classroom"===this.typeList?this.$router.push({path:"/goods/".concat(this.order.goodsId,"/show"),query:{targetId:this.order.targetId,type:this.typeList+"_list"}}):location.href=this.order.targetUrl:"course"!==this.typeList&&("classroom_list"===this.typeList&&this.$router.push({path:"/classroom/".concat(a)}),"course_list"===this.typeList&&this.$router.push({path:"/course/".concat(a)})):console.log(t.target.tagName)}}}},u=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"e-course"},[e("div",{staticClass:"clearfix",on:{click:t.onClick}},[e("div",{staticClass:"e-course__left pull-left relative"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgSrc,expression:"imgSrc"}],class:t.imgClass}),"2k"===t.course.videoMaxLevel?e("div",{staticClass:"absolute left-0 bottom-0 px-8 text-white text-12 font-medium bg-black bg-opacity-80",staticStyle:{"padding-top":"2px","padding-bottom":"2px","line-height":"20px","border-top-right-radius":"12px"}},[t._v("2K 优享")]):t._e(),"4k"===t.course.videoMaxLevel?e("div",{staticClass:"absolute left-0 bottom-0 px-8 text-[#492F0B] text-12 font-medium bg-gradient-to-l from-[#F7D27B] to-[#FCEABE]",staticStyle:{"padding-top":"2px","padding-bottom":"2px","line-height":"20px","border-top-right-radius":"12px"}},[t._v("4K 臻享")]):t._e()]),e("div",{staticClass:"e-course__right pull-left"},["confirmOrder"===t.type?e("div",{staticClass:"e-course__title course-confirm-title"},[t._v("\n        "+t._s(t.title)+"\n      ")]):e("div",[e("div",{staticClass:"e-course__title line-clamp-2"},[t._v(t._s(t.title))]),"classroom_list"===t.typeList?e("div",{staticClass:"e-course__count"},[t._v("\n          "+t._s(t.$t("e.totalOfTwoCourses",{number:t.course.courseNum}))+"\n        ")]):t._e(),"course_list"===t.typeList?e("div",{staticClass:"e-course__project"},[t.teachPlan?e("span",{staticClass:"text-overflow",staticStyle:{"max-width":"192px"}},[t._v(t._s(t.teachPlan))]):t._e()]):t._e()]),e("switchBox",{attrs:{type:t.type,course:t.course,order:t.order,"student-num":t.course.studentNum,"published-task-num":t.course.publishedTaskNum}})],1)])])}),[],!1,null,null,null);e.a=u.exports},"8b8e":function(t,e,s){"use strict";s.r(e),s("ac6a"),s("456d");var a=s("c80c"),i=(s("96cf"),s("3b8d")),o=(s("a481"),s("e7e5"),s("d399")),r=(s("6762"),s("2fdb"),s("c5f6"),s("db72")),n=s("2f62"),c=s("639e"),l=s("8807"),u=s("3ce7"),p=s("2095"),d=s("4928"),h=s("2ef0"),m=s.n(h),f={props:{item:{type:Object}},methods:{goItemBankExercise:function(t){this.$router.push({name:"item_bank_exercise",params:{id:t}})}}},g=s("2877"),v={components:{OrderItemBank:Object(g.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center w-full p-12 rounded-6",staticStyle:{"background-color":"#FAFAFA","border-radius":"6px"},on:{click:function(e){return t.goItemBankExercise(t.item.itemBankExercise.id)}}},[e("img",{staticClass:"mr-8 flex-none",staticStyle:{width:"18px"},attrs:{src:"static/images/itemBankExercise/order-item-bank-icon.png",alt:""}}),e("div",{staticClass:"text-14 w-full font-normal truncate",staticStyle:{color:"#5E6166"}},[t._v(t._s(t.item.itemBankExercise.title))]),e("div",{staticClass:"flex-none whitespace-nowrap ml-24"},["0.00"===t.item.itemBankExercise.price?e("div",{staticClass:"text-16 font-semibold",staticStyle:{color:"#FF7E56"}},[t._v("免费")]):e("div",{staticClass:"flex items-center space-x-8"},[e("div",{staticClass:"text-12 font-normal line-through mt-4",staticStyle:{color:"#FF7E56"}},[t._v(t._s("¥".concat(t.item.itemBankExercise.price)))]),e("div",{staticClass:"text-16 font-semibold",staticStyle:{color:"#FF7E56"}},[t._v("免费")])])])])}),[],!1,null,null,null).exports,eCourse:l.a,coupon:c.a,infoCollection:d.a},mixins:[p.a],data:function(){return{course:{availableCoupons:[],courseSet:{cover:{}}},activeItemIndex:-1,showList:!1,itemData:null,couponNumber:0,preferenceCode:"",targetType:this.$route.query.targetType,targetId:this.$route.params.id,targetUnit:this.$route.params.unit,targetNum:this.$route.params.num,vipOrderType:this.$route.params.type,detail:{},payWay:"",selected:!0,paySettings:{},inWechat:this.isWeixinBrowser(),timeoutId:-1,isShowForm:!1,hasCollectUserInfo:!1,isAgree:!1,purchaseAgreement:{},showPurchaseAgreement:!1,agreementDisabled:!0,bindItemBankList:[],itemBankPopupVisible:!1}},created:function(){"升级"===this.vipOrderType&&(this.targetUnit=void 0,this.targetNum=void 0),this.fetchPurchaseAgreement(),this.confirmOrder(),this.getSettings(),this.getBindItemBank()},computed:Object(r.a)(Object(r.a)({},Object(n.e)(["wechatSwitch","isLoading","couponSwitch"])),{},{total:function(){var t,e=this.course,s=e.priceType,a=e.coinName,i=e.totalPrice;if(this.itemData){var o=this.itemData,r=o.type,n=o.rate;t="minus"===r?Math.max(i-n,0).toFixed(2):i?Number(i*n*.1).toFixed(2):""}else t=i?Number(i).toFixed(2):"";return"Coin"===s?t="".concat(t," ").concat(a):"RMB"===s&&(t="¥ ".concat(t)),t},couponMoney:function(){if(this.itemData){var t="discount"===this.itemData.type,e=this.itemData.rate;return t&&(e=Number(this.course.totalPrice-this.course.totalPrice*this.itemData.rate*.1).toFixed(2)),this.couponNumber=e,e}},couponShow:function(){return 0==this.course.availableCoupons.length?this.$t("order.noCouponsAvailable"):this.couponNumber?parseFloat(this.itemData.rate):this.course.availableCoupons.length+this.$t("order.available")},getValidity:function(){return this.$route.query.expiryScope||this.$t("order.longTermEffective")},validPayWay:function(){return!(this.IsCollectUserInfoType&&!this.isReqUserInfoCollect)&&!(this.needCollectUserInfo&&!this.isRequserInfoCollectForm)&&(this.paySettings.wxpayEnabled||this.paySettings.alipayEnabled&&!this.inWechat&&this.userInfoCollect)},IsCollectUserInfoType:function(){return["course","classroom","vip"].includes(this.targetType)},showCollectEntry:function(){return Object.keys(this.userInfoCollectForm).length>0}}),filters:{filterPrice:function(t){return parseFloat(t).toFixed(2)},couponType:function(t){return"discount"==t?"折":"元"}},watch:{},beforeRouteLeave:function(t,e,s){clearTimeout(this.timeoutId),s()},methods:{shouldCollectUserInfo:function(){this.isAgree||1!=this.purchaseAgreement.enabled?this.IsCollectUserInfoType&&!this.hasCollectUserInfo&&this.hasUserInfoCollectForm?Object(o.a)("请先提交信息后再提交订单"):this.handleSubmit():Object(o.a)("请先勾选协议")},showUserInfoCollectForm:function(){this.isShowForm=!0},hideUserInfoCollectForm:function(){this.isShowForm=!1},getInfoCollection:function(){var t=this;o.a.loading({duration:0,message:"加载中...",forbidClick:!0});var e={action:"buy_before",targetType:this.targetType,targetId:this.targetId};this.getInfoCollectionEvent(e).then((function(e){if(Object.keys(e).length)return t.needCollectUserInfo=!0,void t.getInfoCollectionForm(e.id).then((function(){o.a.clear()}));o.a.clear()}))},submitForm:function(){this.hideUserInfoCollectForm(),this.hasCollectUserInfo=!0},handleSubmit:function(){if(0==this.total)this.createOrder("free");else{if(!this.validPayWay)return void o.a.fail("无可用支付方式");this.createOrder("pay")}},usePreferenceCode:function(){var t=this,e=this;u.a.exchangePreferential({query:{code:this.preferenceCode},data:{targetType:this.targetType,targetId:this.targetId,action:"receive"}}).then((function(s){if(s.success){e.itemData=s.data;var a=e.course.availableCoupons.length||0;e.$set(t.course.availableCoupons,a,s.data),e.preferenceCode="",e.showList=!1}else s.error&&o.a.fail(s.error.message)})).catch((function(t){console.log(t)}))},disuse:function(){this.showList=!1,this.activeItemIndex=-1,this.itemData=null,this.couponNumber=0},chooseItem:function(t){this.activeItemIndex=t.index,this.itemData=t.itemData,this.showList=!1},confirmOrder:function(){var t=this,e={targetType:this.targetType,targetId:this.targetId,num:this.targetNum,unit:this.targetUnit,platform:"h5",platform_version:this.$version};u.a.confirmOrder({data:e}).then((function(e){if(t.course=e,t.couponSwitch){var s=e.availableCoupons;t.itemData=s.length>0?s[0]:null}t.IsCollectUserInfoType&&t.getInfoCollection()})).catch((function(e){t.$toast(e.message),setTimeout((function(){t.$router.go(-1)}),2e3)}))},routerChange:function(){var t=this;this.wechatSwitch?this.$router.replace({path:"/pay_success",query:{targetType:this.targetType,targetId:this.targetId}}):"vip"===this.targetType?this.$router.replace({path:"/".concat(this.targetType)},(function(){t.$router.go(-1)})):this.$router.replace({path:"/".concat(this.targetType,"/").concat(this.targetId)},(function(){t.$router.go(-1)}))},getSettings:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getSettings({query:{type:"payment"}}).catch((function(t){o.a.fail(t.message)}));case 2:t.paySettings=e.sent,t.paySettings.alipayEnabled&&!t.inWechat?t.payWay="Alipay_LegacyH5":t.paySettings.wxpayEnabled&&(t.payWay="WechatPay_H5");case 4:case"end":return e.stop()}}),e)})))()},createOrder:function(t){var e=this,s=this;u.a.createOrder({data:{targetType:this.targetType,targetId:this.targetId,isOrderCreate:1,couponCode:this.itemData?this.itemData.code:"",unit:this.targetUnit,num:this.targetNum,platform:"h5",platform_version:this.$version}}).then((function(a){"free"==t?s.routerChange():"pay"==t&&(e.detail=Object.assign({},a),s.handlePay())})).catch((function(t){o.a.fail(t.message)}))},isWeixinBrowser:function(){return/micromessenger/.test(navigator.userAgent.toLowerCase())},getTradeInfo:function(t){var e=this;return u.a.getTrade({query:{tradesSn:t}}).then((function(s){s.isPaid?window.location.href=s.paidSuccessUrlH5:e.timeoutId=setTimeout((function(){e.getTradeInfo(t)}),2e3)})).catch((function(t){o.a.fail(t.message)}))},handlePay:function(){var t=this;if(this.validPayWay)if("WechatPay_H5"===this.payWay&&this.inWechat)window.location.href="".concat(window.location.origin,"/pay/center/wxpay_h5?pay_amount=")+"".concat(this.detail.pay_amount,"&title=").concat(this.detail.title,"&sn=").concat(this.detail.sn,"&targetType=").concat(this.targetType,"&targetId=").concat(this.targetId,"&payWay=").concat(this.payWay);else{var e=window.location.origin+window.location.pathname+"#/pay_center?targetType=".concat(this.targetType,"&targetId=").concat(this.targetId,"&payWay=").concat(this.payWay);u.a.createTrade({data:{gateway:this.payWay,type:"purchase",orderSn:this.detail.sn,app_pay:"Y",success_url:e}}).then((function(e){"WechatPay_H5"!==t.payWay?window.location.href=e.payUrl:t.getTradeInfo(e.tradeSn).then((function(){window.location.href=e.mwebUrl}))})).catch((function(t){o.a.fail(t.message)}))}},fetchPurchaseAgreement:function(){var t=this;u.a.getPurchaseAgreement().then((function(e){t.purchaseAgreement=e,1==e.open&&(t.showPurchaseAgreement=!0,t.initAgreeContinueDisabled()),t.agreementDisabled=!1}))},handleClickAgree:function(){this.isAgree?this.isAgree=!1:0==this.purchaseAgreement.open?this.isAgree=!this.isAgree:this.showPurchaseAgreement=!0},handleClickViewAgreement:function(){this.showPurchaseAgreement=!0},handleClickAgreeContinue:function(){this.isAgree=!0,this.showPurchaseAgreement=!1},initAgreeContinueDisabled:function(){var t=this;this.$nextTick((function(){var e=t.$refs.agreement,s=e.offsetHeight,a=e.scrollHeight;if(!(a<=s)){t.agreementDisabled=!0;var i=a-s;t.throttledScrollHandler=m.a.debounce((function(){t.handleScroll(e,i)}),100),e.addEventListener("scroll",t.throttledScrollHandler)}}))},handleScroll:function(t,e){e-t.scrollTop<=60?(t.removeEventListener("scroll",this.throttledScrollHandler),this.agreementDisabled=!1):this.agreementDisabled=!0},getBindItemBank:function(){var t=this;return Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getBindItemBank({params:{bindType:t.targetType,bindId:t.targetId}});case 2:t.bindItemBankList=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},y=(s("9ed7"),Object(g.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"order"},[e("div",{staticClass:"goods-info"},[t.isLoading?e("e-loading"):t._e(),Object.keys(t.course).length>0?e("e-course",{attrs:{"type-list":t.targetType,duration:t.course.duration,order:t.course,course:t.course,type:"confirmOrder"}}):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.couponSwitch,expression:"couponSwitch"}],staticClass:"order-coupon"},[e("div",{staticClass:"coupon-column",on:{click:function(e){t.showList=!0}}},[e("span",[t._v(t._s(t.$t("order.coupon")))]),e("span",{class:["red",t.itemData?"coupon-money":""]},[t._v(t._s(t.couponShow)),t.itemData?e("span",{staticClass:"coupon-type"},[t._v(t._s(t._f("couponType")(t.itemData.type)))]):t._e(),e("i",{staticClass:"iconfont icon-arrow-right"})])]),e("van-popup",{staticClass:"e-popup full-height-popup coupon-popup",attrs:{overlay:!1,position:"bottom"},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[e("van-nav-bar",{staticClass:"nav-bar",attrs:{"left-arrow":!0,title:t.$t("order.coupon")},on:{"click-left":t.disuse}}),e("div",{class:["btn-coupon-exit",{active:t.activeItemIndex<0}],on:{click:t.disuse}},[t._v("\n          "+t._s(t.$t("order.doNotUseDiscount"))+" "),e("i",{staticClass:"iconfont icon-About"})]),e("div",{staticClass:"e-popup__content coupon-popup__content"},[e("div",{staticClass:"coupon-number-change"},[e("van-field",{attrs:{center:"",border:"",clearable:"",placeholder:t.$t("order.couponCode")},model:{value:t.preferenceCode,callback:function(e){t.preferenceCode=e},expression:"preferenceCode"}},[e("van-button",{attrs:{slot:"button",disabled:!t.preferenceCode,size:"small",type:"primary"},on:{click:t.usePreferenceCode},slot:"button"},[t._v(t._s(t.$t("order.use")))])],1)],1),t._l(t.course.availableCoupons,(function(s,a){return e("coupon",{key:a,attrs:{coupon:s,index:a,active:t.activeItemIndex,"show-button":!1,"show-selecet":!0},on:{chooseItem:t.chooseItem}})})),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.course.availableCoupons.length,expression:"!course.availableCoupons.length"}],staticClass:"coupon-empty"},[e("img",{staticClass:"empty-img",attrs:{src:"static/images/coupon_empty.png"}}),e("div",{staticClass:"empty-text"},[t._v(t._s(t.$t("order.noCoupons")))])])],2)],1)],1),"vip"!==t.targetType?e("div",{staticClass:"order-goods-item"},[e("span",[t._v(t._s(t.$t("order.validity")))]),e("span",{staticClass:"gray-dark",domProps:{innerHTML:t._s(t.getValidity)}})]):t._e(),e("div",{staticClass:"flex flex-col space-y-12 py-20",staticStyle:{"margin-left":"5.33333vw","margin-right":"5.33333vw","border-top":"1px solid #eee"}},[e("div",{staticClass:"flex justify-between"},[e("div",{staticClass:"font-normal",staticStyle:{color:"#9ba5b0","font-size":"3.73333vw"}},[t._v("赠送题库")]),t.bindItemBankList.length>2?e("div",{staticClass:"flex items-center font-normal",staticStyle:{color:"#9ba5b0","font-weight":"400","font-size":"3.73333vw"},on:{click:function(e){t.itemBankPopupVisible=!0}}},[e("div",{},[t._v(t._s("查看全部（".concat(t.bindItemBankList.length,"）")))]),e("van-icon",{attrs:{name:"arrow"}})],1):t._e()]),0===t.bindItemBankList.length?e("div",[e("div",{staticClass:"goods-info__title",staticStyle:{color:"#919399","font-weight":"400"}},[t._v("暂无题库")])]):e("div",{staticClass:"space-y-12"},[e("order-item-bank",{attrs:{item:t.bindItemBankList[0]}}),t.bindItemBankList.length>1?e("order-item-bank",{attrs:{item:t.bindItemBankList[1]}}):t._e()],1)]),e("van-popup",{style:{height:"80%"},attrs:{round:"",position:"bottom"},on:{close:function(e){t.itemBankPopupVisible=!1}},model:{value:t.itemBankPopupVisible,callback:function(e){t.itemBankPopupVisible=e},expression:"itemBankPopupVisible"}},[e("div",{staticClass:"fixed w-full left-0 flex items-center justify-between p-16",staticStyle:{"background-color":"#fff","border-top-left-radius":"16px","border-top-right-radius":"16px"}},[e("van-icon",{staticClass:"opacity-0",attrs:{name:"cross"}}),e("div",{staticClass:"text-16 font-normal",staticStyle:{color:"#37393D"}},[t._v("赠送题库")]),e("van-icon",{attrs:{name:"cross"},on:{click:function(e){t.itemBankPopupVisible=!1}}})],1),e("div",{staticClass:"flex flex-col",staticStyle:{"margin-top":"56px"}},t._l(t.bindItemBankList,(function(t){return e("div",{key:t.id,staticClass:"flex flex-col px-16 mb-12"},[e("order-item-bank",{attrs:{item:t}})],1)})),0)])],1),t.showCollectEntry?e("div",{staticClass:"personal-info",on:{click:t.showUserInfoCollectForm}},[t._v("\n    "+t._s(t.userInfoCollectForm.formTitle)+"\n    "),e("i",{staticClass:"iconfont icon-arrow-right"})]):t._e(),e("van-popup",{staticClass:"e-popup full-height-popup coupon-popup mt0",attrs:{overlay:!1,position:"bottom"},model:{value:t.isShowForm,callback:function(e){t.isShowForm=e},expression:"isShowForm"}},[e("van-nav-bar",{staticClass:"nav-bar",attrs:{"left-arrow":!0,title:this.userInfoCollectForm.formTitle},on:{"click-left":t.hideUserInfoCollectForm}}),e("info-collection",{attrs:{userInfoCollectForm:this.userInfoCollectForm,formRule:this.userInfoCollectForm.items},on:{submitForm:t.submitForm}})],1),e("div",{staticClass:"payPage"},[t.isLoading?e("e-loading"):t._e(),e("div",{staticClass:"payPage__order"},[e("div",{staticClass:"order__head"},[t._v("\n        "+t._s(t.$t("order.paymentWay"))+"\n      ")]),e("div",{staticClass:"order__infomation"},[e("div",{staticClass:"payWay"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.paySettings.alipayEnabled&&!t.inWechat,expression:"paySettings.alipayEnabled && !inWechat"}],class:["payWay__item",{"payWay__item--selected":"Alipay_LegacyH5"===t.payWay}],on:{click:function(e){t.payWay="Alipay_LegacyH5",t.selected=!0}}},[e("img",{staticClass:"correct",attrs:{src:"static/images/correct.png"}}),e("div",{staticClass:"right"}),e("img",{staticClass:"payWay__img",attrs:{src:"static/images/zfb.png"}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.paySettings.wxpayEnabled,expression:"paySettings.wxpayEnabled"}],class:["payWay__item",{"payWay__item--selected":"WechatPay_H5"===t.payWay}],on:{click:function(e){t.payWay="WechatPay_H5",t.selected=!1}}},[e("img",{staticClass:"correct",attrs:{src:"static/images/correct.png"}}),e("div",{staticClass:"right"}),e("img",{staticClass:"payWay__img",attrs:{src:"static/images/wx.png"}})])])]),1==t.purchaseAgreement.enabled?e("div",{staticClass:"order__agreement"},[e("van-checkbox",{attrs:{value:t.isAgree,"icon-size":"16",shape:"square"},on:{click:t.handleClickAgree}},[t._v("\n          我已阅读并同意"),e("span",{staticClass:"order__agreement__btn",on:{click:function(e){return e.stopPropagation(),t.handleClickViewAgreement.apply(null,arguments)}}},[t._v("《"+t._s(t.purchaseAgreement.title)+"》")])])],1):t._e()])],1),e("div",{staticClass:"order-footer"},[e("div",{staticClass:"order-footer__text"},[e("div",[t._v("\n        "+t._s(t.$t("order.pay"))+"："),e("span",{staticClass:"price"},[t._v(t._s(t.total))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.itemData,expression:"itemData"}],staticClass:"discount"},[t._v(t._s(t.$t("order.discounted"))+t._s(t.couponMoney))])]),e("div",{class:["order-footer__btn",{disabled:!t.validPayWay}],on:{click:t.shouldCollectUserInfo}},[t._v("\n      "+t._s(t.$t("order.pay2"))+"\n    ")])]),1==t.purchaseAgreement.enabled?e("van-dialog",{staticClass:"purchase-agreement",attrs:{"show-confirm-button":!1},model:{value:t.showPurchaseAgreement,callback:function(e){t.showPurchaseAgreement=e},expression:"showPurchaseAgreement"}},[e("h2",{staticClass:"purchase-agreement__title"},[t._v("《"+t._s(t.purchaseAgreement.title)+"》")]),1!=t.purchaseAgreement.open?e("van-icon",{staticClass:"purchase-agreement__close",attrs:{name:"cross"},on:{click:function(e){t.showPurchaseAgreement=!1}}}):t._e(),e("div",{ref:"agreement",staticClass:"purchase-agreement__content",class:{"purchase-agreement__content--btn":1==t.purchaseAgreement.open},domProps:{innerHTML:t._s(t.purchaseAgreement.content)}}),1==t.purchaseAgreement.open?e("van-button",{staticClass:"purchase-agreement__btn",attrs:{type:"primary",block:"",disabled:t.agreementDisabled},on:{click:t.handleClickAgreeContinue}},[t._v("同意并继续")]):t._e()],1):t._e()],1)}),[],!1,null,"059b0173",null));e.default=y.exports},"9ed7":function(t,e,s){"use strict";s("c0a0")},a556:function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s("e7e5");var a=s("d399"),i=s("6647"),o=function(t){switch(t){case"course":Object(a.a)(i.a.t("goods.courseClosedToast"));break;case"classroom":Object(a.a)(i.a.t("goods.classroomClosedToast"));break;case"exercise":Object(a.a)(i.a.t("goods.exerciseClosedToast"))}}},c0a0:function(t,e,s){}}]);