(window.webpackJsonp=window.webpackJsonp||[]).push([["register"],{"32a6":function(e,t,r){var n=r("241e"),i=r("c3a1");r("ce7e")("keys",(function(){return function(e){return i(n(e))}}))},"3e19":function(e,t,r){"use strict";r.r(t),r("8e6e"),r("ac6a"),r("456d");var n=r("e265"),i=r.n(n),o=r("a4bb"),a=r.n(o);function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,i={},o=a()(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(i.a){var s=i()(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r("e7e5");var c=r("d399"),l=(r("96cf"),r("3b8d")),d=r("bd86"),u=r("a262"),f=r("d863"),g=r("f13d"),h=r("2f62"),p=r("7185"),m=r("3ce7");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("8e6c");var y={components:{EDrag:g.a},mixins:[u.a,f.a],data:function(){return{registerInfo:{email:"",mobile:"",dragCaptchaToken:void 0,encrypt_password:"",code:"",smsToken:"",emailToken:"",type:"register"},showPassword:!1,showPasswordTip:!0,dragKey:0,errorMessage:{email:"",mobile:"",encrypt_password:""},validated:{email:!1,mobile:!1,encrypt_password:!1},count:{showCount:!1,num:120,codeBtnDisable:!1},userTerms:!1,privacyPolicy:!1,agreement:!1,popUpBottom:!1,registerType:"",registerMode:""}},computed:v(v({},Object(h.e)({isLoading:function(e){return e.isLoading}})),{},{btnDisable:function(){return"mobile"===this.registerType?!(this.registerInfo.mobile&&this.registerInfo.encrypt_password&&this.registerInfo.code):"email"===this.registerType?!(this.registerInfo.email&&this.registerInfo.encrypt_password&&this.registerInfo.code):void 0},showRegisterModeTabs:function(){return"email_or_mobile"===this.registerMode}}),created:function(){this.getPrivacySetting()},mounted:function(){this.registerInfo.registerVisitId=window._VISITOR_ID,this.getRegisterSettings()},methods:v(v({},Object(h.c)(["addUser","setMobile","sendSmsCenter","userLogin","sendEmailCenter"])),{},{toggleRegisterType:function(e){this.registerType=e,"mobile"===e?this.registerInfo.email=null:"email"===e&&(this.registerInfo.mobile=null)},togglePasswordVisibility:function(){this.showPassword=!this.showPassword},validateMobileOrPswOrEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile",t=this.registerInfo[e],r=p.a[e];if(0==t.length)return this.errorMessage[e]="",!1;"encrypt_password"===e&&(this.showPasswordTip=r.validator(t)),this.errorMessage[e]=r.validator(t)?"":r.message},validatedChecker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile",t=this.registerInfo[e],r=p.a[e];this.validated[e]=r.validator(t)},handleDragSuccess:function(e){this.registerInfo.dragCaptchaToken=e},getRegisterSettings:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.getSettings({query:{type:"register"}}).then((function(t){e.registerMode=t.mode,"mobile"===e.registerMode?e.registerType="mobile":"email"===e.registerMode?e.registerType="email":"email_or_mobile"===e.registerMode&&(e.registerType="mobile")})).catch((function(e){c.a.fail(e.message)}));case 2:case"end":return t.stop()}}),t)})))()},getPrivacySetting:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.getSettings({query:{type:"user"}}).then((function(t){t.auth.user_terms_enabled&&(e.userTerms=!0),t.auth.privacy_policy_enabled&&(e.privacyPolicy=!0)})).catch((function(e){c.a.fail(e.message)}));case 2:case"end":return t.stop()}}),t)})))()},lookPrivacyPolicy:function(){window.location.href=window.location.origin+"/mapi_v2/School/getPrivacyPolicy"},lookUserTerms:function(){window.location.href=window.location.origin+"/mapi_v2/School/getUserterms"},handleSubmit:function(){var e=this;if("mobile"===this.registerType){var t=this.registerInfo,r=(t.email,t.mobile),n=t.code,i=(t.dragCaptchaToken,s(t,["email","mobile","code","dragCaptchaToken"])),o=Object.assign({},v(v({},i),{},{mobile:r,smsCode:n})),a=o.encrypt_password;if(o.encrypt_password=window.XXTEA.encryptToBase64(a,window.location.host),this.agreement||!1===this.privacyPolicy&&!1===this.userTerms)return void this.addUser(o).then((function(t){c.a.success({duration:2e3,message:e.$t("toast.registrationSuccess")}),e.afterLogin()})).then((function(){e.userLogin({password:a,username:r})})).catch((function(e){c.a.fail(e.message)}));this.popUpBottom=!0}else if("email"===this.registerType){var l=this.registerInfo,d=l.email,u=(l.mobile,l.code),f=l.emailToken,g=s(l,["email","mobile","code","emailToken"]),h=Object.assign({},v({},g)),p=h.encrypt_password;h.encrypt_password=window.XXTEA.encryptToBase64(p,window.location.host),this.addUser({email:d,emailToken:f,emailCode:u,encrypt_password:h.encrypt_password}).then((function(t){c.a.success({duration:2e3,message:e.$t("toast.registrationSuccess")}),e.afterLogin()})).then((function(t){e.userLogin({password:p,username:d})})).catch((function(e){c.a.fail(e.message)}))}},registerSign:function(){var e=this,t=Object.assign({},this.registerInfo),r=t.encrypt_password,n=t.mobile,i=window.XXTEA.encryptToBase64(r,window.location.host);t.encrypt_password=i,this.addUser(t).then((function(t){e.agreement=!0,e.popUpBottom=!1,c.a.success({duration:2e3,message:e.$t("toast.registrationSuccess")}),e.afterLogin()})).then((function(){e.userLogin({password:r,username:n})})).catch((function(t){c.a.fail(t.message),e.popUpBottom=!1}))},clickCodeBtn:function(){this.registerInfo.dragCaptchaToken&&("mobile"===this.registerType?this.handleSendSms():"email"===this.registerType&&this.handleSendEmail(),this.$refs.dragComponent.dragToEnd?this.$refs.dragComponent.initDragCaptcha():Object(c.a)(this.$t("toast.pleaseCompleteThePuzzleVerification")))},handleSendSms:function(){var e=this,t=this.registerInfo,r=t.mobile,n=(t.email,t.code),i=(t.emailToken,s(t,["mobile","email","code","emailToken"]));this.sendSmsCenter(v({smsCode:n,mobile:r},i)).then((function(t){e.registerInfo.smsToken=t.smsToken,e.countDown()})).catch((function(t){switch(t.code){case 4030301:case 4030302:e.dragKey++,e.registerInfo.dragCaptchaToken="",e.registerInfo.smsToken="",c.a.fail(t.message);break;case 4030303:default:c.a.fail(t.message)}}))},handleSendEmail:function(){var e=this,t=this.registerInfo,r=t.email,n=(s(t,["email"]),{email:r,dragCaptchaToken:this.registerInfo.dragCaptchaToken});this.sendEmailCenter(n).then((function(t){e.registerInfo.emailToken=t.emailToken,e.countDown()})).catch((function(e){c.a.fail(e.message)}))},countDown:function(){var e=this;this.count.showCount=!0,this.count.codeBtnDisable=!0,this.count.num=120;var t=setInterval((function(){if(e.count.num<=0)return e.count.codeBtnDisable=!1,e.count.showCount=!1,void clearInterval(t);e.count.num--}),1e3)}})},w=(r("e99e"),r("a6c2")),C=Object(w.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[e.isLoading?r("e-loading"):e._e(),r("span",{staticClass:"register-title"},[e._v(e._s(e.$t("title.registerAccount")))]),r("div",{staticClass:"flex justify-center text-16 mt-40"},[e.showRegisterModeTabs?r("div",{staticClass:"p-10 mr-40",class:{"border-b border-blue-500 font-medium":"mobile"===e.registerType},on:{click:function(t){return e.toggleRegisterType("mobile")}}},[e._v("手机号注册")]):e._e(),e.showRegisterModeTabs?r("div",{staticClass:"p-10",class:{"border-b border-blue-500 font-medium":"email"===e.registerType},on:{click:function(t){return e.toggleRegisterType("email")}}},[e._v("邮箱号注册")]):e._e()]),"mobile"===e.registerType?r("van-field",{attrs:{border:!1,"error-message":e.errorMessage.mobile,placeholder:e.$t("placeholder.mobileNumber"),"max-length":"11"},on:{blur:function(t){return e.validateMobileOrPswOrEmail("mobile")},keyup:function(t){return e.validatedChecker("mobile")}},model:{value:e.registerInfo.mobile,callback:function(t){e.$set(e.registerInfo,"mobile",t)},expression:"registerInfo.mobile"}}):e._e(),"email"===e.registerType?r("van-field",{attrs:{border:!1,"error-message":e.errorMessage.email,placeholder:e.$t("placeholder.emailNumber")},on:{blur:function(t){return e.validateMobileOrPswOrEmail("email")},keyup:function(t){return e.validatedChecker("email")}},model:{value:e.registerInfo.email,callback:function(t){e.$set(e.registerInfo,"email",t)},expression:"registerInfo.email"}}):e._e(),r("van-field",{staticClass:"encrypt_password-input",staticStyle:{"padding-bottom":"0"},attrs:{border:!1,"error-message":e.errorMessage.encrypt_password,placeholder:e.$t("placeholder.setPassword"),type:e.showPassword?"text":"password","max-length":"20"},on:{blur:function(t){return e.validateMobileOrPswOrEmail("encrypt_password")}},scopedSlots:e._u([{key:"button",fn:function(){return[e.showPassword?r("img",{attrs:{src:"static/images/open-eye.svg",alt:""},on:{click:e.togglePasswordVisibility}}):r("img",{attrs:{src:"static/images/close-eye.svg",alt:""},on:{click:e.togglePasswordVisibility}})]},proxy:!0}]),model:{value:e.registerInfo.encrypt_password,callback:function(t){e.$set(e.registerInfo,"encrypt_password",t)},expression:"registerInfo.encrypt_password"}}),e.showPasswordTip?r("div",{staticClass:"password-tip"},[e._v("请设置8-32位包含字母大小写、数字、符号四种字符组合成的密码")]):e._e(),r("e-drag",{key:e.dragKey,ref:"dragComponent",on:{success:e.handleDragSuccess}}),r("van-field",{staticStyle:{"margin-top":"0"},attrs:{border:!1,type:"text",center:"",clearable:"","max-length":"6",placeholder:e.$t("placeholder.verificationCode")},model:{value:e.registerInfo.code,callback:function(t){e.$set(e.registerInfo,"code",t)},expression:"registerInfo.code"}},[r("van-button",{attrs:{slot:"button",disabled:!e.registerInfo.dragCaptchaToken||e.count.codeBtnDisable||!e.validated.mobile&&!e.validated.email,size:"small",type:"primary"},on:{click:e.clickCodeBtn},slot:"button"},[e._v("\n      "+e._s(e.$t("btn.sendCode"))+"\n      "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.count.showCount,expression:"count.showCount"}]},[e._v("("+e._s(e.count.num)+")")])])],1),r("van-button",{staticClass:"primary-btn mb20",attrs:{disabled:e.btnDisable,type:"default"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("btn.register")))]),e.userTerms||e.privacyPolicy?r("div",{staticClass:"login-agree"},[r("van-checkbox",{attrs:{"icon-size":16,"checked-color":"#408ffb"},model:{value:e.agreement,callback:function(t){e.agreement=t},expression:"agreement"}}),e._v("\n    "+e._s(e.$t("tips.iHaveReadAndAgreeToThe"))+"\n    "),e.userTerms?r("i",{on:{click:e.lookUserTerms}},[e._v("《"+e._s(e.$t("btn.userServiceAgreement"))+"》")]):e._e(),e.userTerms&&e.privacyPolicy?r("span",[e._v(e._s(e.$t("tips.and")))]):e._e(),e.privacyPolicy?r("span",[r("i",{on:{click:e.lookPrivacyPolicy}},[e._v("《"+e._s(e.$t("btn.privacyAgreemen"))+"》")])]):e._e()],1):e._e(),r("van-popup",{staticClass:"login-pop",style:{height:"30%"},attrs:{position:"bottom",round:""},model:{value:e.popUpBottom,callback:function(t){e.popUpBottom=t},expression:"popUpBottom"}},[r("div",{staticClass:"login-pop-title"},[e._v(e._s(e.$t("btn.PleaseReadAgreeAndTerms")))]),e.userTerms||e.privacyPolicy?r("div",{staticClass:"login-agree"},[e.userTerms?r("i",{on:{click:e.lookPrivacyPolicy}},[e._v("《"+e._s(e.$t("btn.userServiceAgreement"))+"》")]):e._e(),e.privacyPolicy?r("span",[r("i",{on:{click:e.lookPrivacyPolicy}},[e._v("《"+e._s(e.$t("btn.privacyAgreemen"))+"》")])]):e._e()]):e._e(),r("van-button",{staticClass:"primary-btn mb20 login-pop-btn",attrs:{disabled:e.btnDisable,type:"info"},on:{click:e.registerSign}},[e._v(e._s(e.$t("btn.agreeAndRegister")))])],1)],1)}),[],!1,null,"d059fdc4",null);t.default=C.exports},7067:function(e,t,r){"use strict";r("e17f");var n=r("2241"),i=(r("e7e5"),r("d399")),o=r("a026"),a=r("3ce7"),s=/micromessenger/.test(navigator.userAgent.toLowerCase());t.a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||r&&!t)i.a.fail("缺少分享参数");else{var c={domainUri:location.origin,itemUri:"",source:"h5"};a.a.marketingActivities({query:{activityId:e},data:c}).then((function(e){var a=-1!==e.url.indexOf("?")?"&":"?",c=r?"".concat(t).concat(a,"ticket=").concat(e.ticket):e.url;s?window.location.href=c:n.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{o.default.prototype.$copyText(c).then((function(){i.a.success("复制成功")}),(function(){i.a.fail("请更换浏览器复制")}))}catch(e){i.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(e){i.a.fail(e.message)}))}}},"77c2":function(e,t,r){},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},"8e6c":function(e,t,r){"use strict";r("6b54"),r("28a5"),function(e){var t,r;void 0===e.btoa&&(e.btoa=(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),function(e){var r,n,i,o,a,s,c;for(n=i=0,o=e.length,s=(o-=a=o%3)/3<<2,a>0&&(s+=4),r=new Array(s);n<o;)c=e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<8|e.charCodeAt(n++),r[i++]=t[c>>18]+t[c>>12&63]+t[c>>6&63]+t[63&c];return 1==a?(c=e.charCodeAt(n++),r[i++]="".concat(t[c>>2]+t[(3&c)<<4],"==")):2==a&&(c=e.charCodeAt(n++)<<8|e.charCodeAt(n++),r[i++]="".concat(t[c>>10]+t[c>>4&63]+t[(15&c)<<2],"=")),r.join("")})),void 0===e.atob&&(e.atob=(r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],function(e){var t,n,i,o,a,s,c,l,d,u;if((c=e.length)%4!=0)return"";if(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\+\/\=]/.test(e))return"";for(d=c,(l="="==e.charAt(c-2)?1:"="==e.charAt(c-1)?2:0)>0&&(d-=4),d=3*(d>>2)+l,u=new Array(d),a=s=0;a<c&&-1!=(t=r[e.charCodeAt(a++)])&&-1!=(n=r[e.charCodeAt(a++)])&&(u[s++]=String.fromCharCode(t<<2|(48&n)>>4),-1!=(i=r[e.charCodeAt(a++)]))&&(u[s++]=String.fromCharCode((15&n)<<4|(60&i)>>2),-1!=(o=r[e.charCodeAt(a++)]));)u[s++]=String.fromCharCode((3&i)<<6|o);return u.join("")}));var n=2654435769;function i(e,t){var r=e.length,n=r<<2;if(t){var i=e[r-1];if(i<(n-=4)-3||i>n)return null;n=i}for(var o=0;o<r;o++)e[o]=String.fromCharCode(255&e[o],e[o]>>>8&255,e[o]>>>16&255,e[o]>>>24&255);var a=e.join("");return t?a.substring(0,n):a}function o(e,t){var r,n=e.length,i=n>>2;0!=(3&n)&&++i,t?(r=new Array(i+1))[i]=n:r=new Array(i);for(var o=0;o<n;++o)r[o>>2]|=e.charCodeAt(o)<<((3&o)<<3);return r}function a(e){return 4294967295&e}function s(e,t,r,n,i,o){return(r>>>5^t<<2)+(t>>>3^r<<4)^(e^t)+(o[3&n^i]^r)}function c(e){return e.length<4&&(e.length=4),e}function l(e){if(/^[\x00-\x7f]*$/.test(e))return e;for(var t=[],r=e.length,n=0,i=0;n<r;++n,++i){var o=e.charCodeAt(n);if(o<128)t[i]=e.charAt(n);else if(o<2048)t[i]=String.fromCharCode(192|o>>6,128|63&o);else{if(!(o<55296||o>57343)){if(n+1<r){var a=e.charCodeAt(n+1);if(o<56320&&a>=56320&&a<=57343){var s=65536+((1023&o)<<10|1023&a);t[i]=String.fromCharCode(240|s>>18&63,128|s>>12&63,128|s>>6&63,128|63&s),++n;continue}}throw new Error("Malformed string")}t[i]=String.fromCharCode(224|o>>12,128|o>>6&63,128|63&o)}}return t.join("")}function d(e,t){return(void 0===t||null===t||t<0)&&(t=e.length),0===t?"":/^[\x00-\x7f]*$/.test(e)||!/^[\x00-\xff]*$/.test(e)?t===e.length?e:e.substr(0,t):t<65535?function(e,t){for(var r=new Array(t),n=0,i=0,o=e.length;n<t&&i<o;n++){var a=e.charCodeAt(i++);switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[n]=a;break;case 12:case 13:if(!(i<o))throw new Error("Unfinished UTF-8 octet sequence");r[n]=(31&a)<<6|63&e.charCodeAt(i++);break;case 14:if(!(i+1<o))throw new Error("Unfinished UTF-8 octet sequence");r[n]=(15&a)<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++);break;case 15:if(!(i+2<o))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&a)<<18|(63&e.charCodeAt(i++))<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++))-65536;if(!(s>=0&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x".concat(s.toString(16)));r[n++]=s>>10&1023|55296,r[n]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x".concat(a.toString(16)))}}return n<t&&(r.length=n),String.fromCharCode.apply(String,r)}(e,t):function(e,t){for(var r=[],n=new Array(32768),i=0,o=0,a=e.length;i<t&&o<a;i++){var s=e.charCodeAt(o++);switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[i]=s;break;case 12:case 13:if(!(o<a))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(31&s)<<6|63&e.charCodeAt(o++);break;case 14:if(!(o+1<a))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(15&s)<<12|(63&e.charCodeAt(o++))<<6|63&e.charCodeAt(o++);break;case 15:if(!(o+2<a))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&s)<<18|(63&e.charCodeAt(o++))<<12|(63&e.charCodeAt(o++))<<6|63&e.charCodeAt(o++))-65536;if(!(c>=0&&c<=1048575))throw new Error("Character outside valid Unicode range: 0x".concat(c.toString(16)));n[i++]=c>>10&1023|55296,n[i]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x".concat(s.toString(16)))}if(i>=32766){var l=i+1;n.length=l,r[r.length]=String.fromCharCode.apply(String,n),t-=l,i=-1}}return i>0&&(n.length=i,r[r.length]=String.fromCharCode.apply(String,n)),r.join("")}(e,t)}function u(e,t){return void 0===e||null===e||0===e.length?e:(e=l(e),t=l(t),i(function(e,t){var r,i,o,c,l,d,u=e.length,f=u-1;for(i=e[f],o=0,d=0|Math.floor(6+52/u);d>0;--d){for(c=(o=a(o+n))>>>2&3,l=0;l<f;++l)r=e[l+1],i=e[l]=a(e[l]+s(o,r,i,l,c,t));r=e[0],i=e[f]=a(e[f]+s(o,r,i,f,c,t))}return e}(o(e,!0),c(o(t,!1))),!1))}function f(e,t){return void 0===e||null===e||0===e.length?e:(t=l(t),d(i(function(e,t){var r,i,o,c,l,d=e.length,u=d-1;for(r=e[0],o=a(Math.floor(6+52/d)*n);0!==o;o=a(o-n)){for(c=o>>>2&3,l=u;l>0;--l)i=e[l-1],r=e[l]=a(e[l]-s(o,r,i,l,c,t));i=e[u],r=e[0]=a(e[0]-s(o,r,i,0,c,t))}return e}(o(e,!1),c(o(t,!1))),!0)))}e.XXTEA={utf8Encode:l,utf8Decode:d,encrypt:u,encryptToBase64:function(t,r){return e.btoa(u(t,r))},decrypt:f,decryptFromBase64:function(t,r){return void 0===t||null===t||0===t.length?t:f(e.atob(t),r)}}}(window)},a262:function(e,t,r){"use strict";var n=r("7067");t.a={methods:{activityHandle:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(n.a)(e,t,r)}}}},a4bb:function(e,t,r){e.exports=r("8aae")},ce7e:function(e,t,r){var n=r("63b6"),i=r("584a"),o=r("294c");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},d863:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d"),r("a481");var n=r("bd86"),i=r("7067"),o=r("3ce7"),a=r("faa5"),s=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a={data:function(){return{redirect:""}},computed:l({},Object(s.e)({user:function(e){return e.user}})),created:function(){this.redirect=decodeURIComponent(this.$route.fullPath)},methods:l(l({},Object(s.d)([a.w])),{},{afterLogin:function(){var e=this;this.checkMobileBind().then((function(t){var r=t.is_bind_mobile,n=t.mobile_bind_mode;e[a.w]({is_bind_mobile:r,mobile_bind_mode:n}),r||"closed"===n?setTimeout(e.jumpAction,1e3):e.$router.replace({name:"binding",query:{redirect:e.$route.query.redirect}})})).catch((function(){setTimeout(e.jumpAction,1e3)}))},jumpAction:function(){var e=this.$route.query.redirect?decodeURIComponent(this.$route.query.redirect):"/",t=this.$route.query.skipUrl?decodeURIComponent(this.$route.query.skipUrl):"",r=this.$route.query.callbackType,n=this.$route.query.activityId,o=decodeURIComponent(this.$route.query.callback);if(r)switch(r){case"marketing":Object(i.a)(n,o)}else t?this.$router.replace({path:e,query:{backUrl:t}}):this.$router.replace({path:e})},checkMobileBind:function(){return o.a.mobileBindCheck({query:{userId:this.user.id}})},upgradePassword:function(){this.$router.replace({name:"password_reset",query:{upgradePassword:1}})}})}},e265:function(e,t,r){e.exports=r("ed33")},e99e:function(e,t,r){"use strict";var n=r("77c2");r.n(n).a},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols},f13d:function(e,t,r){"use strict";r("8e6e"),r("ac6a"),r("456d");var n=r("75fc"),i=(r("e7e5"),r("d399")),o=r("bd86"),a=(r("c5f6"),r("3ce7"));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var c={props:{tips:{type:String,default:"placeholder.dragTheSliderToCompleteThePuzzle"},limitType:{type:String,default:""}},data:function(){return{imgInfo:{url:"",jigsaw:"",token:""},dragState:{left:0,width:0,currentX:0,currentLeft:0,btnWidth:0,maskWidth:0},dragToEnd:!1}},created:function(){this.initDragCaptcha()},mounted:function(){var e=this.$refs.bar,t=this.$refs.dragBtn,r=e.getBoundingClientRect();Object.assign(this.dragState,{left:Number(r.left.toFixed(2)),width:e.clientWidth,btnWidth:t.offsetWidth/2})},methods:{initDragCaptcha:function(){var e=this,t={};this.limitType&&(t={limitType:this.limitType}),a.a.dragCaptcha({data:t}).then((function(t){e.imgInfo=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),Object.assign(e.dragState,{currentLeft:0,maskWidth:0}),e.dragToEnd=!1})).catch((function(e){i.a.fail(e.message)}))},handletTouchEnd:function(){var e=this;if(!this.dragToEnd&&this.dragState.currentLeft){var t=this.getToken();this.dragToEnd=!0,a.a.dragValidate({query:{token:t}}).then((function(r){i.a.success(e.$t("e.verificationSuccess")),e.$emit("success",t)})).catch((function(t){i.a.fail(t.message),e.initDragCaptcha()}))}},handleTouchMove:function(e){if(!this.dragToEnd){e.preventDefault();var t=this.$refs.dragBtn,r=this.dragState,n=e.clientX?e.clientX.toFixed(2):e.targetTouches[0].pageX.toFixed(2)-this.$refs.drag.offsetLeft,i=(n-r.left-r.btnWidth).toFixed(2);i<0&&(i=0),n>r.width+this.$refs.drag.offsetLeft&&(i=r.width-this.$refs.dragImg.width),Object.assign(this.dragState,{currentLeft:i,maskWidth:(Number(i)+t.offsetWidth/2).toFixed(2)})}},calPositionX:function(){var e=this.$refs.dragImgBg,t=(e.naturalWidth/e.width).toFixed(2);return(Number(this.dragState.currentLeft).toFixed(2)*t).toFixed(2)},getToken:function(){var e={token:this.imgInfo.token,captcha:this.calPositionX()};return Object(n.a)(btoa(JSON.stringify(e))).reverse().join("")}}},l=r("a6c2"),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"drag",staticClass:"e-drag"},[r("div",{staticClass:"e-drag-section"},[r("div",{staticClass:"e-drag-img"},[r("img",{ref:"dragImgBg",attrs:{src:e.imgInfo.url,alt:""}}),r("img",{ref:"dragImg",staticClass:"e-drag-img__dragable",style:{left:e.dragState.currentLeft+"px"},attrs:{src:e.imgInfo.jigsaw,alt:""}})]),r("div",{ref:"bar",staticClass:"e-drag-bar"},[r("span",[e._v(e._s(e.$t(e.tips)))]),r("div",{staticClass:"e-drag-bar__mask",style:{width:e.dragState.maskWidth+"px"}}),r("div",{ref:"dragBtn",staticClass:"e-drag-btn",style:{left:e.dragState.currentLeft+"px"},on:{touchend:e.handletTouchEnd,touchmove:e.handleTouchMove}},[r("img",{attrs:{src:"static/images/drag.png",alt:""}})])])])])}),[],!1,null,null,null);t.a=d.exports}}]);