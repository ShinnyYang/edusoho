(window.webpackJsonp=window.webpackJsonp||[]).push([["testpaperAnalysis"],{"9bd2":function(t,e,s){"use strict";s.r(e),s("7f7f"),s("e7e5");var n=s("d399"),i=(s("c5f6"),s("6762"),s("2fdb"),s("456d"),s("ac6a"),s("c80c")),a=(s("96cf"),s("3b8d")),r=s("db72"),o=s("2f62"),c=s("faa5"),u=s("3ce7"),l=s("f5cc"),d=s("8ae7"),h=s("c8a5"),f=s("7c97"),p=s("6647"),g={name:"TestpaperAnalysis",filters:{type:function(t){switch(t){case"single_choice":return p.a.t("courseLearning.singleChoice");case"choice":return p.a.t("courseLearning.choice");case"essay":return p.a.t("courseLearning.essay");case"uncertain_choice":return p.a.t("courseLearning.uncertainChoice");case"determine":return p.a.t("courseLearning.determine");case"fill":return"courseLearning.fill";case"material":return p.a.t("courseLearning.material")}}},components:{IbsFooter:s("a8b4").a,itemBank:l.a,OutFocusMask:f.a},mixins:[d.a,h.a],data:function(){return{result:null,items:{},info:[],isReadOver:!1,isWrongMode:!1,allList:[],wrongList:[],wrongType:[],cardSeq:0,cardShow:!1,answer:{},slideIndex:0,canDo:!1,resultShow:!1,mode:"exam"}},computed:Object(r.a)({},Object(o.e)({isLoading:function(t){return t.isLoading},user:function(t){return t.user},selectedPlanId:function(t){return t.course.selectedPlanId}})),mounted:function(){this.initReport(),this.setNavbarTitle(this.$route.query.title),this.getTestpaperResult()},methods:Object(r.a)(Object(r.a)({},Object(o.d)({setNavbarTitle:c.x})),{},{showCard:function(){this.cardShow=!0},initReport:function(){this.initReportData(this.selectedPlanId,this.$route.query.targetId,"testpaper")},getTestpaperResult:function(){var t=this;return Object(a.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.testpaperResult({query:{resultId:t.$route.query.resultId}}).then((function(e){t.result=e.testpaperResult,t.formatData(e),t.isReadOver="finished"===t.result.status,t.result=e.testpaperResult,t.items=e.items,t.resultShow=e.resultShow}));case 2:case"end":return e.stop()}}),e)})))()},formatData:function(t){var e=this,s=t.items;Object.keys(s).forEach((function(t){"material"!=t&&s[t].forEach((function(t){var s=e.analysisSixType(t.type,t);t.testResult.attachments&&(t.attachments=t.attachments.concat(t.testResult.attachments)),e.setData(s.item,s.answer)})),"material"==t&&s[t].forEach((function(t){var s=Object.assign({},t,{subs:""});t.subs.forEach((function(n,i){n.parentTitle=s,n.parentType=t.type,n.materialIndex=i+1,t.attachments&&(n.attachments=n.attachments.concat(t.attachments)),n.testResult.attachments&&(n.attachments=n.attachments.concat(n.testResult.attachments));var a=e.analysisSixType(n.type,n);e.setData(a.item,a.answer)}))}))}))},setData:function(t,e){if(this.$set(this.answer,t.id,e),this.info.push(t),this.allList.push(t),t.testResult&&"right"!==t.testResult.status||!t.testResult){var s=t.parentType?t.parentType:t.type;this.wrongType.includes(s)||this.wrongType.push(s),this.wrongList.push(t)}},formatStatus:function(t){if(t.testResult)switch(t.testResult.status){case"right":return"cicle-right";case"none":return"cicle-none";case"wrong":case"partRight":return"cicle-wrong";case"noAnswer":return""}},slideToNumber:function(t){var e=this,s=Number(t);this.isWrongMode?this.info.forEach((function(t,n){s===parseInt(t.seq)&&(e.cardSeq=n+1)})):this.cardSeq=s,this.cardShow=!1},showWrongList:function(){0!==this.wrongList.length?(Object(n.a)({message:"切换成功",duration:1e3}),this.isWrongMode=!this.isWrongMode,this.isWrongMode?(this.info=this.wrongList,this.cardSeq=this.isWrongItem()):(this.info=this.allList,this.cardSeq=parseInt(this.wrongList[this.slideIndex].seq)),this.slideIndex=this.cardSeq-1):Object(n.a)("当前没有错题")},isWrongItem:function(){var t=this.allList[this.slideIndex],e=1;return t.testResult&&"right"!==t.testResult.status&&this.wrongList.forEach((function(s,n){s.id==t.id&&(e=n+1)})),e},isWrongType:function(t){return!this.isWrongMode||-1!==this.wrongType.indexOf(t)},isWrongList:function(t){return!this.isWrongMode||t.testResult&&"right"!==t.testResult.status}})},m=s("2877"),w=Object(m.a)(g,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"paper-swiper"},[e("out-focus-mask",{attrs:{type:t.outFocusMaskType,isShow:t.isShowOutFocusMask,reportType:t.reportType},on:{outFocusMask:t.outFocusMask}}),t.isLoading?e("e-loading"):t._e(),t.info.length>0?e("item-bank",{attrs:{"is-wrong-mode":t.isWrongMode,current:t.cardSeq,info:t.info,answer:t.answer,"slide-index":t.slideIndex,"can-do":t.canDo,all:t.allList.length,"result-show":t.resultShow,mode:t.mode,exerciseInfo:t.result,"ai-agent-record-id":t.result.id},on:{"update:current":function(e){t.cardSeq=e},"update:slideIndex":function(e){t.slideIndex=e},"update:slide-index":function(e){t.slideIndex=e}}}):t._e(),e("ibs-footer",{attrs:{mode:"report"},on:{showcard:t.showCard,lookWrong:t.showWrongList}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.cardShow,callback:function(e){t.cardShow=e},expression:"cardShow"}},[t.info.length>0?e("div",{staticClass:"card"},[e("div",{staticClass:"card-title"},[e("div",[e("span",{staticClass:"card-right"},[t._v(t._s(t.$t("courseLearning.right")))]),e("span",{staticClass:"card-wrong"},[t._v(t._s(t.$t("courseLearning.wrong")))]),e("span",{staticClass:"card-nofinish"},[t._v(t._s(t.$t("courseLearning.unanswered")))]),t.isReadOver?t._e():e("span",{staticClass:"card-none"},[t._v(t._s(t.$t("courseLearning.toBeReviewed")))])]),e("i",{staticClass:"iconfont icon-no",on:{click:function(e){t.cardShow=!1}}})]),e("div",{staticClass:"card-list"},[t._l(t.items,(function(s,n){return[t.isWrongType(n)?e("div",{key:n,staticClass:"card-item"},[e("div",{staticClass:"card-item-title"},[t._v(t._s(t._f("type")(n)))]),"material"!=n?e("div",{staticClass:"card-item-list"},[t._l(t.items[n],(function(s){return[t.isWrongList(s)?e("div",{key:s.id,class:["list-cicle",t.formatStatus(s)],on:{click:function(e){return t.slideToNumber(s.seq)}}},[t._v("\n                  "+t._s(s.seq)+"\n                ")]):t._e()]}))],2):t._e(),"material"==n?e("div",{staticClass:"card-item-list"},[t._l(t.items[n],(function(s){return[t._l(s.subs,(function(s){return[t.isWrongList(s)?e("div",{key:s.id,class:["list-cicle",t.formatStatus(s)],on:{click:function(e){return t.slideToNumber(s.seq)}}},[t._v("\n                    "+t._s(s.seq)+"\n                  ")]):t._e()]}))]}))],2):t._e()]):t._e()]}))],2)]):t._e()])],1)}),[],!1,null,null,null);e.default=w.exports}}]);