(window.webpackJsonp=window.webpackJsonp||[]).push([["brush-exercise"],{1919:function(e,t,n){},"2d42":function(e,t,n){"use strict";var i={name:"e-empty",props:{text:{type:String,default:""}}},r=n("a6c2"),s=Object(r.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"e-empty"},[t("img",{staticClass:"e-empty__img",attrs:{src:"static/images/empty.png"}}),t("p",{staticClass:"e-empty__text"},[this._v(this._s(this.text))])])}),[],!1,null,null,null);t.a=s.exports},"39ed":function(e,t,n){"use strict";var i={props:{title:{type:String,default:""},content:{type:String,default:""},isJoin:{type:Boolean,default:!1}}},r=(n("492f"),n("a6c2")),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"closed-tips"},[n("van-icon",{staticClass:"closed-icon",attrs:{name:"warning-o",color:"#FF7D00"}}),n("div",{staticClass:"ml-8 flex flex-col items-start"},[n("span",{staticClass:"title"},[e._v(e._s(e.title))]),e.isJoin?n("span",{staticClass:"content"},[e._v(e._s(e.content))]):e._e()])],1)}),[],!1,null,"784b42fe",null);t.a=s.exports},4917:function(e,t,n){"use strict";var i=n("cb7c"),r=n("9def"),s=n("0390"),a=n("5f1b");n("214f")("match",1,(function(e,t,n,o){return[function(n){var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=o(n,e,this);if(t.done)return t.value;var c=i(e),l=String(this);if(!c.global)return a(c,l);var u=c.unicode;c.lastIndex=0;for(var d,m=[],h=0;null!==(d=a(c,l));){var p=String(d[0]);m[h]=p,""===p&&(c.lastIndex=s(l,r(c.lastIndex),u)),h++}return 0===h?null:m}]}))},"492f":function(e,t,n){"use strict";var i=n("1919");n.n(i).a},"5c69":function(e,t,n){"use strict";var i=n("f922");n.n(i).a},"63dd":function(e,t,n){"use strict";n("4917"),t.a={methods:{initAIAgentSdk:function(e,t,n,i){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=new window.AgentSDK({token:e,uiIframeSrc:"".concat(window.location.origin,"/static-dist/libs/agent-web-sdk/ui/index.html"),signalServerUrl:"wss://test-ai-signal.edusoho.cn/",bottom:n,right:i,preventDefault:s,draggable:a});return o.addShortcut("plan.create",{name:"制定学习计划",icon:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M1.66665 6.33301H14.3333V13.6663C14.3333 14.0345 14.0348 14.333 13.6666 14.333H2.33332C1.96513 14.333 1.66665 14.0345 1.66665 13.6663V6.33301Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M1.66665 3.33366C1.66665 2.96547 1.96513 2.66699 2.33332 2.66699H13.6666C14.0348 2.66699 14.3333 2.96547 14.3333 3.33366V6.33366H1.66665V3.33366Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M5.33335 10.333L7.33335 12.333L11.3334 8.33301" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.33335 1.66699V4.33366" stroke="#333333" stroke-linecap="round"/>\n<path d="M10.6666 1.66699V4.33366" stroke="#333333" stroke-linecap="round"/>\n</svg>',type:"Send",data:{content:"制定学习计划"}}),t.workerUrl="".concat(window.location.origin,"/agent_worker"),o.setChatMetadata(t),o.on("clickLink",(function(e){var t=e.match(/\/course\/(\d+)\/task\/(\d+)/);if(t){var n=t[1],i=t[2];r.$router.push({name:"course",params:{id:n}}),r.$nextTick((function(){document.getElementById(i).click()})),o.hideIframe()}else window.open(e,"_blank")})),o.boot(),window.aiAgentSdk=o,o}}}},"86ee":function(e,t,n){"use strict";var i={name:"MoreMask",props:{maxHeight:{default:288},disabled:{default:!1},forceShow:{type:Boolean,default:!1},text:{type:Object,default:function(){return{content:"",lineHeight:17,paddingTop:100,align:"center"}}}},data:function(){return{realHeight:0,intervalTime:5e3,intervalId:void 0}},computed:{exccedHeight:function(){return this.realHeight>this.maxHeight||this.forceShow},heightStyle:function(){return{maxHeight:!this.exccedHeight||this.disabled||this.forceShow?"none":"".concat(this.maxHeight,"px"),paddingBottom:this.forceShow||this.exccedHeight&&!this.disabled?"25px":"0"}},textStyle:function(){return{paddingTop:"".concat(this.text.paddingTop,"px"),lineHeight:"".concat(this.text.lineHeight,"px"),textAlign:"".concat(this.text.align)}}},mounted:function(){var e=this;this.intervalId=setInterval((function(){e.intervalTime-=500,e.intervalTime<0?clearInterval(e.intervalId):e.realHeight=e.$el.getBoundingClientRect().height}),500)},methods:{maskLoadMore:function(){this.$emit("maskLoadMore")}}},r=n("a6c2"),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more-mask"},[n("div",{staticClass:"more-mask__body",style:e.heightStyle},[e._t("default")],2),e.disabled?e._e():n("div",{directives:[{name:"show",rawName:"v-show",value:e.exccedHeight,expression:"exccedHeight"}],staticClass:"more-mask__footer",style:e.textStyle,on:{touchstart:function(t){return t.preventDefault(),e.maskLoadMore(t)}}},[e._v("\n    "+e._s(e.text.content||"点击查看更多")+"\n  ")])])}),[],!1,null,null,null);t.a=s.exports},a556:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("e7e5");var i=n("d399"),r=n("6647"),s=function(e){switch(e){case"course":Object(i.a)(r.a.t("goods.courseClosedToast"));break;case"classroom":Object(i.a)(r.a.t("goods.classroomClosedToast"));break;case"exercise":Object(i.a)(r.a.t("goods.exerciseClosedToast"))}}},e656:function(e,t,n){"use strict";n("c5f6");var i=n("86ee"),r=n("0d25"),s={name:"Review",components:{moreMask:i.a},filters:{userName:function(e){return e&&e.nickname||"匿名用户"},avatar:function(e){return e&&e.avatar&&e.avatar.middle},time:function(e,t){var n=new Date(e);return"simple"===t?Object(r.formatSimpleTime)(n):"complete"===t?Object(r.formatCompleteTime)(n):e}},props:{review:{type:Object,default:function(){return{}}},course:{type:Object,default:function(){return{}}},disableMask:{type:Boolean,default:!0},isClass:{type:Boolean,default:!0},timeFormat:{type:String,default:"simple"}},data:function(){return{loadAllReview:!1}},computed:{posts:function(){return this.review&&this.review.posts||[]},rating:{get:function(){return Number(this.review.rating)},set:function(){}},emptyRating:{get:function(){return this.rating>=0?Number(5-this.rating):5},set:function(){}},textOption:function(){return{paddingTop:70,lineHeight:25,align:"right",content:this.$t("e.displayAll")}},courseTitle:function(){return this.isClass?"":this.course.displayedTitle}}},a=n("a6c2"),o=Object(a.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"e-review"},[n("img",{staticClass:"e-review-avatar avatar-img",attrs:{src:e._f("avatar")(e.review.user),alt:""}}),n("div",{staticClass:"e-review-body"},[n("div",[n("span",{staticClass:"e-review-nickname text-14"},[e._v(e._s(e._f("userName")(e.review.user)))]),n("van-rate",{staticClass:"e-review-rating",attrs:{size:15,count:e.emptyRating,readonly:!0,color:"#B0BDC9"},model:{value:e.emptyRating,callback:function(t){e.emptyRating=t},expression:"emptyRating"}}),n("van-rate",{staticClass:"e-review-rating",attrs:{size:15,count:e.rating,readonly:!0,color:"#FFAA00"},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),n("div",{staticClass:"e-review-time text-12"},[e._v("\n      "+e._s(e._f("time")(e.review.createdTime,e.timeFormat))+"\n    ")]),e.disableMask?n("div",{staticClass:"e-review-content text-14"},[e._v("\n      "+e._s(e.review.content)+"\n    ")]):n("more-mask",{attrs:{text:e.textOption,"max-height":100,disabled:e.loadAllReview},on:{maskLoadMore:function(t){e.loadAllReview=!0}}},[n("div",{staticClass:"e-review-content text-14"},[e._v(e._s(e.review.content))])]),e.courseTitle?n("span",{staticClass:"e-review-origin text-12"},[e._v(e._s(e.$t("e.from"))+"："+e._s(e.courseTitle))]):e._e(),e._l(e.posts,(function(t){return n("div",{key:t,staticClass:"e-review__post"},[n("img",{staticClass:"e-review-avatar e-review__post-avatar avatar-img",attrs:{src:e._f("avatar")(t.user),alt:""}}),n("div",{staticClass:"e-review__post-body"},[n("span",{staticClass:"e-review-nickname text-14"},[e._v(e._s(e._f("userName")(t.user))+" "+e._s(e.$t("e.reply"))+"\n          "+e._s(e._f("userName")(e.review.user))+"：")]),n("div",{staticClass:"e-review-content text-14"},[e._v(e._s(t.content))])])])}))],2)])}),[],!1,null,null,null);t.a=o.exports},ed78:function(e,t,n){"use strict";n.r(t),n("8e6e"),n("ac6a"),n("456d"),n("c5f6");var i=n("bd86"),r=(n("e17f"),n("2241")),s=(n("7f7f"),n("2f62"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var o={components:{},data:function(){return{disabled:!1,timer:null,activeIndex:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,Object(s.a)("ItemBank").mapState)({module:function(e){return e.ItemBankModules}})),watch:{module:function(e){var t=this;e&&this.module.forEach((function(e,n){e.id===t.$route.query.moduleId&&t.checkedTab(e,n)}))}},created:function(){var e=this;this.module&&this.module.forEach((function(t,n){t.id===e.$route.query.moduleId&&e.checkedTab(t,n)}))},methods:{checkedTab:function(e,t){this.activeIndex=t;var n={type:e.type,id:e.id};this.$emit("changModule",n),this.change()},change:function(){var e=this;this.disabled=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.disabled=!1}),300)}}},c=n("a6c2"),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brush-exercise-directory-swipertab"},[n("div",{staticClass:"brush-exercise-warp"},[n("div",{staticClass:"brush-exercise-scroll"},e._l(e.module,(function(t,i){return n("button",{key:i,class:{activeTag:i===e.activeIndex},attrs:{disabled:e.disabled},on:{click:function(n){return e.checkedTab(t,i)}}},[e._v("\n        "+e._s(t.title)+"\n      ")])})),0)])])}),[],!1,null,null,null).exports,u=n("2d42"),d=n("6647"),m=n("0d25"),h=function(e){switch(e){case"doing":case"paused":return{text:d.a.t("questionBank.continue"),class:"bg-[#408ffb] border border-[#408ffb] text-[#FFFFFF] font-medium"};case"reviewing":case"finished":return{text:d.a.t("questionBank.viewReport"),class:"bg-white border border-[#FF7D00] text-[#FF7D00]"};default:return{text:d.a.t("questionBank.start"),class:"bg-white border border-[#408ffb] text-[#408ffb]"}}},p=function(e){var t=e.expiryMode,n=e.expiryDays,i=Object(m.formatFullTime)(new Date(1e3*e.expiryStartDate)),r=Object(m.formatFullTime)(new Date(1e3*e.expiryEndDate));switch(t){case"forever":return d.a.t("questionBank.permanent");case"end_date":return r+"之前可学习";case"days":return n+"天内可学习";case"date":return"".concat(i," 至 ").concat(r)}},f=n("a556");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var g={components:{empty:u.a},data:function(){return{loading:!1}},props:{exercise:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},finished:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({noData:function(){return!this.isLoading&&!this.exercise.length}},Object(s.e)("ItemBank",{isMember:function(e){return e.ItemBankExercise.isMember},ItemBankExercise:function(e){return e.ItemBankExercise}})),watch:{isLoading:{handler:"handleLoad"}},created:function(){},methods:{onLoad:function(){this.$emit("loadMore")},handleLoad:function(e){this.loading=e},getBtnText:function(e){var t;return h((null===(t=e.latestAnswerRecord)||void 0===t?void 0:t.status)||"")},startDo:function(e){var t;if("closed"!=(null===(t=this.ItemBankExercise)||void 0===t?void 0:t.status)){var n={mode:"start",type:"assessment",title:e.assessment.name,exerciseId:e.exerciseId,assessmentId:e.assessment.id,moduleId:e.moduleId};this.$router.push({path:"/brushDo",query:n})}else Object(f.a)("exercise")},continueDo:function(e){var t;if("closed"!=(null===(t=this.ItemBankExercise)||void 0===t?void 0:t.status)){var n={mode:"continue",type:"assessment",title:e.assessment.name,exerciseId:e.exerciseId,assessmentId:e.assessment.id,moduleId:e.moduleId,answer_record_id:e.latestAnswerRecord.answerRecordId};this.$router.push({path:"/brushDo",query:n})}else Object(f.a)("exercise")},goResult:function(e){var t={type:"assessment",title:e.assessment.name,exerciseId:e.exerciseId,assessmentId:e.assessment.id,moduleId:e.moduleId},n=e.latestAnswerRecord.answerRecordId;this.$router.push({path:"/brushResult/".concat(n),query:t})},clickBtn:function(e){var t;switch(null===(t=e.latestAnswerRecord)||void 0===t?void 0:t.status){case"doing":case"paused":this.continueDo(e);break;case"reviewing":case"finished":this.goResult(e);break;default:this.startDo(e)}}}},b=Object(c.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brush-exercise-directory-exam"},[e.exercise.length?[n("van-list",{attrs:{finished:e.finished,"finished-text":""},on:{load:e.onLoad}},e._l(e.exercise,(function(t,i){return n("div",{key:i,staticClass:"directory-exam-warp"},[t.assessment?n("div",{staticClass:"exam-left"},[n("div",{staticClass:"exam-title"},[e._v(e._s(t.assessment.name))]),n("div",{staticClass:"exam-score"},[e._v("\n            "+e._s(t.assessment.question_count)+"题/\n            "+e._s(t.assessment.total_score)+"分\n          ")])]):e._e(),e.isMember?n("div",{staticClass:"exam-right"},[n("div",{staticClass:"text-12 whitespace-nowrap p-4 px-8",class:[e.getBtnText(t).class],staticStyle:{"line-height":"20px","border-radius":"6px"},on:{click:function(n){return e.clickBtn(t)}}},[e._v("\n            "+e._s(e.getBtnText(t).text)+"\n          ")])]):e._e()])})),0)]:e._e(),e.isLoading?n("van-loading",{attrs:{color:"#1989fa",size:"24px",vertical:""}},[e._v("加载中...")]):e._e(),e.noData?n("empty",{staticClass:"empty__exam",attrs:{text:"暂无试卷"}}):e._e()],2)}),[],!1,null,null,null).exports;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={name:"exercise-section",components:{exerciseSection:k},data:function(){return{isUnfold:!0}},props:{section:{},moduleId:{type:String,default:""},exerciseId:{type:Number,default:-1},level:{type:Number,default:0},isLast:{type:Boolean,default:!1}},computed:x(x({},Object(s.e)("ItemBank",{isMember:function(e){return e.ItemBankExercise.isMember},ItemBankExercise:function(e){return e.ItemBankExercise}})),{},{btnText:function(){var e;return h((null===(e=this.section.latestAnswerRecord)||void 0===e?void 0:e.status)||"")},hasQuestion:function(){return this.section.question_num>0},learnNum:function(){return this.isMember?this.section.latestAnswerRecord?"".concat(this.section.latestAnswerRecord.doneQuestionNum,"/"):"0/":""},allNum:function(){return this.section.latestAnswerRecord?"".concat(this.section.latestAnswerRecord.questionNum):"".concat(this.section.question_num)}}),watch:{},mounted:function(){var e=this;this.$route.query.categoryId&&this.section.children.length>0&&this.$nextTick((function(){e.scrollToCategory(e.$route.query.categoryId)}))},methods:{clickBtn:function(){var e;switch(null===(e=this.section.latestAnswerRecord)||void 0===e?void 0:e.status){case"doing":case"paused":this.continueDo(this.section);break;case"reviewing":case"finished":this.goResult(this.section);break;default:this.startDo(this.section)}},startDo:function(e){var t,n;if("closed"!=(null===(t=this.ItemBankExercise)||void 0===t?void 0:t.status)&&"0"!=(null===(n=this.ItemBankExercise)||void 0===n?void 0:n.canLearn)){var i={moduleId:this.moduleId,categoryId:e.id,exerciseId:this.exerciseId,backUrl:"/item_bank_exercise/".concat(this.exerciseId,"?categoryId=").concat(e.id)};this.$router.push({path:"/brushIntro",query:i})}else Object(f.a)("exercise")},continueDo:function(e){var t,n;if("closed"!=(null===(t=this.ItemBankExercise)||void 0===t?void 0:t.status)&&"0"!=(null===(n=this.ItemBankExercise)||void 0===n?void 0:n.canLearn)){var i={moduleId:this.moduleId,categoryId:e.id,exerciseId:this.exerciseId,answer_record_id:e.latestAnswerRecord.answerRecordId,backUrl:"/item_bank_exercise/".concat(this.exerciseId,"?categoryId=").concat(e.id)};this.$router.push({path:"/brushIntro",query:i})}else Object(f.a)("exercise")},goResult:function(e){var t={type:"chapter",title:e.name,exerciseId:this.exerciseId,categoryId:e.id,moduleId:this.moduleId,backUrl:"/item_bank_exercise/".concat(this.exerciseId,"?categoryId=").concat(e.id)},n=e.latestAnswerRecord.answerRecordId;this.$router.push({path:"/brushResult/".concat(n),query:t})},scrollToCategory:function(){var e=this.$refs["exercise_"+this.$route.query.categoryId];if(e){var t=e[0].offsetTop||e.offsetTop;window.scrollTo({top:t+222,behavior:"smooth"})}}}},k=Object(c.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col"},[n("div",{staticClass:"flex justify-between items-center p-8 px-12",class:{"bg-[#FAFAFA]":0===e.level},staticStyle:{"border-radius":"6px"}},[n("div",{staticClass:"flex items-center w-full",on:{click:function(t){e.isUnfold=!e.isUnfold}}},[e.isUnfold?e._e():n("van-icon",{staticClass:"mr-12",class:{"opacity-0":0===e.section.children.length},attrs:{name:"arrow-down",color:"#5E6166"}}),e.isUnfold?n("van-icon",{staticClass:"mr-12",class:{"opacity-0":0===e.section.children.length},attrs:{name:"arrow-up",color:"#5E6166"}}):e._e(),n("div",{staticClass:"w-full mr-12 text-14 text-[#37393D] font-normal truncate",class:{"font-medium":0===e.level,"ml-16":2===e.level},staticStyle:{"line-height":"22px"}},[e._v(e._s(e.section.name))])],1),"0"!==e.allNum?n("div",{staticClass:"flex items-center"},[n("div",{staticClass:"mr-12 text-14 font-normal text-[#87898F] h-fit whitespace-nowrap",staticStyle:{"line-height":"22px"}},[e._v(e._s(e.learnNum)+e._s(e.allNum)+"题")]),n("button",{staticClass:"text-12 font-normal border-[#408ffb] bg-white whitespace-nowrap p-4 px-8",class:[e.btnText.class],staticStyle:{"line-height":"20px","border-radius":"6px"},on:{click:function(t){return e.clickBtn()}}},[e._v(e._s(e.btnText.text))])]):e._e()]),2!==e.level||e.isLast?n("div",{staticClass:"mb-8"}):n("div",{staticClass:"border-b border-[#F2F3F5] my-8 ml-44"}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isUnfold,expression:"isUnfold"}]},e._l(e.section.children,(function(t,i){return n("div",{key:t.id,ref:"exercise_"+t.id,refInFor:!0},[n("exercise-section",{attrs:{"exercise-id":e.exerciseId,"module-id":e.moduleId,"is-last":i+1===e.section.children.length,level:e.level+1,section:t}})],1)})),0)])}),[],!1,null,null,null).exports;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={components:{exerciseSection:k,empty:u.a},data:function(){return{newExercise:[]}},props:{exercise:{type:Array,default:[]},isLoading:{type:Boolean,default:!0},moduleId:{type:String,default:""},exerciseId:{type:Number,default:-1}},computed:{noData:function(){return!this.isLoading&&!this.exercise.length}},created:function(){},watch:{exercise:function(e){var t=this;if(this.newExercise=this.nestItems(e),e.length>0){var n=this.$route.query.categoryId;n&&this.newExercise.length>0&&this.$nextTick((function(){t.scrollToCategory(n)}))}}},methods:{getClass:function(e){switch(e){case 1:return"exercise-charp";case 2:return"exercise-section";case 3:return"exercise-task"}},nestItems:function(e){var t={};e.forEach((function(e){t[e.id]=j(j({},e),{},{children:[]})}));var n=[];return e.forEach((function(e){var i=e.parent_id;if("0"===i)n.push(t[e.id]);else{var r=t[i];r&&r.children.push(t[e.id])}})),n},scrollToCategory:function(){var e=this.$refs["exercise_"+this.$route.query.categoryId];if(e){var t=e[0].offsetTop||e.offsetTop;window.scrollTo({top:t+222,behavior:"smooth"})}}}},_=Object(c.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brush-exercise-exercise"},[e.isLoading?n("van-loading",{attrs:{vertical:"",size:"24",color:"#1989fa"}},[e._v("加载中...")]):e._e(),e.exercise.length?e._l(e.newExercise,(function(t,i){return n("div",{key:t.id,ref:"exercise_"+t.id,refInFor:!0},[n("exercise-section",{attrs:{"exercise-id":e.exerciseId,"module-id":e.moduleId,"is-last":i+1===e.newExercise.length,level:0,section:t}})],1)})):e._e(),e.noData?n("empty",{staticClass:"empty__exam",attrs:{text:"暂无练习"}}):e._e()],2)}),[],!1,null,null,null).exports,B=n("3ce7");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={data:[],paging:{limit:10,offset:0,total:0},finished:!1},S={hasJoin:"getMyItemBankAssessments",noJoin:"getItemBankAssessments"},P={hasJoin:"getMyItemBankCategories",noJoin:"getItemBankCategories"},$={components:{swiperTab:l,exam:b,exercise:_},data:function(){return{currentType:"",isLoading:!0,moduleId:"",list:{},timer:null}},props:{exerciseId:{type:Number,default:-1}},computed:E(E({},Object(s.e)("ItemBank",{module:function(e){return e.ItemBankModules},isMember:function(e){return e.ItemBankExercise.isMember},id:function(e){return e.ItemBankExercise.id}})),{},{joinStatus:function(){return this.isMember?"hasJoin":"noJoin"}}),watch:{module:{handler:"getData",immediate:!0}},created:function(){this.getData()},methods:E(E({},Object(s.c)("ItemBank",["getDirectoryModules"])),{},{getData:function(e){e&&e.length&&(this.currentType=e[0].type,this.list[e[0].id]=JSON.parse(JSON.stringify(D)),this.moduleId=e[0].id,this.changeData(e[0].id))},judegIsAll:function(e){return this.list[this.moduleId].data.length>=e.paging.total},getMyItemBankAssessments:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.moduleId,i=this.joinStatus;if(!this.list[n].hasOwnProperty("isRequestCompile")||this.list[n].isRequestCompile){this.list[n].isRequestCompile=!1,this.isLoading=!0;var r={exerciseId:Number(this.exerciseId),moduleId:Number(n)},s={offset:this.list[n].paging.offset,limit:this.list[n].paging.limit};B.a[S[i]]({query:r,params:s}).then((function(i){e.list[n].data=t?e.list[n].data.concat(i.data):i.data,e.list[n].finished=e.judegIsAll(i),e.list[n].finished||(e.list[n].paging.offset=e.list[n].data.length),e.isLoading=!1,e.list[n].isRequestCompile=!0,e.$forceUpdate()})).catch((function(t){e.isLoading=!1,e.$toast(t.message)}))}},getMytemBankCategories:function(){var e=this,t=this.joinStatus,n=this.moduleId;this.isLoading=!0;var i={exerciseId:Number(this.exerciseId),moduleId:Number(n)};B.a[P[t]]({query:i}).then((function(t){e.list[n].data=t,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$toast(t.message)}))},changeData:function(){"chapter"===this.currentType?this.getMytemBankCategories():this.getMyItemBankAssessments()},changModule:function(e){this.currentType=e.type,this.moduleId=e.id,this.list[e.id]||(this.list[e.id]=JSON.parse(JSON.stringify(D)),this.changeData(e.id))},loadMore:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.list[e.moduleId].finished||e.isLoading||e.getMyItemBankAssessments(!0)}),300)}})},T=Object(c.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brush-exercise-directory",staticStyle:{background:"#F5F5F5"}},[n("swiperTab",{on:{changModule:e.changModule}}),n("exam",{directives:[{name:"show",rawName:"v-show",value:"assessment"===e.currentType,expression:"currentType === 'assessment'"}],attrs:{exercise:e.list[e.moduleId].data,isLoading:e.isLoading,finished:e.list[e.moduleId].finished},on:{loadMore:e.loadMore}}),n("exercise",{directives:[{name:"show",rawName:"v-show",value:"chapter"===e.currentType,expression:"currentType === 'chapter'"}],attrs:{exercise:e.list[e.moduleId].data,isLoading:e.isLoading,moduleId:e.moduleId,exerciseId:e.exerciseId}})],1)}),[],!1,null,null,null).exports,M=n("e656"),q=n("86ee");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R={name:"ReviewList",components:{review:M.a,moreMask:q.a},props:["title","defaulValue","type"],data:function(){return{maxShowNum:5,type1:"classroom"}},computed:L(L({},Object(s.e)("ItemBank",{reviews:function(e){return e.reviews},targetId:function(e){return e.ItemBankExercise.id}})),{},{isBank:function(){return"item_bank_exercise"===this.type}}),methods:{loadMore:function(){this.$router.push({path:"/comment/".concat(this.targetId),query:{type:this.type}})}}},F=Object(c.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null===e.reviews?n("div",[n("van-loading",{staticClass:"mt30",attrs:{color:"#1989fa",size:"24px",vertical:""}},[e._v("加载中...")])],1):n("e-panel",{attrs:{title:e.title,"need-flex":!1,"defaul-value":e.defaulValue}},[e.reviews.length?n("moreMask",{attrs:{"max-height":400},on:{maskLoadMore:e.loadMore}},[e._l(e.reviews,(function(t,i){return[n("review",{key:i,attrs:{review:t,"is-class":e.isBank}})]}))],2):e._e()],1)],1)}),[],!1,null,null,null).exports;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var H={components:{},data:function(){return{isFree:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,Object(s.a)("ItemBank").mapState)({ItemBankExercise:function(e){return e.ItemBankExercise}})),watch:{},created:function(){},methods:{filterPrice:function(){var e=this.ItemBankExercise;return Number(e.isFree)||"0.00"===e.price?(this.isFree=!0,this.$t("questionBank.free")):(this.isFree=!1,"¥".concat(e.price))},learnExpiryHtml:function(){var e={expiryMode:this.ItemBankExercise.expiryMode,expiryDays:this.ItemBankExercise.expiryDays,expiryStartDate:this.ItemBankExercise.expiryStartDate,expiryEndDate:this.ItemBankExercise.expiryEndDate};return p(e)}}},J=Object(c.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("e-panel",{attrs:{title:e.ItemBankExercise.title}},[n("div",{staticClass:"course-detail__plan-price"},[n("span",{class:{isFree:e.isFree}},[e._v(e._s(e.filterPrice())+" ")]),n("span",{staticClass:"plan-price__student-num"},[e._v("\n        "+e._s(e.$t("questionBank.personStudying",{number:e.ItemBankExercise.studentNum}))+"\n      ")])])]),n("div",{staticClass:"course-detail__validity"},[n("div",[n("span",{staticClass:"mr20"},[e._v(e._s(e.$t("questionBank.validity")))]),n("span",{staticClass:"dark"},[e._v(e._s(e.learnExpiryHtml()))])])])],1)}),[],!1,null,null,null).exports,V=n("39ed"),U=n("63dd"),z=n("faa5");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=Object(s.a)("ItemBank").mapState,G={components:{directory:T,reviewList:F,introduction:J,closedFixed:V.a},props:["details"],mixins:[U.a],data:function(){return{active:1,show_question_bank_review:this.$store.state.goods.show_question_bank_review,isOpen:!0}},computed:K({},Q({ItemBankExercise:function(e){return e.ItemBankExercise},cover:function(e){return e.ItemBankExercise.cover},id:function(e){return e.ItemBankExercise.id}})),watch:{},created:function(){this.signContractConfirm()},mounted:function(){this.tryInitAIAgentSdk()},methods:K(K({},Object(s.d)("course",{setSourceType:z.A})),{},{tryInitAIAgentSdk:function(){var e=this;B.a.getItemBankExercise({query:{id:this.$route.params.id}}).then((function(t){t.aiTeacherDomain&&e.initAIAgentSdk(e.$store.state.user.aiAgentToken,{domainId:t.aiTeacherDomain},20,20,null),t.studyPlanGenerated&&(sdk.removeShortcut("plan.create"),sdk.addShortcut("plan.check",{name:"查看学习计划",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M13 2H3C2.44772 2 2 2.44772 2 3V13C2 13.5523 2.44772 14 3 14H13C13.5523 14 14 13.5523 14 13V3C14 2.44772 13.5523 2 13 2Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M7.00016 4.33301H4.3335V6.99967H7.00016V4.33301Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M7.00016 9H4.3335V11.6667H7.00016V9Z" stroke="#333333" stroke-linejoin="round"/>\n<path d="M9 9.33301H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9 11.667H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9 4.33301H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9 6.66699H11.6667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',type:"Send",data:{content:"查看学习计划"}}),sdk.addShortcut("plan.recreate",{name:"重新制定学习计划",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M12.2426 12.2426C11.1569 13.3284 9.65687 14 8 14C4.6863 14 2 11.3137 2 8C2 4.6863 4.6863 2 8 2C9.65687 2 11.1569 2.67157 12.2426 3.75737C12.7953 4.31003 14 5.66667 14 5.66667" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14 2.66699V5.66699H11" stroke="#333333" stroke-linecap="round" stroke-linejoin="round"/>\n',type:"Send",data:{content:"重新制定学习计划"}}))})).catch((function(e){console.log(e)}))},signContractConfirm:function(){var e=this,t=this.ItemBankExercise,n=t.contract;if(1!=t.isContractSigned&&"no"!==n.sign){var i=n.id,s=n.goodsKey,a=n.name;r.a.confirm({title:this.$t("contract.signContractTitle"),message:this.$t("contract.signContractTips",{name:a}),confirmButtonText:this.$t("contract.sign")}).then((function(){e.$router.push({name:"signContract",params:{id:i,goodsKey:s}})})).catch((function(){e.$router.go(-1)}))}}})},W=(n("5c69"),Object(c.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"brush-exercise-detail-bank"},[n("img",{staticClass:"brush-exercise-cover",attrs:{src:e.cover.large}}),n("van-tabs",{attrs:{sticky:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tab",{attrs:{title:e.$t("questionBank.intro")}},[n("introduction")],1),n("van-tab",{attrs:{title:e.$t("questionBank.catalogue")}},[n("directory",{attrs:{exerciseId:Number(e.id)}})],1),1==e.show_question_bank_review?n("van-tab",{attrs:{title:e.$t("questionBank.comment")}},[n("review-list",{ref:"review",attrs:{title:e.$t("questionBank.comment"),"defaul-value":e.$t("questionBank.noContent"),type:"item_bank_exercise"}})],1):e._e()],1)],1),n("div",{staticClass:"footer"},["closed"==e.ItemBankExercise.status?n("closedFixed",{attrs:{isJoin:!0,title:e.$t("closed.exerciseTitle"),content:e.$t("closed.exerciseContent")}}):e._e()],1)])}),[],!1,null,"61f422f1",null).exports),X=(n("e7e5"),n("d399"));function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=Object(s.a)("ItemBank"),ne=te.mapState,ie=te.mapActions,re=te.mapMutations,se={components:{directory:T,reviewList:F,introduction:J,closedFixed:V.a},data:function(){return{timer:null,active:0,show_question_bank_review:this.$store.state.goods.show_question_bank_review}},computed:ee({},ne({ItemBankExercise:function(e){return e.ItemBankExercise},id:function(e){return e.ItemBankExercise.id}})),beforeRouteLeave:function(e,t,n){clearTimeout(this.timer)},watch:{},created:function(){},methods:ee(ee(ee({},ie(["setItemBankExercise"])),re({changJoinStatus:z.c})),{},{handleJoin:function(){var e;"closed"!=(null===(e=this.ItemBankExercise)||void 0===e?void 0:e.status)?this.$store.state.token?"success"!==this.ItemBankExercise.access.code?this.$toast(this.ItemBankExercise.access.msg):this.joinItemBank():this.$router.push({name:"login",query:{redirect:this.$route.path}}):this.$router.push({path:"/goods/closed",query:{type:"exercise"}})},joinItemBank:function(){var e=this;this.timer||(this.timer=setTimeout((function(){var t={exerciseId:e.id};X.a.loading({duration:0,forbidClick:!0,message:"提交中"}),B.a.joinItemBank({query:t}).then((function(t){e.judgeIsJoin(t)})).catch((function(t){e.$toast(t.message)})),e.timer=null}),1e3))},judgeIsJoin:function(e){var t=this;X.a.clear(),Object.keys(e).length?(this.$toast("加入成功"),setTimeout((function(){t.changJoinStatus(!0),X.a.clear()}),1e3)):this.getOrder()},learnExpiryHtml:function(){var e={expiryMode:this.ItemBankExercise.expiryMode,expiryDays:this.ItemBankExercise.expiryDays,expiryStartDate:this.ItemBankExercise.expiryStartDate,expiryEndDate:this.ItemBankExercise.expiryEndDate};return p(e)},getOrder:function(){var e=this.learnExpiryHtml();this.$router.push({name:"order",params:{id:this.ItemBankExercise.id},query:{expiryScope:e,targetType:"item_bank_exercise"}})}})},ae=Object(c.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brush-exercise-detail-bank brush-exercise-joinbefore"},[n("img",{staticClass:"brush-exercise-cover",attrs:{src:e.ItemBankExercise.cover.large}}),n("van-tabs",{attrs:{sticky:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tab",{attrs:{title:"课程简介"}},[n("introduction")],1),n("van-tab",{attrs:{title:"课程目录"}},[n("directory",{attrs:{exerciseId:Number(e.id)}})],1),1==e.show_question_bank_review?n("van-tab",{attrs:{title:"学员评价"}},[n("review-list",{ref:"review",attrs:{title:"学员评价","defaul-value":"暂无评价",type:"item_bank_exercise"}})],1):e._e()],1),n("e-footer",["closed"==e.ItemBankExercise.status?n("closedFixed",{attrs:{isJoin:!1,title:e.$t("closed.exerciseTitle")}}):e._e(),n("div",{on:{click:e.handleJoin}},[e._v("加入题库")])],1)],1)}),[],!1,null,null,null).exports;function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le={components:{},data:function(){return{currentComp:""}},computed:ce(ce({},Object(s.e)("ItemBank",{isMember:function(e){return e.ItemBankExercise.isMember}})),Object(s.e)({isLoading:function(e){return e.isLoading}})),watch:{isMember:{handler:"joinStatusChange",deep:!0}},created:function(){this.getData(),this.getDataItemBank()},methods:ce(ce({},Object(s.c)("ItemBank",["setItemBankExercise","getDirectoryModules","getDataItemBankReviews"])),{},{getData:function(){var e=Number(this.$route.params.id);e&&(this.setItemBankExercise(e),this.getDirectoryModules(e))},joinStatusChange:function(e){this.currentComp="",this.currentComp=e?W:ae},getDataItemBank:function(){var e=Number(this.$route.params.id);this.getDataItemBankReviews({targetId:e,targetType:"item_bank_exercise"})}})},ue=Object(c.a)(le,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{},[this.isLoading?t("e-loading"):this._e(),t(this.currentComp,{tag:"component"})],1)}),[],!1,null,null,null);t.default=ue.exports},f922:function(e,t,n){}}]);