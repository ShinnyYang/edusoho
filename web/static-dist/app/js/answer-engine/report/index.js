/*! For license information please see index.js.LICENSE.txt */
!function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],f=0,h=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);h.length;)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={129:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/static-dist/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([1476,0]),n()}({1476:function(t,e,n){"use strict";n.r(e);var r=n(94),a=n.n(r),o=n(170),i=n.n(o),s=n(139),c=n.n(s),u=n(27),l=n.n(u),f=n(18),h=n.n(f),d=n(44),p=n.n(d),v=n(15),m=n.n(v),w=n(26),y=n.n(w),g=n(22),b=n.n(g),_=n(20),x=n.n(_),A=n(38),k=n.n(A),S=n(19),E=n.n(S),R=n(53),j=n.n(R),L=n(13),T=n.n(L),q=n(101);function C(t,e){var n=void 0!==y.a&&t[i.a]||t["@@iterator"];if(!n){if(a()(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?c()(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw s}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function I(){I=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=b.a||function(t,e,n){t[e]=n.value},o="function"==typeof y.a?y.a:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return b()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof A?e:A,i=m()(o.prototype),s=new D(r||[]);return a(i,"_invoke",{value:q(t,n,s)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var v="suspendedStart",w="executing",g="completed",_={};function A(){}function k(){}function S(){}var E={};u(E,i,(function(){return this}));var $=p.a,R=$&&$($(H([])));R&&R!==n&&r.call(R,i)&&(E=R);var j=S.prototype=A.prototype=m()(E);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(a,o,i,s){var c=d(t[a],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==h()(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function q(e,n,r){var a=v;return function(o,i){if(a===w)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=C(s,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===v)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=w;var u=d(e,n,r);if("normal"===u.type){if(a=r.done?g:"suspendedYield",u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=g,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var o=d(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function H(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(h()(e)+" is not iterable")}return k.prototype=S,a(j,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:k,configurable:!0}),k.displayName=u(S,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return l.a?l()(t,S):(t.__proto__=S,u(t,c,"GeneratorFunction")),t.prototype=m()(j),t},e.awrap=function(t){return{__await:t}},L(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,o){void 0===o&&(o=x.a);var i=new T(f(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(j),u(j,c,"Generator"),u(j,i,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=H,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;F(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:H(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}var F={data:function(){var t;return t={collect:1==$("[name='collect']").val(),answerShow:$("[name=answer_show]").val(),showCKEditorData:{publicPath:$("[name=ckeditor_path]").val(),filebrowserImageUploadUrl:$("[name=ckeditor_image_upload_url]").val(),filebrowserImageDownloadUrl:$("[name=ckeditor_image_download_url]").val(),language:"zh_CN"===document.documentElement.lang?"zh-cn":document.documentElement.lang,jqueryPath:$("[name=jquery_path]").val()},courseSetStatus:"",showAttachment:$("[name=show_attachment]").val(),cdnHost:$("[name=cdn_host]").val(),fileId:0,showDoAgainBtn:void 0===$("[name=show_do_again_btn]").val()?1:T()($("[name=show_do_again_btn]").val()),showReturnBtn:void 0===$("[name=submit_return_url]").val()?0:$("[name=submit_return_url]").val().length,isDownload:"1"===JSON.parse($("[name=question_bank_attachment_setting]").val()).enable,assessmentResponses:{}},j()(t,"isDownload","1"===JSON.parse($("[name=question_bank_attachment_setting]").val()).enable),j()(t,"exercise",{}),j()(t,"answerText",{}),j()(t,"stopAnswer",{}),t},provide:function(){return{modeOrigin:"do"}},created:function(){var t=location.pathname.match(/\/([^\/]+)\/([^\/]+)/),e=t[1],n=t[2];"course"==e&&this.getCourse(n),"item_bank_exercise"==e&&this.getExercise(n);var r=this;$.ajax({url:"/api/answer_record/"+$("[name='answer_record_id']").val(),type:"GET",async:!1,headers:{Accept:"application/vnd.edusoho.v2+json"},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content")),t.setRequestHeader("X-Requested-With","XMLHttpRequest")}}).done((function(t){r.metaActivity=t.metaActivity,r.assessment=t.assessment,r.answerReport=t.answer_report,r.answerRecord=t.answer_record,r.answerScene=t.answer_scene,r.assessmentResponses=t.assessment_response})),$.ajax({url:"/api/assessments/"+r.assessment.id+"/question_favorites",type:"GET",async:!1,headers:{Accept:"application/vnd.edusoho.v2+json"},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content")),t.setRequestHeader("X-Requested-With","XMLHttpRequest")}}).done((function(t){r.questionFavorites=t}))},methods:{getExercise:function(t){var e=this;return E()(I().mark((function n(){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.o.getExercise(t);case 2:r=n.sent,e.exercise=r;case 4:case"end":return n.stop()}}),n)})))()},getCourse:function(t){var e=this;return E()(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.g.getSingleCourse(t).then((function(t){e.courseSetStatus=t.canLearn}));case 2:case"end":return n.stop()}}),n)})))()},doAgainEvent:function(t){"closed"===($("[name=assessment_status]").length>0?$("[name=assessment_status]").val():"")?this.$error({title:"试卷已关闭",okText:"确定",centered:!0,onOk:function(){window.location.href=$("[name=return_url]").val()}}):location.href=$("[name=restart_url]").val()},cancelFavoriteEvent:function(t){$.ajax({url:"/api/me/question_favorite/1",headers:{Accept:"application/vnd.edusoho.v2+json"},contentType:"application/json;charset=utf-8",type:"DELETE",beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))},data:k()(t)}).done((function(t){}))},gotoReturnUrl:function(){parent.location.href=$("[name=submit_return_url]").val()},returnUrlGoto:function(){parent.location.href=$("[name=submit_return_url]").val()},favoriteEvent:function(t){$.ajax({url:"/api/me/question_favorite",headers:{Accept:"application/vnd.edusoho.v2+json"},contentType:"application/json;charset=utf-8",type:"POST",beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))},data:k()(t)}).done((function(t){}))},deleteAttachment:function(t,e){e&&(this.fileId=t)},previewAttachment:function(t){this.fileId=t},downloadAttachment:function(t){this.fileId=t},previewAttachmentCallback:function(){var t=this,e=this;return new x.a((function(n){$.ajax({url:$("[name=preview-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){console.log(app),console.log(t),t.data.sdkBaseUri=app.cloudSdkBaseUri,t.data.disableDataUpload=app.cloudDisableLogReport,t.data.disableSentry=app.cloudDisableLogReport,n(t),e.fileId=0}))}))},downloadAttachmentCallback:function(){var t=this,e=this;return new x.a((function(n){$.ajax({url:$("[name=download-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){n(t),e.fileId=0}))}))},deleteAttachmentCallback:function(){var t=this,e=this;return new x.a((function(n){$.ajax({url:$("[name=delete-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){n(t),e.fileId=0}))}))},getAiAnalysis:function(t,e){var n=this;return E()(I().mark((function r(){var a,o,i,s,c,u,l,f,h,d,p,v,m,w,y,g,b;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={role:"student",questionId:t,answerRecordId:n.answerRecord.id},o=!1,i=[],n.answerText[t]="",n.stopAnswer[t]=!1,s=setInterval((function(){0!==i.length&&(n.stopAnswer[t]?clearInterval(s):(n.answerText[t]+=i.shift(),0===i.length&&o&&(clearInterval(s),e()),$(".js-ai-analysis".concat(t)).text(n.answerText[t])))}),50),r.next=8,fetch("/api/ai/question_analysis/generate",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.edusoho.v2+json"},body:k()(a)});case 8:c=r.sent,u=c.body.getReader(),l=new TextDecoder,f="";case 12:return r.next=15,u.read();case 15:h=r.sent,d=h.done,p=h.value,v=(f+l.decode(p)).split("\n\n"),m=1,w=C(v);try{for(w.s();!(y=w.n()).done;)g=y.value,m==v.length?f=g:("message"===(b=JSON.parse(g.slice(5))).event&&i.push(b.answer),m++)}catch(t){w.e(t)}finally{w.f()}if(!d){r.next=25;break}return o=!0,r.abrupt("break",27);case 25:r.next=12;break;case 27:case"end":return r.stop()}}),r)})))()},stopAiAnalysis:function(t){this.stopAnswer[t]=!0}}},D=n(39),H=Object(D.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ibs-vue",attrs:{id:"app"}},[n("item-report",{attrs:{answerShow:t.answerShow,metaActivity:t.metaActivity,answerReport:t.answerReport,assessment:t.assessment,answerRecord:t.answerRecord,isDownload:t.isDownload,answerScene:t.answerScene,questionFavorites:t.questionFavorites,showCKEditorData:t.showCKEditorData,showAttachment:t.showAttachment,showDoAgainBtn:t.showDoAgainBtn,cdnHost:t.cdnHost,collect:t.collect,assessmentResponses:t.assessmentResponses,exercise:t.exercise,courseSetStatus:t.courseSetStatus,previewAttachmentCallback:t.previewAttachmentCallback,downloadAttachmentCallback:t.downloadAttachmentCallback,answerText:t.answerText},on:{previewAttachment:t.previewAttachment,downloadAttachment:t.downloadAttachment,doAgainEvent:t.doAgainEvent,cancelFavoriteEvent:t.cancelFavoriteEvent,favoriteEvent:t.favoriteEvent,submitReturn:t.returnUrlGoto,getAiAnalysis:t.getAiAnalysis,stopAiAnalysis:t.stopAiAnalysis}},[t.showReturnBtn?n("template",{slot:"returnBtn"},[n("div",{staticClass:"ibs-text-center ibs-mt16"},[n("a-button",{attrs:{type:"primary",shape:"round"},on:{click:t.gotoReturnUrl}},[t._v(t._s("返回错题本"))])],1)]):t._e()],2)],1)}),[],!1,null,null,null).exports,G=n(32);if(jQuery.support.cors=!0,Object(G.g)()&&$("body, html").css({height:"100%",overflow:"auto"}),Vue.config.productionTip=!1,"en"==app.lang){var N=local.default;itemBank.default.install(Vue,{locale:N})}new Vue({render:function(t){return t(H)}}).$mount("#app")}});