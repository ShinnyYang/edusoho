!function(e){function t(t){for(var r,s,o=t[0],l=t[1],d=t[2],c=0,m=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);m.length;)m.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},i={160:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static-dist/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=l;n.push([1567,0]),a()}({1567:function(e,t,a){"use strict";a.r(t);var r=a(22),i=a.n(r),n=a(105),s=a.n(n),o=a(72),l=a.n(o),d=a(69),u=a.n(d),c=a(73),m=a.n(c),p=a(50),h=a.n(p),g=a(31),f=a.n(g),v=a(4),_=a.n(v),b=a(5),y=a.n(b),k=a(109),w=a(86),C=a(125);function j(e,t){var a=h()(e);if(m.a){var r=m()(e);t&&(r=r.filter((function(t){return u()(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):l.a?s()(e,l()(a)):j(Object(a)).forEach((function(t){i()(e,t,u()(a,t))}))}return e}new(function(){function e(){_()(this,e),this.drag=$("#drag-btn").length?new w.a($("#drag-btn"),$(".js-jigsaw"),{limitType:"web_register"}):null,this.setValidateRule(),this.dragEvent(),this.clickEvent(),this.initValidator(),this.inEventMobile(),this.initMobileMsgVeriCodeSendBtn(),this.initFieldVisitId(),this.submitFrom()}return y()(e,[{key:"dragEvent",value:function(){var e=this;this.drag&&this.drag.on("success",(function(t){e._smsBtnable()}))}},{key:"clickEvent",value:function(){$(".open-eye").on("click",(function(){$("#register_password").attr("type","password"),$(".open-eye").hide(),$(".close-eye").show()})),$(".close-eye").on("click",(function(){$("#register_password").attr("type","text"),$(".close-eye").hide(),$(".open-eye").show()}))}},{key:"setValidateRule",value:function(){$.validator.addMethod("spaceNoSupport",(function(e,t){return e.indexOf(" ")<0}),$.validator.format(Translator.trans("validate.have_spaces")))}},{key:"initValidator",value:function(){var e=this;$("#register-form").validate(T(T({},this._validataRules()),{},{highlight:function(e){$(e).css("border","1px solid red"),"password"===e.name&&$(".register_password-tip").hide()}})),$.validator.addMethod("email_or_mobile_check",(function(t,a,r){var i=!1,n=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t),s=/^1\d{10}$/.test(t);return s?($(".email_mobile_msg").removeClass("hidden"),e.captchEnable||$(".js-drag-jigsaw").addClass("hidden")):($(".email_mobile_msg").addClass("hidden"),$(".js-drag-jigsaw").removeClass("hidden")),(n||s)&&(i=!0),$.validator.messages.email_or_mobile_check=Translator.trans("validate.mobile_or_email_message"),this.optional(a)||i}),Translator.trans("validate.email_or_mobile_check.message"))}},{key:"inEventMobile",value:function(){var e=this;$("#register_emailOrMobile").blur((function(){var t=$("#register_emailOrMobile").val();e.emSmsCodeValidate(t)})),$("#register_mobile").blur((function(){var t=$("#register_mobile").val();e.emSmsCodeValidate(t)}))}},{key:"initDragCaptchaCodeRule",value:function(){$(".js-drag-img").length&&$('[name="dragCaptchaToken"]').rules("add",{required:!0,messages:{required:Translator.trans("auth.register.drag_captcha_tips")}})}},{key:"_smsBtnDisable",value:function(){$(".js-sms-send-btn").addClass("disabled").attr("disabled",!0)}},{key:"_smsBtnable",value:function(){$(".js-sms-send-btn").removeClass("disabled").attr("disabled",!1)}},{key:"initSmsCodeRule",value:function(){$('[name="sms_code"]').rules("add",{required:!0,unsigned_integer:!0,rangelength:[6,6],es_remote:{type:"get"},messages:{rangelength:Translator.trans("validate.sms_code.message")}})}},{key:"initMobileMsgVeriCodeSendBtn",value:function(){var e=$(".js-sms-send-btn"),t=this;e.click((function(a){var r=(new C.a).getCoordinate(a,$("meta[name=csrf-token]").attr("content"));t._smsBtnDisable();var i=$('[name="verifiedMobile"]').length?"verifiedMobile":"emailOrMobile";new k.a({element:e,url:$(this).data("smsUrl"),smsType:"sms_registration",dataTo:i,captcha:!0,captchaValidated:!0,captchaNum:"dragCaptchaToken",encryptedPoint:r,preSmsSend:function(){return!0},error:function(e){t.drag.initDragCaptcha()},additionalAction:function(a){return"captchaRequired"===a&&(e.attr("disabled",!0),$(".js-drag-jigsaw").removeClass("hidden"),t.captchEnable=!0,t.drag&&t.drag.initDragCaptcha(),!0)}})}))}},{key:"_validataRules",value:function(){var e=this;return{rules:{nickname:{required:!0,byte_minlength:4,byte_maxlength:18,nickname:!0,chinese_alphanumeric:!0,es_remote:{type:"get"}},password:{spaceNoSupport:!0,check_password_high:!0},email:{required:!0,email:!0,es_remote:{type:"get"}},invitedCode:{required:!1,reg_inviteCode:!0,es_remote:{type:"get"}},emailOrMobile:{required:!0,email_or_mobile_check:!0,es_remote:{type:"get",callback:function(t){t?e._smsBtnable():e._smsBtnDisable()}}},verifiedMobile:{required:!0,phone:!0,es_remote:{type:"get",callback:function(t){t?e._smsBtnable():e._smsBtnDisable()}}},dragCaptchaToken:{required:!0}},messages:{nickname:{required:Translator.trans("auth.register.nickname_required_error_hit")},verifiedMobile:{required:Translator.trans("validate.phone.message")},emailOrMobile:{required:Translator.trans("validate.phone_and_email_input.message")},email:{required:Translator.trans("validate.valid_email_input.message")},dragCaptchaToken:{required:Translator.trans("auth.register.drag_captcha_tips")},password:{required:Translator.trans("auth.register.password_required_error_hint")}}}}},{key:"emSmsCodeValidate",value:function(e){/^1\d{10}$/.test(e)?(this.initSmsCodeRule(),$('[name="dragCaptchaToken"]').rules("remove")):(this.initDragCaptchaCodeRule(),$('[name="sms_code"]').rules("remove"))}},{key:"initFieldVisitId",value:function(){$(document).ready((function(){"undefined"!==window._VISITOR_ID&&$('[name="registerVisitId"]').val(window._VISITOR_ID)}))}},{key:"submitFrom",value:function(){var e=$("#register-form"),t=$("#modal");$("#register-btn").on("click",(function(){var a=e.validate(),r=$('input[name="agree_policy"]').prop("checked");a.form()&&(r||null==r?e.submit():(t.load("/register/agreement"),t.modal("show"),t.on("click",".js-agree-register",(function(){$('input[name="agree_policy"]').prop("checked",!0),t.modal("hide"),e.submit()})),t.on("click",".js-close-modal",(function(){t.modal("hide")}))))}))}}]),e}())},35:function(e,t){e.exports=jQuery}});