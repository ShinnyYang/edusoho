!function(t){function e(e){for(var a,o,r=e[0],c=e[1],u=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(l&&l(e);p.length;)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={336:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static-dist/";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;s.push([1571,0]),n()}({1571:function(t,e,n){"use strict";n.r(e);var a=n(12),i=n.n(a),s=n(20),o=n.n(s),r={props:{active:{type:Boolean,default:!1},id:{type:Number,default:0},question:{type:Object,default:function(){}}},methods:{changeOption:function(){this.$emit("changeOption",this.id)}}},c=n(34),u=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"duplicate-question-item",class:t.active?"duplicate-question-active":"",on:{click:t.changeOption}},[n("div",{staticClass:"duplicate-question-title"},[t._v("\n    "+t._s(t._f("stripTags")(t.question.displayMaterial))+"\n  ")]),t._v(" "),n("span",{staticClass:"duplicate-question-check-count"},[t._v(t._s(t.question.frequency)+t._s(t._f("trans")("question.bank.unit")))])])}),[],!1,null,null,null).exports,l=n(41),d=n.n(l),p={props:{info:{type:Object,default:function(){}}},data:function(){return{item:{id:"15",bank_id:"1",type:"single_choice",material:"",analysis:"",category_id:"0",difficulty:"normal",question_num:"1",created_user_id:"2",updated_user_id:"2",updated_time:"1700014654",created_time:"1700014654",is_deleted:"0",deleted_time:"0",questions:[{id:"25",item_id:"15",stem:"单选1",seq:1,score:"2.0",answer_mode:"single_choice",case_sensitive:"1",response_points:[{radio:{text:"1",val:"A"}},{radio:{text:"2",val:"B"}},{radio:{text:"3",val:"C"}},{radio:{text:"4",val:"D"}}],answer:["A"],analysis:"解析解析",created_user_id:"2",updated_user_id:"2",updated_time:"1700014654",created_time:"1700014654",score_rule:{score:2,scoreType:"question",otherScore:2},is_deleted:"0",deleted_time:"0",attachments:[]}],attachments:[]},showAttachment:$("[name=show_attachment]").val(),cdnHost:$("[name=cdn_host]").val(),fileId:0,isDownload:"1"===JSON.parse($("[name=question_bank_attachment_setting]").val()).enable}},provide:function(){return{modeOrigin:"do"}},mounted:function(){},methods:{previewAttachment:function(t){this.fileId=t},downloadAttachment:function(t){console.log(t),this.fileId=t},previewAttachmentCallback:function(){var t=this,e=this;return new d.a((function(n){$.ajax({url:$("[name=preview-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){t.data.sdkBaseUri=app.cloudSdkBaseUri,t.data.disableDataUpload=app.cloudDisableLogReport,t.data.disableSentry=app.cloudDisableLogReport,n(t),e.fileId=0}))}))},downloadAttachmentCallback:function(){var t=this,e=this;return new d.a((function(n){$.ajax({url:$("[name=download-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){n(t),e.fileId=0}))}))}}},f=Object(c.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ibs-vue",attrs:{id:"app"}},[n("item-preview",{attrs:{item:t.info,showAttachment:t.showAttachment,cdnHost:t.cdnHost,isDownload:t.isDownload,needScore:0,previewAttachmentCallback:t.previewAttachmentCallback,downloadAttachmentCallback:t.downloadAttachmentCallback},on:{previewAttachment:t.previewAttachment,downloadAttachment:t.downloadAttachment}})],1)}),[],!1,null,null,null).exports,h=n(93),v=(n(115),{props:{questionContent:{type:Object,default:function(){}},title:{type:String,default:""},count:{type:Number,default:0},type:{type:String,default:""},activeIndex:{type:Number,default:0},nextIndex:{type:Number,default:0},activeKey:{type:Number,default:0}},data:function(){return{difficultyList:{default:Translator.trans("question.bank.difficulty.default"),simple:Translator.trans("question.bank.difficulty.simple"),normal:Translator.trans("question.bank.difficulty.normal"),difficulty:Translator.trans("question.bank.difficulty")},typeList:{default:Translator.trans("course.question.by.question.type"),single_choice:Translator.trans("course.question.type.single_choice"),choice:Translator.trans("course.question.type.choice"),uncertain_choice:Translator.trans("course.question.type.uncertain_choices"),essay:Translator.trans("course.question.type.essay"),determine:Translator.trans("course.question.type.determine"),fill:Translator.trans("course.question.type.fill"),material:Translator.trans("course.question.type.material")}}},computed:{headInfo:function(){return[{title:Translator.trans("category"),content:this.questionContent.category_name||Translator.trans("question.bank.none")},{title:Translator.trans("question.bank.type"),content:this.typeList[this.questionContent.type]||Translator.trans("question.bank.none")},{title:Translator.trans("question.bank.difficulty.default"),content:this.difficultyList[this.questionContent.difficulty]||Translator.trans("question.bank.none")},{title:Translator.trans("question.bank.update_time"),content:this.$dateFormat(this.questionContent.updated_time)||Translator.trans("question.bank.none")}]}},watch:{activeIndex:function(){var t=this;return o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(o()(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.E.getQuestionInfo(t.questionContent.id);case 2:if(0!==(n=e.sent).length){e.next=6;break}return t.showErrorTip(),e.abrupt("return");case 6:t.$emit("changeQuestionContent","".concat(t.type,"Index"),n);case 7:case"end":return e.stop()}}),e)}))),1e3);case 1:case"end":return e.stop()}}),e)})))()}},components:{QuestionItem:f},methods:{getDifficulty:function(t){return this.difficultyList(t)},goPreviousQuestion:function(){var t=this;return o()(i.a.mark((function e(){var n,a,s,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.count<3)){e.next=2;break}return e.abrupt("return");case 2:if(n="one"===t.type?"two":"one",0!=t.activeIndex||t.nextIndex!=t.count-1){e.next=8;break}return a=t.nextIndex-1,e.next=7,t.$emit("changeQuestion",n,a);case 7:return e.abrupt("return");case 8:if(t.activeIndex!==t.count-1){e.next=13;break}return s=t.nextIndex!==t.activeIndex-1?t.activeIndex-1:t.activeIndex-2,e.next=12,t.$emit("changeQuestion",t.type,s);case 12:return e.abrupt("return");case 13:if(t.nextIndex!==t.count-1){e.next=21;break}return o=t.nextIndex!==t.activeIndex-1?t.activeIndex-1:t.activeIndex-2,e.next=17,t.$emit("changeQuestion",t.type,o);case 17:return r=t.activeIndex!==t.activeIndex-1?t.nextIndex-1:t.nextIndex-2,e.next=20,t.$emit("changeQuestion",n,r);case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e)})))()},onDelete:function(){var t,e=this;this.$confirm({title:Translator.trans("question.bank.delete.tip.title"),content:Translator.trans("question.bank.delete.tip.content"),icon:"exclamation-circle",okText:Translator.trans("site.confirm"),cancelText:Translator.trans("site.cancel"),onOk:(t=o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.E.delQuestion($("[name=questionBankId]").val(),e.questionContent.id);case 3:if(!t.sent){t.next=10;break}return e.$message.success(Translator.trans("site.delete_success_hint")),t.next=8,e.$emit("changeOption",e.activeKey);case 8:return t.next=10,e.goPreviousQuestion();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.showErrorTip();case 15:case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),function(){return t.apply(this,arguments)})})},showErrorTip:function(){var t,e=this;this.$error({title:Translator.trans("question.bank.error.tip.title"),content:Translator.trans("question.bank.error.tip.content"),okText:Translator.trans("site.btn.confirm"),onOk:(t=o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$emit("getData");case 2:return t.next=4,e.$emit("changeOption");case 4:return t.next=6,e.goPreviousQuestion();case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})},onEdit:function(){var t=this;return o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.E.getQuestionInfo(t.questionContent.id);case 2:if(0!==e.sent.length){e.next=6;break}return t.showErrorTip(),e.abrupt("return");case 6:store.set("DUPLICATE_MATERIAL",t.title),window.location.href="/question_bank/".concat($("[name=questionBankId]").val(),"/duplicative_question/").concat(t.questionContent.id,"/update");case 8:case"end":return e.stop()}}),e)})))()},changeQuestion:function(t){this.$emit("changeQuestion",this.type,t)}}}),m={data:function(){return{activeKey:0,introOption:{prevLabel:Translator.trans("course_set.manage.prev_label"),nextLabel:Translator.trans("question.bank.next_label"),skipLabel:Translator.trans("question.bank.skip_label"),doneLabel:Translator.trans("question.bank.finish_label"),showBullets:!1,showStepNumbers:!1,exitOnEsc:!1,exitOnOverlayClick:!1,tooltipClass:"duplicate-intro",steps:[]},oneIndex:0,twoIndex:1,isShowGuide:!1,questionData:[{material:"",frequency:"",displayMaterial:""}],questionContentList:[{analysis:"",category_name:"",type:""}]}},components:{DuplicateQuestionItem:u,DuplicateQuestionContent:Object(c.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"duplicate-question-content"},[n("div",{staticClass:"question-num"},t._l(t.count,(function(e,a){return n("button",{key:a,staticClass:"numbering relative",class:t.activeIndex==a?"numbering-active":"",attrs:{disabled:t.nextIndex==a},on:{click:function(e){return t.changeQuestion(a)}}},[t.activeIndex==a?n("img",{staticClass:"numbering-active-img",attrs:{src:"/static-dist/app/img/duplicate-active.png"}}):t._e(),t._v("\n    "+t._s(e)+"\n    ")])})),0),t._v(" "),n("div",{ref:"container",staticClass:"question-content mt8"},[n("div",{staticClass:"question-head"},t._l(t.headInfo,(function(e,a){return n("div",{key:a,staticClass:"question-head-item"},[n("div",{staticClass:"question-small-title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"question-small-content"},[t._v("\n          "+t._s(e.content)+"\n        ")])])})),0),t._v(" "),n("div",{staticClass:"question-body relative"},[n("div",{staticClass:"question-index"},[t._v(t._s(t.activeIndex+1)+".")]),t._v(" "),n("question-item",{attrs:{info:t.questionContent}})],1),t._v(" "),n("div",{staticClass:"question-foot"},[n("a-button",{staticClass:"mr10",on:{click:t.onEdit}},[t._v(t._s(t._f("trans")("site.btn.edit")))]),t._v(" "),n("a-button",{on:{click:t.onDelete}},[t._v(t._s(t._f("trans")("site.delete")))])],1)])])}),[],!1,null,null,null).exports},watch:{questionContentList:function(){var t=this;return o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.questionContentList.length){e.next=2;break}return e.abrupt("return");case 2:if(!(t.questionContentList.length>1)){e.next=4;break}return e.abrupt("return");case 4:return t.activeKey==t.questionData.length-1&&(t.activeKey-=1),e.next=7,t.getData();case 7:return e.next=9,t.changeOption(t.activeKey);case 9:case"end":return e.stop()}}),e)})))()},activeKey:function(){this.changeOption(this.activeKey),this.oneIndex=0,this.twoIndex=1}},computed:{categoryName:function(){return $("[name=categoryName]").val()?$("[name=categoryName]").val():""===$("[name=categoryId]").val()?Translator.trans("question.bank.all_question"):Translator.trans("question.bank.no_category")}},mounted:function(){var t=this;return o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:if(!t.questionData.length){e.next=5;break}return e.next=5,t.changeOption();case 5:store.get("QUESTION_DUPLICATE_INTRO")||(t.isShowGuide=!0,t.$nextTick((function(){t.initGuide()}))),$("[name=page_type]").val()&&store.get("DUPLICATE_MATERIAL")&&t.matchActive(store.get("DUPLICATE_MATERIAL"));case 7:case"end":return e.stop()}}),e)})))()},methods:{initGuide:function(){var t=this;t.isShowGuide=!0,t.introOption.steps=[{element:".duplicate-question-head",intro:Translator.trans("question.bank.check.guide.one"),position:"bottom"},{element:".question-num",intro:Translator.trans("question.bank.check.guide.two"),position:"bottom"}],introJs().setOptions(t.introOption).start().onchange((function(){t.isShowGuide=!1,document.querySelectorAll(".introjs-skipbutton")[0].style.display="inline-block",document.querySelectorAll(".introjs-prevbutton")[0].style.display="none"})).oncomplete((function(){store.set("QUESTION_DUPLICATE_INTRO",!0)}))},changeQuestion:function(t,e){this["".concat(t,"Index")]=e},showChangeOptionErr:function(){var t,e=this;this.$error({title:Translator.trans("question.bank.error.tip.title"),content:Translator.trans("question.bank.error.tip.content"),okText:Translator.trans("site.btn.confirm"),onOk:(t=o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return t.next=4,e.changeOption();case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})},changeOption:function(){var t=arguments,e=this;return o()(i.a.mark((function n(){var a,s,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:0,e.activeKey=a,n.prev=2,e.questionData.length){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,h.E.getRepeatQuestionInfo($("[name=questionBankId]").val(),{material:null===(s=e.questionData[a])||void 0===s?void 0:s.material,categoryId:$("[name=categoryId]").val()});case 7:if((o=n.sent).length){n.next=11;break}return e.showChangeOptionErr(),n.abrupt("return");case 11:e.questionContentList=o,e.questionData[a]&&(e.questionData[a].frequency=o.length.toString()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(2),e.$message.error(n.t0.message);case 18:case"end":return n.stop()}}),n,null,[[2,15]])})))()},goBack:function(){window.location.href="/question_bank/".concat($("[name=questionBankId]").val(),"/questions")},getData:function(){var t=this;return o()(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.E.getRepeatQuestion($("[name=questionBankId]").val(),$("[name=categoryId]").val());case 3:n=e.sent,t.questionData=n,n.length||(t.questionContentList=[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.$message.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},matchActive:function(t){for(var e=0;e<this.questionData.length;e++)if(this.questionData[e].material==t){this.activeKey=e;break}},changeQuestionContent:function(t,e){this.questionContentList.splice(this[t],1,e)}}},_=Object(c.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"duplicate-check"}},[n("div",{staticClass:"duplicate-head flex items-center"},[n("span",{staticClass:"duplicate-back flex items-center",on:{click:t.goBack}},[n("span",{staticClass:"es-icon es-icon-fanhui mr4"}),t._v("\n      "+t._s(t._f("trans")("importer.import_back_btn"))+"\n    ")]),t._v(" "),n("span",{staticClass:"duplicate-divider"}),t._v(" "),n("span",{staticClass:"duplicate-title flex items-center"},[n("span",{staticClass:"bankName flex items-center"},[t._v("【"),n("span",{staticClass:"msg"},[t._v(t._s(t.categoryName))]),t._v("】")]),t._v(t._s(t._f("trans")("question.bank.check")))])]),t._v(" "),n("div",{staticClass:"duplicate-body"},[n("div",{staticClass:"duplicate-question"},[n("div",{staticClass:"duplicate-question-head"},[t._v("\n        "+t._s(t._f("trans")("question.bank.common.repeated"))+":"),n("label",{staticClass:"duplicate-question-count"},[t._v(t._s(t.questionData.length))]),t._v(t._s(t._f("trans")("subject.question_unit"))+"\n\n        "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowGuide,expression:"isShowGuide"}],staticClass:"duplicate-question-item duplicate-question-active"},[t.questionData.length?n("div",{staticClass:"duplicate-question-title"},[t._v("\n            "+t._s(t._f("stripTags")(t.questionData[0].displayMaterial))+"\n          ")]):t._e(),t._v(" "),t.questionData.length?n("span",{staticClass:"duplicate-question-check-count"},[t._v(t._s(t.questionData[0].frequency)+t._s(t._f("trans")("question.bank.unit")))]):t._e()])]),t._v(" "),t._l(t.questionData,(function(e,a){return n("duplicate-question-item",{key:a,attrs:{active:a==t.activeKey,id:a,question:e},on:{changeOption:t.changeOption}})}))],2),t._v(" "),n("div",{staticClass:"duplicate-content"},[n("div",{staticClass:"duplicate-content-title"},[t._v(t._s(t._f("trans")("question.bank.topic.comparison")))]),t._v(" "),t.questionContentList.length>1?n("div",{staticClass:"mt16 flex flex-nowrap",staticStyle:{flex:"1"}},[t.questionContentList[t.oneIndex]?n("duplicate-question-content",{staticClass:"mr16",attrs:{type:"one",activeIndex:t.oneIndex,activeKey:t.activeKey,nextIndex:t.twoIndex,questionContent:t.questionContentList[t.oneIndex],count:t.questionContentList.length,title:t.questionData[t.activeKey].material},on:{changeOption:t.changeOption,getData:t.getData,changeQuestion:t.changeQuestion,changeQuestionContent:t.changeQuestionContent}}):t._e(),t._v(" "),t.questionContentList[t.twoIndex]?n("duplicate-question-content",{attrs:{type:"two",activeIndex:t.twoIndex,activeKey:t.activeKey,nextIndex:t.oneIndex,questionContent:t.questionContentList[t.twoIndex],count:t.questionContentList.length,title:t.questionData[t.activeKey].material},on:{changeOption:t.changeOption,getData:t.getData,changeQuestion:t.changeQuestion,changeQuestionContent:t.changeQuestionContent}}):t._e()],1):n("div",{staticClass:"no-data text-center"},[n("img",{staticClass:"no-data-img",attrs:{src:"/static-dist/app/img/question-bank/noduplicative.png"}}),t._v(" "),n("div",{staticClass:"no-data-content"},[t._v(t._s(t._f("trans")("question.bank.check.result.noData.title")))]),t._v(" "),n("button",{staticClass:"return-btn",on:{click:t.goBack}},[t._v(t._s(t._f("trans")("question.bank.check.result.noData.btn")))])])])])])}),[],!1,null,null,null).exports,b=n(126),q=n.n(b);Vue.prototype.$qs=q.a,Vue.filter("trans",(function(t,e){return t?Translator.trans(t,e):""})),Vue.filter("stripTags",(function(t){return t.replace(/<[^>]*>/g,"")})),new Vue({el:"#app",render:function(t){return t(_)}})}});