{"version":3,"sources":["webpack:///src/containers/course/try.vue","webpack:///./src/containers/course/try.vue?58ad","webpack:///./src/containers/course/try.vue","webpack:///src/containers/course/detail/head.vue","webpack:///./src/containers/course/detail/head.vue?b525","webpack:///./src/containers/course/detail/head.vue","webpack:///src/containers/course/detail/directory.vue","webpack:///./src/containers/course/detail/directory.vue?cf88","webpack:///./src/containers/course/detail/directory.vue"],"names":["course_try","components","Directory","directory","DetailHead","head","computed","extends_default","Object","vuex_esm","details","state","isLoading","beforeRouteLeave","to","from","next","this","$store","commit","mutation_types","sourceType","containers_course_try","render","_h","$createElement","_c","_self","staticClass","_e","_v","attrs","courseSet","hiddeTitle","courseItems","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","props","type","default","selectedPlanId","taskId","joinStatus","watch","immediate","handler","v","oldVal","includes","window","scrollTo","initPlayer","methods","getParams","Number","tryLookable","query","courseId","params","preview","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","player","media","options","wrap","_context","prev","$refs","video","innerHTML","api","getMedia","sent","id","resId","user","playlist","url","autoplay","poster","loadPlayerSDK","then","SDK","stop","VideoPlayerSDK","scrptSrc","Date","now","promise_default","resolve","reject","load_script_default","err","detail_head","directives","name","rawName","value","expression","src","cover","large","alt","ref","Array","Boolean","data","directoryArray","chapters","tasks","filters","filterNumber","task","seq","number","length","map","item","$set","getCurrentStatus","getTasks","setSourceType","_this2","temp","forEach","push","concat","unshift","show","activity","mediaStorage","isFree","filterTaskStatus","status","lessonCellClick","allowAnonymousPreview","$route","$router","toast","showTypeDetail","mediaSource","detail_directory","_vm","title","hidde-title","_l","index","on","click","$event","_s","class","unit-show","show-box","_f"],"mappings":"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","file":"static/js/3.d3a34648e29a39fa10e6.js","sourcesContent":[" <!-- 试看页 -->\n<template>\n  <div class=\"course-detail try\">\n    <e-loading v-if=\"isLoading\"></e-loading>\n    <detail-head\n      :courseSet=\"details.courseSet\"></detail-head>\n    \n    <directory\n      :hiddeTitle=true\n      :courseItems=\"details.courseItems\"\n    ></directory>\n  </div>\n</template>\n<script>\nimport Directory from './detail/directory';\nimport DetailHead from './detail/head';\nimport { mapState } from 'vuex';\nimport * as types from '@/store/mutation-types';\n\nexport default {\n  components: {\n    Directory,\n    DetailHead\n  },\n  computed: {\n    ...mapState('course', {\n      details: state => state.details,\n    }),\n    ...mapState({\n      isLoading: state => state.isLoading,\n    })\n  },\n  beforeRouteLeave (to, from, next) {\n    this.$store.commit(`course/${types.SET_SOURCETYPE}`, {\n      sourceType: 'img'\n    });\n    next();\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/try.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-detail try\"},[(_vm.isLoading)?_c('e-loading'):_vm._e(),_vm._v(\" \"),_c('detail-head',{attrs:{\"courseSet\":_vm.details.courseSet}}),_vm._v(\" \"),_c('directory',{attrs:{\"hiddeTitle\":true,\"courseItems\":_vm.details.courseItems}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-67781eea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/try.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./try.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./try.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67781eea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./try.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/try.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"course-detail__head\">\n    <div class=\"course-detail__head--img\" \n      v-show=\"sourceType === 'img'\">\n      <img :src=\"courseSet.cover.large\" alt=\"\">\n    </div>\n    <div>132132</div>\n    <div id=\"course-detail__head--video\" \n      ref=\"video\"\n      v-show=\"['video', 'audio'].includes(sourceType)\">\n    </div>\n  </div>\n</template>\n<script>\nimport loadScript from 'load-script';\nimport { mapState } from 'vuex';\nimport Api from '@/api'\n\nexport default {\n  props: {\n    courseSet: {\n      type: Object,\n      default: {}\n    }\n  },\n  computed: {\n    ...mapState('course', {\n      sourceType: state => state.sourceType,\n      selectedPlanId: state => state.selectedPlanId,\n      taskId: state => state.taskId,\n      details: state => state.details,\n      joinStatus: state => state.joinStatus\n    })\n  },\n  watch: {\n    taskId: {\n      immediate: true,\n      handler(v, oldVal) {\n        if (['video', 'audio'].includes(this.sourceType)) {\n          window.scrollTo(0, 0);\n          this.initPlayer();\n        }\n      }\n    }\n  },\n  methods: {\n    getParams () {\n      const canTryLookable = !this.joinStatus && Number(this.details.tryLookable)\n\n      return canTryLookable ? {\n        query: {\n          courseId: this.selectedPlanId,\n          taskId: this.taskId\n        }, params: {\n          preview: 1\n        }\n      } : {\n        query: {\n          courseId: this.selectedPlanId,\n          taskId: this.taskId\n        }\n      }\n    },\n    async initPlayer (){\n      this.$refs.video && (this.$refs.video.innerHTML = '');\n\n      const player = await Api.getMedia(this.getParams());\n\n      const media = player.media;\n      const options = {\n        id: 'course-detail__head--video',\n        resId: media.resId,\n        user: {},\n        playlist: media.url,\n        autoplay: true,\n        poster: \"https://img4.mukewang.com/szimg/5b0b60480001b95e06000338.jpg\"\n      };\n\n      this.$store.commit('UPDATE_LOADING_STATUS', true);\n      this.loadPlayerSDK().then(SDK => {\n        this.$store.commit('UPDATE_LOADING_STATUS', false);\n        const player = new SDK(options);\n      })\n    },\n    loadPlayerSDK () {\n      if (!window.VideoPlayerSDK) {\n\n        const scrptSrc = `//service-cdn.qiqiuyun.net/js-sdk/video-player/sdk-v1.js?\n          v=${Date.now() / 1000 / 60}`; // Cache SDK for 1 min.\n\n        return new Promise((resolve, reject) => {\n          loadScript(scrptSrc, (err) => {\n            if (err) {\n              reject(err);\n            }\n            resolve(window.VideoPlayerSDK);\n          });\n        });\n      }\n      return Promise.resolve(window.VideoPlayerSDK);\n    },\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/detail/head.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-detail__head\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceType === 'img'),expression:\"sourceType === 'img'\"}],staticClass:\"course-detail__head--img\"},[_c('img',{attrs:{\"src\":_vm.courseSet.cover.large,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',[_vm._v(\"132132\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(['video', 'audio'].includes(_vm.sourceType)),expression:\"['video', 'audio'].includes(sourceType)\"}],ref:\"video\",attrs:{\"id\":\"course-detail__head--video\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-53234484\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/detail/head.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./head.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./head.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-53234484\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./head.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/detail/head.vue\n// module id = null\n// module chunks = ","<template>\n  <e-panel title=\"课程目录\" class=\"directory\" :hidde-title=\"hiddeTitle\">\n    <!-- 暂无学习任务 -->\n    <div v-if=\"courseItems.length == 0\" class=\"empty\">暂无学习任务</div>\n    <div class=\"directory-list\" v-else>\n      <div class=\"directory-list__item\" v-for=\"(item, index) in chapters\">\n        <div class=\"directory-list__item-chapter\" \n          @click=\"item.show = !item.show\" \n          v-if=\"item.type === 'chapter'\">\n          <span>第{{ item.number }}章：{{ item.title }}</span> \n          <i :class=\"[ item.show ? 'icon-packup': 'icon-unfold']\"></i>\n        </div>\n\n        <div :class=\"['directory-list__item-unit', \n          {'unit-show': item.show}]\"\n          v-for=\"task in tasks[index]\">\n          <div class=\"lesson-cell__unit\" v-if=\"task.type === 'unit'\">\n            第{{ task.number }}节：{{ task.title }}\n          </div>\n\n          <div :class=\"['box', {'show-box': item.show}]\" \n            v-if=\"task.type === 'task'\">\n            <div class=\"lesson-cell\">\n              <span class=\"lesson-cell__number\">{{ task | filterNumber }}</span>\n              <div class=\"lesson-cell__content\" @click=\"lessonCellClick(task)\">\n                <span>{{ task.title }}</span>\n                <span>{{ task.task.type | taskType }}{{ task.task | filterTask }}</span>\n              </div>\n              <div :class=\"['lesson-cell__status', task.status]\">\n                {{ filterTaskStatus(task) }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </e-panel>\n</template>\n<script>\n  import { mapState, mapMutations } from 'vuex';\n  import { Toast } from 'vant';\n  import * as types from '@/store/mutation-types';\n\n  export default {\n    props: {\n      courseItems: {\n        type: Array,\n        default: () => ([])\n      },\n      hiddeTitle: {\n        type: Boolean,\n        default: false\n      }\n    },\n    computed: {\n      ...mapState('course', {\n        joinStatus: state => state.joinStatus,\n        selectedPlanId: state => state.selectedPlanId,\n        details: state => state.details\n      })\n    },\n    data() {\n      return {\n        directoryArray: [],\n        chapters: [],\n        tasks: []\n      }\n    },\n    filters:{\n      filterNumber(task) {\n        return Number(task.seq)\n          ? `${task.number}-${task.seq}`\n          : `${task.number}`\n      }\n    },\n    watch: {\n      selectedPlanId: {\n        immediate: true,\n        handler(v) {\n          if (!this.details.courseItems.length) return;\n\n          this.directoryArray =\n            this.details.courseItems.map(item => {\n\n            this.$set(item, 'show', true);\n\n            if (item.type == 'task') {\n              item['status'] = this.getCurrentStatus(item.task);\n            }\n\n            return item;\n          })\n\n          this.getTasks(this.directoryArray);\n        }\n      }\n    },\n    methods: {\n      ...mapMutations('course', {\n        setSourceType: types.SET_SOURCETYPE\n      }),\n      getTasks (data) {\n        let temp = [];\n        this.chapters = [];\n        this.tasks = [];\n\n        data.forEach(item => {\n          if (item.type !== 'chapter') {\n            temp.push(item);\n          } else {\n            if (temp.length > 0) {\n              this.tasks.push([].concat(temp));\n              temp = [];\n            }else if (this.chapters.length > 0) {\n              this.tasks.push([]);\n            }\n\n            this.chapters.push(item);\n          }\n        })\n\n        const last = data.length - 1;\n\n        if (data[last].type !== 'chapter') {\n          this.tasks.push(temp);\n        }\n\n        if (data[0].type !== 'chapter') {\n          this.chapters.unshift({ show: true });\n        }\n      },\n      getCurrentStatus (task) {\n        if (Number(this.details.tryLookable)\n          && task.type === 'video'\n          && task.activity.mediaStorage) {\n          return 'is-tryLook';\n        } else if (Number(task.isFree)) {\n          return 'is-free';\n        }\n        return '';\n      },\n      filterTaskStatus (task){\n        if (task.status === 'is-tryLook') {\n          return '试看';\n        } else if (task.status === 'is-free') {\n          return '免费';\n        }\n\n        return '';\n      },\n      lessonCellClick (data) {\n        const task = data.task;\n        const details = this.details;\n\n        !details.allowAnonymousPreview && this.$route.push({name: 'login'})\n\n        if (!this.joinStatus\n          && Number(details.tryLookable)\n          && ['is-tryLook', 'is-free'].includes(data.status)) {\n        // trylook and free video click\n          switch (task.type) {\n            case 'video':\n            case 'audio':\n              this.$router.push({\n                name: 'course_try',\n              })\n\n              this.setSourceType({\n                sourceType: task.type,\n                taskId: task.id\n              });\n              break;\n            case 'doc':\n            case 'text':\n            case 'ppt':\n              this.$router.push({\n                name: 'course_web',\n                query: {\n                  courseId: this.selectedPlanId,\n                  taskId: task.id,\n                  type: task.type,\n                }\n              })\n              break;\n            default:\n              return Toast('请先加入课程');\n          }\n        } else {\n          this.joinStatus ? this.showTypeDetail(task) : Toast('请先加入课程');\n        }\n        //join after click\n      },\n      showTypeDetail (task) {\n        switch(task.type) {\n          case 'video':\n            if (task.mediaSource == 'self') {\n              this.setSourceType({\n                sourceType: 'video',\n                taskId: task.id\n              })\n            } else {\n              Toast('暂不支持此类型');\n            }\n            break;\n          case 'audio':\n            this.setSourceType({\n              sourceType: 'audio',\n              taskId: task.id\n            })\n            break;\n          case 'text':\n          case 'ppt':\n          case 'doc':\n            this.$router.push({\n              name: 'course_web',\n              query: {\n                courseId: this.selectedPlanId,\n                taskId: task.id,\n                type: task.type\n              }\n            })\n            break;\n          default:\n            Toast('暂不支持此类型');\n        }\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/detail/directory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('e-panel',{staticClass:\"directory\",attrs:{\"title\":\"课程目录\",\"hidde-title\":_vm.hiddeTitle}},[(_vm.courseItems.length == 0)?_c('div',{staticClass:\"empty\"},[_vm._v(\"暂无学习任务\")]):_c('div',{staticClass:\"directory-list\"},_vm._l((_vm.chapters),function(item,index){return _c('div',{staticClass:\"directory-list__item\"},[(item.type === 'chapter')?_c('div',{staticClass:\"directory-list__item-chapter\",on:{\"click\":function($event){item.show = !item.show}}},[_c('span',[_vm._v(\"第\"+_vm._s(item.number)+\"章：\"+_vm._s(item.title))]),_vm._v(\" \"),_c('i',{class:[ item.show ? 'icon-packup': 'icon-unfold']})]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tasks[index]),function(task){return _c('div',{class:['directory-list__item-unit', \n        {'unit-show': item.show}]},[(task.type === 'unit')?_c('div',{staticClass:\"lesson-cell__unit\"},[_vm._v(\"\\n          第\"+_vm._s(task.number)+\"节：\"+_vm._s(task.title)+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(task.type === 'task')?_c('div',{class:['box', {'show-box': item.show}]},[_c('div',{staticClass:\"lesson-cell\"},[_c('span',{staticClass:\"lesson-cell__number\"},[_vm._v(_vm._s(_vm._f(\"filterNumber\")(task)))]),_vm._v(\" \"),_c('div',{staticClass:\"lesson-cell__content\",on:{\"click\":function($event){_vm.lessonCellClick(task)}}},[_c('span',[_vm._v(_vm._s(task.title))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm._f(\"taskType\")(task.task.type))+_vm._s(_vm._f(\"filterTask\")(task.task)))])]),_vm._v(\" \"),_c('div',{class:['lesson-cell__status', task.status]},[_vm._v(\"\\n              \"+_vm._s(_vm.filterTaskStatus(task))+\"\\n            \")])])]):_vm._e()])})],2)}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6771d2fe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/detail/directory.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./directory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./directory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6771d2fe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./directory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/detail/directory.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}