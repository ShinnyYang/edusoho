{"version":3,"sources":["webpack:///src/containers/course/try.vue","webpack:///./src/containers/course/try.vue?58ad","webpack:///./src/containers/course/try.vue","webpack:///src/containers/course/detail/plan.vue","webpack:///./src/containers/course/detail/plan.vue?fb3e","webpack:///./src/containers/course/detail/plan.vue","webpack:///./src/containers/course/detail/teacher.vue?c86c","webpack:///./src/containers/course/detail/teacher.vue","webpack:///src/containers/course/detail/teacher.vue","webpack:///src/containers/course/join-after.vue","webpack:///./src/containers/course/join-after.vue?f20c","webpack:///./src/containers/course/join-after.vue","webpack:///src/containers/course/join-before.vue","webpack:///./src/containers/course/join-before.vue?a91b","webpack:///./src/containers/course/join-before.vue","webpack:///src/containers/course/index.vue","webpack:///./src/containers/course/index.vue?62e0","webpack:///./src/containers/course/index.vue","webpack:///src/containers/course/detail/head.vue","webpack:///./src/containers/course/detail/head.vue?b525","webpack:///./src/containers/course/detail/head.vue","webpack:///src/containers/course/detail/directory.vue","webpack:///./src/containers/course/detail/directory.vue?cf88","webpack:///./src/containers/course/detail/directory.vue"],"names":["course_try","components","Directory","directory","DetailHead","head","computed","extends_default","Object","vuex_esm","details","state","isLoading","beforeRouteLeave","to","from","next","this","$store","commit","mutation_types","sourceType","containers_course_try","render","_h","$createElement","_c","_self","staticClass","_e","_v","attrs","courseSet","hiddeTitle","courseItems","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","data","items","isFree","watch","selectedPlanId","immediate","handler","v","_this","courses","map","item","index","$set","id","active","methods","handleClick","getCourseDetail","courseId","filterPrice","Number","price","detail_plan","_vm","title","class","_s","studentNum","_l","on","click","$event","course_detail_plan","plan","detail_teacher","src","avatar","large","nickname","course_detail_teacher","teacher_normalizeComponent","name","props","tabs","progress","publishedTaskNum","learnedNum","toFixed","val","oldVal","join_after__this","console","log","DetailPlan","Teacher","onTabClick","course_join_after","model","value","callback","$$v","expression","key","domProps","innerHTML","summary","teacherInfo","teachers","style","width","tryLookable","containers_course_join_after","join_after_normalizeComponent","join_after","join_before","tabsClass","tops","tabsTop","teacherTop","aboutTop","mounted","refs","$refs","window","addEventListener","handleTouch","handleScroll","setTimeout","scrollTo","keys_default","forEach","$el","getBoundingClientRect","top","ref","transIndex2Tab","offsetTop","scrollTop","pageYOffset","document","documentElement","body","activeCurrentTab","directoryTop","handleJoin","token","$router","push","path","joinCourse","destroyed","removeEventListener","course_join_before","nativeOn","_f","access","code","containers_course_join_before","join_before_normalizeComponent","course","joinAfter","joinBefore","selectedPlanIndex","joinStatus","isEmpty","length","created","$route","params","containers_course","course_Component","course_normalizeComponent","type","default","taskId","includes","initPlayer","getParams","query","preview","asyncToGenerator_default","regenerator_default","a","mark","_callee","player","media","options","wrap","_context","prev","video","api","getMedia","sent","resId","user","playlist","url","autoplay","poster","loadPlayerSDK","then","SDK","stop","VideoPlayerSDK","scrptSrc","Date","now","promise_default","resolve","reject","load_script_default","err","detail_head","directives","rawName","cover","alt","Array","Boolean","directoryArray","chapters","tasks","filters","filterNumber","task","seq","number","getCurrentStatus","getTasks","setSourceType","_this2","temp","concat","unshift","show","activity","mediaStorage","filterTaskStatus","status","lessonCellClick","allowAnonymousPreview","toast","showTypeDetail","mediaSource","detail_directory","hidde-title","unit-show","show-box"],"mappings":"gLAmBAA,GACAC,YACAC,UAAAC,EAAA,EACAC,WAAAC,EAAA,GAEAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACAE,QAAA,SAAAC,GAAA,OAAAA,EAAAD,WAEAF,OAAAC,EAAA,EAAAD,EACAI,UAAA,SAAAD,GAAA,OAAAA,EAAAC,cAGAC,iBAbA,SAaAC,EAAAC,EAAAC,GACAC,KAAAC,OAAAC,OAAA,UAAAC,EAAA,GACAC,WAAA,QAEAL,MCjCAM,GADiBC,OAFjB,WAA0B,IAAaC,EAAbP,KAAaQ,eAA0BC,EAAvCT,KAAuCU,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,sBAAhFX,KAAgH,UAAAS,EAAA,aAAhHT,KAAgHY,KAAhHZ,KAAgHa,GAAA,KAAAJ,EAAA,eAAyEK,OAAOC,UAAhMf,KAAgMP,QAAAsB,aAAhMf,KAAmOa,GAAA,KAAAJ,EAAA,aAA8BK,OAAOE,YAAA,EAAAC,YAAxQjB,KAAwQP,QAAAwB,gBAAyD,IAE1UC,oBCYjBC,EAdAC,EAAA,OAcAC,CACAtC,EACAsB,GATA,EAEA,KAEA,KAEA,MAUAiB,EAAA,QAAAH,EAAA,wMCDAI,KADA,WAEA,OACAC,SACAC,QAAA,IAGAC,OACAC,gBACAC,WAAA,EACAC,QAFA,SAEAC,GAAA,IAAAC,EAAA/B,KACAA,KAAAwB,MAAAxB,KAAAP,QAAAuC,QAAAC,IAAA,SAAAC,EAAAC,GAOA,OANAJ,EAAAK,KAAAF,EAAA,aAEAA,EAAAG,KAAAN,EAAAtC,QAAA4C,KACAH,EAAAI,QAAA,GAGAJ,OAKA7C,SAAAC,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACAE,QAAA,SAAAC,GAAA,OAAAA,EAAAD,SACAkC,eAAA,SAAAjC,GAAA,OAAAA,EAAAiC,mBAGAY,QAAAjD,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACA,qBAEAiD,YAJA,SAIAN,EAAAC,GACAnC,KAAAwB,MAAAS,IAAA,SAAAC,GAAA,OAAAA,EAAAI,QAAA,IACAJ,EAAAI,QAAA,EAEAtC,KAAAyC,iBACAC,SAAAR,EAAAG,MAGAM,YAZA,WAaA,IAAAlD,EAAAO,KAAAP,QAEA,OAAAmD,OAAAnD,EAAAgC,SAAA,SAAAhC,EAAAoD,OACA7C,KAAAyB,QAAA,EACA,OAGAzB,KAAAyB,QAAA,EACA,IAAAhC,EAAAoD,YCpEAC,GADiBxC,OAFjB,WAA0B,IAAAyC,EAAA/C,KAAaO,EAAAwC,EAAAvC,eAA0BC,EAAAsC,EAAArC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,WAA+BK,OAAOkC,MAAAD,EAAAtD,QAAAsB,UAAAiC,SAAqCvC,EAAA,OAAYE,YAAA,8BAAwCF,EAAA,QAAawC,OAAOxB,OAAAsB,EAAAtB,UAAoBsB,EAAAlC,GAAAkC,EAAAG,GAAAH,EAAAJ,kBAAAI,EAAAlC,GAAA,KAAAJ,EAAA,QAAAsC,EAAAlC,GAAAkC,EAAAG,GAAAH,EAAAtD,QAAAsB,UAAAoC,YAAA,aAAAJ,EAAAlC,GAAA,KAAAJ,EAAA,MAA+IE,YAAA,uBAAkCoC,EAAAK,GAAAL,EAAA,eAAAb,EAAAC,GAAyC,OAAA1B,EAAA,MAAgBwC,OAAOX,OAAAJ,EAAAI,QAAsBe,IAAKC,MAAA,SAAAC,GAAyBR,EAAAP,YAAAN,EAAAC,OAA+BY,EAAAlC,GAAAkC,EAAAG,GAAAhB,EAAAc,cAA+B,IAEllB9B,oBCqBjBsC,EAvBApC,EAAA,OAcAC,CACAoC,EACAX,GATA,EAEA,KAEA,KAEA,MAUA,QCpBAY,GADiBpD,OAFjB,WAA0B,IAAAyC,EAAA/C,KAAaO,EAAAwC,EAAAvC,eAA0BC,EAAAsC,EAAArC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAqBK,OAAOkC,MAAA,UAAgBD,EAAAK,GAAAL,EAAA,qBAAAb,GAA0C,OAAAzB,EAAA,OAAkBE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,qBAAAG,OAAwC6C,IAAAzB,EAAA0B,OAAAC,SAAyBd,EAAAlC,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,iBAA2BF,EAAA,QAAaE,YAAA,yBAAmCoC,EAAAlC,GAAAkC,EAAAG,GAAAhB,EAAA4B,aAAAf,EAAAlC,GAAA,KAAAJ,EAAA,QAAyDE,YAAA,iBAA2BoC,EAAAlC,GAAAkC,EAAAG,GAAAhB,EAAAc,OAAA,mBAA8C,IAEhgB9B,oBCqBjB6C,EAvBA3C,EAAA,OAcA4C,ECEAC,KAAA,UACAC,OAAA,gBDDAR,GATA,EAEA,KAEA,KAEA,MAUA,kBEkCAQ,OAAA,WACA3C,KAFA,WAGA,OACAe,OAAA,EACA6B,MAAA,iBAGA9E,SAAAC,KACA8E,SADA,WAEA,OAAAxB,OAAA5C,KAAAP,QAAA4E,kBAGA,KADArE,KAAAP,QAAA6E,WACAtE,KAAAP,QAAA4E,kBAAAE,QAAA,OAHA,OAKAhF,OAAAC,EAAA,EAAAD,CAAA,UACAoC,eAAA,SAAAjC,GAAA,OAAAA,EAAAiC,mBAGAD,OACAC,eAAA,SAAA6C,EAAAC,GACAD,IAAAC,IAAAC,EAAApC,OAAA,GACAqC,QAAAC,IAAAF,EAAApC,OAAA,YAGAtD,YACAC,UAAAC,EAAA,EACAC,WAAAC,EAAA,EACAyF,WAAArB,EACAsB,QAAAf,GAEAxB,SACAwC,WADA,WAEAJ,QAAAC,IAAA,YCtFAI,GADiB1E,OAFjB,WAA0B,IAAAyC,EAAA/C,KAAaO,EAAAwC,EAAAvC,eAA0BC,EAAAsC,EAAArC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,eAAoBK,OAAOC,UAAAgC,EAAAtD,QAAAsB,aAAmCgC,EAAAlC,GAAA,KAAAJ,EAAA,YAA6BE,YAAA,aAAA0C,IAA6BC,MAAAP,EAAAgC,YAAuBE,OAAQC,MAAAnC,EAAA,OAAAoC,SAAA,SAAAC,GAA4CrC,EAAAT,OAAA8C,GAAeC,WAAA,WAAsBtC,EAAAK,GAAAL,EAAA,cAAAb,GAAkC,OAAAzB,EAAA,WAAqB6E,IAAApD,EAAApB,OAAgBkC,MAAAd,QAAgBa,EAAAlC,GAAA,KAAAJ,EAAA,OAAyBE,YAAA,wBAAkCoC,EAAAT,QAAqb7B,EAAA,eAAAsC,EAAAlC,GAAA,KAAAJ,EAAA,OAA4CE,YAAA,iBAA2BoC,EAAAlC,GAAA,KAAAJ,EAAA,WAA4BK,OAAOkC,MAAA,UAAgBvC,EAAA,OAAY8E,UAAUC,UAAAzC,EAAAG,GAAAH,EAAAtD,QAAAsB,UAAA0E,cAAmD1C,EAAAlC,GAAA,KAAAJ,EAAA,OAA0BE,YAAA,iBAA2BoC,EAAAlC,GAAA,KAAAJ,EAAA,WAA4BE,YAAA,UAAAG,OAA6B4E,YAAA3C,EAAAtD,QAAAkG,cAAtuBlF,EAAA,OAA2BE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,0BAAoCF,EAAA,OAAYE,YAAA,qBAAAiF,OAAyCC,MAAA9C,EAAAqB,cAAwBrB,EAAAlC,GAAA,KAAAJ,EAAA,OAA0BE,YAAA,uBAAiCoC,EAAAlC,GAAAkC,EAAAG,GAAAH,EAAAqB,eAAArB,EAAAlC,GAAA,KAAAJ,EAAA,aAA+DE,YAAA,sBAAAG,OAAyCE,YAAA,EAAA8E,YAAA/C,EAAAtD,QAAAqG,YAAA7E,YAAA8B,EAAAtD,QAAAwB,iBAAob,QAEtvCC,oBCqBjB6E,EAvBA3E,EAAA,OAcA4E,CACAC,EACAjB,GATA,EAEA,KAEA,KAEA,MAUA,QCqBAkB,GACAjC,KAAA,aACA1C,KAFA,WAGA,OACAmE,eACAvB,MAAA,oBACA7B,OAAA,EACA6D,UAAA,GACAC,MACAC,QAAA,EACAC,WAAA,EACAC,SAAA,KAIAvH,YACA8F,QAAAf,EACA9E,UAAAC,EAAA,EACAC,WAAAC,EAAA,EACAyF,WAAArB,GAEAnE,SAAAC,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACAE,QAAA,SAAAC,GAAA,OAAAA,EAAAD,YAGA+G,QA1BA,WA0BA,IAAAzE,EAAA/B,KACAyG,EAAAzG,KAAA0G,MAEAC,OAAAC,iBAAA,YAAA5G,KAAA6G,aACAF,OAAAC,iBAAA,SAAA5G,KAAA8G,cACAC,WAAA,WACAJ,OAAAK,SAAA,KAEAC,IAAAR,GAAAS,QAAA,SAAAhF,GACAH,EAAAqE,KAAAlE,EAAA,OAAAuE,EAAAvE,GAAAiF,IAAAC,wBAAAC,MAEA1C,QAAAC,IAAA7C,EAAAqE,OACA,MAEA7D,QAAAjD,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACA,gBAEAwF,WAJA,SAIA5C,EAAAa,GACA,IAAAsE,EAAAtH,KAAA0G,MAAA1G,KAAAuH,eAAApF,IACAwE,OAAAK,SAAA,EAAAM,EAAAH,IAAAK,UAAA,KAEAD,eARA,SAQApF,GACA,OAAAA,IAAA,iCAEA0E,YAXA,WAYA,IAAAY,EAAAd,OAAAe,aACAC,SAAAC,gBAAAH,WAAAE,SAAAE,KAAAJ,UAEAzH,KAAAsC,OAAAtC,KAAA8H,iBAAAL,GAEAA,GAAAzH,KAAAoG,KAAAC,QACArG,KAAAmG,UAAA,kBACAnG,KAAAmG,UAAA,IAEA2B,iBArBA,SAqBAL,GACA,IAAArB,EAAApG,KAAAoG,KAIA,OAFAqB,GAAA,IAEArB,EAAAE,WAAA,EACAmB,GAAArB,EAAA2B,aAAA,KAEAC,WA7BA,WA8BAhI,KAAAC,OAAAP,MAAAuI,OAKAjI,KAAAP,QAAAoD,MACA7C,KAAAkI,QAAAC,MAAAC,KAAA,UAAApI,KAAAP,QAAA4C,KAEArC,KAAAqI,YACAhG,GAAArC,KAAAP,QAAA4C,KARArC,KAAAkI,QAAAC,MAAAlE,KAAA,aAaAqE,UApFA,WAqFA3B,OAAA4B,oBAAA,YAAAvI,KAAA8G,gBC9HA0B,GADiBlI,OAFjB,WAA0B,IAAAyC,EAAA/C,KAAaO,EAAAwC,EAAAvC,eAA0BC,EAAAsC,EAAArC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,gBAA0BF,EAAA,eAAoBK,OAAO+B,MAAAE,EAAAtD,QAAAoD,MAAA9B,UAAAgC,EAAAtD,QAAAsB,aAA6DgC,EAAAlC,GAAA,KAAAJ,EAAA,eAAAsC,EAAAlC,GAAA,KAAAJ,EAAA,OAAsDE,YAAA,iBAA2BoC,EAAAlC,GAAA,KAAAJ,EAAA,YAA6B6G,IAAA,OAAArE,MAAAF,EAAAoD,UAAA9C,IAAmCC,MAAAP,EAAAgC,YAAuBE,OAAQC,MAAAnC,EAAA,OAAAoC,SAAA,SAAAC,GAA4CrC,EAAAT,OAAA8C,GAAeC,WAAA,WAAsBtC,EAAAK,GAAAL,EAAA,cAAAb,GAAkC,OAAAzB,EAAA,WAAqB6E,IAAApD,EAAApB,OAAgBkC,MAAAd,QAAgBa,EAAAlC,GAAA,KAAAJ,EAAA,WAA6B6G,IAAA,QAAA3G,YAAA,QAAAG,OAAuCkC,MAAA,UAAgBvC,EAAA,OAAY8E,UAAUC,UAAAzC,EAAAG,GAAAH,EAAAtD,QAAAsB,UAAA0E,cAAmD1C,EAAAlC,GAAA,KAAAJ,EAAA,OAA0BE,YAAA,iBAA2BoC,EAAAlC,GAAA,KAAAJ,EAAA,WAA4B6G,IAAA,UAAA3G,YAAA,UAAAG,OAA2C4E,YAAA3C,EAAAtD,QAAAkG,YAAoC5C,EAAAlC,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,iBAA2BoC,EAAAlC,GAAA,KAAAJ,EAAA,aAA8B6G,IAAA,YAAAxG,OAAuBG,YAAA8B,EAAAtD,QAAAwB,eAAuC8B,EAAAlC,GAAA,KAAAJ,EAAA,YAA6BgI,UAAUnF,MAAA,SAAAC,GAAyB,OAAAR,EAAAiF,WAAAzE,OAAgCR,EAAAlC,GAAA,SAAAkC,EAAAG,GAAAH,EAAA2F,GAAA,mBAAA3F,GAAAtD,QAAAkJ,OAAAC,WAAA,IAE/kC1H,oBCqBjB2H,EAvBAzH,EAAA,OAcA0H,CACA5C,EACAsC,GATA,EAEA,KAEA,KAEA,MAUA,QCTAO,cACA/J,YACAgK,UAAAjD,EACAkD,WAAAJ,GAEAxJ,SAAAC,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACA2J,kBAAA,SAAAxJ,GAAA,OAAAA,EAAAwJ,mBACAC,WAAA,SAAAzJ,GAAA,OAAAA,EAAAyJ,YACA1J,QAAA,SAAAC,GAAA,OAAAA,EAAAD,WAEAF,OAAAC,EAAA,EAAAD,EACAI,UAAA,SAAAD,GAAA,OAAAA,EAAAC,cAEAyJ,QATA,WAUA,WAAAnC,IAAAjH,KAAAP,SAAA4J,UAGAC,QAlBA,WAmBAtJ,KAAAyC,iBACAC,SAAA1C,KAAAuJ,OAAAC,OAAAnH,MAGAE,QAAAjD,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACA,uBCpCAkK,GADiBnJ,OAFjB,WAA0B,IAAAyC,EAAA/C,KAAaO,EAAAwC,EAAAvC,eAA0BC,EAAAsC,EAAArC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BoC,EAAA,UAAAtC,EAAA,aAAAsC,EAAAnC,KAAAmC,EAAAlC,GAAA,KAAAkC,EAAAoG,YAAApG,EAAAqG,QAAyIrG,EAAAnC,KAAzIH,EAAA,eAA2GK,OAAOrB,QAAAsD,EAAAtD,WAAuBsD,EAAAlC,GAAA,KAAAkC,EAAAoG,aAAApG,EAAAqG,QAAA3I,EAAA,cAAyEK,OAAOrB,QAAAsD,EAAAtD,WAAuBsD,EAAAnC,MAAA,IAErWM,oBCYjBwI,EAdAtI,EAAA,OAcAuI,CACAZ,EACAU,GATA,EAEA,KAEA,KAEA,MAUAnI,EAAA,QAAAoI,EAAA,gLCLAtK,GACA8E,OACAnD,WACA6I,KAAArK,OACAsK,aAGAxK,SAAAC,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACAa,WAAA,SAAAV,GAAA,OAAAA,EAAAU,YACAuB,eAAA,SAAAjC,GAAA,OAAAA,EAAAiC,gBACAmI,OAAA,SAAApK,GAAA,OAAAA,EAAAoK,QACArK,QAAA,SAAAC,GAAA,OAAAA,EAAAD,SACA0J,WAAA,SAAAzJ,GAAA,OAAAA,EAAAyJ,eAGAzH,OACAoI,QACAlI,WAAA,EACAC,QAFA,SAEAC,EAAA2C,IACA,iBAAAsF,SAAA/J,KAAAI,cACAuG,OAAAK,SAAA,KACAhH,KAAAgK,iBAKAzH,SACA0H,UADA,WAIA,OAFAjK,KAAAmJ,YAAAvG,OAAA5C,KAAAP,QAAAqG,cAGAoE,OACAxH,SAAA1C,KAAA2B,eACAmI,OAAA9J,KAAA8J,QACAN,QACAW,QAAA,KAGAD,OACAxH,SAAA1C,KAAA2B,eACAmI,OAAA9J,KAAA8J,UAIAE,WAlBA,WAkBA,IAAAjI,EAAA/B,KAAA,OAAAoK,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAN,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA9K,MAAA,cACAgC,EAAA2E,MAAAqE,QAAAhJ,EAAA2E,MAAAqE,MAAAvF,UAAA,IADAqF,EAAA9K,KAAA,EAGAiL,EAAA,EAAAC,SAAAlJ,EAAAkI,aAHA,OAGAQ,EAHAI,EAAAK,KAKAR,EAAAD,EAAAC,MACAC,GACAtI,GAAA,6BACA8I,MAAAT,EAAAS,MACAC,QACAC,SAAAX,EAAAY,IACAC,UAAA,EACAC,OAAA,gEAGAzJ,EAAA9B,OAAAC,OAAA,4BACA6B,EAAA0J,gBAAAC,KAAA,SAAAC,GACA5J,EAAA9B,OAAAC,OAAA,4BACA,IAAAyL,EAAAhB,KAlBA,wBAAAE,EAAAe,SAAApB,EAAAzI,KAAAqI,IAqBAqB,cAvCA,WAwCA,IAAA9E,OAAAkF,eAAA,CAEA,IAAAC,EAAA,0EACAC,KAAAC,MAAA,OAEA,WAAAC,EAAA3B,EAAA,SAAA4B,EAAAC,GACAC,IAAAN,EAAA,SAAAO,GACAA,GACAF,EAAAE,GAEAH,EAAAvF,OAAAkF,oBAIA,OAAAI,EAAA3B,EAAA4B,QAAAvF,OAAAkF,mBChGAS,GADiBhM,OAFjB,WAA0B,IAAaC,EAAbP,KAAaQ,eAA0BC,EAAvCT,KAAuCU,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,wBAAkCF,EAAA,OAAY8L,aAAatI,KAAA,OAAAuI,QAAA,SAAAtH,MAAA,QAA3IlF,KAA2II,WAAAiF,WAAA,yBAAgG1E,YAAA,6BAAyCF,EAAA,OAAYK,OAAO6C,IAAvS3D,KAAuSe,UAAA0L,MAAA5I,MAAA6I,IAAA,QAAvS1M,KAAiVa,GAAA,KAAAJ,EAAA,OAAjVT,KAAiVa,GAAA,YAAjVb,KAAiVa,GAAA,KAAAJ,EAAA,OAAmE8L,aAAatI,KAAA,OAAAuI,QAAA,SAAAtH,OAAA,iBAAA6E,SAAja/J,KAAiaI,YAAAiF,WAAA,4CAAsIiC,IAAA,QAAAxG,OAAqBuB,GAAA,mCAErkBnB,oBCYjBC,EAdAC,EAAA,OAcAC,CACAjC,EACAkN,GATA,EAEA,KAEA,KAEA,MAUAhL,EAAA,EAAAH,EAAA,kHCoBAjC,GACAgF,OACAjD,aACA2I,KAAA+C,MACA9C,QAAA,sBAEA7I,YACA4I,KAAAgD,QACA/C,SAAA,IAGAxK,SAAAC,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACA4J,WAAA,SAAAzJ,GAAA,OAAAA,EAAAyJ,YACAxH,eAAA,SAAAjC,GAAA,OAAAA,EAAAiC,gBACAlC,QAAA,SAAAC,GAAA,OAAAA,EAAAD,YAGA8B,KAlBA,WAmBA,OACAsL,kBACAC,YACAC,WAGAC,SACAC,aADA,SACAC,GACA,OAAAtK,OAAAsK,EAAAC,KACAD,EAAAE,OADA,IACAF,EAAAC,IADA,GAEAD,EAAAE,SAGA1L,OACAC,gBACAC,WAAA,EACAC,QAFA,SAEAC,GAAA,IAAAC,EAAA/B,KACAA,KAAAP,QAAAwB,YAAAoI,SAEArJ,KAAA6M,eACA7M,KAAAP,QAAAwB,YAAAgB,IAAA,SAAAC,GAQA,OANAH,EAAAK,KAAAF,EAAA,WAEA,QAAAA,EAAA0H,OACA1H,EAAA,OAAAH,EAAAsL,iBAAAnL,EAAAgL,OAGAhL,IAGAlC,KAAAsN,SAAAtN,KAAA6M,oBAIAtK,QAAAjD,OACAC,OAAAC,EAAA,EAAAD,CAAA,UACAgO,cAAApN,EAAA,KAEAmN,SAJA,SAIA/L,GAAA,IAAAiM,EAAAxN,KACAyN,KACAzN,KAAA8M,YACA9M,KAAA+M,SAEAxL,EAAA2F,QAAA,SAAAhF,GACA,YAAAA,EAAA0H,KACA6D,EAAAtF,KAAAjG,IAEAuL,EAAApE,OAAA,GACAmE,EAAAT,MAAA5E,QAAAuF,OAAAD,IACAA,MACAD,EAAAV,SAAAzD,OAAA,GACAmE,EAAAT,MAAA5E,SAGAqF,EAAAV,SAAA3E,KAAAjG,MAMA,YAAAX,EAFAA,EAAA8H,OAAA,GAEAO,MACA5J,KAAA+M,MAAA5E,KAAAsF,GAGA,YAAAlM,EAAA,GAAAqI,MACA5J,KAAA8M,SAAAa,SAAAC,MAAA,KAGAP,iBAlCA,SAkCAH,GACA,OAAAtK,OAAA5C,KAAAP,QAAAqG,cACA,UAAAoH,EAAAtD,MACAsD,EAAAW,SAAAC,aACA,aACAlL,OAAAsK,EAAAzL,QACA,UAEA,IAEAsM,iBA5CA,SA4CAb,GACA,qBAAAA,EAAAc,OACA,KACA,YAAAd,EAAAc,OACA,KAGA,IAEAC,gBArDA,SAqDA1M,GACA,IAAA2L,EAAA3L,EAAA2L,KACAzN,EAAAO,KAAAP,QAIA,IAFAA,EAAAyO,uBAAAlO,KAAAuJ,OAAApB,MAAAlE,KAAA,WAEAjE,KAAAmJ,YACAvG,OAAAnD,EAAAqG,eACA,wBAAAiE,SAAAxI,EAAAyM,QAEA,OAAAd,EAAAtD,MACA,YACA,YACA5J,KAAAkI,QAAAC,MACAlE,KAAA,eAGAjE,KAAAuN,eACAnN,WAAA8M,EAAAtD,KACAE,OAAAoD,EAAA7K,KAEA,MACA,UACA,WACA,UACArC,KAAAkI,QAAAC,MACAlE,KAAA,aACAiG,OACAxH,SAAA1C,KAAA2B,eACAmI,OAAAoD,EAAA7K,GACAuH,KAAAsD,EAAAtD,QAGA,MACA,QACA,OAAArK,OAAA4O,EAAA,EAAA5O,CAAA,eAGAS,KAAAmJ,WAAAnJ,KAAAoO,eAAAlB,GAAA3N,OAAA4O,EAAA,EAAA5O,CAAA,WAIA6O,eA/FA,SA+FAlB,GACA,OAAAA,EAAAtD,MACA,YACA,QAAAsD,EAAAmB,YACArO,KAAAuN,eACAnN,WAAA,QACA0J,OAAAoD,EAAA7K,KAGA9C,OAAA4O,EAAA,EAAA5O,CAAA,WAEA,MACA,YACAS,KAAAuN,eACAnN,WAAA,QACA0J,OAAAoD,EAAA7K,KAEA,MACA,WACA,UACA,UACArC,KAAAkI,QAAAC,MACAlE,KAAA,aACAiG,OACAxH,SAAA1C,KAAA2B,eACAmI,OAAAoD,EAAA7K,GACAuH,KAAAsD,EAAAtD,QAGA,MACA,QACArK,OAAA4O,EAAA,EAAA5O,CAAA,gBC3NA+O,GADiBhO,OAHjB,WAA0B,IAAAyC,EAAA/C,KAAaO,EAAAwC,EAAAvC,eAA0BC,EAAAsC,EAAArC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAqBE,YAAA,YAAAG,OAA+BkC,MAAA,OAAAuL,cAAAxL,EAAA/B,cAA6C,GAAA+B,EAAA9B,YAAAoI,OAAA5I,EAAA,OAA0CE,YAAA,UAAoBoC,EAAAlC,GAAA,YAAAJ,EAAA,OAA+BE,YAAA,kBAA6BoC,EAAAK,GAAAL,EAAA,kBAAAb,EAAAC,GAA4C,OAAA1B,EAAA,OAAiBE,YAAA,yBAAmC,YAAAuB,EAAA0H,KAAAnJ,EAAA,OAAsCE,YAAA,+BAAA0C,IAA+CC,MAAA,SAAAC,GAAyBrB,EAAA0L,MAAA1L,EAAA0L,SAAyBnN,EAAA,QAAAsC,EAAAlC,GAAA,IAAAkC,EAAAG,GAAAhB,EAAAkL,QAAA,KAAArK,EAAAG,GAAAhB,EAAAc,UAAAD,EAAAlC,GAAA,KAAAJ,EAAA,KAA2FwC,OAAAf,EAAA0L,KAAA,iCAAkD7K,EAAAnC,KAAAmC,EAAAlC,GAAA,KAAAkC,EAAAK,GAAAL,EAAAgK,MAAA5K,GAAA,SAAA+K,GAAkE,OAAAzM,EAAA,OAAiBwC,OAAA,6BAClvBuL,YAAAtM,EAAA0L,SAAyB,SAAAV,EAAAtD,KAAAnJ,EAAA,OAAmCE,YAAA,sBAAgCoC,EAAAlC,GAAA,gBAAAkC,EAAAG,GAAAgK,EAAAE,QAAA,KAAArK,EAAAG,GAAAgK,EAAAlK,OAAA,gBAAAD,EAAAnC,KAAAmC,EAAAlC,GAAA,cAAAqM,EAAAtD,KAAAnJ,EAAA,OAA2IwC,OAAA,OAAewL,WAAAvM,EAAA0L,SAAwBnN,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,QAAaE,YAAA,wBAAkCoC,EAAAlC,GAAAkC,EAAAG,GAAAH,EAAA2F,GAAA,eAAA3F,CAAAmK,OAAAnK,EAAAlC,GAAA,KAAAJ,EAAA,OAAuEE,YAAA,uBAAA0C,IAAuCC,MAAA,SAAAC,GAAyBR,EAAAkL,gBAAAf,OAA4BzM,EAAA,QAAAsC,EAAAlC,GAAAkC,EAAAG,GAAAgK,EAAAlK,UAAAD,EAAAlC,GAAA,KAAAJ,EAAA,QAAAsC,EAAAlC,GAAAkC,EAAAG,GAAAH,EAAA2F,GAAA,WAAA3F,CAAAmK,OAAAtD,OAAA7G,EAAAG,GAAAH,EAAA2F,GAAA,aAAA3F,CAAAmK,cAAAnK,EAAAlC,GAAA,KAAAJ,EAAA,OAAsLwC,OAAA,sBAAAiK,EAAAc,UAA2CjL,EAAAlC,GAAA,mBAAAkC,EAAAG,GAAAH,EAAAgL,iBAAAb,IAAA,wBAAAnK,EAAAnC,UAAkG,SAEj0BM,oBCWjBC,EAdAC,EAAA,OAcAC,CACAnC,EACAoP,GATA,EAEA,KAEA,KAEA,MAUAhN,EAAA,EAAAH,EAAA","file":"static/js/2.371e0c60ae369f6fffc7.js","sourcesContent":[" <!-- 试看页 -->\n<template>\n  <div class=\"course-detail try\">\n    <e-loading v-if=\"isLoading\"></e-loading>\n    <detail-head\n      :courseSet=\"details.courseSet\"></detail-head>\n    \n    <directory\n      :hiddeTitle=true\n      :courseItems=\"details.courseItems\"\n    ></directory>\n  </div>\n</template>\n<script>\nimport Directory from './detail/directory';\nimport DetailHead from './detail/head';\nimport { mapState } from 'vuex';\nimport * as types from '@/store/mutation-types';\n\nexport default {\n  components: {\n    Directory,\n    DetailHead\n  },\n  computed: {\n    ...mapState('course', {\n      details: state => state.details,\n    }),\n    ...mapState({\n      isLoading: state => state.isLoading,\n    })\n  },\n  beforeRouteLeave (to, from, next) {\n    this.$store.commit(`course/${types.SET_SOURCETYPE}`, {\n      sourceType: 'img'\n    });\n    next();\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/try.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-detail try\"},[(_vm.isLoading)?_c('e-loading'):_vm._e(),_vm._v(\" \"),_c('detail-head',{attrs:{\"courseSet\":_vm.details.courseSet}}),_vm._v(\" \"),_c('directory',{attrs:{\"hiddeTitle\":true,\"courseItems\":_vm.details.courseItems}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-67781eea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/try.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./try.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./try.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67781eea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./try.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/try.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <e-panel :title=\"details.courseSet.title\">\n      <div class=\"course-detail__plan-price\">\n        <span :class=\"{isFree: isFree}\">{{ filterPrice() }}</span>\n        <span>{{ details.courseSet.studentNum }}人在学</span>\n      </div>\n    </e-panel>\n\n    <ul class=\"course-detail__plan\">\n      <li v-for=\"(item, index) in items\" \n        @click=\"handleClick(item, index)\" \n        :class=\"{ active: item.active }\">{{item.title}}</li>\n    </ul>\n  </div>\n</template>\n<script>\nimport * as types from '@/store/mutation-types';\nimport { mapMutations, mapState, mapActions } from 'vuex';\nimport tryVue from '../try.vue';\n\nexport default {\n  data() {\n    return {\n      items: [],\n      isFree: false\n    }\n  },\n  watch: {\n    selectedPlanId: {\n      immediate: true,\n      handler(v) {\n        this.items = this.details.courses.map((item, index) => {\n          this.$set(item, 'active', false);\n\n          if(item.id === this.details.id) {\n            item.active = true;\n          }\n\n          return item;\n        });\n      }\n    }\n  },\n  computed: {\n    ...mapState('course', {\n      details: state => state.details,\n      selectedPlanId: state => state.selectedPlanId\n    })\n  },\n  methods: {\n    ...mapActions ('course', [\n      'getCourseDetail'\n    ]),\n    handleClick (item, index){\n      this.items.map(item => item.active = false);\n      item.active = true;\n\n      this.getCourseDetail({\n        courseId: item.id\n      })\n    },\n    filterPrice () {\n      const details = this.details;\n\n      if (Number(details.isFree) || details.price === '0.00') {\n        this.isFree = true;\n        return '免费';\n      }\n\n      this.isFree = false\n      return `¥${details.price}`;\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/detail/plan.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('e-panel',{attrs:{\"title\":_vm.details.courseSet.title}},[_c('div',{staticClass:\"course-detail__plan-price\"},[_c('span',{class:{isFree: _vm.isFree}},[_vm._v(_vm._s(_vm.filterPrice()))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.details.courseSet.studentNum)+\"人在学\")])])]),_vm._v(\" \"),_c('ul',{staticClass:\"course-detail__plan\"},_vm._l((_vm.items),function(item,index){return _c('li',{class:{ active: item.active },on:{\"click\":function($event){_vm.handleClick(item, index)}}},[_vm._v(_vm._s(item.title))])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8fc48d74\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/detail/plan.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./plan.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./plan.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8fc48d74\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./plan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/detail/plan.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('e-panel',{attrs:{\"title\":\"教师介绍\"}},[_vm._l((_vm.teacherInfo),function(item){return [_c('div',{staticClass:\"teacher-content\"},[_c('img',{staticClass:\"teacher-avatar-img\",attrs:{\"src\":item.avatar.large}}),_vm._v(\" \"),_c('div',{staticClass:\"teacher-cell\"},[_c('span',{staticClass:\"dark font-family-PFM\"},[_vm._v(_vm._s(item.nickname))]),_vm._v(\" \"),_c('span',{staticClass:\"text-content\"},[_vm._v(_vm._s(item.title || '暂无简介'))])])])]})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a7d999dc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/detail/teacher.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./teacher.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./teacher.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a7d999dc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./teacher.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/detail/teacher.vue\n// module id = null\n// module chunks = ","<template>\n  <e-panel title=\"教师介绍\">\n    <template v-for=\"item in teacherInfo\">\n      <div class=\"teacher-content\">\n        <img :src=\"item.avatar.large\" \n        class=\"teacher-avatar-img\">\n        <div class=\"teacher-cell\">\n          <span class=\"dark font-family-PFM\">{{item.nickname}}</span>\n          <span class=\"text-content\">{{item.title || '暂无简介'}}</span>\n        </div>\n      </div>\n    </template>\n  </e-panel>\n</template>\n<script>\nexport default {\n  name: 'teacher',\n  props: ['teacherInfo']\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/detail/teacher.vue","<template>\n  <div class=\"join-after\">\n    <detail-head \n      :courseSet=\"details.courseSet\"></detail-head>\n    \n    <van-tabs \n      v-model=\"active\" \n      class=\"after-tabs\"\n      @click=\"onTabClick\">\n      <van-tab v-for=\"item in tabs\" \n        :title=\"item\" :key=\"item\"></van-tab>\n    </van-tabs>\n\n     <!-- 课程目录 -->\n    <div class=\"join-after__content\">\n      <template v-if=\"!active\">\n        <div class=\"progress-bar\">\n          <div class=\"progress-bar__content\">\n            <div class=\"progress-bar__rate\" :style=\"{'width': progress}\"></div>\n          </div>\n          <div class=\"progress-bar__text\">{{ progress }}</div>\n        </div>\n\n        <directory\n          :hiddeTitle=true\n          class=\"join-after-dirctory\"\n          :tryLookable=\"details.tryLookable\"\n          :courseItems=\"details.courseItems\"></directory>\n      </template>\n\n      <template v-else>\n        <!-- 课程计划 -->\n        <detail-plan></detail-plan>\n\n        <div class=\"segmentation\"></div>\n        <!-- 课程介绍 -->\n        <e-panel title=\"课程介绍\">\n          <div v-html=\"details.courseSet.summary\"></div>\n        </e-panel>\n        <div class=\"segmentation\"></div>\n\n        <!-- 教师介绍 -->\n        <teacher \n          class=\"teacher\"\n          :teacherInfo=\"details.teachers\"></teacher>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport Directory from './detail/directory';\nimport DetailHead from './detail/head';\nimport DetailPlan from './detail/plan';\nimport Teacher from './detail/teacher';\nimport { mapState } from 'vuex';\n\nexport default {\n  props: ['details'],\n  data() {\n    return {\n      active: 0,\n      tabs: ['课程目录', '课程简介'],\n    }\n  },\n  computed: {\n    progress () {\n      if(!Number(this.details.publishedTaskNum)) return '0%';\n\n      return (this.details.learnedNum /\n        this.details.publishedTaskNum).toFixed(2)*100+'%';\n    },\n    ...mapState('course', {\n      selectedPlanId: state => state.selectedPlanId,\n    })\n  },\n  watch: {\n    selectedPlanId: (val, oldVal) => {\n      val !== oldVal && (this.active = 0)\n      console.log(this.active, 'active')\n    }\n  },\n  components: {\n    Directory,\n    DetailHead,\n    DetailPlan,\n    Teacher\n  },\n  methods: {\n    onTabClick(){\n      console.log('click')\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/join-after.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"join-after\"},[_c('detail-head',{attrs:{\"courseSet\":_vm.details.courseSet}}),_vm._v(\" \"),_c('van-tabs',{staticClass:\"after-tabs\",on:{\"click\":_vm.onTabClick},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.tabs),function(item){return _c('van-tab',{key:item,attrs:{\"title\":item}})})),_vm._v(\" \"),_c('div',{staticClass:\"join-after__content\"},[(!_vm.active)?[_c('div',{staticClass:\"progress-bar\"},[_c('div',{staticClass:\"progress-bar__content\"},[_c('div',{staticClass:\"progress-bar__rate\",style:({'width': _vm.progress})})]),_vm._v(\" \"),_c('div',{staticClass:\"progress-bar__text\"},[_vm._v(_vm._s(_vm.progress))])]),_vm._v(\" \"),_c('directory',{staticClass:\"join-after-dirctory\",attrs:{\"hiddeTitle\":true,\"tryLookable\":_vm.details.tryLookable,\"courseItems\":_vm.details.courseItems}})]:[_c('detail-plan'),_vm._v(\" \"),_c('div',{staticClass:\"segmentation\"}),_vm._v(\" \"),_c('e-panel',{attrs:{\"title\":\"课程介绍\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.details.courseSet.summary)}})]),_vm._v(\" \"),_c('div',{staticClass:\"segmentation\"}),_vm._v(\" \"),_c('teacher',{staticClass:\"teacher\",attrs:{\"teacherInfo\":_vm.details.teachers}})]],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-577e8034\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/join-after.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./join-after.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./join-after.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-577e8034\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./join-after.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/join-after.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"join-before\">\n    <detail-head \n      :price=\"details.price\"\n      :courseSet=\"details.courseSet\"></detail-head>\n\n    <detail-plan></detail-plan>\n    <div class=\"segmentation\"></div>\n\n    <van-tabs v-model=\"active\" \n      @click=\"onTabClick\" \n      :class=\"tabsClass\" ref=\"tabs\">\n      <van-tab v-for=\"item in tabs\" :title=\"item\" :key=\"item\"></van-tab>\n    </van-tabs>\n\n    <!-- 课程介绍 -->\n    <e-panel title=\"课程介绍\" ref=\"about\" class=\"about\">\n      <div v-html=\"details.courseSet.summary\"></div>\n    </e-panel>\n    <div class=\"segmentation\"></div>\n\n    <!-- 教师介绍 -->\n    <teacher \n      ref=\"teacher\"\n      class=\"teacher\"\n      :teacherInfo=\"details.teachers\"></teacher>\n    <div class=\"segmentation\"></div>\n\n    <!-- 课程目录 -->\n    <directory ref=\"directory\" \n      :courseItems=\"details.courseItems\"></directory>\n    \n    <e-footer @click.native=\"handleJoin\">\n      {{details.access.code | filterJoinStatus}}</e-footer>\n  </div>\n</template>\n<script>\n  import Teacher from './detail/teacher';\n  import Directory from './detail/directory';\n  import DetailHead from './detail/head';\n  import DetailPlan from './detail/plan';\n  import { mapMutations, mapActions, mapState } from 'vuex';\n  import * as types from '@/store/mutation-types';\n\n  export default {\n    name: 'joinBefore',\n    data() {\n      return {\n        teacherInfo: {},\n        tabs: ['课程介绍', '教师介绍', '目录'],\n        active: 0,\n        tabsClass: '',\n        tops: {\n          tabsTop: 0,\n          teacherTop: 0,\n          aboutTop: 0,\n        }\n      }\n    },\n    components: {\n      Teacher,\n      Directory,\n      DetailHead,\n      DetailPlan\n    },\n    computed: {\n      ...mapState('course', {\n        details: state => state.details\n      })\n    },\n    mounted() {\n      const refs = this.$refs;\n\n      window.addEventListener('touchmove', this.handleTouch);\n      window.addEventListener('scroll', this.handleScroll);\n      setTimeout(() => {\n        window.scrollTo(0,0);\n\n        Object.keys(refs).forEach(item => {\n          this.tops[`${item}Top`] = refs[item].$el.getBoundingClientRect().top\n        })\n        console.log(this.tops);\n      }, 100)\n    },\n    methods: {\n       ...mapActions('course', [\n        'joinCourse'\n       ]),\n      onTabClick(index, title) {\n        const ref = this.$refs[this.transIndex2Tab(index)];\n        window.scrollTo(0, ref.$el.offsetTop - 44);\n      },\n      transIndex2Tab(index) {\n        return index ? (index > 1 ? 'directory' : 'teacher') : 'about';\n      },\n      handleTouch() {\n        const scrollTop = window.pageYOffset ||\n          document.documentElement.scrollTop || document.body.scrollTop;\n\n        this.active = this.activeCurrentTab(scrollTop);\n\n        scrollTop >= this.tops.tabsTop\n          ? this.tabsClass = 'van-tabs--fixed'\n          : this.tabsClass = '';\n      },\n      activeCurrentTab(scrollTop) {\n        const tops = this.tops;\n\n        scrollTop  = scrollTop + 44;\n\n        return (scrollTop < tops.teacherTop) ? 0\n          :(scrollTop >= tops.directoryTop ? 2 : 1);\n      },\n      handleJoin(){\n        if (!this.$store.state.token) {\n          this.$router.push({ name: 'login' });\n          return;\n        }\n\n        if (+this.details.price) {\n          this.$router.push({path: `/order/${this.details.id}`});\n        } else {\n          this.joinCourse({\n            id: this.details.id\n          });\n        }\n      }\n    },\n    destroyed () {\n      window.removeEventListener('touchmove', this.handleScroll);\n    },\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/join-before.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"join-before\"},[_c('detail-head',{attrs:{\"price\":_vm.details.price,\"courseSet\":_vm.details.courseSet}}),_vm._v(\" \"),_c('detail-plan'),_vm._v(\" \"),_c('div',{staticClass:\"segmentation\"}),_vm._v(\" \"),_c('van-tabs',{ref:\"tabs\",class:_vm.tabsClass,on:{\"click\":_vm.onTabClick},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.tabs),function(item){return _c('van-tab',{key:item,attrs:{\"title\":item}})})),_vm._v(\" \"),_c('e-panel',{ref:\"about\",staticClass:\"about\",attrs:{\"title\":\"课程介绍\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.details.courseSet.summary)}})]),_vm._v(\" \"),_c('div',{staticClass:\"segmentation\"}),_vm._v(\" \"),_c('teacher',{ref:\"teacher\",staticClass:\"teacher\",attrs:{\"teacherInfo\":_vm.details.teachers}}),_vm._v(\" \"),_c('div',{staticClass:\"segmentation\"}),_vm._v(\" \"),_c('directory',{ref:\"directory\",attrs:{\"courseItems\":_vm.details.courseItems}}),_vm._v(\" \"),_c('e-footer',{nativeOn:{\"click\":function($event){return _vm.handleJoin($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm._f(\"filterJoinStatus\")(_vm.details.access.code)))])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ee1e21b8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/join-before.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./join-before.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./join-before.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ee1e21b8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./join-before.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/join-before.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"course-detail\">\n    <e-loading v-if=\"isLoading\"></e-loading>\n    <join-before v-if=\"!joinStatus && !isEmpty\" :details=\"details\"></join-before>    \n    <join-after :details=\"details\" v-if=\"joinStatus && !isEmpty\"></join-after>\n  </div>\n</template>\n\n<script>\n  import joinAfter from './join-after.vue';\n  import joinBefore from './join-before.vue';\n  import Api from '@/api';\n  import { mapState, mapActions } from 'vuex';\n\n  export default {\n    components: {\n      joinAfter,\n      joinBefore\n    },\n    computed: {\n      ...mapState('course', {\n        selectedPlanIndex: state => state.selectedPlanIndex,\n        joinStatus: state => state.joinStatus,\n        details:  state => state.details\n      }),\n      ...mapState({\n        isLoading: state => state.isLoading\n      }),\n      isEmpty() {\n        return Object.keys(this.details).length === 0;\n      }\n    },\n    created(){\n      this.getCourseDetail({\n        courseId: this.$route.params.id\n      })\n    },\n    methods: {\n      ...mapActions('course', [\n        'getCourseDetail'\n      ])\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-detail\"},[(_vm.isLoading)?_c('e-loading'):_vm._e(),_vm._v(\" \"),(!_vm.joinStatus && !_vm.isEmpty)?_c('join-before',{attrs:{\"details\":_vm.details}}):_vm._e(),_vm._v(\" \"),(_vm.joinStatus && !_vm.isEmpty)?_c('join-after',{attrs:{\"details\":_vm.details}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-35662bf4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-35662bf4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/index.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"course-detail__head\">\n    <div class=\"course-detail__head--img\" \n      v-show=\"sourceType === 'img'\">\n      <img :src=\"courseSet.cover.large\" alt=\"\">\n    </div>\n    <div>132132</div>\n    <div id=\"course-detail__head--video\" \n      ref=\"video\"\n      v-show=\"['video', 'audio'].includes(sourceType)\">\n    </div>\n  </div>\n</template>\n<script>\nimport loadScript from 'load-script';\nimport { mapState } from 'vuex';\nimport Api from '@/api'\n\nexport default {\n  props: {\n    courseSet: {\n      type: Object,\n      default: {}\n    }\n  },\n  computed: {\n    ...mapState('course', {\n      sourceType: state => state.sourceType,\n      selectedPlanId: state => state.selectedPlanId,\n      taskId: state => state.taskId,\n      details: state => state.details,\n      joinStatus: state => state.joinStatus\n    })\n  },\n  watch: {\n    taskId: {\n      immediate: true,\n      handler(v, oldVal) {\n        if (['video', 'audio'].includes(this.sourceType)) {\n          window.scrollTo(0, 0);\n          this.initPlayer();\n        }\n      }\n    }\n  },\n  methods: {\n    getParams () {\n      const canTryLookable = !this.joinStatus && Number(this.details.tryLookable)\n\n      return canTryLookable ? {\n        query: {\n          courseId: this.selectedPlanId,\n          taskId: this.taskId\n        }, params: {\n          preview: 1\n        }\n      } : {\n        query: {\n          courseId: this.selectedPlanId,\n          taskId: this.taskId\n        }\n      }\n    },\n    async initPlayer (){\n      this.$refs.video && (this.$refs.video.innerHTML = '');\n\n      const player = await Api.getMedia(this.getParams());\n\n      const media = player.media;\n      const options = {\n        id: 'course-detail__head--video',\n        resId: media.resId,\n        user: {},\n        playlist: media.url,\n        autoplay: true,\n        poster: \"https://img4.mukewang.com/szimg/5b0b60480001b95e06000338.jpg\"\n      };\n\n      this.$store.commit('UPDATE_LOADING_STATUS', true);\n      this.loadPlayerSDK().then(SDK => {\n        this.$store.commit('UPDATE_LOADING_STATUS', false);\n        const player = new SDK(options);\n      })\n    },\n    loadPlayerSDK () {\n      if (!window.VideoPlayerSDK) {\n\n        const scrptSrc = `//service-cdn.qiqiuyun.net/js-sdk/video-player/sdk-v1.js?\n          v=${Date.now() / 1000 / 60}`; // Cache SDK for 1 min.\n\n        return new Promise((resolve, reject) => {\n          loadScript(scrptSrc, (err) => {\n            if (err) {\n              reject(err);\n            }\n            resolve(window.VideoPlayerSDK);\n          });\n        });\n      }\n      return Promise.resolve(window.VideoPlayerSDK);\n    },\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/detail/head.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"course-detail__head\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceType === 'img'),expression:\"sourceType === 'img'\"}],staticClass:\"course-detail__head--img\"},[_c('img',{attrs:{\"src\":_vm.courseSet.cover.large,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',[_vm._v(\"132132\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(['video', 'audio'].includes(_vm.sourceType)),expression:\"['video', 'audio'].includes(sourceType)\"}],ref:\"video\",attrs:{\"id\":\"course-detail__head--video\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-53234484\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/detail/head.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./head.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./head.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-53234484\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./head.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/detail/head.vue\n// module id = null\n// module chunks = ","<template>\n  <e-panel title=\"课程目录\" class=\"directory\" :hidde-title=\"hiddeTitle\">\n    <!-- 暂无学习任务 -->\n    <div v-if=\"courseItems.length == 0\" class=\"empty\">暂无学习任务</div>\n    <div class=\"directory-list\" v-else>\n      <div class=\"directory-list__item\" v-for=\"(item, index) in chapters\">\n        <div class=\"directory-list__item-chapter\" \n          @click=\"item.show = !item.show\" \n          v-if=\"item.type === 'chapter'\">\n          <span>第{{ item.number }}章：{{ item.title }}</span> \n          <i :class=\"[ item.show ? 'icon-packup': 'icon-unfold']\"></i>\n        </div>\n\n        <div :class=\"['directory-list__item-unit', \n          {'unit-show': item.show}]\"\n          v-for=\"task in tasks[index]\">\n          <div class=\"lesson-cell__unit\" v-if=\"task.type === 'unit'\">\n            第{{ task.number }}节：{{ task.title }}\n          </div>\n\n          <div :class=\"['box', {'show-box': item.show}]\" \n            v-if=\"task.type === 'task'\">\n            <div class=\"lesson-cell\">\n              <span class=\"lesson-cell__number\">{{ task | filterNumber }}</span>\n              <div class=\"lesson-cell__content\" @click=\"lessonCellClick(task)\">\n                <span>{{ task.title }}</span>\n                <span>{{ task.task.type | taskType }}{{ task.task | filterTask }}</span>\n              </div>\n              <div :class=\"['lesson-cell__status', task.status]\">\n                {{ filterTaskStatus(task) }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </e-panel>\n</template>\n<script>\n  import { mapState, mapMutations } from 'vuex';\n  import { Toast } from 'vant';\n  import * as types from '@/store/mutation-types';\n\n  export default {\n    props: {\n      courseItems: {\n        type: Array,\n        default: () => ([])\n      },\n      hiddeTitle: {\n        type: Boolean,\n        default: false\n      }\n    },\n    computed: {\n      ...mapState('course', {\n        joinStatus: state => state.joinStatus,\n        selectedPlanId: state => state.selectedPlanId,\n        details: state => state.details\n      })\n    },\n    data() {\n      return {\n        directoryArray: [],\n        chapters: [],\n        tasks: []\n      }\n    },\n    filters:{\n      filterNumber(task) {\n        return Number(task.seq)\n          ? `${task.number}-${task.seq}`\n          : `${task.number}`\n      }\n    },\n    watch: {\n      selectedPlanId: {\n        immediate: true,\n        handler(v) {\n          if (!this.details.courseItems.length) return;\n\n          this.directoryArray =\n            this.details.courseItems.map(item => {\n\n            this.$set(item, 'show', true);\n\n            if (item.type == 'task') {\n              item['status'] = this.getCurrentStatus(item.task);\n            }\n\n            return item;\n          })\n\n          this.getTasks(this.directoryArray);\n        }\n      }\n    },\n    methods: {\n      ...mapMutations('course', {\n        setSourceType: types.SET_SOURCETYPE\n      }),\n      getTasks (data) {\n        let temp = [];\n        this.chapters = [];\n        this.tasks = [];\n\n        data.forEach(item => {\n          if (item.type !== 'chapter') {\n            temp.push(item);\n          } else {\n            if (temp.length > 0) {\n              this.tasks.push([].concat(temp));\n              temp = [];\n            }else if (this.chapters.length > 0) {\n              this.tasks.push([]);\n            }\n\n            this.chapters.push(item);\n          }\n        })\n\n        const last = data.length - 1;\n\n        if (data[last].type !== 'chapter') {\n          this.tasks.push(temp);\n        }\n\n        if (data[0].type !== 'chapter') {\n          this.chapters.unshift({ show: true });\n        }\n      },\n      getCurrentStatus (task) {\n        if (Number(this.details.tryLookable)\n          && task.type === 'video'\n          && task.activity.mediaStorage) {\n          return 'is-tryLook';\n        } else if (Number(task.isFree)) {\n          return 'is-free';\n        }\n        return '';\n      },\n      filterTaskStatus (task){\n        if (task.status === 'is-tryLook') {\n          return '试看';\n        } else if (task.status === 'is-free') {\n          return '免费';\n        }\n\n        return '';\n      },\n      lessonCellClick (data) {\n        const task = data.task;\n        const details = this.details;\n\n        !details.allowAnonymousPreview && this.$route.push({name: 'login'})\n\n        if (!this.joinStatus\n          && Number(details.tryLookable)\n          && ['is-tryLook', 'is-free'].includes(data.status)) {\n        // trylook and free video click\n          switch (task.type) {\n            case 'video':\n            case 'audio':\n              this.$router.push({\n                name: 'course_try',\n              })\n\n              this.setSourceType({\n                sourceType: task.type,\n                taskId: task.id\n              });\n              break;\n            case 'doc':\n            case 'text':\n            case 'ppt':\n              this.$router.push({\n                name: 'course_web',\n                query: {\n                  courseId: this.selectedPlanId,\n                  taskId: task.id,\n                  type: task.type,\n                }\n              })\n              break;\n            default:\n              return Toast('请先加入课程');\n          }\n        } else {\n          this.joinStatus ? this.showTypeDetail(task) : Toast('请先加入课程');\n        }\n        //join after click\n      },\n      showTypeDetail (task) {\n        switch(task.type) {\n          case 'video':\n            if (task.mediaSource == 'self') {\n              this.setSourceType({\n                sourceType: 'video',\n                taskId: task.id\n              })\n            } else {\n              Toast('暂不支持此类型');\n            }\n            break;\n          case 'audio':\n            this.setSourceType({\n              sourceType: 'audio',\n              taskId: task.id\n            })\n            break;\n          case 'text':\n          case 'ppt':\n          case 'doc':\n            this.$router.push({\n              name: 'course_web',\n              query: {\n                courseId: this.selectedPlanId,\n                taskId: task.id,\n                type: task.type\n              }\n            })\n            break;\n          default:\n            Toast('暂不支持此类型');\n        }\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/containers/course/detail/directory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('e-panel',{staticClass:\"directory\",attrs:{\"title\":\"课程目录\",\"hidde-title\":_vm.hiddeTitle}},[(_vm.courseItems.length == 0)?_c('div',{staticClass:\"empty\"},[_vm._v(\"暂无学习任务\")]):_c('div',{staticClass:\"directory-list\"},_vm._l((_vm.chapters),function(item,index){return _c('div',{staticClass:\"directory-list__item\"},[(item.type === 'chapter')?_c('div',{staticClass:\"directory-list__item-chapter\",on:{\"click\":function($event){item.show = !item.show}}},[_c('span',[_vm._v(\"第\"+_vm._s(item.number)+\"章：\"+_vm._s(item.title))]),_vm._v(\" \"),_c('i',{class:[ item.show ? 'icon-packup': 'icon-unfold']})]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tasks[index]),function(task){return _c('div',{class:['directory-list__item-unit', \n        {'unit-show': item.show}]},[(task.type === 'unit')?_c('div',{staticClass:\"lesson-cell__unit\"},[_vm._v(\"\\n          第\"+_vm._s(task.number)+\"节：\"+_vm._s(task.title)+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(task.type === 'task')?_c('div',{class:['box', {'show-box': item.show}]},[_c('div',{staticClass:\"lesson-cell\"},[_c('span',{staticClass:\"lesson-cell__number\"},[_vm._v(_vm._s(_vm._f(\"filterNumber\")(task)))]),_vm._v(\" \"),_c('div',{staticClass:\"lesson-cell__content\",on:{\"click\":function($event){_vm.lessonCellClick(task)}}},[_c('span',[_vm._v(_vm._s(task.title))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm._f(\"taskType\")(task.task.type))+_vm._s(_vm._f(\"filterTask\")(task.task)))])]),_vm._v(\" \"),_c('div',{class:['lesson-cell__status', task.status]},[_vm._v(\"\\n              \"+_vm._s(_vm.filterTaskStatus(task))+\"\\n            \")])])]):_vm._e()])})],2)}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6771d2fe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/course/detail/directory.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./directory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./directory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6771d2fe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./directory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/course/detail/directory.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}