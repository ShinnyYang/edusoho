webpackJsonp([3],{"/QYm":function(e,t,n){"use strict";var o=n("woOf"),r=n.n(o),i=n("Dd8w"),a=n.n(i),s=n("7+uW"),c=n("9JZw"),l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"van-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"van-modal",class:e.className,style:e.style,on:{touchmove:function(e){e.preventDefault(),e.stopPropagation()},click:function(t){e.$emit("click",t)}}})])},name:"modal",props:{visible:Boolean,zIndex:Number,className:String,customStyle:Object},computed:{style:function(){return a()({zIndex:this.zIndex},this.customStyle)}}},d={id:1,zIndex:2e3,stack:[],lockCount:0,plusKey:function(e){return this[e]++},get top(){return this.stack[this.stack.length-1]}},u={className:"",customStyle:{}},h={open:function(e,t){if(!d.stack.some(function(t){return t.vm._popupId===e._popupId})){var n=e.$el,o=n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode:document.body;d.stack.push({vm:e,config:t,targetNode:o}),this.update()}},close:function(e){var t=d.stack;t.length&&(d.top.vm._popupId===e?(t.pop(),this.update()):d.stack=t.filter(function(t){return t.vm._popupId!==e}))},update:function(){var e=d.modal;if(e||((e=new(s.a.extend(l))({el:document.createElement("div")})).$on("click",this.onClick),d.modal=e),e.$el.parentNode&&(e.visible=!1),d.top){var t=d.top,n=t.targetNode,o=t.config;n.appendChild(e.$el),r()(e,a()({},u,o,{visible:!0}))}},onClick:function(){if(d.top){var e=d.top.vm;e.$emit("click-overlay"),e.closeOnClickOverlay&&e.$emit("input",!1)}}},f=n("KwZk"),v=n("sM86"),g={mixins:[n("vwLT").a],props:{value:Boolean,overlay:Boolean,overlayStyle:Object,overlayClass:String,closeOnClickOverlay:Boolean,zIndex:[String,Number],getContainer:Function,lockScroll:{type:Boolean,default:!0}},watch:{value:function(e){this[e?"open":"close"]()},getContainer:function(){this.move()},overlay:function(){this.renderOverlay()}},created:function(){this._popupId="popup-"+d.plusKey("id")},mounted:function(){this.getContainer&&this.move(),this.value&&this.open()},activated:function(){this.value&&this.open()},beforeDestroy:function(){this.close()},deactivated:function(){this.close()},methods:{open:function(){this.$isServer||this.opened||(void 0!==this.zIndex&&(d.zIndex=this.zIndex),this.opened=!0,this.renderOverlay(),this.lockScroll&&(Object(v.b)(document,"touchstart",this.touchStart),Object(v.b)(document,"touchmove",this.onTouchMove),d.lockCount||document.body.classList.add("van-overflow-hidden"),d.lockCount++))},close:function(){this.opened&&(this.lockScroll&&(d.lockCount--,Object(v.a)(document,"touchstart",this.touchStart),Object(v.a)(document,"touchmove",this.onTouchMove),d.lockCount||document.body.classList.remove("van-overflow-hidden")),this.opened=!1,h.close(this._popupId),this.$emit("input",!1))},move:function(){this.getContainer?this.getContainer().appendChild(this.$el):this.$parent&&this.$parent.$el.appendChild(this.$el)},onTouchMove:function(e){this.touchMove(e);var t=this.deltaY>0?"10":"01",n=f.a.getScrollEventTarget(e.target,this.$el),o=n.scrollHeight,r=n.offsetHeight,i=n.scrollTop,a="11";0===i?a=r>=o?"00":"01":i+r>=o&&(a="10"),"11"===a||"vertical"!==this.direction||parseInt(a,2)&parseInt(t,2)||(e.preventDefault(),e.stopPropagation())},renderOverlay:function(){var e=this;this.overlay?h.open(this,{zIndex:d.plusKey("zIndex"),className:this.overlayClass,customStyle:this.overlayStyle}):h.close(this._popupId),this.$nextTick(function(){e.$el.style.zIndex=d.plusKey("zIndex")})}}},p=["success","fail","loading"],m=Object(c.a)({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"van-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],class:e.b([e.style,e.position])},["text"===e.style?n("div",[e._v(e._s(e.message))]):e._e(),"html"===e.style?n("div",{domProps:{innerHTML:e._s(e.message)}}):e._e(),"default"===e.style?["loading"===e.type?n("loading",{attrs:{color:"white",type:e.loadingType}}):n("icon",{class:e.b("icon"),attrs:{name:e.type}}),e.isDef(e.message)?n("div",{class:e.b("text")},[e._v(e._s(e.message))]):e._e()]:e._e()],2)])},name:"toast",mixins:[g],props:{forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},loadingType:{type:String,default:"circular"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},computed:{style:function(){return-1!==p.indexOf(this.type)?"default":this.type}},mounted:function(){this.toggleClickale()},watch:{value:function(){this.toggleClickale()},forbidClick:function(){this.toggleClickale()}},methods:{toggleClickale:function(){var e=this.value&&this.forbidClick;if(this.clickable!==e){this.clickable=e;var t=e?"add":"remove";document.body.classList[t]("van-toast--unclickable")}}}}),b=n("o69Z"),C={type:"text",mask:!1,message:"",value:!0,duration:3e3,position:"middle",loadingType:"circular",forbidClick:!1,overlayStyle:{}},y=function(e){return Object(b.d)(e)?e:{message:e}},w=[],k=!0,S=a()({},C);function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(){if(!w.length||!k){var e=new(s.a.extend(m))({el:document.createElement("div")});document.body.appendChild(e.$el),w.push(e)}return w[w.length-1]}();return e=a()({},S,y(e),{clear:function(){t.value=!1}}),r()(t,function(e){return e.overlay=e.mask,e}(e)),clearTimeout(t.timer),e.duration>0&&(t.timer=setTimeout(function(){t.clear()},e.duration)),t}["loading","success","fail"].forEach(function(e){var t;_[e]=(t=e,function(e){return _(a()({type:t},y(e)))})}),_.clear=function(e){w.length&&(e?(w.forEach(function(e){e.clear()}),w=[]):k?w[0].clear():w.shift().clear())},_.setDefaultOptions=function(e){r()(S,e)},_.resetDefaultOptions=function(){S=a()({},C)},_.allowMultiple=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];k=!e},_.install=function(){s.a.use(m)},s.a.prototype.$toast=_;t.a=_},"5kWq":function(e,t){},"Cj3+":function(e,t){},KFVb:function(e,t){!function(e){var t,n;void 0===e.btoa&&(e.btoa=(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),function(e){var n,o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,c=void 0;for(r=i=0,a=e.length,s=(a-=n=a%3)/3<<2,n>0&&(s+=4),o=new Array(s);r<a;)c=e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<8|e.charCodeAt(r++),o[i++]=t[c>>18]+t[c>>12&63]+t[c>>6&63]+t[63&c];return 1==n?(c=e.charCodeAt(r++),o[i++]=t[c>>2]+t[(3&c)<<4]+"=="):2==n&&(c=e.charCodeAt(r++)<<8|e.charCodeAt(r++),o[i++]=t[c>>10]+t[c>>4&63]+t[(15&c)<<2]+"="),o.join("")})),void 0===e.atob&&(e.atob=(n=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],function(e){var t,o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,c=void 0,l=void 0,d=void 0,u=void 0;if((t=e.length)%4!=0)return"";if(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\+\/\=]/.test(e))return"";for(d=t,(l="="==e.charAt(t-2)?1:"="==e.charAt(t-1)?2:0)>0&&(d-=4),d=3*(d>>2)+l,u=new Array(d),s=c=0;s<t&&-1!=(o=n[e.charCodeAt(s++)])&&-1!=(r=n[e.charCodeAt(s++)])&&(u[c++]=String.fromCharCode(o<<2|(48&r)>>4),-1!=(i=n[e.charCodeAt(s++)]))&&(u[c++]=String.fromCharCode((15&r)<<4|(60&i)>>2),-1!=(a=n[e.charCodeAt(s++)]));)u[c++]=String.fromCharCode((3&i)<<6|a);return u.join("")}));var o=2654435769;function r(e,t){var n=e.length,o=n<<2;if(t){var r=e[n-1];if(r<(o-=4)-3||r>o)return null;o=r}for(var i=0;i<n;i++)e[i]=String.fromCharCode(255&e[i],e[i]>>>8&255,e[i]>>>16&255,e[i]>>>24&255);var a=e.join("");return t?a.substring(0,o):a}function i(e,t){var n=e.length,o=n>>2;0!=(3&n)&&++o;var r=void 0;t?(r=new Array(o+1))[o]=n:r=new Array(o);for(var i=0;i<n;++i)r[i>>2]|=e.charCodeAt(i)<<((3&i)<<3);return r}function a(e){return 4294967295&e}function s(e,t,n,o,r,i){return(n>>>5^t<<2)+(t>>>3^n<<4)^(e^t)+(i[3&o^r]^n)}function c(e){return e.length<4&&(e.length=4),e}function l(e){if(/^[\x00-\x7f]*$/.test(e))return e;for(var t=[],n=e.length,o=0,r=0;o<n;++o,++r){var i=e.charCodeAt(o);if(i<128)t[r]=e.charAt(o);else if(i<2048)t[r]=String.fromCharCode(192|i>>6,128|63&i);else{if(!(i<55296||i>57343)){if(o+1<n){var a=e.charCodeAt(o+1);if(i<56320&&a>=56320&&a<=57343){var s=65536+((1023&i)<<10|1023&a);t[r]=String.fromCharCode(240|s>>18&63,128|s>>12&63,128|s>>6&63,128|63&s),++o;continue}}throw new Error("Malformed string")}t[r]=String.fromCharCode(224|i>>12,128|i>>6&63,128|63&i)}}return t.join("")}function d(e,t){return(void 0===t||null===t||t<0)&&(t=e.length),0===t?"":/^[\x00-\x7f]*$/.test(e)||!/^[\x00-\xff]*$/.test(e)?t===e.length?e:e.substr(0,t):t<65535?function(e,t){for(var n=new Array(t),o=0,r=0,i=e.length;o<t&&r<i;o++){var a=e.charCodeAt(r++);switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[o]=a;break;case 12:case 13:if(!(r<i))throw new Error("Unfinished UTF-8 octet sequence");n[o]=(31&a)<<6|63&e.charCodeAt(r++);break;case 14:if(!(r+1<i))throw new Error("Unfinished UTF-8 octet sequence");n[o]=(15&a)<<12|(63&e.charCodeAt(r++))<<6|63&e.charCodeAt(r++);break;case 15:if(!(r+2<i))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&a)<<18|(63&e.charCodeAt(r++))<<12|(63&e.charCodeAt(r++))<<6|63&e.charCodeAt(r++))-65536;if(!(s>=0&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));n[o++]=s>>10&1023|55296,n[o]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return o<t&&(n.length=o),String.fromCharCode.apply(String,n)}(e,t):function(e,t){for(var n=[],o=new Array(32768),r=0,i=0,a=e.length;r<t&&i<a;r++){var s=e.charCodeAt(i++);switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o[r]=s;break;case 12:case 13:if(!(i<a))throw new Error("Unfinished UTF-8 octet sequence");o[r]=(31&s)<<6|63&e.charCodeAt(i++);break;case 14:if(!(i+1<a))throw new Error("Unfinished UTF-8 octet sequence");o[r]=(15&s)<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++);break;case 15:if(!(i+2<a))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&s)<<18|(63&e.charCodeAt(i++))<<12|(63&e.charCodeAt(i++))<<6|63&e.charCodeAt(i++))-65536;if(!(c>=0&&c<=1048575))throw new Error("Character outside valid Unicode range: 0x"+c.toString(16));o[r++]=c>>10&1023|55296,o[r]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}if(r>=32766){var l=r+1;o.length=l,n[n.length]=String.fromCharCode.apply(String,o),t-=l,r=-1}}return r>0&&(o.length=r,n[n.length]=String.fromCharCode.apply(String,o)),n.join("")}(e,t)}function u(e,t){return void 0===e||null===e||0===e.length?e:(e=l(e),t=l(t),r(function(e,t){var n=e.length,r=n-1,i=void 0,c=void 0,l=void 0,d=void 0,u=void 0,h=void 0;for(c=e[r],l=0,h=0|Math.floor(6+52/n);h>0;--h){for(d=(l=a(l+o))>>>2&3,u=0;u<r;++u)i=e[u+1],c=e[u]=a(e[u]+s(l,i,c,u,d,t));i=e[0],c=e[r]=a(e[r]+s(l,i,c,r,d,t))}return e}(i(e,!0),c(i(t,!1))),!1))}function h(e,t){return void 0===e||null===e||0===e.length?e:(t=l(t),d(r(function(e,t){var n=e.length,r=n-1,i=void 0,c=void 0,l=void 0,d=void 0,u=void 0;for(i=e[0],l=a(Math.floor(6+52/n)*o);0!==l;l=a(l-o)){for(d=l>>>2&3,u=r;u>0;--u)c=e[u-1],i=e[u]=a(e[u]-s(l,i,c,u,d,t));c=e[r],i=e[0]=a(e[0]-s(l,i,c,0,d,t))}return e}(i(e,!1),c(i(t,!1))),!0)))}e.XXTEA={utf8Encode:l,utf8Decode:d,encrypt:u,encryptToBase64:function(t,n){return e.btoa(u(t,n))},decrypt:h,decryptFromBase64:function(t,n){return void 0===t||null===t||0===t.length?t:h(e.atob(t),n)}}}(window)},eqfM:function(e,t,n){"use strict";var o=n("f4F5"),r=(n.n(o),n("Cj3+")),i=(n.n(r),n("5kWq"));n.n(i)},"qtn/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("eqfM");var o=n("/QYm"),r=n("Dd8w"),i=n.n(r),a=n("mvHQ"),s=n.n(a),c=n("Gu7T"),l=n.n(c),d=n("woOf"),u=n.n(d),h=n("gyMJ"),f={props:{tips:{type:String,default:"拖动左边滑块完成上方拼图"}},data:function(){return{imgInfo:{url:"",jigsaw:"",token:""},dragState:{left:0,width:0,currentX:0,currentLeft:0,btnWidth:0,maskWidth:0}}},created:function(){this.initDragCaptcha()},mounted:function(){var e=this.$refs.bar,t=this.$refs.dragBtn,n=e.getBoundingClientRect();u()(this.dragState,{left:n.left.toFixed(2),width:e.clientWidth,btnWidth:t.offsetWidth/2})},methods:{initDragCaptcha:function(){var e=this;h.a.dragCaptcha().then(function(t){e.imgInfo=i()({},t),u()(e.dragState,{currentLeft:0,maskWidth:0})})},handletTouchEnd:function(){var e=this;this.dragState.currentLeft&&h.a.dragValidate({query:{token:this.getToken()}}).then(function(t){o.a.success("验证成功"),e.$emit("success",e.getToken())}).catch(function(t){o.a.fail(t.message),e.initDragCaptcha()})},handleTouchMove:function(e){e.preventDefault();var t=this.$refs.dragBtn,n=(this.$refs.dragImgBg,this.dragState),o=e.clientX?e.clientX.toFixed(2):e.targetTouches[0].pageX.toFixed(2),r=(o-n.left-n.btnWidth).toFixed(2);r<0&&(r=0),o>n.width&&(r=(n.width-n.left-n.btnWidth).toFixed(2)),u()(this.dragState,{currentLeft:r,maskWidth:(Number(r)+t.offsetWidth/2).toFixed(2)})},calPositionX:function(){var e=this.$refs.dragImgBg,t=(e.naturalWidth/e.width).toFixed(2);return(Number(this.dragState.currentLeft).toFixed(2)*t).toFixed(2)},getToken:function(){var e={token:this.imgInfo.token,captcha:this.calPositionX()};return[].concat(l()(btoa(s()(e)))).reverse().join("")}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"e-drag"},[n("div",{staticClass:"e-drag-section"},[n("div",{staticClass:"e-drag-img"},[n("img",{ref:"dragImgBg",attrs:{src:e.imgInfo.url,alt:""}}),e._v(" "),n("img",{staticClass:"e-drag-img__dragable",style:{left:e.dragState.currentLeft+"px"},attrs:{src:e.imgInfo.jigsaw,alt:""}})]),e._v(" "),n("div",{ref:"bar",staticClass:"e-drag-bar"},[n("span",[e._v(e._s(e.tips))]),e._v(" "),n("div",{staticClass:"e-drag-bar__mask",style:{width:e.dragState.maskWidth+"px"}}),e._v(" "),n("div",{ref:"dragBtn",staticClass:"e-drag-btn",style:{left:e.dragState.currentLeft+"px"},on:{touchend:e.handletTouchEnd,touchmove:e.handleTouchMove}},[n("img",{attrs:{src:"/static/images/drag.png",alt:""}})])])])])},staticRenderFns:[]},g=n("VU/8")(f,v,!1,null,null,null).exports,p=n("NYxO"),m=(n("KFVb"),n("SgDA")),b={components:{EDrag:g},data:function(){return{registerInfo:{mobile:"",dragCaptchaToken:"",encrypt_password:"",smsCode:"",smsToken:"",type:"register"},dragEnable:!1,options:[{model:"email"},{model:"mobile"}],errorMessage:{mobile:"",encrypt_password:""},count:{showCount:!1,num:120,codeBtnDisable:!1}}},computed:i()({btnDisable:function(){return!(this.registerInfo.mobile&&this.registerInfo.encrypt_password)}},Object(p.d)({isLoading:function(e){return e.isLoading}})),methods:i()({},Object(p.b)(["addUser","sendSmsCenter"]),{validateMobileOrPsw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile",t=this.registerInfo[e],n=m.a[e];if(0==t.length)return this.errorMessage[e]="",!1;this.errorMessage[e]=n.validator(t)?"":n.message},handleSmsSuccess:function(e){this.registerInfo.dragCaptchaToken=e,this.handleSendSms()},handleSubmit:function(){var e=this.registerInfo.encrypt_password;this.registerInfo.encrypt_password=window.XXTEA.encryptToBase64(e,window.location.host),this.addUser(this.registerInfo).then().catch(function(e){o.a.fail(e.message)})},handleSendSms:function(){var e=this;this.sendSmsCenter(this.registerInfo).then(function(t){e.registerInfo.smsToken=t.smsToken,e.countDown()}).catch(function(t){4030303==t.code?e.dragEnable=!0:o.a.fail(t.message)})},countDown:function(){var e=this;this.count.showCount=!0,this.count.codeBtnDisable=!0;var t=setInterval(function(){if(e.count.num--,e.count.num<=0)return e.codeBtnDisable=!1,void clearInterval(t)},1e3)}})},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"register"},[e.isLoading?n("e-loading"):e._e(),e._v(" "),n("span",{staticClass:"register-title"},[e._v("注册账号")]),e._v(" "),n("van-field",{ref:"mobile",attrs:{placeholder:"请输入手机号",maxLength:"11","error-message":e.errorMessage.mobile},on:{blur:function(t){e.validateMobileOrPsw("mobile")}},model:{value:e.registerInfo.mobile,callback:function(t){e.$set(e.registerInfo,"mobile",t)},expression:"registerInfo.mobile"}}),e._v(" "),n("van-field",{attrs:{type:"password",maxLength:"20","error-message":e.errorMessage.encrypt_password,placeholder:"请设置密码（5-20位字符）"},on:{blur:function(t){e.validateMobileOrPsw("encrypt_password")}},model:{value:e.registerInfo.encrypt_password,callback:function(t){e.$set(e.registerInfo,"encrypt_password",t)},expression:"registerInfo.encrypt_password"}}),e._v(" "),e.dragEnable?n("e-drag",{attrs:{info:e.registerInfo},on:{success:e.handleSmsSuccess}}):e._e(),e._v(" "),n("van-field",{attrs:{type:"text",center:"",clearable:"",maxLength:"6",placeholder:"请输入验证码"},model:{value:e.registerInfo.smsCode,callback:function(t){e.$set(e.registerInfo,"smsCode",t)},expression:"registerInfo.smsCode"}},[n("van-button",{attrs:{slot:"button",size:"small",type:"primary",disabled:e.count.codeBtnDisable},on:{click:e.handleSendSms},slot:"button"},[e._v("\n        发送验证码\n        "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.count.showCount,expression:"count.showCount"}]},[e._v("("+e._s(e.count.num)+")")])])],1),e._v(" "),n("van-button",{staticClass:"primary-btn mb20",attrs:{type:"default",disabled:e.btnDisable},on:{click:e.handleSubmit}},[e._v("同意服务协议并注册")]),e._v(" "),n("div",{staticClass:"login-bottom "},[e._v("\n      请详细阅读 "),n("router-link",{attrs:{to:"/protocol"}},[e._v("《用户服务协议》")])],1)],1)},staticRenderFns:[]},y=n("VU/8")(b,C,!1,null,null,null);t.default=y.exports}});