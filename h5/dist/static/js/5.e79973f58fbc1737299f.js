webpackJsonp([5],{"/QYm":function(t,e,n){"use strict";var i=n("woOf"),o=n.n(i),s=n("Dd8w"),a=n.n(s),c=n("7+uW"),l=n("9JZw"),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"van-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"van-modal",class:t.className,style:t.style,on:{touchmove:function(t){t.preventDefault(),t.stopPropagation()},click:function(e){t.$emit("click",e)}}})])},name:"modal",props:{visible:Boolean,zIndex:Number,className:String,customStyle:Object},computed:{style:function(){return a()({zIndex:this.zIndex},this.customStyle)}}},u={id:1,zIndex:2e3,stack:[],lockCount:0,plusKey:function(t){return this[t]++},get top(){return this.stack[this.stack.length-1]}},d={className:"",customStyle:{}},h={open:function(t,e){if(!u.stack.some(function(e){return e.vm._popupId===t._popupId})){var n=t.$el,i=n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode:document.body;u.stack.push({vm:t,config:e,targetNode:i}),this.update()}},close:function(t){var e=u.stack;e.length&&(u.top.vm._popupId===t?(e.pop(),this.update()):u.stack=e.filter(function(e){return e.vm._popupId!==t}))},update:function(){var t=u.modal;if(t||((t=new(c.a.extend(r))({el:document.createElement("div")})).$on("click",this.onClick),u.modal=t),t.$el.parentNode&&(t.visible=!1),u.top){var e=u.top,n=e.targetNode,i=e.config;n.appendChild(t.$el),o()(t,a()({},d,i,{visible:!0}))}},onClick:function(){if(u.top){var t=u.top.vm;t.$emit("click-overlay"),t.closeOnClickOverlay&&t.$emit("input",!1)}}},p=n("KwZk"),f=n("sM86"),v={mixins:[n("vwLT").a],props:{value:Boolean,overlay:Boolean,overlayStyle:Object,overlayClass:String,closeOnClickOverlay:Boolean,zIndex:[String,Number],getContainer:Function,lockScroll:{type:Boolean,default:!0}},watch:{value:function(t){this[t?"open":"close"]()},getContainer:function(){this.move()},overlay:function(){this.renderOverlay()}},created:function(){this._popupId="popup-"+u.plusKey("id")},mounted:function(){this.getContainer&&this.move(),this.value&&this.open()},activated:function(){this.value&&this.open()},beforeDestroy:function(){this.close()},deactivated:function(){this.close()},methods:{open:function(){this.$isServer||this.opened||(void 0!==this.zIndex&&(u.zIndex=this.zIndex),this.opened=!0,this.renderOverlay(),this.lockScroll&&(Object(f.b)(document,"touchstart",this.touchStart),Object(f.b)(document,"touchmove",this.onTouchMove),u.lockCount||document.body.classList.add("van-overflow-hidden"),u.lockCount++))},close:function(){this.opened&&(this.lockScroll&&(u.lockCount--,Object(f.a)(document,"touchstart",this.touchStart),Object(f.a)(document,"touchmove",this.onTouchMove),u.lockCount||document.body.classList.remove("van-overflow-hidden")),this.opened=!1,h.close(this._popupId),this.$emit("input",!1))},move:function(){this.getContainer?this.getContainer().appendChild(this.$el):this.$parent&&this.$parent.$el.appendChild(this.$el)},onTouchMove:function(t){this.touchMove(t);var e=this.deltaY>0?"10":"01",n=p.a.getScrollEventTarget(t.target,this.$el),i=n.scrollHeight,o=n.offsetHeight,s=n.scrollTop,a="11";0===s?a=o>=i?"00":"01":s+o>=i&&(a="10"),"11"===a||"vertical"!==this.direction||parseInt(a,2)&parseInt(e,2)||(t.preventDefault(),t.stopPropagation())},renderOverlay:function(){var t=this;this.overlay?h.open(this,{zIndex:u.plusKey("zIndex"),className:this.overlayClass,customStyle:this.overlayStyle}):h.close(this._popupId),this.$nextTick(function(){t.$el.style.zIndex=u.plusKey("zIndex")})}}},m=["success","fail","loading"],g=Object(l.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"van-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],class:t.b([t.style,t.position])},["text"===t.style?n("div",[t._v(t._s(t.message))]):t._e(),"html"===t.style?n("div",{domProps:{innerHTML:t._s(t.message)}}):t._e(),"default"===t.style?["loading"===t.type?n("loading",{attrs:{color:"white",type:t.loadingType}}):n("icon",{class:t.b("icon"),attrs:{name:t.type}}),t.isDef(t.message)?n("div",{class:t.b("text")},[t._v(t._s(t.message))]):t._e()]:t._e()],2)])},name:"toast",mixins:[v],props:{forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},loadingType:{type:String,default:"circular"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},computed:{style:function(){return-1!==m.indexOf(this.type)?"default":this.type}},mounted:function(){this.toggleClickale()},watch:{value:function(){this.toggleClickale()},forbidClick:function(){this.toggleClickale()}},methods:{toggleClickale:function(){var t=this.value&&this.forbidClick;if(this.clickable!==t){this.clickable=t;var e=t?"add":"remove";document.body.classList[e]("van-toast--unclickable")}}}}),y=n("o69Z"),k={type:"text",mask:!1,message:"",value:!0,duration:3e3,position:"middle",loadingType:"circular",forbidClick:!1,overlayStyle:{}},_=function(t){return Object(y.d)(t)?t:{message:t}},b=[],C=!0,$=a()({},k);function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(){if(!b.length||!C){var t=new(c.a.extend(g))({el:document.createElement("div")});document.body.appendChild(t.$el),b.push(t)}return b[b.length-1]}();return t=a()({},$,_(t),{clear:function(){e.value=!1}}),o()(e,function(t){return t.overlay=t.mask,t}(t)),clearTimeout(e.timer),t.duration>0&&(e.timer=setTimeout(function(){e.clear()},t.duration)),e}["loading","success","fail"].forEach(function(t){var e;x[t]=(e=t,function(t){return x(a()({type:e},_(t)))})}),x.clear=function(t){b.length&&(t?(b.forEach(function(t){t.clear()}),b=[]):C?b[0].clear():b.shift().clear())},x.setDefaultOptions=function(t){o()($,t)},x.resetDefaultOptions=function(){$=a()({},k)},x.allowMultiple=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];C=!t},x.install=function(){c.a.use(g)},c.a.prototype.$toast=x;e.a=x},"5kWq":function(t,e){},"Cj3+":function(t,e){},eqfM:function(t,e,n){"use strict";var i=n("f4F5"),o=(n.n(i),n("Cj3+")),s=(n.n(o),n("5kWq"));n.n(s)},odi1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("eqfM");var i=n("/QYm"),o=n("Dd8w"),s=n.n(o),a=n("NYxO"),c=n("gyMJ"),l={data:function(){return{settings:[{name:"头像",info:""},{name:"昵称",info:""},{name:"手机",info:""}]}},computed:s()({},Object(a.d)({user:function(t){return t.user},isLoading:function(t){return t.isLoading}})),created:function(){this.$set(this.settings[0],"info",this.user.avatar.large),this.$set(this.settings[1],"info",this.user.nickname),this.$set(this.settings[2],"info",this.user.school)},methods:s()({},Object(a.b)(["setAvatar"]),{handleSetting:function(t){switch(t){case 0:break;case 1:this.$router.push({name:"setting_nickname"});break;case 2:Object(i.a)("更改手机号，后续开通")}},onRead:function(t){var e=this;c.a.updateFile({data:{file:t.content,group:"user"}}).then(function(n){e.$set(e.settings[0],"info",t.content),e.setAvatar({avatarId:n.id}).then(function(){i.a.success("修改成功")}).catch(function(t){i.a.fail(t.message)})})}})},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my_setting"},[t.isLoading?n("e-loading"):t._e(),t._v(" "),t._l(t.settings,function(e,i){return n("div",{staticClass:"my_setting-item",on:{click:function(e){t.handleSetting(i)}}},[n("span",{staticClass:"my_setting-title title-18"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"my_setting-content"},[i?t._e():n("img",{staticClass:"my_setting-avatar",attrs:{src:e.info,alt:""}}),t._v(" "),i?n("span",[t._v(t._s(e.info))]):t._e(),t._v(" "),n("img",{staticClass:"my_setting-more",attrs:{src:"/static/images/more.png",alt:""}})]),t._v(" "),i?t._e():n("van-uploader",{attrs:{"after-read":t.onRead}})],1)})],2)},staticRenderFns:[]},u=n("VU/8")(l,r,!1,null,null,null);e.default=u.exports}});