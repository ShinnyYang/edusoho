{"source":"webpackJsonp([11],{YZ0n:function(t,e,o){var n;window,n=function(){return n={},i.m=o=[function(t,e,o){var n=o(2);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]);o(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,o){\"use strict\";var n=o(0);o.n(n).a},function(t,e,o){(t.exports=o(3)(!1)).push([t.i,'\\n.vue-cropper[data-v-6dae58fd] {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  user-select: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  direction: ltr;\\n  touch-action: none;\\n  text-align: left;\\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC\");\\n}\\n.cropper-box[data-v-6dae58fd],\\n.cropper-box-canvas[data-v-6dae58fd],\\n.cropper-drag-box[data-v-6dae58fd],\\n.cropper-crop-box[data-v-6dae58fd],\\n.cropper-face[data-v-6dae58fd] {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  user-select: none;\\n}\\n.cropper-box-canvas img[data-v-6dae58fd] {\\n  position: relative;\\n  text-align: left;\\n  user-select: none;\\n  transform: none;\\n  max-width: none;\\n  max-height: none;\\n}\\n.cropper-box[data-v-6dae58fd] {\\n  overflow: hidden;\\n}\\n.cropper-move[data-v-6dae58fd] {\\n  cursor: move;\\n}\\n.cropper-crop[data-v-6dae58fd] {\\n  cursor: crosshair;\\n}\\n.cropper-modal[data-v-6dae58fd] {\\n  background: rgba(0, 0, 0, 0.5);\\n}\\n.cropper-crop-box[data-v-6dae58fd] {\\n  /*border: 2px solid #39f;*/\\n}\\n.cropper-view-box[data-v-6dae58fd] {\\n  display: block;\\n  overflow: hidden;\\n  width: 100%;\\n  height: 100%;\\n  outline: 1px solid #39f;\\n  outline-color: rgba(51, 153, 255, 0.75);\\n  user-select: none;\\n}\\n.cropper-view-box img[data-v-6dae58fd] {\\n  user-select: none;\\n  text-align: left;\\n  max-width: none;\\n  max-height: none;\\n}\\n.cropper-face[data-v-6dae58fd] {\\n  top: 0;\\n  left: 0;\\n  background-color: #fff;\\n  opacity: 0.1;\\n}\\n.crop-info[data-v-6dae58fd] {\\n  position: absolute;\\n  left: 0px;\\n  min-width: 65px;\\n  text-align: center;\\n  color: white;\\n  line-height: 20px;\\n  background-color: rgba(0, 0, 0, 0.8);\\n  font-size: 12px;\\n}\\n.crop-line[data-v-6dae58fd] {\\n  position: absolute;\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n  opacity: 0.1;\\n}\\n.line-w[data-v-6dae58fd] {\\n  top: -3px;\\n  left: 0;\\n  height: 5px;\\n  cursor: n-resize;\\n}\\n.line-a[data-v-6dae58fd] {\\n  top: 0;\\n  left: -3px;\\n  width: 5px;\\n  cursor: w-resize;\\n}\\n.line-s[data-v-6dae58fd] {\\n  bottom: -3px;\\n  left: 0;\\n  height: 5px;\\n  cursor: s-resize;\\n}\\n.line-d[data-v-6dae58fd] {\\n  top: 0;\\n  right: -3px;\\n  width: 5px;\\n  cursor: e-resize;\\n}\\n.crop-point[data-v-6dae58fd] {\\n  position: absolute;\\n  width: 8px;\\n  height: 8px;\\n  opacity: 0.75;\\n  background-color: #39f;\\n  border-radius: 100%;\\n}\\n.point1[data-v-6dae58fd] {\\n  top: -4px;\\n  left: -4px;\\n  cursor: nw-resize;\\n}\\n.point2[data-v-6dae58fd] {\\n  top: -5px;\\n  left: 50%;\\n  margin-left: -3px;\\n  cursor: n-resize;\\n}\\n.point3[data-v-6dae58fd] {\\n  top: -4px;\\n  right: -4px;\\n  cursor: ne-resize;\\n}\\n.point4[data-v-6dae58fd] {\\n  top: 50%;\\n  left: -4px;\\n  margin-top: -3px;\\n  cursor: w-resize;\\n}\\n.point5[data-v-6dae58fd] {\\n  top: 50%;\\n  right: -4px;\\n  margin-top: -3px;\\n  cursor: e-resize;\\n}\\n.point6[data-v-6dae58fd] {\\n  bottom: -5px;\\n  left: -4px;\\n  cursor: sw-resize;\\n}\\n.point7[data-v-6dae58fd] {\\n  bottom: -5px;\\n  left: 50%;\\n  margin-left: -3px;\\n  cursor: s-resize;\\n}\\n.point8[data-v-6dae58fd] {\\n  bottom: -5px;\\n  right: -4px;\\n  cursor: se-resize;\\n}\\n@media screen and (max-width: 500px) {\\n.crop-point[data-v-6dae58fd] {\\n    position: absolute;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.45;\\n    background-color: #39f;\\n    border-radius: 100%;\\n}\\n.point1[data-v-6dae58fd] {\\n    top: -10px;\\n    left: -10px;\\n}\\n.point2[data-v-6dae58fd],\\n  .point4[data-v-6dae58fd],\\n  .point5[data-v-6dae58fd],\\n  .point7[data-v-6dae58fd] {\\n    display: none;\\n}\\n.point3[data-v-6dae58fd] {\\n    top: -10px;\\n    right: -10px;\\n}\\n.point4[data-v-6dae58fd] {\\n    top: 0;\\n    left: 0;\\n}\\n.point6[data-v-6dae58fd] {\\n    bottom: -10px;\\n    left: -10px;\\n}\\n.point8[data-v-6dae58fd] {\\n    bottom: -10px;\\n    right: -10px;\\n}\\n}\\n',\"\"])},function(t,e){t.exports=function(o){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var o,n=t[1]||\"\",i=t[3];if(!i)return n;if(e&&\"function\"==typeof btoa){var r=(o=i,\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+\" */\"),a=i.sources.map(function(t){return\"/*# sourceURL=\"+i.sourceRoot+t+\" */\"});return[n].concat(a).concat([r]).join(\"\\n\")}return[n].join(\"\\n\")}(t,o);return t[2]?\"@media \"+t[2]+\"{\"+e+\"}\":e}).join(\"\")},a.i=function(t,e){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var o={},n=0;n<this.length;n++){var i=this[n][0];\"number\"==typeof i&&(o[i]=!0)}for(n=0;n<t.length;n++){var r=t[n];\"number\"==typeof r[0]&&o[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]=\"(\"+r[2]+\") and (\"+e+\")\"),a.push(r))}},a}},function(t,e,n){var i,o,c={},r=function(){return void 0===o&&(o=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),o},a=(i={},function(t,e){if(\"function\"==typeof t)return t();if(void 0===i[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}i[t]=o}return i[t]}),h=null,p=0,s=[],u=n(5);function l(t,e){for(var o=0;o<t.length;o++){var n=t[o],i=c[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(w(n.parts[r],e))}else{var a=[];for(r=0;r<n.parts.length;r++)a.push(w(n.parts[r],e));c[n.id]={id:n.id,refs:1,parts:a}}}}function d(t,e){for(var o=[],n={},i=0;i<t.length;i++){var r=t[i],a=e.base?r[0]+e.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};n[a]?n[a].parts.push(s):o.push(n[a]={id:a,parts:[s]})}return o}function f(t,e){var o=a(t.insertInto);if(!o)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var n=s[s.length-1];if(\"top\"===t.insertAt)n?n.nextSibling?o.insertBefore(e,n.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),s.push(e);else if(\"bottom\"===t.insertAt)o.appendChild(e);else{if(\"object\"!=typeof t.insertAt||!t.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var i=a(t.insertAt.before,o);o.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=s.indexOf(t);0<=e&&s.splice(e,1)}function v(t){var e=document.createElement(\"style\");if(void 0===t.attrs.type&&(t.attrs.type=\"text/css\"),void 0===t.attrs.nonce){var o=n.nc;o&&(t.attrs.nonce=o)}return m(e,t.attrs),f(t,e),e}function m(e,o){Object.keys(o).forEach(function(t){e.setAttribute(t,o[t])})}function w(e,t){var o,n,i,r,a,s;if(t.transform&&e.css){if(!(r=\"function\"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var c=p++;o=h=h||v(t),n=b.bind(null,o,c,!1),i=b.bind(null,o,c,!0)}else i=e.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(a=t,s=document.createElement(\"link\"),void 0===a.attrs.type&&(a.attrs.type=\"text/css\"),a.attrs.rel=\"stylesheet\",m(s,a.attrs),f(a,s),n=function(t,e,o){var n=o.css,i=o.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(n=u(n)),i&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+\" */\");var a=new Blob([n],{type:\"text/css\"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,o=s,t),function(){g(o),o.href&&URL.revokeObjectURL(o.href)}):(o=v(t),n=function(t,e){var o=e.css,n=e.media;if(n&&t.setAttribute(\"media\",n),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}.bind(null,o),function(){g(o)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}t.exports=function(t,a){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(a=a||{}).attrs=\"object\"==typeof a.attrs?a.attrs:{},a.singleton||\"boolean\"==typeof a.singleton||(a.singleton=r()),a.insertInto||(a.insertInto=\"head\"),a.insertAt||(a.insertAt=\"bottom\");var s=d(t,a);return l(s,a),function(t){for(var e=[],o=0;o<s.length;o++){var n=s[o];(i=c[n.id]).refs--,e.push(i)}for(t&&l(d(t,a),a),o=0;o<e.length;o++){var i;if(0===(i=e[o]).refs){for(var r=0;r<i.parts.length;r++)i.parts[r]();delete c[i.id]}}}};var x,C=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join(\"\\n\")});function b(t,e,o,n){var i=o?\"\":n.css;if(t.styleSheet)t.styleSheet.cssText=C(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e=\"undefined\"!=typeof window&&window.location;if(!e)throw new Error(\"fixUrls requires window.location\");if(!t||\"string\"!=typeof t)return t;var i=e.protocol+\"//\"+e.host,r=i+e.pathname.replace(/\\/[^\\/]*$/,\"/\");return t.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(t,e){var o,n=e.trim().replace(/^\"(.*)\"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(n)?t:(o=0===n.indexOf(\"//\")?n:0===n.indexOf(\"/\")?i+n:r+n.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(o)+\")\")})}},function(t,e,o){\"use strict\";o.r(e);function n(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",{ref:\"cropper\",staticClass:\"vue-cropper\",on:{mouseover:e.scaleImg,mouseout:e.cancelScale}},[o(\"div\",{staticClass:\"cropper-box\"},[o(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.loading,expression:\"!loading\"}],staticClass:\"cropper-box-canvas\",style:{width:e.trueWidth+\"px\",height:e.trueHeight+\"px\",transform:\"scale(\"+e.scale+\",\"+e.scale+\") translate3d(\"+e.x/e.scale+\"px,\"+e.y/e.scale+\"px,0)rotateZ(\"+90*e.rotate+\"deg)\"}},[o(\"img\",{ref:\"cropperImg\",attrs:{src:e.imgs,alt:\"cropper-img\"}})])]),e._v(\" \"),o(\"div\",{staticClass:\"cropper-drag-box\",class:{\"cropper-move\":e.move&&!e.crop,\"cropper-crop\":e.crop,\"cropper-modal\":e.cropping},on:{mousedown:e.startMove,touchstart:e.startMove}}),e._v(\" \"),o(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.cropping,expression:\"cropping\"}],staticClass:\"cropper-crop-box\",style:{width:e.cropW+\"px\",height:e.cropH+\"px\",transform:\"translate3d(\"+e.cropOffsertX+\"px,\"+e.cropOffsertY+\"px,0)\"}},[o(\"span\",{staticClass:\"cropper-view-box\"},[o(\"img\",{style:{width:e.trueWidth+\"px\",height:e.trueHeight+\"px\",transform:\"scale(\"+e.scale+\",\"+e.scale+\") translate3d(\"+(e.x-e.cropOffsertX)/e.scale+\"px,\"+(e.y-e.cropOffsertY)/e.scale+\"px,0)rotateZ(\"+90*e.rotate+\"deg)\"},attrs:{src:e.imgs,alt:\"cropper-img\"}})]),e._v(\" \"),o(\"span\",{staticClass:\"cropper-face cropper-move\",on:{mousedown:e.cropMove,touchstart:e.cropMove}}),e._v(\" \"),e.info?o(\"span\",{staticClass:\"crop-info\",style:{top:e.cropInfo.top}},[e._v(e._s(this.cropInfo.width)+\" × \"+e._s(this.cropInfo.height))]):e._e(),e._v(\" \"),e.fixedBox?e._e():o(\"span\",[o(\"span\",{staticClass:\"crop-line line-w\",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,1)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,1)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-line line-a\",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,1,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,1,0)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-line line-s\",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,2)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,2)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-line line-d\",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,2,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,2,0)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point1\",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,1,1)},touchstart:function(t){e.changeCropSize(t,!0,!0,1,1)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point2\",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,1)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,1)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point3\",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,2,1)},touchstart:function(t){e.changeCropSize(t,!0,!0,2,1)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point4\",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,1,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,1,0)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point5\",on:{mousedown:function(t){e.changeCropSize(t,!0,!1,2,0)},touchstart:function(t){e.changeCropSize(t,!0,!1,2,0)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point6\",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,1,2)},touchstart:function(t){e.changeCropSize(t,!0,!0,1,2)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point7\",on:{mousedown:function(t){e.changeCropSize(t,!1,!0,0,2)},touchstart:function(t){e.changeCropSize(t,!1,!0,0,2)}}}),e._v(\" \"),o(\"span\",{staticClass:\"crop-point point8\",on:{mousedown:function(t){e.changeCropSize(t,!0,!0,2,2)},touchstart:function(t){e.changeCropSize(t,!0,!0,2,2)}}})])])])}n._withStripped=!0;var i={};i.getData=function(n){return new Promise(function(t,e){var a,s,o={};(a=n,s=null,new Promise(function(e,t){if(a.src)if(/^data\\:/i.test(a.src))s=function(t){t=t.replace(/^data\\:([^\\;]+)\\;base64,/gim,\"\");for(var e=atob(t),o=e.length,n=new ArrayBuffer(o),i=new Uint8Array(n),r=0;r<o;r++)i[r]=e.charCodeAt(r);return n}(a.src),e(s);else if(/^blob\\:/i.test(a.src)){var o=new FileReader;o.onload=function(t){s=t.target.result,e(s)},i=a.src,(r=new XMLHttpRequest).open(\"GET\",i,!0),r.responseType=\"blob\",r.onload=function(t){200!=this.status&&0!==this.status||function(t){o.readAsArrayBuffer(t)}(this.response)},r.send()}else{var n=new XMLHttpRequest;n.onload=function(){if(200!=this.status&&0!==this.status)throw\"Could not load image\";s=n.response,e(s),n=null},n.open(\"GET\",a.src,!0),n.responseType=\"arraybuffer\",n.send(null)}else t(\"img error\");var i,r})).then(function(u){o.arrayBuffer=u,o.orientation=function(){var t,e,o,n,i,r,a,s,c,h=new DataView(u),p=h.byteLength;if(255===h.getUint8(0)&&216===h.getUint8(1))for(s=2;s<p;){if(255===h.getUint8(s)&&225===h.getUint8(s+1)){r=s;break}s++}if(r&&(e=r+10,\"Exif\"===function(t,e,o){var n,i=\"\";for(o+=n=e;n<o;n++)i+=String.fromCharCode(t.getUint8(n));return i}(h,r+4,4)&&(((n=18761===(i=h.getUint16(e)))||19789===i)&&42===h.getUint16(e+2,n)&&8<=(o=h.getUint32(e+4,n))&&(a=e+o))),a)for(p=h.getUint16(a,n),c=0;c<p;c++)if(s=a+12*c+2,274===h.getUint16(s,n)){s+=8,t=h.getUint16(s,n);break}return t}(),t(o)}).catch(function(t){e(t)})})};var a=i,r={data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:\"\",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:\"\",coe:.2,scaling:!1,scalingSet:\"\",coeStatus:\"\",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:\"\"},outputSize:{type:Number,default:1},outputType:{type:String,default:\"jpeg\"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:function(){return[1,1]}},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:Number,default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:\"contain\"}},computed:{cropInfo:function(){var t={};if(t.top=21<this.cropOffsertY?\"-21px\":\"0px\",t.width=0<this.cropW?this.cropW:0,t.height=0<this.cropH?this.cropH:0,this.infoTrue){var e=1;this.high&&!this.full&&(e=window.devicePixelRatio),1!==this.enlarge&!this.full&&(e=Math.abs(Number(this.enlarge))),t.width=t.width*e,t.height=t.height*e,this.full&&(t.width=t.width/this.scale,t.height=t.height/this.scale)}return t.width=t.width.toFixed(0),t.height=t.height.toFixed(0),t},isIE:function(){var t=navigator.userAgent;return-1<t.indexOf(\"compatible\")&&-1<t.indexOf(\"MSIE\")}},watch:{img:function(){this.checkedImg()},imgs:function(t){\"\"!==t&&this.reload()},cropW:function(){this.showPreview()},cropH:function(){this.showPreview()},cropOffsertX:function(){this.showPreview()},cropOffsertY:function(){this.showPreview()},scale:function(t,e){this.showPreview()},x:function(){this.showPreview()},y:function(){this.showPreview()},autoCrop:function(t){t&&this.goAutoCrop()},autoCropWidth:function(){this.autoCrop&&this.goAutoCrop()},autoCropHeight:function(){this.autoCrop&&this.goAutoCrop()},mode:function(){this.checkedImg()},rotate:function(){this.showPreview(),this.autoCrop?this.goAutoCrop(this.cropW,this.cropH):(0<this.cropW||0<this.cropH)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{checkOrientationImage:function(t,e,o,n){var i=this,r=document.createElement(\"canvas\"),a=r.getContext(\"2d\");switch(a.save(),e){case 2:r.width=o,r.height=n,a.translate(o,0),a.scale(-1,1);break;case 3:r.width=o,r.height=n,a.translate(o/2,n/2),a.rotate(180*Math.PI/180),a.translate(-o/2,-n/2);break;case 4:r.width=o,r.height=n,a.translate(0,n),a.scale(1,-1);break;case 5:r.height=o,r.width=n,a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:r.width=n,r.height=o,a.translate(n/2,o/2),a.rotate(90*Math.PI/180),a.translate(-o/2,-n/2);break;case 7:r.height=o,r.width=n,a.rotate(.5*Math.PI),a.translate(o,-n),a.scale(-1,1);break;case 8:r.height=o,r.width=n,a.translate(n/2,o/2),a.rotate(-90*Math.PI/180),a.translate(-o/2,-n/2);break;default:r.width=o,r.height=n}a.drawImage(t,0,0,o,n),a.restore(),r.toBlob(function(t){var e=URL.createObjectURL(t);i.imgs=e},\"image/\"+this.outputType,1)},checkedImg:function(){var i=this;if(\"\"!==this.img){this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();var r=new Image;if(r.onload=function(){if(\"\"===i.img)return i.$emit(\"imgLoad\",\"error\"),i.$emit(\"img-load\",\"error\"),!1;var o=r.width,n=r.height;a.getData(r).then(function(t){i.orientation=t.orientation||1;var e=i.maxImgSize;!i.orientation&&o<e&n<e?i.imgs=i.img:(e<o&&(n=n/o*e,o=e),e<n&&(o=o/n*e,n=e),i.checkOrientationImage(r,i.orientation,o,n))})},r.onerror=function(){i.$emit(\"imgLoad\",\"error\"),i.$emit(\"img-load\",\"error\")},\"data\"!==this.img.substr(0,4)&&(r.crossOrigin=\"\"),this.isIE){var t=new XMLHttpRequest;t.onload=function(){var t=URL.createObjectURL(this.response);r.src=t},t.open(\"GET\",this.img,!0),t.responseType=\"blob\",t.send()}else r.src=this.img}},startMove:function(t){if(t.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=(t.clientX?t.clientX:t.touches[0].clientX)-this.x,this.moveY=(t.clientY?t.clientY:t.touches[0].clientY)-this.y,t.touches?(window.addEventListener(\"touchmove\",this.moveImg),window.addEventListener(\"touchend\",this.leaveImg),2==t.touches.length&&(this.touches=t.touches,window.addEventListener(\"touchmove\",this.touchScale),window.addEventListener(\"touchend\",this.cancelTouchScale))):(window.addEventListener(\"mousemove\",this.moveImg),window.addEventListener(\"mouseup\",this.leaveImg)),this.$emit(\"imgMoving\",{moving:!0,axis:this.getImgAxis()}),this.$emit(\"img-moving\",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener(\"mousemove\",this.createCrop),window.addEventListener(\"mouseup\",this.endCrop),window.addEventListener(\"touchmove\",this.createCrop),window.addEventListener(\"touchend\",this.endCrop),this.cropOffsertX=t.offsetX?t.offsetX:t.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=t.offsetY?t.offsetY:t.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX=t.clientX?t.clientX:t.touches[0].clientX,this.cropY=t.clientY?t.clientY:t.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale:function(t){var e=this;t.preventDefault();var o=this.scale,n=this.touches[0].clientX,i=this.touches[0].clientY,r=t.touches[0].clientX,a=t.touches[0].clientY,s=this.touches[1].clientX,c=this.touches[1].clientY,h=t.touches[1].clientX,p=t.touches[1].clientY,u=Math.sqrt(Math.pow(n-s,2)+Math.pow(i-c,2)),l=Math.sqrt(Math.pow(r-h,2)+Math.pow(a-p,2))-u,d=1,f=(d=.1<(d=d/this.trueWidth>d/this.trueHeight?d/this.trueHeight:d/this.trueWidth)?.1:d)*l;if(!this.touchNow){if(this.touchNow=!0,0<l?o+=Math.abs(f):l<0&&o>Math.abs(f)&&(o-=Math.abs(f)),this.touches=t.touches,setTimeout(function(){e.touchNow=!1},8),!this.checkoutImgAxis(this.x,this.y,o))return!1;this.scale=o}},cancelTouchScale:function(t){window.removeEventListener(\"touchmove\",this.touchScale)},moveImg:function(t){var c=this;if(t.preventDefault(),t.touches&&2===t.touches.length)return this.touches=t.touches,window.addEventListener(\"touchmove\",this.touchScale),window.addEventListener(\"touchend\",this.cancelTouchScale),window.removeEventListener(\"touchmove\",this.moveImg),!1;var h,p,e=t.clientX?t.clientX:t.touches[0].clientX,o=t.clientY?t.clientY:t.touches[0].clientY;h=e-this.moveX,p=o-this.moveY,this.$nextTick(function(){if(c.centerBox){var t,e,o,n,i=c.getImgAxis(h,p,c.scale),r=c.getCropAxis(),a=c.trueHeight*c.scale,s=c.trueWidth*c.scale;switch(c.rotate){case 1:case-1:case 3:case-3:t=c.cropOffsertX-c.trueWidth*(1-c.scale)/2+(a-s)/2,e=c.cropOffsertY-c.trueHeight*(1-c.scale)/2+(s-a)/2,o=t-a+c.cropW,n=e-s+c.cropH;break;default:t=c.cropOffsertX-c.trueWidth*(1-c.scale)/2,e=c.cropOffsertY-c.trueHeight*(1-c.scale)/2,o=t-s+c.cropW,n=e-a+c.cropH}i.x1>=r.x1&&(h=t),i.y1>=r.y1&&(p=e),i.x2<=r.x2&&(h=o),i.y2<=r.y2&&(p=n)}c.x=h,c.y=p,c.$emit(\"imgMoving\",{moving:!0,axis:c.getImgAxis()}),c.$emit(\"img-moving\",{moving:!0,axis:c.getImgAxis()})})},leaveImg:function(t){window.removeEventListener(\"mousemove\",this.moveImg),window.removeEventListener(\"touchmove\",this.moveImg),window.removeEventListener(\"mouseup\",this.leaveImg),window.removeEventListener(\"touchend\",this.leaveImg),this.$emit(\"imgMoving\",{moving:!1,axis:this.getImgAxis()}),this.$emit(\"img-moving\",{moving:!1,axis:this.getImgAxis()})},scaleImg:function(){this.canScale&&window.addEventListener(this.support,this.changeSize,{passive:!1})},cancelScale:function(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize:function(t){var e=this;t.preventDefault();var o=this.scale,n=t.deltaY||t.wheelDelta;n=0<navigator.userAgent.indexOf(\"Firefox\")?30*n:n,this.isIE&&(n=-n);var i=this.coe,r=(i=i/this.trueWidth>i/this.trueHeight?i/this.trueHeight:i/this.trueWidth)*n;r<0?o+=Math.abs(r):o>Math.abs(r)&&(o-=Math.abs(r));var a=r<0?\"add\":\"reduce\";if(a!==this.coeStatus&&(this.coeStatus=a,this.coe=.2),this.scaling||(this.scalingSet=setTimeout(function(){e.scaling=!1,e.coe=e.coe+=.01},50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,o))return!1;this.scale=o},changeScale:function(t){var e=this.scale;t=t||1;var o=20;if(0<(t*=o=o/this.trueWidth>o/this.trueHeight?o/this.trueHeight:o/this.trueWidth)?e+=Math.abs(t):e>Math.abs(t)&&(e-=Math.abs(t)),!this.checkoutImgAxis(this.x,this.y,e))return!1;this.scale=e},createCrop:function(t){var n=this;t.preventDefault();var i=t.clientX?t.clientX:t.touches?t.touches[0].clientX:0,r=t.clientY?t.clientY:t.touches?t.touches[0].clientY:0;this.$nextTick(function(){var t=i-n.cropX,e=r-n.cropY;if(0<t?(n.cropW=t+n.cropChangeX>n.w?n.w-n.cropChangeX:t,n.cropOffsertX=n.cropChangeX):(n.cropW=n.w-n.cropChangeX+Math.abs(t)>n.w?n.cropChangeX:Math.abs(t),n.cropOffsertX=0<n.cropChangeX+t?n.cropChangeX+t:0),n.fixed){var o=n.cropW/n.fixedNumber[0]*n.fixedNumber[1];o+n.cropOffsertY>n.h?(n.cropH=n.h-n.cropOffsertY,n.cropW=n.cropH/n.fixedNumber[1]*n.fixedNumber[0],n.cropOffsertX=0<t?n.cropChangeX:n.cropChangeX-n.cropW):n.cropH=o,n.cropOffsertY=n.cropOffsertY}else 0<e?(n.cropH=e+n.cropChangeY>n.h?n.h-n.cropChangeY:e,n.cropOffsertY=n.cropChangeY):(n.cropH=n.h-n.cropChangeY+Math.abs(e)>n.h?n.cropChangeY:Math.abs(e),n.cropOffsertY=0<n.cropChangeY+e?n.cropChangeY+e:0)})},changeCropSize:function(t,e,o,n,i){t.preventDefault(),window.addEventListener(\"mousemove\",this.changeCropNow),window.addEventListener(\"mouseup\",this.changeCropEnd),window.addEventListener(\"touchmove\",this.changeCropNow),window.addEventListener(\"touchend\",this.changeCropEnd),this.canChangeX=e,this.canChangeY=o,this.changeCropTypeX=n,this.changeCropTypeY=i,this.cropX=t.clientX?t.clientX:t.touches[0].clientX,this.cropY=t.clientY?t.clientY:t.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0)},changeCropNow:function(t){var i=this;t.preventDefault();var r=t.clientX?t.clientX:t.touches?t.touches[0].clientX:0,a=t.clientY?t.clientY:t.touches?t.touches[0].clientY:0,s=this.w,c=this.h,h=0,p=0;if(this.centerBox){var e=this.getImgAxis(),o=e.x2,n=e.y2;h=0<e.x1?e.x1:0,p=0<e.y1?e.y1:0,o<s&&(s=o),n<c&&(c=n)}this.$nextTick(function(){var t=r-i.cropX,e=a-i.cropY;if(i.canChangeX&&(1===i.changeCropTypeX?0<i.cropOldW-t?(i.cropW=s-i.cropChangeX-t<=s-h?i.cropOldW-t:i.cropOldW+i.cropChangeX-h,i.cropOffsertX=s-i.cropChangeX-t<=s-h?i.cropChangeX+t:h):(i.cropW=Math.abs(t)+i.cropChangeX<=s?Math.abs(t)-i.cropOldW:s-i.cropOldW-i.cropChangeX,i.cropOffsertX=i.cropChangeX+i.cropOldW):2===i.changeCropTypeX&&(0<i.cropOldW+t?(i.cropW=i.cropOldW+t+i.cropOffsertX<=s?i.cropOldW+t:s-i.cropOffsertX,i.cropOffsertX=i.cropChangeX):(i.cropW=s-i.cropChangeX+Math.abs(t+i.cropOldW)<=s-h?Math.abs(t+i.cropOldW):i.cropChangeX-h,i.cropOffsertX=s-i.cropChangeX+Math.abs(t+i.cropOldW)<=s-h?i.cropChangeX-Math.abs(t+i.cropOldW):h))),i.canChangeY&&(1===i.changeCropTypeY?0<i.cropOldH-e?(i.cropH=c-i.cropChangeY-e<=c-p?i.cropOldH-e:i.cropOldH+i.cropChangeY-p,i.cropOffsertY=c-i.cropChangeY-e<=c-p?i.cropChangeY+e:p):(i.cropH=Math.abs(e)+i.cropChangeY<=c?Math.abs(e)-i.cropOldH:c-i.cropOldH-i.cropChangeY,i.cropOffsertY=i.cropChangeY+i.cropOldH):2===i.changeCropTypeY&&(0<i.cropOldH+e?(i.cropH=i.cropOldH+e+i.cropOffsertY<=c?i.cropOldH+e:c-i.cropOffsertY,i.cropOffsertY=i.cropChangeY):(i.cropH=c-i.cropChangeY+Math.abs(e+i.cropOldH)<=c-p?Math.abs(e+i.cropOldH):i.cropChangeY-p,i.cropOffsertY=c-i.cropChangeY+Math.abs(e+i.cropOldH)<=c-p?i.cropChangeY-Math.abs(e+i.cropOldH):p))),i.canChangeX&&i.fixed){var o=i.cropW/i.fixedNumber[0]*i.fixedNumber[1];o+i.cropOffsertY>c?(i.cropH=c-i.cropOffsertY,i.cropW=i.cropH/i.fixedNumber[1]*i.fixedNumber[0]):i.cropH=o}if(i.canChangeY&&i.fixed){var n=i.cropH/i.fixedNumber[1]*i.fixedNumber[0];n+i.cropOffsertX>s?(i.cropW=s-i.cropOffsertX,i.cropH=i.cropW/i.fixedNumber[0]*i.fixedNumber[1]):i.cropW=n}})},changeCropEnd:function(t){window.removeEventListener(\"mousemove\",this.changeCropNow),window.removeEventListener(\"mouseup\",this.changeCropEnd),window.removeEventListener(\"touchmove\",this.changeCropNow),window.removeEventListener(\"touchend\",this.changeCropEnd)},endCrop:function(){0===this.cropW&&0===this.cropH&&(this.cropping=!1),window.removeEventListener(\"mousemove\",this.createCrop),window.removeEventListener(\"mouseup\",this.endCrop),window.removeEventListener(\"touchmove\",this.createCrop),window.removeEventListener(\"touchend\",this.endCrop)},startCrop:function(){this.crop=!0},stopCrop:function(){this.crop=!1},clearCrop:function(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove:function(t){if(t.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(t),!1;if(t.touches&&2===t.touches.length)return this.crop=!1,this.startMove(t),this.leaveCrop(),!1;window.addEventListener(\"mousemove\",this.moveCrop),window.addEventListener(\"mouseup\",this.leaveCrop),window.addEventListener(\"touchmove\",this.moveCrop),window.addEventListener(\"touchend\",this.leaveCrop);var e,o,n=t.clientX?t.clientX:t.touches[0].clientX,i=t.clientY?t.clientY:t.touches[0].clientY;e=n-this.cropOffsertX,o=i-this.cropOffsertY,this.cropX=e,this.cropY=o,this.$emit(\"cropMoving\",{moving:!0,axis:this.getCropAxis()}),this.$emit(\"crop-moving\",{moving:!0,axis:this.getCropAxis()})},moveCrop:function(t,r){var a=this,s=0,c=0;t&&(t.preventDefault(),s=t.clientX?t.clientX:t.touches[0].clientX,c=t.clientY?t.clientY:t.touches[0].clientY),this.$nextTick(function(){var t,e,o=s-a.cropX,n=c-a.cropY;if(r&&(o=a.cropOffsertX,n=a.cropOffsertY),t=o<=0?0:o+a.cropW>a.w?a.w-a.cropW:o,e=n<=0?0:n+a.cropH>a.h?a.h-a.cropH:n,a.centerBox){var i=a.getImgAxis();t<=i.x1&&(t=i.x1),t+a.cropW>i.x2&&(t=i.x2-a.cropW),e<=i.y1&&(e=i.y1),e+a.cropH>i.y2&&(e=i.y2-a.cropH)}a.cropOffsertX=t,a.cropOffsertY=e,a.$emit(\"cropMoving\",{moving:!0,axis:a.getCropAxis()}),a.$emit(\"crop-moving\",{moving:!0,axis:a.getCropAxis()})})},getImgAxis:function(t,e,o){t=t||this.x,e=e||this.y,o=o||this.scale;var n={x1:0,x2:0,y1:0,y2:0},i=this.trueWidth*o,r=this.trueHeight*o;switch(this.rotate){case 0:n.x1=t+this.trueWidth*(1-o)/2,n.x2=n.x1+this.trueWidth*o,n.y1=e+this.trueHeight*(1-o)/2,n.y2=n.y1+this.trueHeight*o;break;case 1:case-1:case 3:case-3:n.x1=t+this.trueWidth*(1-o)/2+(i-r)/2,n.x2=n.x1+this.trueHeight*o,n.y1=e+this.trueHeight*(1-o)/2+(r-i)/2,n.y2=n.y1+this.trueWidth*o;break;default:n.x1=t+this.trueWidth*(1-o)/2,n.x2=n.x1+this.trueWidth*o,n.y1=e+this.trueHeight*(1-o)/2,n.y2=n.y1+this.trueHeight*o}return n},getCropAxis:function(){var t={x1:0,x2:0,y1:0,y2:0};return t.x1=this.cropOffsertX,t.x2=t.x1+this.cropW,t.y1=this.cropOffsertY,t.y2=t.y1+this.cropH,t},leaveCrop:function(t){window.removeEventListener(\"mousemove\",this.moveCrop),window.removeEventListener(\"mouseup\",this.leaveCrop),window.removeEventListener(\"touchmove\",this.moveCrop),window.removeEventListener(\"touchend\",this.leaveCrop),this.$emit(\"cropMoving\",{moving:!1,axis:this.getCropAxis()}),this.$emit(\"crop-moving\",{moving:!1,axis:this.getCropAxis()})},getCropChecked:function(u){var l=this,d=document.createElement(\"canvas\"),f=new Image,g=this.rotate,v=this.trueWidth,m=this.trueHeight,w=this.cropOffsertX,x=this.cropOffsertY;function C(t,e){d.width=Math.round(t),d.height=Math.round(e)}f.onload=function(){if(0!==l.cropW){var t=d.getContext(\"2d\"),e=1;l.high&!l.full&&(e=window.devicePixelRatio),1!==l.enlarge&!l.full&&(e=Math.abs(Number(l.enlarge)));var o=l.cropW*e,n=l.cropH*e,i=v*l.scale*e,r=m*l.scale*e,a=(l.x-w+l.trueWidth*(1-l.scale)/2)*e,s=(l.y-x+l.trueHeight*(1-l.scale)/2)*e;switch(C(o,n),t.save(),g){case 0:l.full?(C(o/l.scale,n/l.scale),t.drawImage(f,a/l.scale,s/l.scale,i/l.scale,r/l.scale)):t.drawImage(f,a,s,i,r);break;case 1:case-3:l.full?(C(o/l.scale,n/l.scale),a=a/l.scale+(i/l.scale-r/l.scale)/2,s=s/l.scale+(r/l.scale-i/l.scale)/2,t.rotate(90*g*Math.PI/180),t.drawImage(f,s,-a-r/l.scale,i/l.scale,r/l.scale)):(a+=(i-r)/2,s+=(r-i)/2,t.rotate(90*g*Math.PI/180),t.drawImage(f,s,-a-r,i,r));break;case 2:case-2:l.full?(C(o/l.scale,n/l.scale),t.rotate(90*g*Math.PI/180),a/=l.scale,s/=l.scale,t.drawImage(f,-a-i/l.scale,-s-r/l.scale,i/l.scale,r/l.scale)):(t.rotate(90*g*Math.PI/180),t.drawImage(f,-a-i,-s-r,i,r));break;case 3:case-1:l.full?(C(o/l.scale,n/l.scale),a=a/l.scale+(i/l.scale-r/l.scale)/2,s=s/l.scale+(r/l.scale-i/l.scale)/2,t.rotate(90*g*Math.PI/180),t.drawImage(f,-s-i/l.scale,a,i/l.scale,r/l.scale)):(a+=(i-r)/2,s+=(r-i)/2,t.rotate(90*g*Math.PI/180),t.drawImage(f,-s-i,a,i,r));break;default:l.full?(C(o/l.scale,n/l.scale),t.drawImage(f,a/l.scale,s/l.scale,i/l.scale,r/l.scale)):t.drawImage(f,a,s,i,r)}t.restore()}else{var c=v*l.scale,h=m*l.scale,p=d.getContext(\"2d\");switch(p.save(),g){case 0:C(c,h),p.drawImage(f,0,0,c,h);break;case 1:case-3:C(h,c),p.rotate(90*g*Math.PI/180),p.drawImage(f,0,-h,c,h);break;case 2:case-2:C(c,h),p.rotate(90*g*Math.PI/180),p.drawImage(f,-c,-h,c,h);break;case 3:case-1:C(h,c),p.rotate(90*g*Math.PI/180),p.drawImage(f,-c,0,c,h);break;default:C(c,h),p.drawImage(f,0,0,c,h)}p.restore()}u(d)},\"data\"!==this.img.substr(0,4)&&(f.crossOrigin=\"Anonymous\"),f.src=this.imgs},getCropData:function(e){var o=this;this.getCropChecked(function(t){e(t.toDataURL(\"image/\"+o.outputType,o.outputSize))})},getCropBlob:function(e){var o=this;this.getCropChecked(function(t){t.toBlob(function(t){return e(t)},\"image/\"+o.outputType,o.outputSize)})},showPreview:function(){var t=this;if(!this.isCanShow)return!1;this.isCanShow=!1,setTimeout(function(){t.isCanShow=!0},16);var e=this.cropW,o=this.cropH,n=this.scale,i={};i.div={width:\"\".concat(e,\"px\"),height:\"\".concat(o,\"px\")};var r=(this.x-this.cropOffsertX)/n,a=(this.y-this.cropOffsertY)/n;i.w=e,i.h=o,i.url=this.imgs,i.img={width:\"\".concat(this.trueWidth,\"px\"),height:\"\".concat(this.trueHeight,\"px\"),transform:\"scale(\".concat(n,\")translate3d(\").concat(r,\"px, \").concat(a,\"px, \").concat(0,\"px)rotateZ(\").concat(90*this.rotate,\"deg)\")},i.html='\\n      <div class=\"show-preview\" style=\"width: '.concat(i.w,\"px; height: \").concat(i.h,'px,; overflow: hidden\">\\n        <div style=\"width: ').concat(e,\"px; height: \").concat(o,'px\">\\n          <img src=').concat(i.url,' style=\"width: ').concat(this.trueWidth,\"px; height: \").concat(this.trueHeight,\"px; transform:\\n          scale(\").concat(n,\")translate3d(\").concat(r,\"px, \").concat(a,\"px, \").concat(0,\"px)rotateZ(\").concat(90*this.rotate,'deg)\">\\n        </div>\\n      </div>'),this.$emit(\"realTime\",i),this.$emit(\"real-time\",i)},reload:function(){var t=this,e=new Image;e.onload=function(){t.w=parseFloat(window.getComputedStyle(t.$refs.cropper).width),t.h=parseFloat(window.getComputedStyle(t.$refs.cropper).height),t.trueWidth=e.width,t.trueHeight=e.height,t.original?t.scale=1:t.scale=t.checkedMode(),t.$nextTick(function(){t.x=-(t.trueWidth-t.trueWidth*t.scale)/2+(t.w-t.trueWidth*t.scale)/2,t.y=-(t.trueHeight-t.trueHeight*t.scale)/2+(t.h-t.trueHeight*t.scale)/2,t.loading=!1,t.autoCrop&&t.goAutoCrop(),t.$emit(\"img-load\",\"success\"),t.$emit(\"imgLoad\",\"success\"),setTimeout(function(){t.showPreview()},20)})},e.onerror=function(){t.$emit(\"imgLoad\",\"error\"),t.$emit(\"img-load\",\"error\")},e.src=this.imgs},checkedMode:function(){var t=1,e=(this.trueWidth,this.trueHeight),o=this.mode.split(\" \");switch(o[0]){case\"contain\":this.trueWidth>this.w&&(t=this.w/this.trueWidth),this.trueHeight*t>this.h&&(t=this.h/this.trueHeight);break;case\"cover\":(e*=t=this.w/this.trueWidth)<this.h&&(t=(e=this.h)/this.trueHeight);break;default:try{var n=o[0];if(-1!==n.search(\"px\")&&(n=n.replace(\"px\",\"\"),t=parseFloat(n)/this.trueWidth),-1!==n.search(\"%\")&&(n=n.replace(\"%\",\"\"),t=parseFloat(n)/100*this.w/this.trueWidth),2===o.length&&\"auto\"===n){var i=o[1];-1!==i.search(\"px\")&&(i=i.replace(\"px\",\"\"),t=(e=parseFloat(i))/this.trueHeight),-1!==i.search(\"%\")&&(i=i.replace(\"%\",\"\"),t=(e=parseFloat(i)/100*this.h)/this.trueHeight)}}catch(e){t=1}}return t},goAutoCrop:function(t,e){this.clearCrop(),this.cropping=!0;var o=this.w,n=this.h;if(this.centerBox){var i=this.trueWidth*this.scale,r=this.trueHeight*this.scale;o=i<o?i:o,n=r<n?r:n}var a=t||parseFloat(this.autoCropWidth),s=e||parseFloat(this.autoCropHeight);0!==a&&0!==s||(a=.8*o,s=.8*n),a=o<a?o:a,s=n<s?n:s,this.fixed&&(s=a/this.fixedNumber[0]*this.fixedNumber[1]),s>this.h&&(a=(s=this.h)/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(a,s)},changeCrop:function(t,e){var o=this;if(this.centerBox){var n=this.getImgAxis();t>n.x2-n.x1&&(e=(t=n.x2-n.x1)/this.fixedNumber[0]*this.fixedNumber[1]),e>n.y2-n.y1&&(t=(e=n.y2-n.y1)/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=t,this.cropH=e,this.cropOffsertX=(this.w-t)/2,this.cropOffsertY=(this.h-e)/2,this.centerBox&&this.$nextTick(function(){o.moveCrop(null,!0)})},refresh:function(){var t=this;this.img,this.imgs=\"\",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick(function(){t.checkedImg()})},rotateLeft:function(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight:function(){this.rotate=3<=this.rotate?0:this.rotate+1},rotateClear:function(){this.rotate=0},checkoutImgAxis:function(t,e,o){t=t||this.x,e=e||this.y,o=o||this.scale;var n=!0;if(this.centerBox){var i=this.getImgAxis(t,e,o),r=this.getCropAxis();i.x1>=r.x1&&(n=!1),i.x2<=r.x2&&(n=!1),i.y1>=r.y1&&(n=!1),i.y2<=r.y2&&(n=!1)}return n}},mounted:function(){this.support=\"onwheel\"in document.createElement(\"div\")?\"wheel\":void 0!==document.onmousewheel?\"mousewheel\":\"DOMMouseScroll\";var s=this,t=navigator.userAgent;this.isIOS=!!t.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,\"toBlob\",{value:function(t,e,o){for(var n=atob(this.toDataURL(e,o).split(\",\")[1]),i=n.length,r=new Uint8Array(i),a=0;a<i;a++)r[a]=n.charCodeAt(a);t(new Blob([r],{type:s.type||\"image/png\"}))}}),this.showPreview(),this.checkedImg()},destroyed:function(){window.removeEventListener(\"mousemove\",this.moveCrop),window.removeEventListener(\"mouseup\",this.leaveCrop),window.removeEventListener(\"touchmove\",this.moveCrop),window.removeEventListener(\"touchend\",this.leaveCrop)}};o(1);var s=function(t,e,o,n,i,r){var a,s=\"function\"==typeof t?t.options:t;if(s.render=e,s.staticRenderFns=[],s._compiled=!0,s._scopeId=\"data-v-\"+r,a)if(s.functional){s._injectStyles=a;var c=s.render;s.render=function(t,e){return a.call(e),c(t,e)}}else{var h=s.beforeCreate;s.beforeCreate=h?[].concat(h,a):[a]}return{exports:t,options:s}}(r,n,0,0,0,\"6dae58fd\");s.options.__file=\"src/vue-cropper.vue\";var c=s.exports;o.d(e,\"VueCropper\",function(){return c});function h(t){t.component(\"VueCropper\",c)}\"undefined\"!=typeof window&&window.Vue&&h(window.Vue),e.default={version:\"0.4.8\",install:h,VueCropper:c,vueCropper:c}}],i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=6);function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var o,n},t.exports=n()},odi1:function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});o(\"XmAh\");var n=o(\"il3B\"),r=(o(\"eqfM\"),o(\"/QYm\")),i=o(\"Dd8w\"),a=o.n(i),s=o(\"NYxO\"),c=o(\"gyMJ\"),h=o(\"Du/2\"),p=(o(\"IcnI\"),o(\"YZ0n\")),u={components:{VueCropper:p.VueCropper},data:function(){return{settings:[{name:\"头像\",info:\"\"},{name:\"用户名\",info:\"\"}],dialogVisible:!1,imageCropped:!1,option:{img:\"\",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedNumber:[1,1],fixed:!0,high:!1,enlarge:2}}},computed:a()({},Object(s.mapState)({user:function(t){return t.user},isLoading:function(t){return t.isLoading}})),created:function(){this.$set(this.settings[0],\"info\",this.user.avatar.large),this.$set(this.settings[1],\"info\",this.user.nickname)},methods:a()({},Object(s.mapActions)([\"setAvatar\"]),{handleSetting:function(t){switch(t){case 0:break;case 1:this.$router.push({name:\"setting_nickname\",query:{nickname:\"\"==this.user.nickname?\"\":this.user.nickname}});break;case 2:Object(r.a)(\"更改手机号，后续开通\")}},logout:function(){var t=this;n.a.confirm({title:\"退出登录\",message:\"确定要退出登录吗？\"}).then(function(){t.$store.commit(h.r,{token:\"\",user:{}}),t.$router.push({name:\"my\"})})},stopCropFn:function(){var e=this,t=this.$refs.cropper[0];t.stopCrop(),this.dialogVisible=!1,t.getCropData(function(t){e.imageCropped=!0,e.uploadImg(t),e.option.img=t})},beforeUpload:function(t){var e=this,o=t.type,n=t.size/1024/1024;if(-1!==o.indexOf(\"image\"))if(2<n)r.a.fail(\"文件大小不得超过 2 MB\");else{this.dialogVisible=!0;var i=new FileReader;i.onload=function(){e.option.img=i.result},i.readAsDataURL(t)}else r.a.fail(\"文件类型仅支持图片格式\")},uploadImg:function(e){var o=this;if(this.imageCropped){this.imageCropped=!1;var t=new FormData;t.append(\"file\",e),t.append(\"group\",\"user\"),c.a.updateFile({data:t}).then(function(t){o.$set(o.settings[0],\"info\",e.content),o.setAvatar({avatarId:t.id}).then(function(){r.a.success(\"修改成功\")}).catch(function(t){r.a.fail(t.message)})}).catch(function(t){r.a.fail(t.message)})}}})},l={render:function(){var o=this,t=o.$createElement,n=o._self._c||t;return n(\"div\",{staticClass:\"my_setting\"},[o.isLoading?n(\"e-loading\"):o._e(),o._v(\" \"),o._l(o.settings,function(t,e){return n(\"div\",{staticClass:\"my_setting-item\",on:{click:function(t){return o.handleSetting(e)}}},[n(\"span\",{staticClass:\"my_setting-title title-18\"},[o._v(o._s(t.name))]),o._v(\" \"),n(\"div\",{staticClass:\"my_setting-content\"},[e?o._e():n(\"img\",{staticClass:\"my_setting-avatar\",attrs:{src:t.info||o.option.img,alt:\"\"}}),o._v(\" \"),e?n(\"span\",[o._v(o._s(t.info))]):o._e(),o._v(\" \"),n(\"img\",{staticClass:\"my_setting-more\",attrs:{src:\"static/images/more.png\",alt:\"\"}})]),o._v(\" \"),e?o._e():n(\"van-uploader\",{attrs:{\"before-read\":o.beforeUpload}},[n(\"van-popup\",{attrs:{position:\"top\",overlay:!1},model:{value:o.dialogVisible,callback:function(t){o.dialogVisible=t},expression:\"dialogVisible\"}},[n(\"div\",{staticClass:\"cropper-container\"},[n(\"vueCropper\",{directives:[{name:\"show\",rawName:\"v-show\",value:o.option.img,expression:\"option.img\"}],ref:\"cropper\",refInFor:!0,attrs:{img:o.option.img,fixed:o.option.fixed,enlarge:o.option.enlarge,autoCrop:o.option.autoCrop,fixedNumber:o.option.fixedNumber,autoCropWidth:o.option.autoCropWidth,autoCropHeight:o.option.autoCropHeight}})],1),o._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\"},[n(\"van-button\",{on:{click:function(t){o.dialogVisible=!1}}},[o._v(\"取 消\")]),o._v(\" \"),n(\"van-button\",{attrs:{type:\"primary\"},on:{click:o.stopCropFn}},[o._v(\"确 定\")])],1)])],1)],1)}),o._v(\" \"),n(\"div\",{staticClass:\"log-out-btn title-18\",on:{click:o.logout}},[n(\"span\",[o._v(\"退出登录\")])])],2)},staticRenderFns:[]};var d=o(\"VU/8\")(u,l,!1,function(t){o(\"yv9V\")},null,null);e.default=d.exports},yv9V:function(t,e){}});"}